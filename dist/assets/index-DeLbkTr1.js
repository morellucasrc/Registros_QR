function mw(s,e){for(var n=0;n<e.length;n++){const o=e[n];if(typeof o!="string"&&!Array.isArray(o)){for(const u in o)if(u!=="default"&&!(u in s)){const f=Object.getOwnPropertyDescriptor(o,u);f&&Object.defineProperty(s,u,f.get?f:{enumerable:!0,get:()=>o[u]})}}}return Object.freeze(Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))o(u);new MutationObserver(u=>{for(const f of u)if(f.type==="childList")for(const y of f.addedNodes)y.tagName==="LINK"&&y.rel==="modulepreload"&&o(y)}).observe(document,{childList:!0,subtree:!0});function n(u){const f={};return u.integrity&&(f.integrity=u.integrity),u.referrerPolicy&&(f.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?f.credentials="include":u.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function o(u){if(u.ep)return;u.ep=!0;const f=n(u);fetch(u.href,f)}})();var Gu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function dm(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var hf={exports:{}},vl={},ff={exports:{}},Tt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ng;function yw(){if(ng)return Tt;ng=1;var s=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),u=Symbol.for("react.profiler"),f=Symbol.for("react.provider"),y=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),x=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),D=Symbol.iterator;function k(ne){return ne===null||typeof ne!="object"?null:(ne=D&&ne[D]||ne["@@iterator"],typeof ne=="function"?ne:null)}var j={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},q=Object.assign,Q={};function J(ne,ye,ze){this.props=ne,this.context=ye,this.refs=Q,this.updater=ze||j}J.prototype.isReactComponent={},J.prototype.setState=function(ne,ye){if(typeof ne!="object"&&typeof ne!="function"&&ne!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,ne,ye,"setState")},J.prototype.forceUpdate=function(ne){this.updater.enqueueForceUpdate(this,ne,"forceUpdate")};function ie(){}ie.prototype=J.prototype;function he(ne,ye,ze){this.props=ne,this.context=ye,this.refs=Q,this.updater=ze||j}var te=he.prototype=new ie;te.constructor=he,q(te,J.prototype),te.isPureReactComponent=!0;var pe=Array.isArray,Ge=Object.prototype.hasOwnProperty,we={current:null},F={key:!0,ref:!0,__self:!0,__source:!0};function B(ne,ye,ze){var $e,ct={},Ne=null,ft=null;if(ye!=null)for($e in ye.ref!==void 0&&(ft=ye.ref),ye.key!==void 0&&(Ne=""+ye.key),ye)Ge.call(ye,$e)&&!F.hasOwnProperty($e)&&(ct[$e]=ye[$e]);var Qe=arguments.length-2;if(Qe===1)ct.children=ze;else if(1<Qe){for(var _t=Array(Qe),Kt=0;Kt<Qe;Kt++)_t[Kt]=arguments[Kt+2];ct.children=_t}if(ne&&ne.defaultProps)for($e in Qe=ne.defaultProps,Qe)ct[$e]===void 0&&(ct[$e]=Qe[$e]);return{$$typeof:s,type:ne,key:Ne,ref:ft,props:ct,_owner:we.current}}function P(ne,ye){return{$$typeof:s,type:ne.type,key:ye,ref:ne.ref,props:ne.props,_owner:ne._owner}}function G(ne){return typeof ne=="object"&&ne!==null&&ne.$$typeof===s}function Y(ne){var ye={"=":"=0",":":"=2"};return"$"+ne.replace(/[=:]/g,function(ze){return ye[ze]})}var W=/\/+/g;function U(ne,ye){return typeof ne=="object"&&ne!==null&&ne.key!=null?Y(""+ne.key):ye.toString(36)}function Le(ne,ye,ze,$e,ct){var Ne=typeof ne;(Ne==="undefined"||Ne==="boolean")&&(ne=null);var ft=!1;if(ne===null)ft=!0;else switch(Ne){case"string":case"number":ft=!0;break;case"object":switch(ne.$$typeof){case s:case e:ft=!0}}if(ft)return ft=ne,ct=ct(ft),ne=$e===""?"."+U(ft,0):$e,pe(ct)?(ze="",ne!=null&&(ze=ne.replace(W,"$&/")+"/"),Le(ct,ye,ze,"",function(Kt){return Kt})):ct!=null&&(G(ct)&&(ct=P(ct,ze+(!ct.key||ft&&ft.key===ct.key?"":(""+ct.key).replace(W,"$&/")+"/")+ne)),ye.push(ct)),1;if(ft=0,$e=$e===""?".":$e+":",pe(ne))for(var Qe=0;Qe<ne.length;Qe++){Ne=ne[Qe];var _t=$e+U(Ne,Qe);ft+=Le(Ne,ye,ze,_t,ct)}else if(_t=k(ne),typeof _t=="function")for(ne=_t.call(ne),Qe=0;!(Ne=ne.next()).done;)Ne=Ne.value,_t=$e+U(Ne,Qe++),ft+=Le(Ne,ye,ze,_t,ct);else if(Ne==="object")throw ye=String(ne),Error("Objects are not valid as a React child (found: "+(ye==="[object Object]"?"object with keys {"+Object.keys(ne).join(", ")+"}":ye)+"). If you meant to render a collection of children, use an array instead.");return ft}function ue(ne,ye,ze){if(ne==null)return ne;var $e=[],ct=0;return Le(ne,$e,"","",function(Ne){return ye.call(ze,Ne,ct++)}),$e}function yt(ne){if(ne._status===-1){var ye=ne._result;ye=ye(),ye.then(function(ze){(ne._status===0||ne._status===-1)&&(ne._status=1,ne._result=ze)},function(ze){(ne._status===0||ne._status===-1)&&(ne._status=2,ne._result=ze)}),ne._status===-1&&(ne._status=0,ne._result=ye)}if(ne._status===1)return ne._result.default;throw ne._result}var Fe={current:null},be={transition:null},Ye={ReactCurrentDispatcher:Fe,ReactCurrentBatchConfig:be,ReactCurrentOwner:we};function ke(){throw Error("act(...) is not supported in production builds of React.")}return Tt.Children={map:ue,forEach:function(ne,ye,ze){ue(ne,function(){ye.apply(this,arguments)},ze)},count:function(ne){var ye=0;return ue(ne,function(){ye++}),ye},toArray:function(ne){return ue(ne,function(ye){return ye})||[]},only:function(ne){if(!G(ne))throw Error("React.Children.only expected to receive a single React element child.");return ne}},Tt.Component=J,Tt.Fragment=n,Tt.Profiler=u,Tt.PureComponent=he,Tt.StrictMode=o,Tt.Suspense=C,Tt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ye,Tt.act=ke,Tt.cloneElement=function(ne,ye,ze){if(ne==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+ne+".");var $e=q({},ne.props),ct=ne.key,Ne=ne.ref,ft=ne._owner;if(ye!=null){if(ye.ref!==void 0&&(Ne=ye.ref,ft=we.current),ye.key!==void 0&&(ct=""+ye.key),ne.type&&ne.type.defaultProps)var Qe=ne.type.defaultProps;for(_t in ye)Ge.call(ye,_t)&&!F.hasOwnProperty(_t)&&($e[_t]=ye[_t]===void 0&&Qe!==void 0?Qe[_t]:ye[_t])}var _t=arguments.length-2;if(_t===1)$e.children=ze;else if(1<_t){Qe=Array(_t);for(var Kt=0;Kt<_t;Kt++)Qe[Kt]=arguments[Kt+2];$e.children=Qe}return{$$typeof:s,type:ne.type,key:ct,ref:Ne,props:$e,_owner:ft}},Tt.createContext=function(ne){return ne={$$typeof:y,_currentValue:ne,_currentValue2:ne,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},ne.Provider={$$typeof:f,_context:ne},ne.Consumer=ne},Tt.createElement=B,Tt.createFactory=function(ne){var ye=B.bind(null,ne);return ye.type=ne,ye},Tt.createRef=function(){return{current:null}},Tt.forwardRef=function(ne){return{$$typeof:A,render:ne}},Tt.isValidElement=G,Tt.lazy=function(ne){return{$$typeof:R,_payload:{_status:-1,_result:ne},_init:yt}},Tt.memo=function(ne,ye){return{$$typeof:x,type:ne,compare:ye===void 0?null:ye}},Tt.startTransition=function(ne){var ye=be.transition;be.transition={};try{ne()}finally{be.transition=ye}},Tt.unstable_act=ke,Tt.useCallback=function(ne,ye){return Fe.current.useCallback(ne,ye)},Tt.useContext=function(ne){return Fe.current.useContext(ne)},Tt.useDebugValue=function(){},Tt.useDeferredValue=function(ne){return Fe.current.useDeferredValue(ne)},Tt.useEffect=function(ne,ye){return Fe.current.useEffect(ne,ye)},Tt.useId=function(){return Fe.current.useId()},Tt.useImperativeHandle=function(ne,ye,ze){return Fe.current.useImperativeHandle(ne,ye,ze)},Tt.useInsertionEffect=function(ne,ye){return Fe.current.useInsertionEffect(ne,ye)},Tt.useLayoutEffect=function(ne,ye){return Fe.current.useLayoutEffect(ne,ye)},Tt.useMemo=function(ne,ye){return Fe.current.useMemo(ne,ye)},Tt.useReducer=function(ne,ye,ze){return Fe.current.useReducer(ne,ye,ze)},Tt.useRef=function(ne){return Fe.current.useRef(ne)},Tt.useState=function(ne){return Fe.current.useState(ne)},Tt.useSyncExternalStore=function(ne,ye,ze){return Fe.current.useSyncExternalStore(ne,ye,ze)},Tt.useTransition=function(){return Fe.current.useTransition()},Tt.version="18.3.1",Tt}var rg;function xd(){return rg||(rg=1,ff.exports=yw()),ff.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ig;function ww(){if(ig)return vl;ig=1;var s=xd(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,u=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,f={key:!0,ref:!0,__self:!0,__source:!0};function y(A,C,x){var R,D={},k=null,j=null;x!==void 0&&(k=""+x),C.key!==void 0&&(k=""+C.key),C.ref!==void 0&&(j=C.ref);for(R in C)o.call(C,R)&&!f.hasOwnProperty(R)&&(D[R]=C[R]);if(A&&A.defaultProps)for(R in C=A.defaultProps,C)D[R]===void 0&&(D[R]=C[R]);return{$$typeof:e,type:A,key:k,ref:j,props:D,_owner:u.current}}return vl.Fragment=n,vl.jsx=y,vl.jsxs=y,vl}var sg;function Ew(){return sg||(sg=1,hf.exports=ww()),hf.exports}var Ee=Ew(),me=xd(),Yu={},df={exports:{}},ni={},gf={exports:{}},pf={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var og;function xw(){return og||(og=1,function(s){function e(be,Ye){var ke=be.length;be.push(Ye);e:for(;0<ke;){var ne=ke-1>>>1,ye=be[ne];if(0<u(ye,Ye))be[ne]=Ye,be[ke]=ye,ke=ne;else break e}}function n(be){return be.length===0?null:be[0]}function o(be){if(be.length===0)return null;var Ye=be[0],ke=be.pop();if(ke!==Ye){be[0]=ke;e:for(var ne=0,ye=be.length,ze=ye>>>1;ne<ze;){var $e=2*(ne+1)-1,ct=be[$e],Ne=$e+1,ft=be[Ne];if(0>u(ct,ke))Ne<ye&&0>u(ft,ct)?(be[ne]=ft,be[Ne]=ke,ne=Ne):(be[ne]=ct,be[$e]=ke,ne=$e);else if(Ne<ye&&0>u(ft,ke))be[ne]=ft,be[Ne]=ke,ne=Ne;else break e}}return Ye}function u(be,Ye){var ke=be.sortIndex-Ye.sortIndex;return ke!==0?ke:be.id-Ye.id}if(typeof performance=="object"&&typeof performance.now=="function"){var f=performance;s.unstable_now=function(){return f.now()}}else{var y=Date,A=y.now();s.unstable_now=function(){return y.now()-A}}var C=[],x=[],R=1,D=null,k=3,j=!1,q=!1,Q=!1,J=typeof setTimeout=="function"?setTimeout:null,ie=typeof clearTimeout=="function"?clearTimeout:null,he=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function te(be){for(var Ye=n(x);Ye!==null;){if(Ye.callback===null)o(x);else if(Ye.startTime<=be)o(x),Ye.sortIndex=Ye.expirationTime,e(C,Ye);else break;Ye=n(x)}}function pe(be){if(Q=!1,te(be),!q)if(n(C)!==null)q=!0,yt(Ge);else{var Ye=n(x);Ye!==null&&Fe(pe,Ye.startTime-be)}}function Ge(be,Ye){q=!1,Q&&(Q=!1,ie(B),B=-1),j=!0;var ke=k;try{for(te(Ye),D=n(C);D!==null&&(!(D.expirationTime>Ye)||be&&!Y());){var ne=D.callback;if(typeof ne=="function"){D.callback=null,k=D.priorityLevel;var ye=ne(D.expirationTime<=Ye);Ye=s.unstable_now(),typeof ye=="function"?D.callback=ye:D===n(C)&&o(C),te(Ye)}else o(C);D=n(C)}if(D!==null)var ze=!0;else{var $e=n(x);$e!==null&&Fe(pe,$e.startTime-Ye),ze=!1}return ze}finally{D=null,k=ke,j=!1}}var we=!1,F=null,B=-1,P=5,G=-1;function Y(){return!(s.unstable_now()-G<P)}function W(){if(F!==null){var be=s.unstable_now();G=be;var Ye=!0;try{Ye=F(!0,be)}finally{Ye?U():(we=!1,F=null)}}else we=!1}var U;if(typeof he=="function")U=function(){he(W)};else if(typeof MessageChannel<"u"){var Le=new MessageChannel,ue=Le.port2;Le.port1.onmessage=W,U=function(){ue.postMessage(null)}}else U=function(){J(W,0)};function yt(be){F=be,we||(we=!0,U())}function Fe(be,Ye){B=J(function(){be(s.unstable_now())},Ye)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(be){be.callback=null},s.unstable_continueExecution=function(){q||j||(q=!0,yt(Ge))},s.unstable_forceFrameRate=function(be){0>be||125<be?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<be?Math.floor(1e3/be):5},s.unstable_getCurrentPriorityLevel=function(){return k},s.unstable_getFirstCallbackNode=function(){return n(C)},s.unstable_next=function(be){switch(k){case 1:case 2:case 3:var Ye=3;break;default:Ye=k}var ke=k;k=Ye;try{return be()}finally{k=ke}},s.unstable_pauseExecution=function(){},s.unstable_requestPaint=function(){},s.unstable_runWithPriority=function(be,Ye){switch(be){case 1:case 2:case 3:case 4:case 5:break;default:be=3}var ke=k;k=be;try{return Ye()}finally{k=ke}},s.unstable_scheduleCallback=function(be,Ye,ke){var ne=s.unstable_now();switch(typeof ke=="object"&&ke!==null?(ke=ke.delay,ke=typeof ke=="number"&&0<ke?ne+ke:ne):ke=ne,be){case 1:var ye=-1;break;case 2:ye=250;break;case 5:ye=1073741823;break;case 4:ye=1e4;break;default:ye=5e3}return ye=ke+ye,be={id:R++,callback:Ye,priorityLevel:be,startTime:ke,expirationTime:ye,sortIndex:-1},ke>ne?(be.sortIndex=ke,e(x,be),n(C)===null&&be===n(x)&&(Q?(ie(B),B=-1):Q=!0,Fe(pe,ke-ne))):(be.sortIndex=ye,e(C,be),q||j||(q=!0,yt(Ge))),be},s.unstable_shouldYield=Y,s.unstable_wrapCallback=function(be){var Ye=k;return function(){var ke=k;k=Ye;try{return be.apply(this,arguments)}finally{k=ke}}}}(pf)),pf}var ag;function Aw(){return ag||(ag=1,gf.exports=xw()),gf.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lg;function _w(){if(lg)return ni;lg=1;var s=xd(),e=Aw();function n(r){for(var l="https://reactjs.org/docs/error-decoder.html?invariant="+r,g=1;g<arguments.length;g++)l+="&args[]="+encodeURIComponent(arguments[g]);return"Minified React error #"+r+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,u={};function f(r,l){y(r,l),y(r+"Capture",l)}function y(r,l){for(u[r]=l,r=0;r<l.length;r++)o.add(l[r])}var A=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),C=Object.prototype.hasOwnProperty,x=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,R={},D={};function k(r){return C.call(D,r)?!0:C.call(R,r)?!1:x.test(r)?D[r]=!0:(R[r]=!0,!1)}function j(r,l,g,w){if(g!==null&&g.type===0)return!1;switch(typeof l){case"function":case"symbol":return!0;case"boolean":return w?!1:g!==null?!g.acceptsBooleans:(r=r.toLowerCase().slice(0,5),r!=="data-"&&r!=="aria-");default:return!1}}function q(r,l,g,w){if(l===null||typeof l>"u"||j(r,l,g,w))return!0;if(w)return!1;if(g!==null)switch(g.type){case 3:return!l;case 4:return l===!1;case 5:return isNaN(l);case 6:return isNaN(l)||1>l}return!1}function Q(r,l,g,w,v,T,O){this.acceptsBooleans=l===2||l===3||l===4,this.attributeName=w,this.attributeNamespace=v,this.mustUseProperty=g,this.propertyName=r,this.type=l,this.sanitizeURL=T,this.removeEmptyString=O}var J={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){J[r]=new Q(r,0,!1,r,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var l=r[0];J[l]=new Q(l,1,!1,r[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(r){J[r]=new Q(r,2,!1,r.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){J[r]=new Q(r,2,!1,r,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){J[r]=new Q(r,3,!1,r.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(r){J[r]=new Q(r,3,!0,r,null,!1,!1)}),["capture","download"].forEach(function(r){J[r]=new Q(r,4,!1,r,null,!1,!1)}),["cols","rows","size","span"].forEach(function(r){J[r]=new Q(r,6,!1,r,null,!1,!1)}),["rowSpan","start"].forEach(function(r){J[r]=new Q(r,5,!1,r.toLowerCase(),null,!1,!1)});var ie=/[\-:]([a-z])/g;function he(r){return r[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var l=r.replace(ie,he);J[l]=new Q(l,1,!1,r,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var l=r.replace(ie,he);J[l]=new Q(l,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(r){var l=r.replace(ie,he);J[l]=new Q(l,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(r){J[r]=new Q(r,1,!1,r.toLowerCase(),null,!1,!1)}),J.xlinkHref=new Q("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(r){J[r]=new Q(r,1,!1,r.toLowerCase(),null,!0,!0)});function te(r,l,g,w){var v=J.hasOwnProperty(l)?J[l]:null;(v!==null?v.type!==0:w||!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(q(l,g,v,w)&&(g=null),w||v===null?k(l)&&(g===null?r.removeAttribute(l):r.setAttribute(l,""+g)):v.mustUseProperty?r[v.propertyName]=g===null?v.type===3?!1:"":g:(l=v.attributeName,w=v.attributeNamespace,g===null?r.removeAttribute(l):(v=v.type,g=v===3||v===4&&g===!0?"":""+g,w?r.setAttributeNS(w,l,g):r.setAttribute(l,g))))}var pe=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ge=Symbol.for("react.element"),we=Symbol.for("react.portal"),F=Symbol.for("react.fragment"),B=Symbol.for("react.strict_mode"),P=Symbol.for("react.profiler"),G=Symbol.for("react.provider"),Y=Symbol.for("react.context"),W=Symbol.for("react.forward_ref"),U=Symbol.for("react.suspense"),Le=Symbol.for("react.suspense_list"),ue=Symbol.for("react.memo"),yt=Symbol.for("react.lazy"),Fe=Symbol.for("react.offscreen"),be=Symbol.iterator;function Ye(r){return r===null||typeof r!="object"?null:(r=be&&r[be]||r["@@iterator"],typeof r=="function"?r:null)}var ke=Object.assign,ne;function ye(r){if(ne===void 0)try{throw Error()}catch(g){var l=g.stack.trim().match(/\n( *(at )?)/);ne=l&&l[1]||""}return`
`+ne+r}var ze=!1;function $e(r,l){if(!r||ze)return"";ze=!0;var g=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(l)if(l=function(){throw Error()},Object.defineProperty(l.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(l,[])}catch(de){var w=de}Reflect.construct(r,[],l)}else{try{l.call()}catch(de){w=de}r.call(l.prototype)}else{try{throw Error()}catch(de){w=de}r()}}catch(de){if(de&&w&&typeof de.stack=="string"){for(var v=de.stack.split(`
`),T=w.stack.split(`
`),O=v.length-1,X=T.length-1;1<=O&&0<=X&&v[O]!==T[X];)X--;for(;1<=O&&0<=X;O--,X--)if(v[O]!==T[X]){if(O!==1||X!==1)do if(O--,X--,0>X||v[O]!==T[X]){var Z=`
`+v[O].replace(" at new "," at ");return r.displayName&&Z.includes("<anonymous>")&&(Z=Z.replace("<anonymous>",r.displayName)),Z}while(1<=O&&0<=X);break}}}finally{ze=!1,Error.prepareStackTrace=g}return(r=r?r.displayName||r.name:"")?ye(r):""}function ct(r){switch(r.tag){case 5:return ye(r.type);case 16:return ye("Lazy");case 13:return ye("Suspense");case 19:return ye("SuspenseList");case 0:case 2:case 15:return r=$e(r.type,!1),r;case 11:return r=$e(r.type.render,!1),r;case 1:return r=$e(r.type,!0),r;default:return""}}function Ne(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case F:return"Fragment";case we:return"Portal";case P:return"Profiler";case B:return"StrictMode";case U:return"Suspense";case Le:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case Y:return(r.displayName||"Context")+".Consumer";case G:return(r._context.displayName||"Context")+".Provider";case W:var l=r.render;return r=r.displayName,r||(r=l.displayName||l.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case ue:return l=r.displayName||null,l!==null?l:Ne(r.type)||"Memo";case yt:l=r._payload,r=r._init;try{return Ne(r(l))}catch{}}return null}function ft(r){var l=r.type;switch(r.tag){case 24:return"Cache";case 9:return(l.displayName||"Context")+".Consumer";case 10:return(l._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return r=l.render,r=r.displayName||r.name||"",l.displayName||(r!==""?"ForwardRef("+r+")":"ForwardRef");case 7:return"Fragment";case 5:return l;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ne(l);case 8:return l===B?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l}return null}function Qe(r){switch(typeof r){case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function _t(r){var l=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function Kt(r){var l=_t(r)?"checked":"value",g=Object.getOwnPropertyDescriptor(r.constructor.prototype,l),w=""+r[l];if(!r.hasOwnProperty(l)&&typeof g<"u"&&typeof g.get=="function"&&typeof g.set=="function"){var v=g.get,T=g.set;return Object.defineProperty(r,l,{configurable:!0,get:function(){return v.call(this)},set:function(O){w=""+O,T.call(this,O)}}),Object.defineProperty(r,l,{enumerable:g.enumerable}),{getValue:function(){return w},setValue:function(O){w=""+O},stopTracking:function(){r._valueTracker=null,delete r[l]}}}}function gn(r){r._valueTracker||(r._valueTracker=Kt(r))}function Mi(r){if(!r)return!1;var l=r._valueTracker;if(!l)return!0;var g=l.getValue(),w="";return r&&(w=_t(r)?r.checked?"true":"false":r.value),r=w,r!==g?(l.setValue(r),!0):!1}function wt(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}function Wr(r,l){var g=l.checked;return ke({},l,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:g??r._wrapperState.initialChecked})}function ur(r,l){var g=l.defaultValue==null?"":l.defaultValue,w=l.checked!=null?l.checked:l.defaultChecked;g=Qe(l.value!=null?l.value:g),r._wrapperState={initialChecked:w,initialValue:g,controlled:l.type==="checkbox"||l.type==="radio"?l.checked!=null:l.value!=null}}function Oi(r,l){l=l.checked,l!=null&&te(r,"checked",l,!1)}function An(r,l){Oi(r,l);var g=Qe(l.value),w=l.type;if(g!=null)w==="number"?(g===0&&r.value===""||r.value!=g)&&(r.value=""+g):r.value!==""+g&&(r.value=""+g);else if(w==="submit"||w==="reset"){r.removeAttribute("value");return}l.hasOwnProperty("value")?Et(r,l.type,g):l.hasOwnProperty("defaultValue")&&Et(r,l.type,Qe(l.defaultValue)),l.checked==null&&l.defaultChecked!=null&&(r.defaultChecked=!!l.defaultChecked)}function Ut(r,l,g){if(l.hasOwnProperty("value")||l.hasOwnProperty("defaultValue")){var w=l.type;if(!(w!=="submit"&&w!=="reset"||l.value!==void 0&&l.value!==null))return;l=""+r._wrapperState.initialValue,g||l===r.value||(r.value=l),r.defaultValue=l}g=r.name,g!==""&&(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,g!==""&&(r.name=g)}function Et(r,l,g){(l!=="number"||wt(r.ownerDocument)!==r)&&(g==null?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+g&&(r.defaultValue=""+g))}var Gr=Array.isArray;function Ve(r,l,g,w){if(r=r.options,l){l={};for(var v=0;v<g.length;v++)l["$"+g[v]]=!0;for(g=0;g<r.length;g++)v=l.hasOwnProperty("$"+r[g].value),r[g].selected!==v&&(r[g].selected=v),v&&w&&(r[g].defaultSelected=!0)}else{for(g=""+Qe(g),l=null,v=0;v<r.length;v++){if(r[v].value===g){r[v].selected=!0,w&&(r[v].defaultSelected=!0);return}l!==null||r[v].disabled||(l=r[v])}l!==null&&(l.selected=!0)}}function Xi(r,l){if(l.dangerouslySetInnerHTML!=null)throw Error(n(91));return ke({},l,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function ys(r,l){var g=l.value;if(g==null){if(g=l.children,l=l.defaultValue,g!=null){if(l!=null)throw Error(n(92));if(Gr(g)){if(1<g.length)throw Error(n(93));g=g[0]}l=g}l==null&&(l=""),g=l}r._wrapperState={initialValue:Qe(g)}}function Ar(r,l){var g=Qe(l.value),w=Qe(l.defaultValue);g!=null&&(g=""+g,g!==r.value&&(r.value=g),l.defaultValue==null&&r.defaultValue!==g&&(r.defaultValue=g)),w!=null&&(r.defaultValue=""+w)}function ws(r){var l=r.textContent;l===r._wrapperState.initialValue&&l!==""&&l!==null&&(r.value=l)}function zt(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Sn(r,l){return r==null||r==="http://www.w3.org/1999/xhtml"?zt(l):r==="http://www.w3.org/2000/svg"&&l==="foreignObject"?"http://www.w3.org/1999/xhtml":r}var er,Ln=function(r){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(l,g,w,v){MSApp.execUnsafeLocalFunction(function(){return r(l,g,w,v)})}:r}(function(r,l){if(r.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in r)r.innerHTML=l;else{for(er=er||document.createElement("div"),er.innerHTML="<svg>"+l.valueOf().toString()+"</svg>",l=er.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;l.firstChild;)r.appendChild(l.firstChild)}});function Pi(r,l){if(l){var g=r.firstChild;if(g&&g===r.lastChild&&g.nodeType===3){g.nodeValue=l;return}}r.textContent=l}var xi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Es=["Webkit","ms","Moz","O"];Object.keys(xi).forEach(function(r){Es.forEach(function(l){l=l+r.charAt(0).toUpperCase()+r.substring(1),xi[l]=xi[r]})});function rn(r,l,g){return l==null||typeof l=="boolean"||l===""?"":g||typeof l!="number"||l===0||xi.hasOwnProperty(r)&&xi[r]?(""+l).trim():l+"px"}function Oe(r,l){r=r.style;for(var g in l)if(l.hasOwnProperty(g)){var w=g.indexOf("--")===0,v=rn(g,l[g],w);g==="float"&&(g="cssFloat"),w?r.setProperty(g,v):r[g]=v}}var an=ke({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Lt(r,l){if(l){if(an[r]&&(l.children!=null||l.dangerouslySetInnerHTML!=null))throw Error(n(137,r));if(l.dangerouslySetInnerHTML!=null){if(l.children!=null)throw Error(n(60));if(typeof l.dangerouslySetInnerHTML!="object"||!("__html"in l.dangerouslySetInnerHTML))throw Error(n(61))}if(l.style!=null&&typeof l.style!="object")throw Error(n(62))}}function Zt(r,l){if(r.indexOf("-")===-1)return typeof l.is=="string";switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var si=null;function qi(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var xs=null,pt=null,tr=null;function As(r){if(r=ul(r)){if(typeof xs!="function")throw Error(n(280));var l=r.stateNode;l&&(l=ou(l),xs(r.stateNode,r.type,l))}}function oi(r){pt?tr?tr.push(r):tr=[r]:pt=r}function cr(){if(pt){var r=pt,l=tr;if(tr=pt=null,As(r),l)for(r=0;r<l.length;r++)As(l[r])}}function Li(r,l){return r(l)}function Rn(){}var _r=!1;function Qi(r,l,g){if(_r)return r(l,g);_r=!0;try{return Li(r,l,g)}finally{_r=!1,(pt!==null||tr!==null)&&(Rn(),cr())}}function Bt(r,l){var g=r.stateNode;if(g===null)return null;var w=ou(g);if(w===null)return null;g=w[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(w=!w.disabled)||(r=r.type,w=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!w;break e;default:r=!1}if(r)return null;if(g&&typeof g!="function")throw Error(n(231,l,typeof g));return g}var Ws=!1;if(A)try{var Wn={};Object.defineProperty(Wn,"passive",{get:function(){Ws=!0}}),window.addEventListener("test",Wn,Wn),window.removeEventListener("test",Wn,Wn)}catch{Ws=!1}function ki(r,l,g,w,v,T,O,X,Z){var de=Array.prototype.slice.call(arguments,3);try{l.apply(g,de)}catch(ve){this.onError(ve)}}var Nn=!1,Yr=null,pn=!1,Be=null,Ki={onError:function(r){Nn=!0,Yr=r}};function Zi(r,l,g,w,v,T,O,X,Z){Nn=!1,Yr=null,ki.apply(Ki,arguments)}function Gn(r,l,g,w,v,T,O,X,Z){if(Zi.apply(this,arguments),Nn){if(Nn){var de=Yr;Nn=!1,Yr=null}else throw Error(n(198));pn||(pn=!0,Be=de)}}function nr(r){var l=r,g=r;if(r.alternate)for(;l.return;)l=l.return;else{r=l;do l=r,(l.flags&4098)!==0&&(g=l.return),r=l.return;while(r)}return l.tag===3?g:null}function Ai(r){if(r.tag===13){var l=r.memoizedState;if(l===null&&(r=r.alternate,r!==null&&(l=r.memoizedState)),l!==null)return l.dehydrated}return null}function Cr(r){if(nr(r)!==r)throw Error(n(188))}function Br(r){var l=r.alternate;if(!l){if(l=nr(r),l===null)throw Error(n(188));return l!==r?null:r}for(var g=r,w=l;;){var v=g.return;if(v===null)break;var T=v.alternate;if(T===null){if(w=v.return,w!==null){g=w;continue}break}if(v.child===T.child){for(T=v.child;T;){if(T===g)return Cr(v),r;if(T===w)return Cr(v),l;T=T.sibling}throw Error(n(188))}if(g.return!==w.return)g=v,w=T;else{for(var O=!1,X=v.child;X;){if(X===g){O=!0,g=v,w=T;break}if(X===w){O=!0,w=v,g=T;break}X=X.sibling}if(!O){for(X=T.child;X;){if(X===g){O=!0,g=T,w=v;break}if(X===w){O=!0,w=T,g=v;break}X=X.sibling}if(!O)throw Error(n(189))}}if(g.alternate!==w)throw Error(n(190))}if(g.tag!==3)throw Error(n(188));return g.stateNode.current===g?r:l}function Po(r){return r=Br(r),r!==null?Gs(r):null}function Gs(r){if(r.tag===5||r.tag===6)return r;for(r=r.child;r!==null;){var l=Gs(r);if(l!==null)return l;r=r.sibling}return null}var hr=e.unstable_scheduleCallback,kn=e.unstable_cancelCallback,Xt=e.unstable_shouldYield,ua=e.unstable_requestPaint,Dt=e.unstable_now,Ys=e.unstable_getCurrentPriorityLevel,xe=e.unstable_ImmediatePriority,$i=e.unstable_UserBlockingPriority,bt=e.unstable_NormalPriority,_i=e.unstable_LowPriority,ca=e.unstable_IdlePriority,It=null,dt=null;function xt(r){if(dt&&typeof dt.onCommitFiberRoot=="function")try{dt.onCommitFiberRoot(It,r,void 0,(r.current.flags&128)===128)}catch{}}var Yn=Math.clz32?Math.clz32:mn,_s=Math.log,Xs=Math.LN2;function mn(r){return r>>>=0,r===0?32:31-(_s(r)/Xs|0)|0}var Fr=64,qs=4194304;function Gt(r){switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return r&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return r}}function vr(r,l){var g=r.pendingLanes;if(g===0)return 0;var w=0,v=r.suspendedLanes,T=r.pingedLanes,O=g&268435455;if(O!==0){var X=O&~v;X!==0?w=Gt(X):(T&=O,T!==0&&(w=Gt(T)))}else O=g&~v,O!==0?w=Gt(O):T!==0&&(w=Gt(T));if(w===0)return 0;if(l!==0&&l!==w&&(l&v)===0&&(v=w&-w,T=l&-l,v>=T||v===16&&(T&4194240)!==0))return l;if((w&4)!==0&&(w|=g&16),l=r.entangledLanes,l!==0)for(r=r.entanglements,l&=w;0<l;)g=31-Yn(l),v=1<<g,w|=r[g],l&=~v;return w}function tl(r,l){switch(r){case 1:case 2:case 4:return l+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ir(r,l){for(var g=r.suspendedLanes,w=r.pingedLanes,v=r.expirationTimes,T=r.pendingLanes;0<T;){var O=31-Yn(T),X=1<<O,Z=v[O];Z===-1?((X&g)===0||(X&w)!==0)&&(v[O]=tl(X,l)):Z<=l&&(r.expiredLanes|=X),T&=~X}}function At(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function yn(){var r=Fr;return Fr<<=1,(Fr&4194240)===0&&(Fr=64),r}function se(r){for(var l=[],g=0;31>g;g++)l.push(r);return l}function z(r,l,g){r.pendingLanes|=l,l!==536870912&&(r.suspendedLanes=0,r.pingedLanes=0),r=r.eventTimes,l=31-Yn(l),r[l]=g}function Pe(r,l){var g=r.pendingLanes&~l;r.pendingLanes=l,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=l,r.mutableReadLanes&=l,r.entangledLanes&=l,l=r.entanglements;var w=r.eventTimes;for(r=r.expirationTimes;0<g;){var v=31-Yn(g),T=1<<v;l[v]=0,w[v]=-1,r[v]=-1,g&=~T}}function Jt(r,l){var g=r.entangledLanes|=l;for(r=r.entanglements;g;){var w=31-Yn(g),v=1<<w;v&l|r[w]&l&&(r[w]|=l),g&=~v}}var at=0;function Ji(r){return r&=-r,1<r?4<r?(r&268435455)!==0?16:536870912:4:1}var Qs,Xn,Ze,$t,Lo,ko=!1,Xr=[],Dn=null,Vr=null,ai=null,en=new Map,rr=new Map,qn=[],nt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ha(r,l){switch(r){case"focusin":case"focusout":Dn=null;break;case"dragenter":case"dragleave":Vr=null;break;case"mouseover":case"mouseout":ai=null;break;case"pointerover":case"pointerout":en.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":rr.delete(l.pointerId)}}function et(r,l,g,w,v,T){return r===null||r.nativeEvent!==T?(r={blockedOn:l,domEventName:g,eventSystemFlags:w,nativeEvent:T,targetContainers:[v]},l!==null&&(l=ul(l),l!==null&&Xn(l)),r):(r.eventSystemFlags|=w,l=r.targetContainers,v!==null&&l.indexOf(v)===-1&&l.push(v),r)}function Bn(r,l,g,w,v){switch(l){case"focusin":return Dn=et(Dn,r,l,g,w,v),!0;case"dragenter":return Vr=et(Vr,r,l,g,w,v),!0;case"mouseover":return ai=et(ai,r,l,g,w,v),!0;case"pointerover":var T=v.pointerId;return en.set(T,et(en.get(T)||null,r,l,g,w,v)),!0;case"gotpointercapture":return T=v.pointerId,rr.set(T,et(rr.get(T)||null,r,l,g,w,v)),!0}return!1}function fa(r){var l=Uo(r.target);if(l!==null){var g=nr(l);if(g!==null){if(l=g.tag,l===13){if(l=Ai(g),l!==null){r.blockedOn=l,Lo(r.priority,function(){Ze(g)});return}}else if(l===3&&g.stateNode.current.memoizedState.isDehydrated){r.blockedOn=g.tag===3?g.stateNode.containerInfo:null;return}}}r.blockedOn=null}function li(r){if(r.blockedOn!==null)return!1;for(var l=r.targetContainers;0<l.length;){var g=vs(r.domEventName,r.eventSystemFlags,l[0],r.nativeEvent);if(g===null){g=r.nativeEvent;var w=new g.constructor(g.type,g);si=w,g.target.dispatchEvent(w),si=null}else return l=ul(g),l!==null&&Xn(l),r.blockedOn=g,!1;l.shift()}return!0}function es(r,l,g){li(r)&&g.delete(l)}function Ci(){ko=!1,Dn!==null&&li(Dn)&&(Dn=null),Vr!==null&&li(Vr)&&(Vr=null),ai!==null&&li(ai)&&(ai=null),en.forEach(es),rr.forEach(es)}function ui(r,l){r.blockedOn===l&&(r.blockedOn=null,ko||(ko=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Ci)))}function fr(r){function l(v){return ui(v,r)}if(0<Xr.length){ui(Xr[0],r);for(var g=1;g<Xr.length;g++){var w=Xr[g];w.blockedOn===r&&(w.blockedOn=null)}}for(Dn!==null&&ui(Dn,r),Vr!==null&&ui(Vr,r),ai!==null&&ui(ai,r),en.forEach(l),rr.forEach(l),g=0;g<qn.length;g++)w=qn[g],w.blockedOn===r&&(w.blockedOn=null);for(;0<qn.length&&(g=qn[0],g.blockedOn===null);)fa(g),g.blockedOn===null&&qn.shift()}var Ur=pe.ReactCurrentBatchConfig,qr=!0;function tn(r,l,g,w){var v=at,T=Ur.transition;Ur.transition=null;try{at=1,Bi(r,l,g,w)}finally{at=v,Ur.transition=T}}function Cs(r,l,g,w){var v=at,T=Ur.transition;Ur.transition=null;try{at=4,Bi(r,l,g,w)}finally{at=v,Ur.transition=T}}function Bi(r,l,g,w){if(qr){var v=vs(r,l,g,w);if(v===null)eh(r,l,w,bn,g),ha(r,w);else if(Bn(v,r,l,g,w))w.stopPropagation();else if(ha(r,w),l&4&&-1<nt.indexOf(r)){for(;v!==null;){var T=ul(v);if(T!==null&&Qs(T),T=vs(r,l,g,w),T===null&&eh(r,l,w,bn,g),T===v)break;v=T}v!==null&&w.stopPropagation()}else eh(r,l,w,null,g)}}var bn=null;function vs(r,l,g,w){if(bn=null,r=qi(w),r=Uo(r),r!==null)if(l=nr(r),l===null)r=null;else if(g=l.tag,g===13){if(r=Ai(l),r!==null)return r;r=null}else if(g===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;r=null}else l!==r&&(r=null);return bn=r,null}function Ks(r){switch(r){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ys()){case xe:return 1;case $i:return 4;case bt:case _i:return 16;case ca:return 536870912;default:return 16}default:return 16}}var Tr=null,Zs=null,Sr=null;function Bo(){if(Sr)return Sr;var r,l=Zs,g=l.length,w,v="value"in Tr?Tr.value:Tr.textContent,T=v.length;for(r=0;r<g&&l[r]===v[r];r++);var O=g-r;for(w=1;w<=O&&l[g-w]===v[T-w];w++);return Sr=v.slice(r,1<w?1-w:void 0)}function Mt(r){var l=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&l===13&&(r=13)):r=l,r===10&&(r=13),32<=r||r===13?r:0}function ci(){return!0}function ts(){return!1}function sn(r){function l(g,w,v,T,O){this._reactName=g,this._targetInst=v,this.type=w,this.nativeEvent=T,this.target=O,this.currentTarget=null;for(var X in r)r.hasOwnProperty(X)&&(g=r[X],this[X]=g?g(T):T[X]);return this.isDefaultPrevented=(T.defaultPrevented!=null?T.defaultPrevented:T.returnValue===!1)?ci:ts,this.isPropagationStopped=ts,this}return ke(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var g=this.nativeEvent;g&&(g.preventDefault?g.preventDefault():typeof g.returnValue!="unknown"&&(g.returnValue=!1),this.isDefaultPrevented=ci)},stopPropagation:function(){var g=this.nativeEvent;g&&(g.stopPropagation?g.stopPropagation():typeof g.cancelBubble!="unknown"&&(g.cancelBubble=!0),this.isPropagationStopped=ci)},persist:function(){},isPersistent:ci}),l}var hi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ce=sn(hi),ot=ke({},hi,{view:0,detail:0}),Fn=sn(ot),Fi,vi,ns,Is=ke({},ot,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Kr,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==ns&&(ns&&r.type==="mousemove"?(Fi=r.screenX-ns.screenX,vi=r.screenY-ns.screenY):vi=Fi=0,ns=r),Fi)},movementY:function(r){return"movementY"in r?r.movementY:vi}}),$s=sn(Is),Ts=ke({},Is,{dataTransfer:0}),wn=sn(Ts),rs=ke({},ot,{relatedTarget:0}),qt=sn(rs),Ss=ke({},hi,{animationName:0,elapsedTime:0,pseudoElement:0}),dr=sn(Ss),Ft=ke({},hi,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),Je=sn(Ft),da=ke({},hi,{data:0}),jt=sn(da),Qr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Mn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ga={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function zr(r){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(r):(r=ga[r])?!!l[r]:!1}function Kr(){return zr}var m=ke({},ot,{key:function(r){if(r.key){var l=Qr[r.key]||r.key;if(l!=="Unidentified")return l}return r.type==="keypress"?(r=Mt(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?Mn[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Kr,charCode:function(r){return r.type==="keypress"?Mt(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Mt(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),I=sn(m),N=ke({},Is,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),V=sn(N),oe=ke({},ot,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Kr}),ge=sn(oe),Me=ke({},hi,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ht=sn(Me),ln=ke({},Is,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),St=sn(ln),nn=[9,13,27,32],un=A&&"CompositionEvent"in window,cn=null;A&&"documentMode"in document&&(cn=document.documentMode);var Rr=A&&"TextEvent"in window&&!cn,ir=A&&(!un||cn&&8<cn&&11>=cn),Js=" ",pa=!1;function eu(r,l){switch(r){case"keyup":return nn.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function nl(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var gr=!1;function Kc(r,l){switch(r){case"compositionend":return nl(l);case"keypress":return l.which!==32?null:(pa=!0,Js);case"textInput":return r=l.data,r===Js&&pa?null:r;default:return null}}function rl(r,l){if(gr)return r==="compositionend"||!un&&eu(r,l)?(r=Bo(),Sr=Zs=Tr=null,gr=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return ir&&l.locale!=="ko"?null:l.data;default:return null}}var Fo={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Rt(r){var l=r&&r.nodeName&&r.nodeName.toLowerCase();return l==="input"?!!Fo[r.type]:l==="textarea"}function Vo(r,l,g,w){oi(w),l=ru(l,"onChange"),0<l.length&&(g=new ce("onChange","change",null,g,w),r.push({event:g,listeners:l}))}var b=null,t=null;function i(r){w1(r,0)}function a(r){var l=wa(r);if(Mi(l))return r}function c(r,l){if(r==="change")return l}var h=!1;if(A){var d;if(A){var p="oninput"in document;if(!p){var E=document.createElement("div");E.setAttribute("oninput","return;"),p=typeof E.oninput=="function"}d=p}else d=!1;h=d&&(!document.documentMode||9<document.documentMode)}function _(){b&&(b.detachEvent("onpropertychange",S),t=b=null)}function S(r){if(r.propertyName==="value"&&a(t)){var l=[];Vo(l,t,r,qi(r)),Qi(i,l)}}function M(r,l,g){r==="focusin"?(_(),b=l,t=g,b.attachEvent("onpropertychange",S)):r==="focusout"&&_()}function L(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return a(t)}function H(r,l){if(r==="click")return a(l)}function K(r,l){if(r==="input"||r==="change")return a(l)}function $(r,l){return r===l&&(r!==0||1/r===1/l)||r!==r&&l!==l}var re=typeof Object.is=="function"?Object.is:$;function fe(r,l){if(re(r,l))return!0;if(typeof r!="object"||r===null||typeof l!="object"||l===null)return!1;var g=Object.keys(r),w=Object.keys(l);if(g.length!==w.length)return!1;for(w=0;w<g.length;w++){var v=g[w];if(!C.call(l,v)||!re(r[v],l[v]))return!1}return!0}function Se(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function Re(r,l){var g=Se(r);r=0;for(var w;g;){if(g.nodeType===3){if(w=r+g.textContent.length,r<=l&&w>=l)return{node:g,offset:l-r};r=w}e:{for(;g;){if(g.nextSibling){g=g.nextSibling;break e}g=g.parentNode}g=void 0}g=Se(g)}}function Ce(r,l){return r&&l?r===l?!0:r&&r.nodeType===3?!1:l&&l.nodeType===3?Ce(r,l.parentNode):"contains"in r?r.contains(l):r.compareDocumentPosition?!!(r.compareDocumentPosition(l)&16):!1:!1}function Ct(){for(var r=window,l=wt();l instanceof r.HTMLIFrameElement;){try{var g=typeof l.contentWindow.location.href=="string"}catch{g=!1}if(g)r=l.contentWindow;else break;l=wt(r.document)}return l}function ht(r){var l=r&&r.nodeName&&r.nodeName.toLowerCase();return l&&(l==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||l==="textarea"||r.contentEditable==="true")}function Nr(r){var l=Ct(),g=r.focusedElem,w=r.selectionRange;if(l!==g&&g&&g.ownerDocument&&Ce(g.ownerDocument.documentElement,g)){if(w!==null&&ht(g)){if(l=w.start,r=w.end,r===void 0&&(r=l),"selectionStart"in g)g.selectionStart=l,g.selectionEnd=Math.min(r,g.value.length);else if(r=(l=g.ownerDocument||document)&&l.defaultView||window,r.getSelection){r=r.getSelection();var v=g.textContent.length,T=Math.min(w.start,v);w=w.end===void 0?T:Math.min(w.end,v),!r.extend&&T>w&&(v=w,w=T,T=v),v=Re(g,T);var O=Re(g,w);v&&O&&(r.rangeCount!==1||r.anchorNode!==v.node||r.anchorOffset!==v.offset||r.focusNode!==O.node||r.focusOffset!==O.offset)&&(l=l.createRange(),l.setStart(v.node,v.offset),r.removeAllRanges(),T>w?(r.addRange(l),r.extend(O.node,O.offset)):(l.setEnd(O.node,O.offset),r.addRange(l)))}}for(l=[],r=g;r=r.parentNode;)r.nodeType===1&&l.push({element:r,left:r.scrollLeft,top:r.scrollTop});for(typeof g.focus=="function"&&g.focus(),g=0;g<l.length;g++)r=l[g],r.element.scrollLeft=r.left,r.element.scrollTop=r.top}}var fi=A&&"documentMode"in document&&11>=document.documentMode,Vn=null,Wt=null,_n=null,pr=!1;function Rs(r,l,g){var w=g.window===g?g.document:g.nodeType===9?g:g.ownerDocument;pr||Vn==null||Vn!==wt(w)||(w=Vn,"selectionStart"in w&&ht(w)?w={start:w.selectionStart,end:w.selectionEnd}:(w=(w.ownerDocument&&w.ownerDocument.defaultView||window).getSelection(),w={anchorNode:w.anchorNode,anchorOffset:w.anchorOffset,focusNode:w.focusNode,focusOffset:w.focusOffset}),_n&&fe(_n,w)||(_n=w,w=ru(Wt,"onSelect"),0<w.length&&(l=new ce("onSelect","select",null,l,g),r.push({event:l,listeners:w}),l.target=Vn)))}function Vi(r,l){var g={};return g[r.toLowerCase()]=l.toLowerCase(),g["Webkit"+r]="webkit"+l,g["Moz"+r]="moz"+l,g}var eo={animationend:Vi("Animation","AnimationEnd"),animationiteration:Vi("Animation","AnimationIteration"),animationstart:Vi("Animation","AnimationStart"),transitionend:Vi("Transition","TransitionEnd")},il={},c1={};A&&(c1=document.createElement("div").style,"AnimationEvent"in window||(delete eo.animationend.animation,delete eo.animationiteration.animation,delete eo.animationstart.animation),"TransitionEvent"in window||delete eo.transitionend.transition);function tu(r){if(il[r])return il[r];if(!eo[r])return r;var l=eo[r],g;for(g in l)if(l.hasOwnProperty(g)&&g in c1)return il[r]=l[g];return r}var h1=tu("animationend"),f1=tu("animationiteration"),d1=tu("animationstart"),g1=tu("transitionend"),p1=new Map,m1="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function to(r,l){p1.set(r,l),f(l,[r])}for(var Zc=0;Zc<m1.length;Zc++){var $c=m1[Zc],Iy=$c.toLowerCase(),Ty=$c[0].toUpperCase()+$c.slice(1);to(Iy,"on"+Ty)}to(h1,"onAnimationEnd"),to(f1,"onAnimationIteration"),to(d1,"onAnimationStart"),to("dblclick","onDoubleClick"),to("focusin","onFocus"),to("focusout","onBlur"),to(g1,"onTransitionEnd"),y("onMouseEnter",["mouseout","mouseover"]),y("onMouseLeave",["mouseout","mouseover"]),y("onPointerEnter",["pointerout","pointerover"]),y("onPointerLeave",["pointerout","pointerover"]),f("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),f("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),f("onBeforeInput",["compositionend","keypress","textInput","paste"]),f("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),f("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),f("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var sl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Sy=new Set("cancel close invalid load scroll toggle".split(" ").concat(sl));function y1(r,l,g){var w=r.type||"unknown-event";r.currentTarget=g,Gn(w,l,void 0,r),r.currentTarget=null}function w1(r,l){l=(l&4)!==0;for(var g=0;g<r.length;g++){var w=r[g],v=w.event;w=w.listeners;e:{var T=void 0;if(l)for(var O=w.length-1;0<=O;O--){var X=w[O],Z=X.instance,de=X.currentTarget;if(X=X.listener,Z!==T&&v.isPropagationStopped())break e;y1(v,X,de),T=Z}else for(O=0;O<w.length;O++){if(X=w[O],Z=X.instance,de=X.currentTarget,X=X.listener,Z!==T&&v.isPropagationStopped())break e;y1(v,X,de),T=Z}}}if(pn)throw r=Be,pn=!1,Be=null,r}function hn(r,l){var g=l[oh];g===void 0&&(g=l[oh]=new Set);var w=r+"__bubble";g.has(w)||(E1(l,r,2,!1),g.add(w))}function Jc(r,l,g){var w=0;l&&(w|=4),E1(g,r,w,l)}var nu="_reactListening"+Math.random().toString(36).slice(2);function ol(r){if(!r[nu]){r[nu]=!0,o.forEach(function(g){g!=="selectionchange"&&(Sy.has(g)||Jc(g,!1,r),Jc(g,!0,r))});var l=r.nodeType===9?r:r.ownerDocument;l===null||l[nu]||(l[nu]=!0,Jc("selectionchange",!1,l))}}function E1(r,l,g,w){switch(Ks(l)){case 1:var v=tn;break;case 4:v=Cs;break;default:v=Bi}g=v.bind(null,l,g,r),v=void 0,!Ws||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(v=!0),w?v!==void 0?r.addEventListener(l,g,{capture:!0,passive:v}):r.addEventListener(l,g,!0):v!==void 0?r.addEventListener(l,g,{passive:v}):r.addEventListener(l,g,!1)}function eh(r,l,g,w,v){var T=w;if((l&1)===0&&(l&2)===0&&w!==null)e:for(;;){if(w===null)return;var O=w.tag;if(O===3||O===4){var X=w.stateNode.containerInfo;if(X===v||X.nodeType===8&&X.parentNode===v)break;if(O===4)for(O=w.return;O!==null;){var Z=O.tag;if((Z===3||Z===4)&&(Z=O.stateNode.containerInfo,Z===v||Z.nodeType===8&&Z.parentNode===v))return;O=O.return}for(;X!==null;){if(O=Uo(X),O===null)return;if(Z=O.tag,Z===5||Z===6){w=T=O;continue e}X=X.parentNode}}w=w.return}Qi(function(){var de=T,ve=qi(g),Te=[];e:{var _e=p1.get(r);if(_e!==void 0){var Ue=ce,Xe=r;switch(r){case"keypress":if(Mt(g)===0)break e;case"keydown":case"keyup":Ue=I;break;case"focusin":Xe="focus",Ue=qt;break;case"focusout":Xe="blur",Ue=qt;break;case"beforeblur":case"afterblur":Ue=qt;break;case"click":if(g.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ue=$s;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ue=wn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ue=ge;break;case h1:case f1:case d1:Ue=dr;break;case g1:Ue=Ht;break;case"scroll":Ue=Fn;break;case"wheel":Ue=St;break;case"copy":case"cut":case"paste":Ue=Je;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ue=V}var qe=(l&4)!==0,Un=!qe&&r==="scroll",ae=qe?_e!==null?_e+"Capture":null:_e;qe=[];for(var ee=de,le;ee!==null;){le=ee;var De=le.stateNode;if(le.tag===5&&De!==null&&(le=De,ae!==null&&(De=Bt(ee,ae),De!=null&&qe.push(al(ee,De,le)))),Un)break;ee=ee.return}0<qe.length&&(_e=new Ue(_e,Xe,null,g,ve),Te.push({event:_e,listeners:qe}))}}if((l&7)===0){e:{if(_e=r==="mouseover"||r==="pointerover",Ue=r==="mouseout"||r==="pointerout",_e&&g!==si&&(Xe=g.relatedTarget||g.fromElement)&&(Uo(Xe)||Xe[Ns]))break e;if((Ue||_e)&&(_e=ve.window===ve?ve:(_e=ve.ownerDocument)?_e.defaultView||_e.parentWindow:window,Ue?(Xe=g.relatedTarget||g.toElement,Ue=de,Xe=Xe?Uo(Xe):null,Xe!==null&&(Un=nr(Xe),Xe!==Un||Xe.tag!==5&&Xe.tag!==6)&&(Xe=null)):(Ue=null,Xe=de),Ue!==Xe)){if(qe=$s,De="onMouseLeave",ae="onMouseEnter",ee="mouse",(r==="pointerout"||r==="pointerover")&&(qe=V,De="onPointerLeave",ae="onPointerEnter",ee="pointer"),Un=Ue==null?_e:wa(Ue),le=Xe==null?_e:wa(Xe),_e=new qe(De,ee+"leave",Ue,g,ve),_e.target=Un,_e.relatedTarget=le,De=null,Uo(ve)===de&&(qe=new qe(ae,ee+"enter",Xe,g,ve),qe.target=le,qe.relatedTarget=Un,De=qe),Un=De,Ue&&Xe)t:{for(qe=Ue,ae=Xe,ee=0,le=qe;le;le=ma(le))ee++;for(le=0,De=ae;De;De=ma(De))le++;for(;0<ee-le;)qe=ma(qe),ee--;for(;0<le-ee;)ae=ma(ae),le--;for(;ee--;){if(qe===ae||ae!==null&&qe===ae.alternate)break t;qe=ma(qe),ae=ma(ae)}qe=null}else qe=null;Ue!==null&&x1(Te,_e,Ue,qe,!1),Xe!==null&&Un!==null&&x1(Te,Un,Xe,qe,!0)}}e:{if(_e=de?wa(de):window,Ue=_e.nodeName&&_e.nodeName.toLowerCase(),Ue==="select"||Ue==="input"&&_e.type==="file")var Ke=c;else if(Rt(_e))if(h)Ke=K;else{Ke=L;var rt=M}else(Ue=_e.nodeName)&&Ue.toLowerCase()==="input"&&(_e.type==="checkbox"||_e.type==="radio")&&(Ke=H);if(Ke&&(Ke=Ke(r,de))){Vo(Te,Ke,g,ve);break e}rt&&rt(r,_e,de),r==="focusout"&&(rt=_e._wrapperState)&&rt.controlled&&_e.type==="number"&&Et(_e,"number",_e.value)}switch(rt=de?wa(de):window,r){case"focusin":(Rt(rt)||rt.contentEditable==="true")&&(Vn=rt,Wt=de,_n=null);break;case"focusout":_n=Wt=Vn=null;break;case"mousedown":pr=!0;break;case"contextmenu":case"mouseup":case"dragend":pr=!1,Rs(Te,g,ve);break;case"selectionchange":if(fi)break;case"keydown":case"keyup":Rs(Te,g,ve)}var it;if(un)e:{switch(r){case"compositionstart":var ut="onCompositionStart";break e;case"compositionend":ut="onCompositionEnd";break e;case"compositionupdate":ut="onCompositionUpdate";break e}ut=void 0}else gr?eu(r,g)&&(ut="onCompositionEnd"):r==="keydown"&&g.keyCode===229&&(ut="onCompositionStart");ut&&(ir&&g.locale!=="ko"&&(gr||ut!=="onCompositionStart"?ut==="onCompositionEnd"&&gr&&(it=Bo()):(Tr=ve,Zs="value"in Tr?Tr.value:Tr.textContent,gr=!0)),rt=ru(de,ut),0<rt.length&&(ut=new jt(ut,r,null,g,ve),Te.push({event:ut,listeners:rt}),it?ut.data=it:(it=nl(g),it!==null&&(ut.data=it)))),(it=Rr?Kc(r,g):rl(r,g))&&(de=ru(de,"onBeforeInput"),0<de.length&&(ve=new jt("onBeforeInput","beforeinput",null,g,ve),Te.push({event:ve,listeners:de}),ve.data=it))}w1(Te,l)})}function al(r,l,g){return{instance:r,listener:l,currentTarget:g}}function ru(r,l){for(var g=l+"Capture",w=[];r!==null;){var v=r,T=v.stateNode;v.tag===5&&T!==null&&(v=T,T=Bt(r,g),T!=null&&w.unshift(al(r,T,v)),T=Bt(r,l),T!=null&&w.push(al(r,T,v))),r=r.return}return w}function ma(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5);return r||null}function x1(r,l,g,w,v){for(var T=l._reactName,O=[];g!==null&&g!==w;){var X=g,Z=X.alternate,de=X.stateNode;if(Z!==null&&Z===w)break;X.tag===5&&de!==null&&(X=de,v?(Z=Bt(g,T),Z!=null&&O.unshift(al(g,Z,X))):v||(Z=Bt(g,T),Z!=null&&O.push(al(g,Z,X)))),g=g.return}O.length!==0&&r.push({event:l,listeners:O})}var Ry=/\r\n?/g,Ny=/\u0000|\uFFFD/g;function A1(r){return(typeof r=="string"?r:""+r).replace(Ry,`
`).replace(Ny,"")}function iu(r,l,g){if(l=A1(l),A1(r)!==l&&g)throw Error(n(425))}function su(){}var th=null,nh=null;function rh(r,l){return r==="textarea"||r==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var ih=typeof setTimeout=="function"?setTimeout:void 0,Dy=typeof clearTimeout=="function"?clearTimeout:void 0,_1=typeof Promise=="function"?Promise:void 0,by=typeof queueMicrotask=="function"?queueMicrotask:typeof _1<"u"?function(r){return _1.resolve(null).then(r).catch(My)}:ih;function My(r){setTimeout(function(){throw r})}function sh(r,l){var g=l,w=0;do{var v=g.nextSibling;if(r.removeChild(g),v&&v.nodeType===8)if(g=v.data,g==="/$"){if(w===0){r.removeChild(v),fr(l);return}w--}else g!=="$"&&g!=="$?"&&g!=="$!"||w++;g=v}while(g);fr(l)}function no(r){for(;r!=null;r=r.nextSibling){var l=r.nodeType;if(l===1||l===3)break;if(l===8){if(l=r.data,l==="$"||l==="$!"||l==="$?")break;if(l==="/$")return null}}return r}function C1(r){r=r.previousSibling;for(var l=0;r;){if(r.nodeType===8){var g=r.data;if(g==="$"||g==="$!"||g==="$?"){if(l===0)return r;l--}else g==="/$"&&l++}r=r.previousSibling}return null}var ya=Math.random().toString(36).slice(2),is="__reactFiber$"+ya,ll="__reactProps$"+ya,Ns="__reactContainer$"+ya,oh="__reactEvents$"+ya,Oy="__reactListeners$"+ya,Py="__reactHandles$"+ya;function Uo(r){var l=r[is];if(l)return l;for(var g=r.parentNode;g;){if(l=g[Ns]||g[is]){if(g=l.alternate,l.child!==null||g!==null&&g.child!==null)for(r=C1(r);r!==null;){if(g=r[is])return g;r=C1(r)}return l}r=g,g=r.parentNode}return null}function ul(r){return r=r[is]||r[Ns],!r||r.tag!==5&&r.tag!==6&&r.tag!==13&&r.tag!==3?null:r}function wa(r){if(r.tag===5||r.tag===6)return r.stateNode;throw Error(n(33))}function ou(r){return r[ll]||null}var ah=[],Ea=-1;function ro(r){return{current:r}}function fn(r){0>Ea||(r.current=ah[Ea],ah[Ea]=null,Ea--)}function on(r,l){Ea++,ah[Ea]=r.current,r.current=l}var io={},Dr=ro(io),Zr=ro(!1),zo=io;function xa(r,l){var g=r.type.contextTypes;if(!g)return io;var w=r.stateNode;if(w&&w.__reactInternalMemoizedUnmaskedChildContext===l)return w.__reactInternalMemoizedMaskedChildContext;var v={},T;for(T in g)v[T]=l[T];return w&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=l,r.__reactInternalMemoizedMaskedChildContext=v),v}function $r(r){return r=r.childContextTypes,r!=null}function au(){fn(Zr),fn(Dr)}function v1(r,l,g){if(Dr.current!==io)throw Error(n(168));on(Dr,l),on(Zr,g)}function I1(r,l,g){var w=r.stateNode;if(l=l.childContextTypes,typeof w.getChildContext!="function")return g;w=w.getChildContext();for(var v in w)if(!(v in l))throw Error(n(108,ft(r)||"Unknown",v));return ke({},g,w)}function lu(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||io,zo=Dr.current,on(Dr,r),on(Zr,Zr.current),!0}function T1(r,l,g){var w=r.stateNode;if(!w)throw Error(n(169));g?(r=I1(r,l,zo),w.__reactInternalMemoizedMergedChildContext=r,fn(Zr),fn(Dr),on(Dr,r)):fn(Zr),on(Zr,g)}var Ds=null,uu=!1,lh=!1;function S1(r){Ds===null?Ds=[r]:Ds.push(r)}function Ly(r){uu=!0,S1(r)}function so(){if(!lh&&Ds!==null){lh=!0;var r=0,l=at;try{var g=Ds;for(at=1;r<g.length;r++){var w=g[r];do w=w(!0);while(w!==null)}Ds=null,uu=!1}catch(v){throw Ds!==null&&(Ds=Ds.slice(r+1)),hr(xe,so),v}finally{at=l,lh=!1}}return null}var Aa=[],_a=0,cu=null,hu=0,Ii=[],Ti=0,jo=null,bs=1,Ms="";function Ho(r,l){Aa[_a++]=hu,Aa[_a++]=cu,cu=r,hu=l}function R1(r,l,g){Ii[Ti++]=bs,Ii[Ti++]=Ms,Ii[Ti++]=jo,jo=r;var w=bs;r=Ms;var v=32-Yn(w)-1;w&=~(1<<v),g+=1;var T=32-Yn(l)+v;if(30<T){var O=v-v%5;T=(w&(1<<O)-1).toString(32),w>>=O,v-=O,bs=1<<32-Yn(l)+v|g<<v|w,Ms=T+r}else bs=1<<T|g<<v|w,Ms=r}function uh(r){r.return!==null&&(Ho(r,1),R1(r,1,0))}function ch(r){for(;r===cu;)cu=Aa[--_a],Aa[_a]=null,hu=Aa[--_a],Aa[_a]=null;for(;r===jo;)jo=Ii[--Ti],Ii[Ti]=null,Ms=Ii[--Ti],Ii[Ti]=null,bs=Ii[--Ti],Ii[Ti]=null}var di=null,gi=null,En=!1,Ui=null;function N1(r,l){var g=Di(5,null,null,0);g.elementType="DELETED",g.stateNode=l,g.return=r,l=r.deletions,l===null?(r.deletions=[g],r.flags|=16):l.push(g)}function D1(r,l){switch(r.tag){case 5:var g=r.type;return l=l.nodeType!==1||g.toLowerCase()!==l.nodeName.toLowerCase()?null:l,l!==null?(r.stateNode=l,di=r,gi=no(l.firstChild),!0):!1;case 6:return l=r.pendingProps===""||l.nodeType!==3?null:l,l!==null?(r.stateNode=l,di=r,gi=null,!0):!1;case 13:return l=l.nodeType!==8?null:l,l!==null?(g=jo!==null?{id:bs,overflow:Ms}:null,r.memoizedState={dehydrated:l,treeContext:g,retryLane:1073741824},g=Di(18,null,null,0),g.stateNode=l,g.return=r,r.child=g,di=r,gi=null,!0):!1;default:return!1}}function hh(r){return(r.mode&1)!==0&&(r.flags&128)===0}function fh(r){if(En){var l=gi;if(l){var g=l;if(!D1(r,l)){if(hh(r))throw Error(n(418));l=no(g.nextSibling);var w=di;l&&D1(r,l)?N1(w,g):(r.flags=r.flags&-4097|2,En=!1,di=r)}}else{if(hh(r))throw Error(n(418));r.flags=r.flags&-4097|2,En=!1,di=r}}}function b1(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;di=r}function fu(r){if(r!==di)return!1;if(!En)return b1(r),En=!0,!1;var l;if((l=r.tag!==3)&&!(l=r.tag!==5)&&(l=r.type,l=l!=="head"&&l!=="body"&&!rh(r.type,r.memoizedProps)),l&&(l=gi)){if(hh(r))throw M1(),Error(n(418));for(;l;)N1(r,l),l=no(l.nextSibling)}if(b1(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(n(317));e:{for(r=r.nextSibling,l=0;r;){if(r.nodeType===8){var g=r.data;if(g==="/$"){if(l===0){gi=no(r.nextSibling);break e}l--}else g!=="$"&&g!=="$!"&&g!=="$?"||l++}r=r.nextSibling}gi=null}}else gi=di?no(r.stateNode.nextSibling):null;return!0}function M1(){for(var r=gi;r;)r=no(r.nextSibling)}function Ca(){gi=di=null,En=!1}function dh(r){Ui===null?Ui=[r]:Ui.push(r)}var ky=pe.ReactCurrentBatchConfig;function cl(r,l,g){if(r=g.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(g._owner){if(g=g._owner,g){if(g.tag!==1)throw Error(n(309));var w=g.stateNode}if(!w)throw Error(n(147,r));var v=w,T=""+r;return l!==null&&l.ref!==null&&typeof l.ref=="function"&&l.ref._stringRef===T?l.ref:(l=function(O){var X=v.refs;O===null?delete X[T]:X[T]=O},l._stringRef=T,l)}if(typeof r!="string")throw Error(n(284));if(!g._owner)throw Error(n(290,r))}return r}function du(r,l){throw r=Object.prototype.toString.call(l),Error(n(31,r==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":r))}function O1(r){var l=r._init;return l(r._payload)}function P1(r){function l(ae,ee){if(r){var le=ae.deletions;le===null?(ae.deletions=[ee],ae.flags|=16):le.push(ee)}}function g(ae,ee){if(!r)return null;for(;ee!==null;)l(ae,ee),ee=ee.sibling;return null}function w(ae,ee){for(ae=new Map;ee!==null;)ee.key!==null?ae.set(ee.key,ee):ae.set(ee.index,ee),ee=ee.sibling;return ae}function v(ae,ee){return ae=go(ae,ee),ae.index=0,ae.sibling=null,ae}function T(ae,ee,le){return ae.index=le,r?(le=ae.alternate,le!==null?(le=le.index,le<ee?(ae.flags|=2,ee):le):(ae.flags|=2,ee)):(ae.flags|=1048576,ee)}function O(ae){return r&&ae.alternate===null&&(ae.flags|=2),ae}function X(ae,ee,le,De){return ee===null||ee.tag!==6?(ee=sf(le,ae.mode,De),ee.return=ae,ee):(ee=v(ee,le),ee.return=ae,ee)}function Z(ae,ee,le,De){var Ke=le.type;return Ke===F?ve(ae,ee,le.props.children,De,le.key):ee!==null&&(ee.elementType===Ke||typeof Ke=="object"&&Ke!==null&&Ke.$$typeof===yt&&O1(Ke)===ee.type)?(De=v(ee,le.props),De.ref=cl(ae,ee,le),De.return=ae,De):(De=Bu(le.type,le.key,le.props,null,ae.mode,De),De.ref=cl(ae,ee,le),De.return=ae,De)}function de(ae,ee,le,De){return ee===null||ee.tag!==4||ee.stateNode.containerInfo!==le.containerInfo||ee.stateNode.implementation!==le.implementation?(ee=of(le,ae.mode,De),ee.return=ae,ee):(ee=v(ee,le.children||[]),ee.return=ae,ee)}function ve(ae,ee,le,De,Ke){return ee===null||ee.tag!==7?(ee=Zo(le,ae.mode,De,Ke),ee.return=ae,ee):(ee=v(ee,le),ee.return=ae,ee)}function Te(ae,ee,le){if(typeof ee=="string"&&ee!==""||typeof ee=="number")return ee=sf(""+ee,ae.mode,le),ee.return=ae,ee;if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case Ge:return le=Bu(ee.type,ee.key,ee.props,null,ae.mode,le),le.ref=cl(ae,null,ee),le.return=ae,le;case we:return ee=of(ee,ae.mode,le),ee.return=ae,ee;case yt:var De=ee._init;return Te(ae,De(ee._payload),le)}if(Gr(ee)||Ye(ee))return ee=Zo(ee,ae.mode,le,null),ee.return=ae,ee;du(ae,ee)}return null}function _e(ae,ee,le,De){var Ke=ee!==null?ee.key:null;if(typeof le=="string"&&le!==""||typeof le=="number")return Ke!==null?null:X(ae,ee,""+le,De);if(typeof le=="object"&&le!==null){switch(le.$$typeof){case Ge:return le.key===Ke?Z(ae,ee,le,De):null;case we:return le.key===Ke?de(ae,ee,le,De):null;case yt:return Ke=le._init,_e(ae,ee,Ke(le._payload),De)}if(Gr(le)||Ye(le))return Ke!==null?null:ve(ae,ee,le,De,null);du(ae,le)}return null}function Ue(ae,ee,le,De,Ke){if(typeof De=="string"&&De!==""||typeof De=="number")return ae=ae.get(le)||null,X(ee,ae,""+De,Ke);if(typeof De=="object"&&De!==null){switch(De.$$typeof){case Ge:return ae=ae.get(De.key===null?le:De.key)||null,Z(ee,ae,De,Ke);case we:return ae=ae.get(De.key===null?le:De.key)||null,de(ee,ae,De,Ke);case yt:var rt=De._init;return Ue(ae,ee,le,rt(De._payload),Ke)}if(Gr(De)||Ye(De))return ae=ae.get(le)||null,ve(ee,ae,De,Ke,null);du(ee,De)}return null}function Xe(ae,ee,le,De){for(var Ke=null,rt=null,it=ee,ut=ee=0,ar=null;it!==null&&ut<le.length;ut++){it.index>ut?(ar=it,it=null):ar=it.sibling;var Vt=_e(ae,it,le[ut],De);if(Vt===null){it===null&&(it=ar);break}r&&it&&Vt.alternate===null&&l(ae,it),ee=T(Vt,ee,ut),rt===null?Ke=Vt:rt.sibling=Vt,rt=Vt,it=ar}if(ut===le.length)return g(ae,it),En&&Ho(ae,ut),Ke;if(it===null){for(;ut<le.length;ut++)it=Te(ae,le[ut],De),it!==null&&(ee=T(it,ee,ut),rt===null?Ke=it:rt.sibling=it,rt=it);return En&&Ho(ae,ut),Ke}for(it=w(ae,it);ut<le.length;ut++)ar=Ue(it,ae,ut,le[ut],De),ar!==null&&(r&&ar.alternate!==null&&it.delete(ar.key===null?ut:ar.key),ee=T(ar,ee,ut),rt===null?Ke=ar:rt.sibling=ar,rt=ar);return r&&it.forEach(function(po){return l(ae,po)}),En&&Ho(ae,ut),Ke}function qe(ae,ee,le,De){var Ke=Ye(le);if(typeof Ke!="function")throw Error(n(150));if(le=Ke.call(le),le==null)throw Error(n(151));for(var rt=Ke=null,it=ee,ut=ee=0,ar=null,Vt=le.next();it!==null&&!Vt.done;ut++,Vt=le.next()){it.index>ut?(ar=it,it=null):ar=it.sibling;var po=_e(ae,it,Vt.value,De);if(po===null){it===null&&(it=ar);break}r&&it&&po.alternate===null&&l(ae,it),ee=T(po,ee,ut),rt===null?Ke=po:rt.sibling=po,rt=po,it=ar}if(Vt.done)return g(ae,it),En&&Ho(ae,ut),Ke;if(it===null){for(;!Vt.done;ut++,Vt=le.next())Vt=Te(ae,Vt.value,De),Vt!==null&&(ee=T(Vt,ee,ut),rt===null?Ke=Vt:rt.sibling=Vt,rt=Vt);return En&&Ho(ae,ut),Ke}for(it=w(ae,it);!Vt.done;ut++,Vt=le.next())Vt=Ue(it,ae,ut,Vt.value,De),Vt!==null&&(r&&Vt.alternate!==null&&it.delete(Vt.key===null?ut:Vt.key),ee=T(Vt,ee,ut),rt===null?Ke=Vt:rt.sibling=Vt,rt=Vt);return r&&it.forEach(function(pw){return l(ae,pw)}),En&&Ho(ae,ut),Ke}function Un(ae,ee,le,De){if(typeof le=="object"&&le!==null&&le.type===F&&le.key===null&&(le=le.props.children),typeof le=="object"&&le!==null){switch(le.$$typeof){case Ge:e:{for(var Ke=le.key,rt=ee;rt!==null;){if(rt.key===Ke){if(Ke=le.type,Ke===F){if(rt.tag===7){g(ae,rt.sibling),ee=v(rt,le.props.children),ee.return=ae,ae=ee;break e}}else if(rt.elementType===Ke||typeof Ke=="object"&&Ke!==null&&Ke.$$typeof===yt&&O1(Ke)===rt.type){g(ae,rt.sibling),ee=v(rt,le.props),ee.ref=cl(ae,rt,le),ee.return=ae,ae=ee;break e}g(ae,rt);break}else l(ae,rt);rt=rt.sibling}le.type===F?(ee=Zo(le.props.children,ae.mode,De,le.key),ee.return=ae,ae=ee):(De=Bu(le.type,le.key,le.props,null,ae.mode,De),De.ref=cl(ae,ee,le),De.return=ae,ae=De)}return O(ae);case we:e:{for(rt=le.key;ee!==null;){if(ee.key===rt)if(ee.tag===4&&ee.stateNode.containerInfo===le.containerInfo&&ee.stateNode.implementation===le.implementation){g(ae,ee.sibling),ee=v(ee,le.children||[]),ee.return=ae,ae=ee;break e}else{g(ae,ee);break}else l(ae,ee);ee=ee.sibling}ee=of(le,ae.mode,De),ee.return=ae,ae=ee}return O(ae);case yt:return rt=le._init,Un(ae,ee,rt(le._payload),De)}if(Gr(le))return Xe(ae,ee,le,De);if(Ye(le))return qe(ae,ee,le,De);du(ae,le)}return typeof le=="string"&&le!==""||typeof le=="number"?(le=""+le,ee!==null&&ee.tag===6?(g(ae,ee.sibling),ee=v(ee,le),ee.return=ae,ae=ee):(g(ae,ee),ee=sf(le,ae.mode,De),ee.return=ae,ae=ee),O(ae)):g(ae,ee)}return Un}var va=P1(!0),L1=P1(!1),gu=ro(null),pu=null,Ia=null,gh=null;function ph(){gh=Ia=pu=null}function mh(r){var l=gu.current;fn(gu),r._currentValue=l}function yh(r,l,g){for(;r!==null;){var w=r.alternate;if((r.childLanes&l)!==l?(r.childLanes|=l,w!==null&&(w.childLanes|=l)):w!==null&&(w.childLanes&l)!==l&&(w.childLanes|=l),r===g)break;r=r.return}}function Ta(r,l){pu=r,gh=Ia=null,r=r.dependencies,r!==null&&r.firstContext!==null&&((r.lanes&l)!==0&&(Jr=!0),r.firstContext=null)}function Si(r){var l=r._currentValue;if(gh!==r)if(r={context:r,memoizedValue:l,next:null},Ia===null){if(pu===null)throw Error(n(308));Ia=r,pu.dependencies={lanes:0,firstContext:r}}else Ia=Ia.next=r;return l}var Wo=null;function wh(r){Wo===null?Wo=[r]:Wo.push(r)}function k1(r,l,g,w){var v=l.interleaved;return v===null?(g.next=g,wh(l)):(g.next=v.next,v.next=g),l.interleaved=g,Os(r,w)}function Os(r,l){r.lanes|=l;var g=r.alternate;for(g!==null&&(g.lanes|=l),g=r,r=r.return;r!==null;)r.childLanes|=l,g=r.alternate,g!==null&&(g.childLanes|=l),g=r,r=r.return;return g.tag===3?g.stateNode:null}var oo=!1;function Eh(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function B1(r,l){r=r.updateQueue,l.updateQueue===r&&(l.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function Ps(r,l){return{eventTime:r,lane:l,tag:0,payload:null,callback:null,next:null}}function ao(r,l,g){var w=r.updateQueue;if(w===null)return null;if(w=w.shared,(kt&2)!==0){var v=w.pending;return v===null?l.next=l:(l.next=v.next,v.next=l),w.pending=l,Os(r,g)}return v=w.interleaved,v===null?(l.next=l,wh(w)):(l.next=v.next,v.next=l),w.interleaved=l,Os(r,g)}function mu(r,l,g){if(l=l.updateQueue,l!==null&&(l=l.shared,(g&4194240)!==0)){var w=l.lanes;w&=r.pendingLanes,g|=w,l.lanes=g,Jt(r,g)}}function F1(r,l){var g=r.updateQueue,w=r.alternate;if(w!==null&&(w=w.updateQueue,g===w)){var v=null,T=null;if(g=g.firstBaseUpdate,g!==null){do{var O={eventTime:g.eventTime,lane:g.lane,tag:g.tag,payload:g.payload,callback:g.callback,next:null};T===null?v=T=O:T=T.next=O,g=g.next}while(g!==null);T===null?v=T=l:T=T.next=l}else v=T=l;g={baseState:w.baseState,firstBaseUpdate:v,lastBaseUpdate:T,shared:w.shared,effects:w.effects},r.updateQueue=g;return}r=g.lastBaseUpdate,r===null?g.firstBaseUpdate=l:r.next=l,g.lastBaseUpdate=l}function yu(r,l,g,w){var v=r.updateQueue;oo=!1;var T=v.firstBaseUpdate,O=v.lastBaseUpdate,X=v.shared.pending;if(X!==null){v.shared.pending=null;var Z=X,de=Z.next;Z.next=null,O===null?T=de:O.next=de,O=Z;var ve=r.alternate;ve!==null&&(ve=ve.updateQueue,X=ve.lastBaseUpdate,X!==O&&(X===null?ve.firstBaseUpdate=de:X.next=de,ve.lastBaseUpdate=Z))}if(T!==null){var Te=v.baseState;O=0,ve=de=Z=null,X=T;do{var _e=X.lane,Ue=X.eventTime;if((w&_e)===_e){ve!==null&&(ve=ve.next={eventTime:Ue,lane:0,tag:X.tag,payload:X.payload,callback:X.callback,next:null});e:{var Xe=r,qe=X;switch(_e=l,Ue=g,qe.tag){case 1:if(Xe=qe.payload,typeof Xe=="function"){Te=Xe.call(Ue,Te,_e);break e}Te=Xe;break e;case 3:Xe.flags=Xe.flags&-65537|128;case 0:if(Xe=qe.payload,_e=typeof Xe=="function"?Xe.call(Ue,Te,_e):Xe,_e==null)break e;Te=ke({},Te,_e);break e;case 2:oo=!0}}X.callback!==null&&X.lane!==0&&(r.flags|=64,_e=v.effects,_e===null?v.effects=[X]:_e.push(X))}else Ue={eventTime:Ue,lane:_e,tag:X.tag,payload:X.payload,callback:X.callback,next:null},ve===null?(de=ve=Ue,Z=Te):ve=ve.next=Ue,O|=_e;if(X=X.next,X===null){if(X=v.shared.pending,X===null)break;_e=X,X=_e.next,_e.next=null,v.lastBaseUpdate=_e,v.shared.pending=null}}while(!0);if(ve===null&&(Z=Te),v.baseState=Z,v.firstBaseUpdate=de,v.lastBaseUpdate=ve,l=v.shared.interleaved,l!==null){v=l;do O|=v.lane,v=v.next;while(v!==l)}else T===null&&(v.shared.lanes=0);Xo|=O,r.lanes=O,r.memoizedState=Te}}function V1(r,l,g){if(r=l.effects,l.effects=null,r!==null)for(l=0;l<r.length;l++){var w=r[l],v=w.callback;if(v!==null){if(w.callback=null,w=g,typeof v!="function")throw Error(n(191,v));v.call(w)}}}var hl={},ss=ro(hl),fl=ro(hl),dl=ro(hl);function Go(r){if(r===hl)throw Error(n(174));return r}function xh(r,l){switch(on(dl,l),on(fl,r),on(ss,hl),r=l.nodeType,r){case 9:case 11:l=(l=l.documentElement)?l.namespaceURI:Sn(null,"");break;default:r=r===8?l.parentNode:l,l=r.namespaceURI||null,r=r.tagName,l=Sn(l,r)}fn(ss),on(ss,l)}function Sa(){fn(ss),fn(fl),fn(dl)}function U1(r){Go(dl.current);var l=Go(ss.current),g=Sn(l,r.type);l!==g&&(on(fl,r),on(ss,g))}function Ah(r){fl.current===r&&(fn(ss),fn(fl))}var Cn=ro(0);function wu(r){for(var l=r;l!==null;){if(l.tag===13){var g=l.memoizedState;if(g!==null&&(g=g.dehydrated,g===null||g.data==="$?"||g.data==="$!"))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===r)break;for(;l.sibling===null;){if(l.return===null||l.return===r)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var _h=[];function Ch(){for(var r=0;r<_h.length;r++)_h[r]._workInProgressVersionPrimary=null;_h.length=0}var Eu=pe.ReactCurrentDispatcher,vh=pe.ReactCurrentBatchConfig,Yo=0,vn=null,Qn=null,sr=null,xu=!1,gl=!1,pl=0,By=0;function br(){throw Error(n(321))}function Ih(r,l){if(l===null)return!1;for(var g=0;g<l.length&&g<r.length;g++)if(!re(r[g],l[g]))return!1;return!0}function Th(r,l,g,w,v,T){if(Yo=T,vn=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,Eu.current=r===null||r.memoizedState===null?zy:jy,r=g(w,v),gl){T=0;do{if(gl=!1,pl=0,25<=T)throw Error(n(301));T+=1,sr=Qn=null,l.updateQueue=null,Eu.current=Hy,r=g(w,v)}while(gl)}if(Eu.current=Cu,l=Qn!==null&&Qn.next!==null,Yo=0,sr=Qn=vn=null,xu=!1,l)throw Error(n(300));return r}function Sh(){var r=pl!==0;return pl=0,r}function os(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return sr===null?vn.memoizedState=sr=r:sr=sr.next=r,sr}function Ri(){if(Qn===null){var r=vn.alternate;r=r!==null?r.memoizedState:null}else r=Qn.next;var l=sr===null?vn.memoizedState:sr.next;if(l!==null)sr=l,Qn=r;else{if(r===null)throw Error(n(310));Qn=r,r={memoizedState:Qn.memoizedState,baseState:Qn.baseState,baseQueue:Qn.baseQueue,queue:Qn.queue,next:null},sr===null?vn.memoizedState=sr=r:sr=sr.next=r}return sr}function ml(r,l){return typeof l=="function"?l(r):l}function Rh(r){var l=Ri(),g=l.queue;if(g===null)throw Error(n(311));g.lastRenderedReducer=r;var w=Qn,v=w.baseQueue,T=g.pending;if(T!==null){if(v!==null){var O=v.next;v.next=T.next,T.next=O}w.baseQueue=v=T,g.pending=null}if(v!==null){T=v.next,w=w.baseState;var X=O=null,Z=null,de=T;do{var ve=de.lane;if((Yo&ve)===ve)Z!==null&&(Z=Z.next={lane:0,action:de.action,hasEagerState:de.hasEagerState,eagerState:de.eagerState,next:null}),w=de.hasEagerState?de.eagerState:r(w,de.action);else{var Te={lane:ve,action:de.action,hasEagerState:de.hasEagerState,eagerState:de.eagerState,next:null};Z===null?(X=Z=Te,O=w):Z=Z.next=Te,vn.lanes|=ve,Xo|=ve}de=de.next}while(de!==null&&de!==T);Z===null?O=w:Z.next=X,re(w,l.memoizedState)||(Jr=!0),l.memoizedState=w,l.baseState=O,l.baseQueue=Z,g.lastRenderedState=w}if(r=g.interleaved,r!==null){v=r;do T=v.lane,vn.lanes|=T,Xo|=T,v=v.next;while(v!==r)}else v===null&&(g.lanes=0);return[l.memoizedState,g.dispatch]}function Nh(r){var l=Ri(),g=l.queue;if(g===null)throw Error(n(311));g.lastRenderedReducer=r;var w=g.dispatch,v=g.pending,T=l.memoizedState;if(v!==null){g.pending=null;var O=v=v.next;do T=r(T,O.action),O=O.next;while(O!==v);re(T,l.memoizedState)||(Jr=!0),l.memoizedState=T,l.baseQueue===null&&(l.baseState=T),g.lastRenderedState=T}return[T,w]}function z1(){}function j1(r,l){var g=vn,w=Ri(),v=l(),T=!re(w.memoizedState,v);if(T&&(w.memoizedState=v,Jr=!0),w=w.queue,Dh(G1.bind(null,g,w,r),[r]),w.getSnapshot!==l||T||sr!==null&&sr.memoizedState.tag&1){if(g.flags|=2048,yl(9,W1.bind(null,g,w,v,l),void 0,null),or===null)throw Error(n(349));(Yo&30)!==0||H1(g,l,v)}return v}function H1(r,l,g){r.flags|=16384,r={getSnapshot:l,value:g},l=vn.updateQueue,l===null?(l={lastEffect:null,stores:null},vn.updateQueue=l,l.stores=[r]):(g=l.stores,g===null?l.stores=[r]:g.push(r))}function W1(r,l,g,w){l.value=g,l.getSnapshot=w,Y1(l)&&X1(r)}function G1(r,l,g){return g(function(){Y1(l)&&X1(r)})}function Y1(r){var l=r.getSnapshot;r=r.value;try{var g=l();return!re(r,g)}catch{return!0}}function X1(r){var l=Os(r,1);l!==null&&Wi(l,r,1,-1)}function q1(r){var l=os();return typeof r=="function"&&(r=r()),l.memoizedState=l.baseState=r,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ml,lastRenderedState:r},l.queue=r,r=r.dispatch=Uy.bind(null,vn,r),[l.memoizedState,r]}function yl(r,l,g,w){return r={tag:r,create:l,destroy:g,deps:w,next:null},l=vn.updateQueue,l===null?(l={lastEffect:null,stores:null},vn.updateQueue=l,l.lastEffect=r.next=r):(g=l.lastEffect,g===null?l.lastEffect=r.next=r:(w=g.next,g.next=r,r.next=w,l.lastEffect=r)),r}function Q1(){return Ri().memoizedState}function Au(r,l,g,w){var v=os();vn.flags|=r,v.memoizedState=yl(1|l,g,void 0,w===void 0?null:w)}function _u(r,l,g,w){var v=Ri();w=w===void 0?null:w;var T=void 0;if(Qn!==null){var O=Qn.memoizedState;if(T=O.destroy,w!==null&&Ih(w,O.deps)){v.memoizedState=yl(l,g,T,w);return}}vn.flags|=r,v.memoizedState=yl(1|l,g,T,w)}function K1(r,l){return Au(8390656,8,r,l)}function Dh(r,l){return _u(2048,8,r,l)}function Z1(r,l){return _u(4,2,r,l)}function $1(r,l){return _u(4,4,r,l)}function J1(r,l){if(typeof l=="function")return r=r(),l(r),function(){l(null)};if(l!=null)return r=r(),l.current=r,function(){l.current=null}}function e0(r,l,g){return g=g!=null?g.concat([r]):null,_u(4,4,J1.bind(null,l,r),g)}function bh(){}function t0(r,l){var g=Ri();l=l===void 0?null:l;var w=g.memoizedState;return w!==null&&l!==null&&Ih(l,w[1])?w[0]:(g.memoizedState=[r,l],r)}function n0(r,l){var g=Ri();l=l===void 0?null:l;var w=g.memoizedState;return w!==null&&l!==null&&Ih(l,w[1])?w[0]:(r=r(),g.memoizedState=[r,l],r)}function r0(r,l,g){return(Yo&21)===0?(r.baseState&&(r.baseState=!1,Jr=!0),r.memoizedState=g):(re(g,l)||(g=yn(),vn.lanes|=g,Xo|=g,r.baseState=!0),l)}function Fy(r,l){var g=at;at=g!==0&&4>g?g:4,r(!0);var w=vh.transition;vh.transition={};try{r(!1),l()}finally{at=g,vh.transition=w}}function i0(){return Ri().memoizedState}function Vy(r,l,g){var w=ho(r);if(g={lane:w,action:g,hasEagerState:!1,eagerState:null,next:null},s0(r))o0(l,g);else if(g=k1(r,l,g,w),g!==null){var v=Hr();Wi(g,r,w,v),a0(g,l,w)}}function Uy(r,l,g){var w=ho(r),v={lane:w,action:g,hasEagerState:!1,eagerState:null,next:null};if(s0(r))o0(l,v);else{var T=r.alternate;if(r.lanes===0&&(T===null||T.lanes===0)&&(T=l.lastRenderedReducer,T!==null))try{var O=l.lastRenderedState,X=T(O,g);if(v.hasEagerState=!0,v.eagerState=X,re(X,O)){var Z=l.interleaved;Z===null?(v.next=v,wh(l)):(v.next=Z.next,Z.next=v),l.interleaved=v;return}}catch{}finally{}g=k1(r,l,v,w),g!==null&&(v=Hr(),Wi(g,r,w,v),a0(g,l,w))}}function s0(r){var l=r.alternate;return r===vn||l!==null&&l===vn}function o0(r,l){gl=xu=!0;var g=r.pending;g===null?l.next=l:(l.next=g.next,g.next=l),r.pending=l}function a0(r,l,g){if((g&4194240)!==0){var w=l.lanes;w&=r.pendingLanes,g|=w,l.lanes=g,Jt(r,g)}}var Cu={readContext:Si,useCallback:br,useContext:br,useEffect:br,useImperativeHandle:br,useInsertionEffect:br,useLayoutEffect:br,useMemo:br,useReducer:br,useRef:br,useState:br,useDebugValue:br,useDeferredValue:br,useTransition:br,useMutableSource:br,useSyncExternalStore:br,useId:br,unstable_isNewReconciler:!1},zy={readContext:Si,useCallback:function(r,l){return os().memoizedState=[r,l===void 0?null:l],r},useContext:Si,useEffect:K1,useImperativeHandle:function(r,l,g){return g=g!=null?g.concat([r]):null,Au(4194308,4,J1.bind(null,l,r),g)},useLayoutEffect:function(r,l){return Au(4194308,4,r,l)},useInsertionEffect:function(r,l){return Au(4,2,r,l)},useMemo:function(r,l){var g=os();return l=l===void 0?null:l,r=r(),g.memoizedState=[r,l],r},useReducer:function(r,l,g){var w=os();return l=g!==void 0?g(l):l,w.memoizedState=w.baseState=l,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:l},w.queue=r,r=r.dispatch=Vy.bind(null,vn,r),[w.memoizedState,r]},useRef:function(r){var l=os();return r={current:r},l.memoizedState=r},useState:q1,useDebugValue:bh,useDeferredValue:function(r){return os().memoizedState=r},useTransition:function(){var r=q1(!1),l=r[0];return r=Fy.bind(null,r[1]),os().memoizedState=r,[l,r]},useMutableSource:function(){},useSyncExternalStore:function(r,l,g){var w=vn,v=os();if(En){if(g===void 0)throw Error(n(407));g=g()}else{if(g=l(),or===null)throw Error(n(349));(Yo&30)!==0||H1(w,l,g)}v.memoizedState=g;var T={value:g,getSnapshot:l};return v.queue=T,K1(G1.bind(null,w,T,r),[r]),w.flags|=2048,yl(9,W1.bind(null,w,T,g,l),void 0,null),g},useId:function(){var r=os(),l=or.identifierPrefix;if(En){var g=Ms,w=bs;g=(w&~(1<<32-Yn(w)-1)).toString(32)+g,l=":"+l+"R"+g,g=pl++,0<g&&(l+="H"+g.toString(32)),l+=":"}else g=By++,l=":"+l+"r"+g.toString(32)+":";return r.memoizedState=l},unstable_isNewReconciler:!1},jy={readContext:Si,useCallback:t0,useContext:Si,useEffect:Dh,useImperativeHandle:e0,useInsertionEffect:Z1,useLayoutEffect:$1,useMemo:n0,useReducer:Rh,useRef:Q1,useState:function(){return Rh(ml)},useDebugValue:bh,useDeferredValue:function(r){var l=Ri();return r0(l,Qn.memoizedState,r)},useTransition:function(){var r=Rh(ml)[0],l=Ri().memoizedState;return[r,l]},useMutableSource:z1,useSyncExternalStore:j1,useId:i0,unstable_isNewReconciler:!1},Hy={readContext:Si,useCallback:t0,useContext:Si,useEffect:Dh,useImperativeHandle:e0,useInsertionEffect:Z1,useLayoutEffect:$1,useMemo:n0,useReducer:Nh,useRef:Q1,useState:function(){return Nh(ml)},useDebugValue:bh,useDeferredValue:function(r){var l=Ri();return Qn===null?l.memoizedState=r:r0(l,Qn.memoizedState,r)},useTransition:function(){var r=Nh(ml)[0],l=Ri().memoizedState;return[r,l]},useMutableSource:z1,useSyncExternalStore:j1,useId:i0,unstable_isNewReconciler:!1};function zi(r,l){if(r&&r.defaultProps){l=ke({},l),r=r.defaultProps;for(var g in r)l[g]===void 0&&(l[g]=r[g]);return l}return l}function Mh(r,l,g,w){l=r.memoizedState,g=g(w,l),g=g==null?l:ke({},l,g),r.memoizedState=g,r.lanes===0&&(r.updateQueue.baseState=g)}var vu={isMounted:function(r){return(r=r._reactInternals)?nr(r)===r:!1},enqueueSetState:function(r,l,g){r=r._reactInternals;var w=Hr(),v=ho(r),T=Ps(w,v);T.payload=l,g!=null&&(T.callback=g),l=ao(r,T,v),l!==null&&(Wi(l,r,v,w),mu(l,r,v))},enqueueReplaceState:function(r,l,g){r=r._reactInternals;var w=Hr(),v=ho(r),T=Ps(w,v);T.tag=1,T.payload=l,g!=null&&(T.callback=g),l=ao(r,T,v),l!==null&&(Wi(l,r,v,w),mu(l,r,v))},enqueueForceUpdate:function(r,l){r=r._reactInternals;var g=Hr(),w=ho(r),v=Ps(g,w);v.tag=2,l!=null&&(v.callback=l),l=ao(r,v,w),l!==null&&(Wi(l,r,w,g),mu(l,r,w))}};function l0(r,l,g,w,v,T,O){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(w,T,O):l.prototype&&l.prototype.isPureReactComponent?!fe(g,w)||!fe(v,T):!0}function u0(r,l,g){var w=!1,v=io,T=l.contextType;return typeof T=="object"&&T!==null?T=Si(T):(v=$r(l)?zo:Dr.current,w=l.contextTypes,T=(w=w!=null)?xa(r,v):io),l=new l(g,T),r.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,l.updater=vu,r.stateNode=l,l._reactInternals=r,w&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=v,r.__reactInternalMemoizedMaskedChildContext=T),l}function c0(r,l,g,w){r=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(g,w),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(g,w),l.state!==r&&vu.enqueueReplaceState(l,l.state,null)}function Oh(r,l,g,w){var v=r.stateNode;v.props=g,v.state=r.memoizedState,v.refs={},Eh(r);var T=l.contextType;typeof T=="object"&&T!==null?v.context=Si(T):(T=$r(l)?zo:Dr.current,v.context=xa(r,T)),v.state=r.memoizedState,T=l.getDerivedStateFromProps,typeof T=="function"&&(Mh(r,l,T,g),v.state=r.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(l=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),l!==v.state&&vu.enqueueReplaceState(v,v.state,null),yu(r,g,v,w),v.state=r.memoizedState),typeof v.componentDidMount=="function"&&(r.flags|=4194308)}function Ra(r,l){try{var g="",w=l;do g+=ct(w),w=w.return;while(w);var v=g}catch(T){v=`
Error generating stack: `+T.message+`
`+T.stack}return{value:r,source:l,stack:v,digest:null}}function Ph(r,l,g){return{value:r,source:null,stack:g??null,digest:l??null}}function Lh(r,l){try{console.error(l.value)}catch(g){setTimeout(function(){throw g})}}var Wy=typeof WeakMap=="function"?WeakMap:Map;function h0(r,l,g){g=Ps(-1,g),g.tag=3,g.payload={element:null};var w=l.value;return g.callback=function(){bu||(bu=!0,Kh=w),Lh(r,l)},g}function f0(r,l,g){g=Ps(-1,g),g.tag=3;var w=r.type.getDerivedStateFromError;if(typeof w=="function"){var v=l.value;g.payload=function(){return w(v)},g.callback=function(){Lh(r,l)}}var T=r.stateNode;return T!==null&&typeof T.componentDidCatch=="function"&&(g.callback=function(){Lh(r,l),typeof w!="function"&&(uo===null?uo=new Set([this]):uo.add(this));var O=l.stack;this.componentDidCatch(l.value,{componentStack:O!==null?O:""})}),g}function d0(r,l,g){var w=r.pingCache;if(w===null){w=r.pingCache=new Wy;var v=new Set;w.set(l,v)}else v=w.get(l),v===void 0&&(v=new Set,w.set(l,v));v.has(g)||(v.add(g),r=iw.bind(null,r,l,g),l.then(r,r))}function g0(r){do{var l;if((l=r.tag===13)&&(l=r.memoizedState,l=l!==null?l.dehydrated!==null:!0),l)return r;r=r.return}while(r!==null);return null}function p0(r,l,g,w,v){return(r.mode&1)===0?(r===l?r.flags|=65536:(r.flags|=128,g.flags|=131072,g.flags&=-52805,g.tag===1&&(g.alternate===null?g.tag=17:(l=Ps(-1,1),l.tag=2,ao(g,l,1))),g.lanes|=1),r):(r.flags|=65536,r.lanes=v,r)}var Gy=pe.ReactCurrentOwner,Jr=!1;function jr(r,l,g,w){l.child=r===null?L1(l,null,g,w):va(l,r.child,g,w)}function m0(r,l,g,w,v){g=g.render;var T=l.ref;return Ta(l,v),w=Th(r,l,g,w,T,v),g=Sh(),r!==null&&!Jr?(l.updateQueue=r.updateQueue,l.flags&=-2053,r.lanes&=~v,Ls(r,l,v)):(En&&g&&uh(l),l.flags|=1,jr(r,l,w,v),l.child)}function y0(r,l,g,w,v){if(r===null){var T=g.type;return typeof T=="function"&&!rf(T)&&T.defaultProps===void 0&&g.compare===null&&g.defaultProps===void 0?(l.tag=15,l.type=T,w0(r,l,T,w,v)):(r=Bu(g.type,null,w,l,l.mode,v),r.ref=l.ref,r.return=l,l.child=r)}if(T=r.child,(r.lanes&v)===0){var O=T.memoizedProps;if(g=g.compare,g=g!==null?g:fe,g(O,w)&&r.ref===l.ref)return Ls(r,l,v)}return l.flags|=1,r=go(T,w),r.ref=l.ref,r.return=l,l.child=r}function w0(r,l,g,w,v){if(r!==null){var T=r.memoizedProps;if(fe(T,w)&&r.ref===l.ref)if(Jr=!1,l.pendingProps=w=T,(r.lanes&v)!==0)(r.flags&131072)!==0&&(Jr=!0);else return l.lanes=r.lanes,Ls(r,l,v)}return kh(r,l,g,w,v)}function E0(r,l,g){var w=l.pendingProps,v=w.children,T=r!==null?r.memoizedState:null;if(w.mode==="hidden")if((l.mode&1)===0)l.memoizedState={baseLanes:0,cachePool:null,transitions:null},on(Da,pi),pi|=g;else{if((g&1073741824)===0)return r=T!==null?T.baseLanes|g:g,l.lanes=l.childLanes=1073741824,l.memoizedState={baseLanes:r,cachePool:null,transitions:null},l.updateQueue=null,on(Da,pi),pi|=r,null;l.memoizedState={baseLanes:0,cachePool:null,transitions:null},w=T!==null?T.baseLanes:g,on(Da,pi),pi|=w}else T!==null?(w=T.baseLanes|g,l.memoizedState=null):w=g,on(Da,pi),pi|=w;return jr(r,l,v,g),l.child}function x0(r,l){var g=l.ref;(r===null&&g!==null||r!==null&&r.ref!==g)&&(l.flags|=512,l.flags|=2097152)}function kh(r,l,g,w,v){var T=$r(g)?zo:Dr.current;return T=xa(l,T),Ta(l,v),g=Th(r,l,g,w,T,v),w=Sh(),r!==null&&!Jr?(l.updateQueue=r.updateQueue,l.flags&=-2053,r.lanes&=~v,Ls(r,l,v)):(En&&w&&uh(l),l.flags|=1,jr(r,l,g,v),l.child)}function A0(r,l,g,w,v){if($r(g)){var T=!0;lu(l)}else T=!1;if(Ta(l,v),l.stateNode===null)Tu(r,l),u0(l,g,w),Oh(l,g,w,v),w=!0;else if(r===null){var O=l.stateNode,X=l.memoizedProps;O.props=X;var Z=O.context,de=g.contextType;typeof de=="object"&&de!==null?de=Si(de):(de=$r(g)?zo:Dr.current,de=xa(l,de));var ve=g.getDerivedStateFromProps,Te=typeof ve=="function"||typeof O.getSnapshotBeforeUpdate=="function";Te||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(X!==w||Z!==de)&&c0(l,O,w,de),oo=!1;var _e=l.memoizedState;O.state=_e,yu(l,w,O,v),Z=l.memoizedState,X!==w||_e!==Z||Zr.current||oo?(typeof ve=="function"&&(Mh(l,g,ve,w),Z=l.memoizedState),(X=oo||l0(l,g,X,w,_e,Z,de))?(Te||typeof O.UNSAFE_componentWillMount!="function"&&typeof O.componentWillMount!="function"||(typeof O.componentWillMount=="function"&&O.componentWillMount(),typeof O.UNSAFE_componentWillMount=="function"&&O.UNSAFE_componentWillMount()),typeof O.componentDidMount=="function"&&(l.flags|=4194308)):(typeof O.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=w,l.memoizedState=Z),O.props=w,O.state=Z,O.context=de,w=X):(typeof O.componentDidMount=="function"&&(l.flags|=4194308),w=!1)}else{O=l.stateNode,B1(r,l),X=l.memoizedProps,de=l.type===l.elementType?X:zi(l.type,X),O.props=de,Te=l.pendingProps,_e=O.context,Z=g.contextType,typeof Z=="object"&&Z!==null?Z=Si(Z):(Z=$r(g)?zo:Dr.current,Z=xa(l,Z));var Ue=g.getDerivedStateFromProps;(ve=typeof Ue=="function"||typeof O.getSnapshotBeforeUpdate=="function")||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(X!==Te||_e!==Z)&&c0(l,O,w,Z),oo=!1,_e=l.memoizedState,O.state=_e,yu(l,w,O,v);var Xe=l.memoizedState;X!==Te||_e!==Xe||Zr.current||oo?(typeof Ue=="function"&&(Mh(l,g,Ue,w),Xe=l.memoizedState),(de=oo||l0(l,g,de,w,_e,Xe,Z)||!1)?(ve||typeof O.UNSAFE_componentWillUpdate!="function"&&typeof O.componentWillUpdate!="function"||(typeof O.componentWillUpdate=="function"&&O.componentWillUpdate(w,Xe,Z),typeof O.UNSAFE_componentWillUpdate=="function"&&O.UNSAFE_componentWillUpdate(w,Xe,Z)),typeof O.componentDidUpdate=="function"&&(l.flags|=4),typeof O.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof O.componentDidUpdate!="function"||X===r.memoizedProps&&_e===r.memoizedState||(l.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||X===r.memoizedProps&&_e===r.memoizedState||(l.flags|=1024),l.memoizedProps=w,l.memoizedState=Xe),O.props=w,O.state=Xe,O.context=Z,w=de):(typeof O.componentDidUpdate!="function"||X===r.memoizedProps&&_e===r.memoizedState||(l.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||X===r.memoizedProps&&_e===r.memoizedState||(l.flags|=1024),w=!1)}return Bh(r,l,g,w,T,v)}function Bh(r,l,g,w,v,T){x0(r,l);var O=(l.flags&128)!==0;if(!w&&!O)return v&&T1(l,g,!1),Ls(r,l,T);w=l.stateNode,Gy.current=l;var X=O&&typeof g.getDerivedStateFromError!="function"?null:w.render();return l.flags|=1,r!==null&&O?(l.child=va(l,r.child,null,T),l.child=va(l,null,X,T)):jr(r,l,X,T),l.memoizedState=w.state,v&&T1(l,g,!0),l.child}function _0(r){var l=r.stateNode;l.pendingContext?v1(r,l.pendingContext,l.pendingContext!==l.context):l.context&&v1(r,l.context,!1),xh(r,l.containerInfo)}function C0(r,l,g,w,v){return Ca(),dh(v),l.flags|=256,jr(r,l,g,w),l.child}var Fh={dehydrated:null,treeContext:null,retryLane:0};function Vh(r){return{baseLanes:r,cachePool:null,transitions:null}}function v0(r,l,g){var w=l.pendingProps,v=Cn.current,T=!1,O=(l.flags&128)!==0,X;if((X=O)||(X=r!==null&&r.memoizedState===null?!1:(v&2)!==0),X?(T=!0,l.flags&=-129):(r===null||r.memoizedState!==null)&&(v|=1),on(Cn,v&1),r===null)return fh(l),r=l.memoizedState,r!==null&&(r=r.dehydrated,r!==null)?((l.mode&1)===0?l.lanes=1:r.data==="$!"?l.lanes=8:l.lanes=1073741824,null):(O=w.children,r=w.fallback,T?(w=l.mode,T=l.child,O={mode:"hidden",children:O},(w&1)===0&&T!==null?(T.childLanes=0,T.pendingProps=O):T=Fu(O,w,0,null),r=Zo(r,w,g,null),T.return=l,r.return=l,T.sibling=r,l.child=T,l.child.memoizedState=Vh(g),l.memoizedState=Fh,r):Uh(l,O));if(v=r.memoizedState,v!==null&&(X=v.dehydrated,X!==null))return Yy(r,l,O,w,X,v,g);if(T){T=w.fallback,O=l.mode,v=r.child,X=v.sibling;var Z={mode:"hidden",children:w.children};return(O&1)===0&&l.child!==v?(w=l.child,w.childLanes=0,w.pendingProps=Z,l.deletions=null):(w=go(v,Z),w.subtreeFlags=v.subtreeFlags&14680064),X!==null?T=go(X,T):(T=Zo(T,O,g,null),T.flags|=2),T.return=l,w.return=l,w.sibling=T,l.child=w,w=T,T=l.child,O=r.child.memoizedState,O=O===null?Vh(g):{baseLanes:O.baseLanes|g,cachePool:null,transitions:O.transitions},T.memoizedState=O,T.childLanes=r.childLanes&~g,l.memoizedState=Fh,w}return T=r.child,r=T.sibling,w=go(T,{mode:"visible",children:w.children}),(l.mode&1)===0&&(w.lanes=g),w.return=l,w.sibling=null,r!==null&&(g=l.deletions,g===null?(l.deletions=[r],l.flags|=16):g.push(r)),l.child=w,l.memoizedState=null,w}function Uh(r,l){return l=Fu({mode:"visible",children:l},r.mode,0,null),l.return=r,r.child=l}function Iu(r,l,g,w){return w!==null&&dh(w),va(l,r.child,null,g),r=Uh(l,l.pendingProps.children),r.flags|=2,l.memoizedState=null,r}function Yy(r,l,g,w,v,T,O){if(g)return l.flags&256?(l.flags&=-257,w=Ph(Error(n(422))),Iu(r,l,O,w)):l.memoizedState!==null?(l.child=r.child,l.flags|=128,null):(T=w.fallback,v=l.mode,w=Fu({mode:"visible",children:w.children},v,0,null),T=Zo(T,v,O,null),T.flags|=2,w.return=l,T.return=l,w.sibling=T,l.child=w,(l.mode&1)!==0&&va(l,r.child,null,O),l.child.memoizedState=Vh(O),l.memoizedState=Fh,T);if((l.mode&1)===0)return Iu(r,l,O,null);if(v.data==="$!"){if(w=v.nextSibling&&v.nextSibling.dataset,w)var X=w.dgst;return w=X,T=Error(n(419)),w=Ph(T,w,void 0),Iu(r,l,O,w)}if(X=(O&r.childLanes)!==0,Jr||X){if(w=or,w!==null){switch(O&-O){case 4:v=2;break;case 16:v=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:v=32;break;case 536870912:v=268435456;break;default:v=0}v=(v&(w.suspendedLanes|O))!==0?0:v,v!==0&&v!==T.retryLane&&(T.retryLane=v,Os(r,v),Wi(w,r,v,-1))}return nf(),w=Ph(Error(n(421))),Iu(r,l,O,w)}return v.data==="$?"?(l.flags|=128,l.child=r.child,l=sw.bind(null,r),v._reactRetry=l,null):(r=T.treeContext,gi=no(v.nextSibling),di=l,En=!0,Ui=null,r!==null&&(Ii[Ti++]=bs,Ii[Ti++]=Ms,Ii[Ti++]=jo,bs=r.id,Ms=r.overflow,jo=l),l=Uh(l,w.children),l.flags|=4096,l)}function I0(r,l,g){r.lanes|=l;var w=r.alternate;w!==null&&(w.lanes|=l),yh(r.return,l,g)}function zh(r,l,g,w,v){var T=r.memoizedState;T===null?r.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:w,tail:g,tailMode:v}:(T.isBackwards=l,T.rendering=null,T.renderingStartTime=0,T.last=w,T.tail=g,T.tailMode=v)}function T0(r,l,g){var w=l.pendingProps,v=w.revealOrder,T=w.tail;if(jr(r,l,w.children,g),w=Cn.current,(w&2)!==0)w=w&1|2,l.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=l.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&I0(r,g,l);else if(r.tag===19)I0(r,g,l);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===l)break e;for(;r.sibling===null;){if(r.return===null||r.return===l)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}w&=1}if(on(Cn,w),(l.mode&1)===0)l.memoizedState=null;else switch(v){case"forwards":for(g=l.child,v=null;g!==null;)r=g.alternate,r!==null&&wu(r)===null&&(v=g),g=g.sibling;g=v,g===null?(v=l.child,l.child=null):(v=g.sibling,g.sibling=null),zh(l,!1,v,g,T);break;case"backwards":for(g=null,v=l.child,l.child=null;v!==null;){if(r=v.alternate,r!==null&&wu(r)===null){l.child=v;break}r=v.sibling,v.sibling=g,g=v,v=r}zh(l,!0,g,null,T);break;case"together":zh(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function Tu(r,l){(l.mode&1)===0&&r!==null&&(r.alternate=null,l.alternate=null,l.flags|=2)}function Ls(r,l,g){if(r!==null&&(l.dependencies=r.dependencies),Xo|=l.lanes,(g&l.childLanes)===0)return null;if(r!==null&&l.child!==r.child)throw Error(n(153));if(l.child!==null){for(r=l.child,g=go(r,r.pendingProps),l.child=g,g.return=l;r.sibling!==null;)r=r.sibling,g=g.sibling=go(r,r.pendingProps),g.return=l;g.sibling=null}return l.child}function Xy(r,l,g){switch(l.tag){case 3:_0(l),Ca();break;case 5:U1(l);break;case 1:$r(l.type)&&lu(l);break;case 4:xh(l,l.stateNode.containerInfo);break;case 10:var w=l.type._context,v=l.memoizedProps.value;on(gu,w._currentValue),w._currentValue=v;break;case 13:if(w=l.memoizedState,w!==null)return w.dehydrated!==null?(on(Cn,Cn.current&1),l.flags|=128,null):(g&l.child.childLanes)!==0?v0(r,l,g):(on(Cn,Cn.current&1),r=Ls(r,l,g),r!==null?r.sibling:null);on(Cn,Cn.current&1);break;case 19:if(w=(g&l.childLanes)!==0,(r.flags&128)!==0){if(w)return T0(r,l,g);l.flags|=128}if(v=l.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),on(Cn,Cn.current),w)break;return null;case 22:case 23:return l.lanes=0,E0(r,l,g)}return Ls(r,l,g)}var S0,jh,R0,N0;S0=function(r,l){for(var g=l.child;g!==null;){if(g.tag===5||g.tag===6)r.appendChild(g.stateNode);else if(g.tag!==4&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===l)break;for(;g.sibling===null;){if(g.return===null||g.return===l)return;g=g.return}g.sibling.return=g.return,g=g.sibling}},jh=function(){},R0=function(r,l,g,w){var v=r.memoizedProps;if(v!==w){r=l.stateNode,Go(ss.current);var T=null;switch(g){case"input":v=Wr(r,v),w=Wr(r,w),T=[];break;case"select":v=ke({},v,{value:void 0}),w=ke({},w,{value:void 0}),T=[];break;case"textarea":v=Xi(r,v),w=Xi(r,w),T=[];break;default:typeof v.onClick!="function"&&typeof w.onClick=="function"&&(r.onclick=su)}Lt(g,w);var O;g=null;for(de in v)if(!w.hasOwnProperty(de)&&v.hasOwnProperty(de)&&v[de]!=null)if(de==="style"){var X=v[de];for(O in X)X.hasOwnProperty(O)&&(g||(g={}),g[O]="")}else de!=="dangerouslySetInnerHTML"&&de!=="children"&&de!=="suppressContentEditableWarning"&&de!=="suppressHydrationWarning"&&de!=="autoFocus"&&(u.hasOwnProperty(de)?T||(T=[]):(T=T||[]).push(de,null));for(de in w){var Z=w[de];if(X=v!=null?v[de]:void 0,w.hasOwnProperty(de)&&Z!==X&&(Z!=null||X!=null))if(de==="style")if(X){for(O in X)!X.hasOwnProperty(O)||Z&&Z.hasOwnProperty(O)||(g||(g={}),g[O]="");for(O in Z)Z.hasOwnProperty(O)&&X[O]!==Z[O]&&(g||(g={}),g[O]=Z[O])}else g||(T||(T=[]),T.push(de,g)),g=Z;else de==="dangerouslySetInnerHTML"?(Z=Z?Z.__html:void 0,X=X?X.__html:void 0,Z!=null&&X!==Z&&(T=T||[]).push(de,Z)):de==="children"?typeof Z!="string"&&typeof Z!="number"||(T=T||[]).push(de,""+Z):de!=="suppressContentEditableWarning"&&de!=="suppressHydrationWarning"&&(u.hasOwnProperty(de)?(Z!=null&&de==="onScroll"&&hn("scroll",r),T||X===Z||(T=[])):(T=T||[]).push(de,Z))}g&&(T=T||[]).push("style",g);var de=T;(l.updateQueue=de)&&(l.flags|=4)}},N0=function(r,l,g,w){g!==w&&(l.flags|=4)};function wl(r,l){if(!En)switch(r.tailMode){case"hidden":l=r.tail;for(var g=null;l!==null;)l.alternate!==null&&(g=l),l=l.sibling;g===null?r.tail=null:g.sibling=null;break;case"collapsed":g=r.tail;for(var w=null;g!==null;)g.alternate!==null&&(w=g),g=g.sibling;w===null?l||r.tail===null?r.tail=null:r.tail.sibling=null:w.sibling=null}}function Mr(r){var l=r.alternate!==null&&r.alternate.child===r.child,g=0,w=0;if(l)for(var v=r.child;v!==null;)g|=v.lanes|v.childLanes,w|=v.subtreeFlags&14680064,w|=v.flags&14680064,v.return=r,v=v.sibling;else for(v=r.child;v!==null;)g|=v.lanes|v.childLanes,w|=v.subtreeFlags,w|=v.flags,v.return=r,v=v.sibling;return r.subtreeFlags|=w,r.childLanes=g,l}function qy(r,l,g){var w=l.pendingProps;switch(ch(l),l.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Mr(l),null;case 1:return $r(l.type)&&au(),Mr(l),null;case 3:return w=l.stateNode,Sa(),fn(Zr),fn(Dr),Ch(),w.pendingContext&&(w.context=w.pendingContext,w.pendingContext=null),(r===null||r.child===null)&&(fu(l)?l.flags|=4:r===null||r.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,Ui!==null&&(Jh(Ui),Ui=null))),jh(r,l),Mr(l),null;case 5:Ah(l);var v=Go(dl.current);if(g=l.type,r!==null&&l.stateNode!=null)R0(r,l,g,w,v),r.ref!==l.ref&&(l.flags|=512,l.flags|=2097152);else{if(!w){if(l.stateNode===null)throw Error(n(166));return Mr(l),null}if(r=Go(ss.current),fu(l)){w=l.stateNode,g=l.type;var T=l.memoizedProps;switch(w[is]=l,w[ll]=T,r=(l.mode&1)!==0,g){case"dialog":hn("cancel",w),hn("close",w);break;case"iframe":case"object":case"embed":hn("load",w);break;case"video":case"audio":for(v=0;v<sl.length;v++)hn(sl[v],w);break;case"source":hn("error",w);break;case"img":case"image":case"link":hn("error",w),hn("load",w);break;case"details":hn("toggle",w);break;case"input":ur(w,T),hn("invalid",w);break;case"select":w._wrapperState={wasMultiple:!!T.multiple},hn("invalid",w);break;case"textarea":ys(w,T),hn("invalid",w)}Lt(g,T),v=null;for(var O in T)if(T.hasOwnProperty(O)){var X=T[O];O==="children"?typeof X=="string"?w.textContent!==X&&(T.suppressHydrationWarning!==!0&&iu(w.textContent,X,r),v=["children",X]):typeof X=="number"&&w.textContent!==""+X&&(T.suppressHydrationWarning!==!0&&iu(w.textContent,X,r),v=["children",""+X]):u.hasOwnProperty(O)&&X!=null&&O==="onScroll"&&hn("scroll",w)}switch(g){case"input":gn(w),Ut(w,T,!0);break;case"textarea":gn(w),ws(w);break;case"select":case"option":break;default:typeof T.onClick=="function"&&(w.onclick=su)}w=v,l.updateQueue=w,w!==null&&(l.flags|=4)}else{O=v.nodeType===9?v:v.ownerDocument,r==="http://www.w3.org/1999/xhtml"&&(r=zt(g)),r==="http://www.w3.org/1999/xhtml"?g==="script"?(r=O.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild)):typeof w.is=="string"?r=O.createElement(g,{is:w.is}):(r=O.createElement(g),g==="select"&&(O=r,w.multiple?O.multiple=!0:w.size&&(O.size=w.size))):r=O.createElementNS(r,g),r[is]=l,r[ll]=w,S0(r,l,!1,!1),l.stateNode=r;e:{switch(O=Zt(g,w),g){case"dialog":hn("cancel",r),hn("close",r),v=w;break;case"iframe":case"object":case"embed":hn("load",r),v=w;break;case"video":case"audio":for(v=0;v<sl.length;v++)hn(sl[v],r);v=w;break;case"source":hn("error",r),v=w;break;case"img":case"image":case"link":hn("error",r),hn("load",r),v=w;break;case"details":hn("toggle",r),v=w;break;case"input":ur(r,w),v=Wr(r,w),hn("invalid",r);break;case"option":v=w;break;case"select":r._wrapperState={wasMultiple:!!w.multiple},v=ke({},w,{value:void 0}),hn("invalid",r);break;case"textarea":ys(r,w),v=Xi(r,w),hn("invalid",r);break;default:v=w}Lt(g,v),X=v;for(T in X)if(X.hasOwnProperty(T)){var Z=X[T];T==="style"?Oe(r,Z):T==="dangerouslySetInnerHTML"?(Z=Z?Z.__html:void 0,Z!=null&&Ln(r,Z)):T==="children"?typeof Z=="string"?(g!=="textarea"||Z!=="")&&Pi(r,Z):typeof Z=="number"&&Pi(r,""+Z):T!=="suppressContentEditableWarning"&&T!=="suppressHydrationWarning"&&T!=="autoFocus"&&(u.hasOwnProperty(T)?Z!=null&&T==="onScroll"&&hn("scroll",r):Z!=null&&te(r,T,Z,O))}switch(g){case"input":gn(r),Ut(r,w,!1);break;case"textarea":gn(r),ws(r);break;case"option":w.value!=null&&r.setAttribute("value",""+Qe(w.value));break;case"select":r.multiple=!!w.multiple,T=w.value,T!=null?Ve(r,!!w.multiple,T,!1):w.defaultValue!=null&&Ve(r,!!w.multiple,w.defaultValue,!0);break;default:typeof v.onClick=="function"&&(r.onclick=su)}switch(g){case"button":case"input":case"select":case"textarea":w=!!w.autoFocus;break e;case"img":w=!0;break e;default:w=!1}}w&&(l.flags|=4)}l.ref!==null&&(l.flags|=512,l.flags|=2097152)}return Mr(l),null;case 6:if(r&&l.stateNode!=null)N0(r,l,r.memoizedProps,w);else{if(typeof w!="string"&&l.stateNode===null)throw Error(n(166));if(g=Go(dl.current),Go(ss.current),fu(l)){if(w=l.stateNode,g=l.memoizedProps,w[is]=l,(T=w.nodeValue!==g)&&(r=di,r!==null))switch(r.tag){case 3:iu(w.nodeValue,g,(r.mode&1)!==0);break;case 5:r.memoizedProps.suppressHydrationWarning!==!0&&iu(w.nodeValue,g,(r.mode&1)!==0)}T&&(l.flags|=4)}else w=(g.nodeType===9?g:g.ownerDocument).createTextNode(w),w[is]=l,l.stateNode=w}return Mr(l),null;case 13:if(fn(Cn),w=l.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(En&&gi!==null&&(l.mode&1)!==0&&(l.flags&128)===0)M1(),Ca(),l.flags|=98560,T=!1;else if(T=fu(l),w!==null&&w.dehydrated!==null){if(r===null){if(!T)throw Error(n(318));if(T=l.memoizedState,T=T!==null?T.dehydrated:null,!T)throw Error(n(317));T[is]=l}else Ca(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;Mr(l),T=!1}else Ui!==null&&(Jh(Ui),Ui=null),T=!0;if(!T)return l.flags&65536?l:null}return(l.flags&128)!==0?(l.lanes=g,l):(w=w!==null,w!==(r!==null&&r.memoizedState!==null)&&w&&(l.child.flags|=8192,(l.mode&1)!==0&&(r===null||(Cn.current&1)!==0?Kn===0&&(Kn=3):nf())),l.updateQueue!==null&&(l.flags|=4),Mr(l),null);case 4:return Sa(),jh(r,l),r===null&&ol(l.stateNode.containerInfo),Mr(l),null;case 10:return mh(l.type._context),Mr(l),null;case 17:return $r(l.type)&&au(),Mr(l),null;case 19:if(fn(Cn),T=l.memoizedState,T===null)return Mr(l),null;if(w=(l.flags&128)!==0,O=T.rendering,O===null)if(w)wl(T,!1);else{if(Kn!==0||r!==null&&(r.flags&128)!==0)for(r=l.child;r!==null;){if(O=wu(r),O!==null){for(l.flags|=128,wl(T,!1),w=O.updateQueue,w!==null&&(l.updateQueue=w,l.flags|=4),l.subtreeFlags=0,w=g,g=l.child;g!==null;)T=g,r=w,T.flags&=14680066,O=T.alternate,O===null?(T.childLanes=0,T.lanes=r,T.child=null,T.subtreeFlags=0,T.memoizedProps=null,T.memoizedState=null,T.updateQueue=null,T.dependencies=null,T.stateNode=null):(T.childLanes=O.childLanes,T.lanes=O.lanes,T.child=O.child,T.subtreeFlags=0,T.deletions=null,T.memoizedProps=O.memoizedProps,T.memoizedState=O.memoizedState,T.updateQueue=O.updateQueue,T.type=O.type,r=O.dependencies,T.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),g=g.sibling;return on(Cn,Cn.current&1|2),l.child}r=r.sibling}T.tail!==null&&Dt()>ba&&(l.flags|=128,w=!0,wl(T,!1),l.lanes=4194304)}else{if(!w)if(r=wu(O),r!==null){if(l.flags|=128,w=!0,g=r.updateQueue,g!==null&&(l.updateQueue=g,l.flags|=4),wl(T,!0),T.tail===null&&T.tailMode==="hidden"&&!O.alternate&&!En)return Mr(l),null}else 2*Dt()-T.renderingStartTime>ba&&g!==1073741824&&(l.flags|=128,w=!0,wl(T,!1),l.lanes=4194304);T.isBackwards?(O.sibling=l.child,l.child=O):(g=T.last,g!==null?g.sibling=O:l.child=O,T.last=O)}return T.tail!==null?(l=T.tail,T.rendering=l,T.tail=l.sibling,T.renderingStartTime=Dt(),l.sibling=null,g=Cn.current,on(Cn,w?g&1|2:g&1),l):(Mr(l),null);case 22:case 23:return tf(),w=l.memoizedState!==null,r!==null&&r.memoizedState!==null!==w&&(l.flags|=8192),w&&(l.mode&1)!==0?(pi&1073741824)!==0&&(Mr(l),l.subtreeFlags&6&&(l.flags|=8192)):Mr(l),null;case 24:return null;case 25:return null}throw Error(n(156,l.tag))}function Qy(r,l){switch(ch(l),l.tag){case 1:return $r(l.type)&&au(),r=l.flags,r&65536?(l.flags=r&-65537|128,l):null;case 3:return Sa(),fn(Zr),fn(Dr),Ch(),r=l.flags,(r&65536)!==0&&(r&128)===0?(l.flags=r&-65537|128,l):null;case 5:return Ah(l),null;case 13:if(fn(Cn),r=l.memoizedState,r!==null&&r.dehydrated!==null){if(l.alternate===null)throw Error(n(340));Ca()}return r=l.flags,r&65536?(l.flags=r&-65537|128,l):null;case 19:return fn(Cn),null;case 4:return Sa(),null;case 10:return mh(l.type._context),null;case 22:case 23:return tf(),null;case 24:return null;default:return null}}var Su=!1,Or=!1,Ky=typeof WeakSet=="function"?WeakSet:Set,We=null;function Na(r,l){var g=r.ref;if(g!==null)if(typeof g=="function")try{g(null)}catch(w){On(r,l,w)}else g.current=null}function Hh(r,l,g){try{g()}catch(w){On(r,l,w)}}var D0=!1;function Zy(r,l){if(th=qr,r=Ct(),ht(r)){if("selectionStart"in r)var g={start:r.selectionStart,end:r.selectionEnd};else e:{g=(g=r.ownerDocument)&&g.defaultView||window;var w=g.getSelection&&g.getSelection();if(w&&w.rangeCount!==0){g=w.anchorNode;var v=w.anchorOffset,T=w.focusNode;w=w.focusOffset;try{g.nodeType,T.nodeType}catch{g=null;break e}var O=0,X=-1,Z=-1,de=0,ve=0,Te=r,_e=null;t:for(;;){for(var Ue;Te!==g||v!==0&&Te.nodeType!==3||(X=O+v),Te!==T||w!==0&&Te.nodeType!==3||(Z=O+w),Te.nodeType===3&&(O+=Te.nodeValue.length),(Ue=Te.firstChild)!==null;)_e=Te,Te=Ue;for(;;){if(Te===r)break t;if(_e===g&&++de===v&&(X=O),_e===T&&++ve===w&&(Z=O),(Ue=Te.nextSibling)!==null)break;Te=_e,_e=Te.parentNode}Te=Ue}g=X===-1||Z===-1?null:{start:X,end:Z}}else g=null}g=g||{start:0,end:0}}else g=null;for(nh={focusedElem:r,selectionRange:g},qr=!1,We=l;We!==null;)if(l=We,r=l.child,(l.subtreeFlags&1028)!==0&&r!==null)r.return=l,We=r;else for(;We!==null;){l=We;try{var Xe=l.alternate;if((l.flags&1024)!==0)switch(l.tag){case 0:case 11:case 15:break;case 1:if(Xe!==null){var qe=Xe.memoizedProps,Un=Xe.memoizedState,ae=l.stateNode,ee=ae.getSnapshotBeforeUpdate(l.elementType===l.type?qe:zi(l.type,qe),Un);ae.__reactInternalSnapshotBeforeUpdate=ee}break;case 3:var le=l.stateNode.containerInfo;le.nodeType===1?le.textContent="":le.nodeType===9&&le.documentElement&&le.removeChild(le.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(De){On(l,l.return,De)}if(r=l.sibling,r!==null){r.return=l.return,We=r;break}We=l.return}return Xe=D0,D0=!1,Xe}function El(r,l,g){var w=l.updateQueue;if(w=w!==null?w.lastEffect:null,w!==null){var v=w=w.next;do{if((v.tag&r)===r){var T=v.destroy;v.destroy=void 0,T!==void 0&&Hh(l,g,T)}v=v.next}while(v!==w)}}function Ru(r,l){if(l=l.updateQueue,l=l!==null?l.lastEffect:null,l!==null){var g=l=l.next;do{if((g.tag&r)===r){var w=g.create;g.destroy=w()}g=g.next}while(g!==l)}}function Wh(r){var l=r.ref;if(l!==null){var g=r.stateNode;switch(r.tag){case 5:r=g;break;default:r=g}typeof l=="function"?l(r):l.current=r}}function b0(r){var l=r.alternate;l!==null&&(r.alternate=null,b0(l)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(l=r.stateNode,l!==null&&(delete l[is],delete l[ll],delete l[oh],delete l[Oy],delete l[Py])),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}function M0(r){return r.tag===5||r.tag===3||r.tag===4}function O0(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||M0(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function Gh(r,l,g){var w=r.tag;if(w===5||w===6)r=r.stateNode,l?g.nodeType===8?g.parentNode.insertBefore(r,l):g.insertBefore(r,l):(g.nodeType===8?(l=g.parentNode,l.insertBefore(r,g)):(l=g,l.appendChild(r)),g=g._reactRootContainer,g!=null||l.onclick!==null||(l.onclick=su));else if(w!==4&&(r=r.child,r!==null))for(Gh(r,l,g),r=r.sibling;r!==null;)Gh(r,l,g),r=r.sibling}function Yh(r,l,g){var w=r.tag;if(w===5||w===6)r=r.stateNode,l?g.insertBefore(r,l):g.appendChild(r);else if(w!==4&&(r=r.child,r!==null))for(Yh(r,l,g),r=r.sibling;r!==null;)Yh(r,l,g),r=r.sibling}var mr=null,ji=!1;function lo(r,l,g){for(g=g.child;g!==null;)P0(r,l,g),g=g.sibling}function P0(r,l,g){if(dt&&typeof dt.onCommitFiberUnmount=="function")try{dt.onCommitFiberUnmount(It,g)}catch{}switch(g.tag){case 5:Or||Na(g,l);case 6:var w=mr,v=ji;mr=null,lo(r,l,g),mr=w,ji=v,mr!==null&&(ji?(r=mr,g=g.stateNode,r.nodeType===8?r.parentNode.removeChild(g):r.removeChild(g)):mr.removeChild(g.stateNode));break;case 18:mr!==null&&(ji?(r=mr,g=g.stateNode,r.nodeType===8?sh(r.parentNode,g):r.nodeType===1&&sh(r,g),fr(r)):sh(mr,g.stateNode));break;case 4:w=mr,v=ji,mr=g.stateNode.containerInfo,ji=!0,lo(r,l,g),mr=w,ji=v;break;case 0:case 11:case 14:case 15:if(!Or&&(w=g.updateQueue,w!==null&&(w=w.lastEffect,w!==null))){v=w=w.next;do{var T=v,O=T.destroy;T=T.tag,O!==void 0&&((T&2)!==0||(T&4)!==0)&&Hh(g,l,O),v=v.next}while(v!==w)}lo(r,l,g);break;case 1:if(!Or&&(Na(g,l),w=g.stateNode,typeof w.componentWillUnmount=="function"))try{w.props=g.memoizedProps,w.state=g.memoizedState,w.componentWillUnmount()}catch(X){On(g,l,X)}lo(r,l,g);break;case 21:lo(r,l,g);break;case 22:g.mode&1?(Or=(w=Or)||g.memoizedState!==null,lo(r,l,g),Or=w):lo(r,l,g);break;default:lo(r,l,g)}}function L0(r){var l=r.updateQueue;if(l!==null){r.updateQueue=null;var g=r.stateNode;g===null&&(g=r.stateNode=new Ky),l.forEach(function(w){var v=ow.bind(null,r,w);g.has(w)||(g.add(w),w.then(v,v))})}}function Hi(r,l){var g=l.deletions;if(g!==null)for(var w=0;w<g.length;w++){var v=g[w];try{var T=r,O=l,X=O;e:for(;X!==null;){switch(X.tag){case 5:mr=X.stateNode,ji=!1;break e;case 3:mr=X.stateNode.containerInfo,ji=!0;break e;case 4:mr=X.stateNode.containerInfo,ji=!0;break e}X=X.return}if(mr===null)throw Error(n(160));P0(T,O,v),mr=null,ji=!1;var Z=v.alternate;Z!==null&&(Z.return=null),v.return=null}catch(de){On(v,l,de)}}if(l.subtreeFlags&12854)for(l=l.child;l!==null;)k0(l,r),l=l.sibling}function k0(r,l){var g=r.alternate,w=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:if(Hi(l,r),as(r),w&4){try{El(3,r,r.return),Ru(3,r)}catch(qe){On(r,r.return,qe)}try{El(5,r,r.return)}catch(qe){On(r,r.return,qe)}}break;case 1:Hi(l,r),as(r),w&512&&g!==null&&Na(g,g.return);break;case 5:if(Hi(l,r),as(r),w&512&&g!==null&&Na(g,g.return),r.flags&32){var v=r.stateNode;try{Pi(v,"")}catch(qe){On(r,r.return,qe)}}if(w&4&&(v=r.stateNode,v!=null)){var T=r.memoizedProps,O=g!==null?g.memoizedProps:T,X=r.type,Z=r.updateQueue;if(r.updateQueue=null,Z!==null)try{X==="input"&&T.type==="radio"&&T.name!=null&&Oi(v,T),Zt(X,O);var de=Zt(X,T);for(O=0;O<Z.length;O+=2){var ve=Z[O],Te=Z[O+1];ve==="style"?Oe(v,Te):ve==="dangerouslySetInnerHTML"?Ln(v,Te):ve==="children"?Pi(v,Te):te(v,ve,Te,de)}switch(X){case"input":An(v,T);break;case"textarea":Ar(v,T);break;case"select":var _e=v._wrapperState.wasMultiple;v._wrapperState.wasMultiple=!!T.multiple;var Ue=T.value;Ue!=null?Ve(v,!!T.multiple,Ue,!1):_e!==!!T.multiple&&(T.defaultValue!=null?Ve(v,!!T.multiple,T.defaultValue,!0):Ve(v,!!T.multiple,T.multiple?[]:"",!1))}v[ll]=T}catch(qe){On(r,r.return,qe)}}break;case 6:if(Hi(l,r),as(r),w&4){if(r.stateNode===null)throw Error(n(162));v=r.stateNode,T=r.memoizedProps;try{v.nodeValue=T}catch(qe){On(r,r.return,qe)}}break;case 3:if(Hi(l,r),as(r),w&4&&g!==null&&g.memoizedState.isDehydrated)try{fr(l.containerInfo)}catch(qe){On(r,r.return,qe)}break;case 4:Hi(l,r),as(r);break;case 13:Hi(l,r),as(r),v=r.child,v.flags&8192&&(T=v.memoizedState!==null,v.stateNode.isHidden=T,!T||v.alternate!==null&&v.alternate.memoizedState!==null||(Qh=Dt())),w&4&&L0(r);break;case 22:if(ve=g!==null&&g.memoizedState!==null,r.mode&1?(Or=(de=Or)||ve,Hi(l,r),Or=de):Hi(l,r),as(r),w&8192){if(de=r.memoizedState!==null,(r.stateNode.isHidden=de)&&!ve&&(r.mode&1)!==0)for(We=r,ve=r.child;ve!==null;){for(Te=We=ve;We!==null;){switch(_e=We,Ue=_e.child,_e.tag){case 0:case 11:case 14:case 15:El(4,_e,_e.return);break;case 1:Na(_e,_e.return);var Xe=_e.stateNode;if(typeof Xe.componentWillUnmount=="function"){w=_e,g=_e.return;try{l=w,Xe.props=l.memoizedProps,Xe.state=l.memoizedState,Xe.componentWillUnmount()}catch(qe){On(w,g,qe)}}break;case 5:Na(_e,_e.return);break;case 22:if(_e.memoizedState!==null){V0(Te);continue}}Ue!==null?(Ue.return=_e,We=Ue):V0(Te)}ve=ve.sibling}e:for(ve=null,Te=r;;){if(Te.tag===5){if(ve===null){ve=Te;try{v=Te.stateNode,de?(T=v.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none"):(X=Te.stateNode,Z=Te.memoizedProps.style,O=Z!=null&&Z.hasOwnProperty("display")?Z.display:null,X.style.display=rn("display",O))}catch(qe){On(r,r.return,qe)}}}else if(Te.tag===6){if(ve===null)try{Te.stateNode.nodeValue=de?"":Te.memoizedProps}catch(qe){On(r,r.return,qe)}}else if((Te.tag!==22&&Te.tag!==23||Te.memoizedState===null||Te===r)&&Te.child!==null){Te.child.return=Te,Te=Te.child;continue}if(Te===r)break e;for(;Te.sibling===null;){if(Te.return===null||Te.return===r)break e;ve===Te&&(ve=null),Te=Te.return}ve===Te&&(ve=null),Te.sibling.return=Te.return,Te=Te.sibling}}break;case 19:Hi(l,r),as(r),w&4&&L0(r);break;case 21:break;default:Hi(l,r),as(r)}}function as(r){var l=r.flags;if(l&2){try{e:{for(var g=r.return;g!==null;){if(M0(g)){var w=g;break e}g=g.return}throw Error(n(160))}switch(w.tag){case 5:var v=w.stateNode;w.flags&32&&(Pi(v,""),w.flags&=-33);var T=O0(r);Yh(r,T,v);break;case 3:case 4:var O=w.stateNode.containerInfo,X=O0(r);Gh(r,X,O);break;default:throw Error(n(161))}}catch(Z){On(r,r.return,Z)}r.flags&=-3}l&4096&&(r.flags&=-4097)}function $y(r,l,g){We=r,B0(r)}function B0(r,l,g){for(var w=(r.mode&1)!==0;We!==null;){var v=We,T=v.child;if(v.tag===22&&w){var O=v.memoizedState!==null||Su;if(!O){var X=v.alternate,Z=X!==null&&X.memoizedState!==null||Or;X=Su;var de=Or;if(Su=O,(Or=Z)&&!de)for(We=v;We!==null;)O=We,Z=O.child,O.tag===22&&O.memoizedState!==null?U0(v):Z!==null?(Z.return=O,We=Z):U0(v);for(;T!==null;)We=T,B0(T),T=T.sibling;We=v,Su=X,Or=de}F0(r)}else(v.subtreeFlags&8772)!==0&&T!==null?(T.return=v,We=T):F0(r)}}function F0(r){for(;We!==null;){var l=We;if((l.flags&8772)!==0){var g=l.alternate;try{if((l.flags&8772)!==0)switch(l.tag){case 0:case 11:case 15:Or||Ru(5,l);break;case 1:var w=l.stateNode;if(l.flags&4&&!Or)if(g===null)w.componentDidMount();else{var v=l.elementType===l.type?g.memoizedProps:zi(l.type,g.memoizedProps);w.componentDidUpdate(v,g.memoizedState,w.__reactInternalSnapshotBeforeUpdate)}var T=l.updateQueue;T!==null&&V1(l,T,w);break;case 3:var O=l.updateQueue;if(O!==null){if(g=null,l.child!==null)switch(l.child.tag){case 5:g=l.child.stateNode;break;case 1:g=l.child.stateNode}V1(l,O,g)}break;case 5:var X=l.stateNode;if(g===null&&l.flags&4){g=X;var Z=l.memoizedProps;switch(l.type){case"button":case"input":case"select":case"textarea":Z.autoFocus&&g.focus();break;case"img":Z.src&&(g.src=Z.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(l.memoizedState===null){var de=l.alternate;if(de!==null){var ve=de.memoizedState;if(ve!==null){var Te=ve.dehydrated;Te!==null&&fr(Te)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}Or||l.flags&512&&Wh(l)}catch(_e){On(l,l.return,_e)}}if(l===r){We=null;break}if(g=l.sibling,g!==null){g.return=l.return,We=g;break}We=l.return}}function V0(r){for(;We!==null;){var l=We;if(l===r){We=null;break}var g=l.sibling;if(g!==null){g.return=l.return,We=g;break}We=l.return}}function U0(r){for(;We!==null;){var l=We;try{switch(l.tag){case 0:case 11:case 15:var g=l.return;try{Ru(4,l)}catch(Z){On(l,g,Z)}break;case 1:var w=l.stateNode;if(typeof w.componentDidMount=="function"){var v=l.return;try{w.componentDidMount()}catch(Z){On(l,v,Z)}}var T=l.return;try{Wh(l)}catch(Z){On(l,T,Z)}break;case 5:var O=l.return;try{Wh(l)}catch(Z){On(l,O,Z)}}}catch(Z){On(l,l.return,Z)}if(l===r){We=null;break}var X=l.sibling;if(X!==null){X.return=l.return,We=X;break}We=l.return}}var Jy=Math.ceil,Nu=pe.ReactCurrentDispatcher,Xh=pe.ReactCurrentOwner,Ni=pe.ReactCurrentBatchConfig,kt=0,or=null,jn=null,yr=0,pi=0,Da=ro(0),Kn=0,xl=null,Xo=0,Du=0,qh=0,Al=null,ei=null,Qh=0,ba=1/0,ks=null,bu=!1,Kh=null,uo=null,Mu=!1,co=null,Ou=0,_l=0,Zh=null,Pu=-1,Lu=0;function Hr(){return(kt&6)!==0?Dt():Pu!==-1?Pu:Pu=Dt()}function ho(r){return(r.mode&1)===0?1:(kt&2)!==0&&yr!==0?yr&-yr:ky.transition!==null?(Lu===0&&(Lu=yn()),Lu):(r=at,r!==0||(r=window.event,r=r===void 0?16:Ks(r.type)),r)}function Wi(r,l,g,w){if(50<_l)throw _l=0,Zh=null,Error(n(185));z(r,g,w),((kt&2)===0||r!==or)&&(r===or&&((kt&2)===0&&(Du|=g),Kn===4&&fo(r,yr)),ti(r,w),g===1&&kt===0&&(l.mode&1)===0&&(ba=Dt()+500,uu&&so()))}function ti(r,l){var g=r.callbackNode;Ir(r,l);var w=vr(r,r===or?yr:0);if(w===0)g!==null&&kn(g),r.callbackNode=null,r.callbackPriority=0;else if(l=w&-w,r.callbackPriority!==l){if(g!=null&&kn(g),l===1)r.tag===0?Ly(j0.bind(null,r)):S1(j0.bind(null,r)),by(function(){(kt&6)===0&&so()}),g=null;else{switch(Ji(w)){case 1:g=xe;break;case 4:g=$i;break;case 16:g=bt;break;case 536870912:g=ca;break;default:g=bt}g=K0(g,z0.bind(null,r))}r.callbackPriority=l,r.callbackNode=g}}function z0(r,l){if(Pu=-1,Lu=0,(kt&6)!==0)throw Error(n(327));var g=r.callbackNode;if(Ma()&&r.callbackNode!==g)return null;var w=vr(r,r===or?yr:0);if(w===0)return null;if((w&30)!==0||(w&r.expiredLanes)!==0||l)l=ku(r,w);else{l=w;var v=kt;kt|=2;var T=W0();(or!==r||yr!==l)&&(ks=null,ba=Dt()+500,Qo(r,l));do try{nw();break}catch(X){H0(r,X)}while(!0);ph(),Nu.current=T,kt=v,jn!==null?l=0:(or=null,yr=0,l=Kn)}if(l!==0){if(l===2&&(v=At(r),v!==0&&(w=v,l=$h(r,v))),l===1)throw g=xl,Qo(r,0),fo(r,w),ti(r,Dt()),g;if(l===6)fo(r,w);else{if(v=r.current.alternate,(w&30)===0&&!ew(v)&&(l=ku(r,w),l===2&&(T=At(r),T!==0&&(w=T,l=$h(r,T))),l===1))throw g=xl,Qo(r,0),fo(r,w),ti(r,Dt()),g;switch(r.finishedWork=v,r.finishedLanes=w,l){case 0:case 1:throw Error(n(345));case 2:Ko(r,ei,ks);break;case 3:if(fo(r,w),(w&130023424)===w&&(l=Qh+500-Dt(),10<l)){if(vr(r,0)!==0)break;if(v=r.suspendedLanes,(v&w)!==w){Hr(),r.pingedLanes|=r.suspendedLanes&v;break}r.timeoutHandle=ih(Ko.bind(null,r,ei,ks),l);break}Ko(r,ei,ks);break;case 4:if(fo(r,w),(w&4194240)===w)break;for(l=r.eventTimes,v=-1;0<w;){var O=31-Yn(w);T=1<<O,O=l[O],O>v&&(v=O),w&=~T}if(w=v,w=Dt()-w,w=(120>w?120:480>w?480:1080>w?1080:1920>w?1920:3e3>w?3e3:4320>w?4320:1960*Jy(w/1960))-w,10<w){r.timeoutHandle=ih(Ko.bind(null,r,ei,ks),w);break}Ko(r,ei,ks);break;case 5:Ko(r,ei,ks);break;default:throw Error(n(329))}}}return ti(r,Dt()),r.callbackNode===g?z0.bind(null,r):null}function $h(r,l){var g=Al;return r.current.memoizedState.isDehydrated&&(Qo(r,l).flags|=256),r=ku(r,l),r!==2&&(l=ei,ei=g,l!==null&&Jh(l)),r}function Jh(r){ei===null?ei=r:ei.push.apply(ei,r)}function ew(r){for(var l=r;;){if(l.flags&16384){var g=l.updateQueue;if(g!==null&&(g=g.stores,g!==null))for(var w=0;w<g.length;w++){var v=g[w],T=v.getSnapshot;v=v.value;try{if(!re(T(),v))return!1}catch{return!1}}}if(g=l.child,l.subtreeFlags&16384&&g!==null)g.return=l,l=g;else{if(l===r)break;for(;l.sibling===null;){if(l.return===null||l.return===r)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function fo(r,l){for(l&=~qh,l&=~Du,r.suspendedLanes|=l,r.pingedLanes&=~l,r=r.expirationTimes;0<l;){var g=31-Yn(l),w=1<<g;r[g]=-1,l&=~w}}function j0(r){if((kt&6)!==0)throw Error(n(327));Ma();var l=vr(r,0);if((l&1)===0)return ti(r,Dt()),null;var g=ku(r,l);if(r.tag!==0&&g===2){var w=At(r);w!==0&&(l=w,g=$h(r,w))}if(g===1)throw g=xl,Qo(r,0),fo(r,l),ti(r,Dt()),g;if(g===6)throw Error(n(345));return r.finishedWork=r.current.alternate,r.finishedLanes=l,Ko(r,ei,ks),ti(r,Dt()),null}function ef(r,l){var g=kt;kt|=1;try{return r(l)}finally{kt=g,kt===0&&(ba=Dt()+500,uu&&so())}}function qo(r){co!==null&&co.tag===0&&(kt&6)===0&&Ma();var l=kt;kt|=1;var g=Ni.transition,w=at;try{if(Ni.transition=null,at=1,r)return r()}finally{at=w,Ni.transition=g,kt=l,(kt&6)===0&&so()}}function tf(){pi=Da.current,fn(Da)}function Qo(r,l){r.finishedWork=null,r.finishedLanes=0;var g=r.timeoutHandle;if(g!==-1&&(r.timeoutHandle=-1,Dy(g)),jn!==null)for(g=jn.return;g!==null;){var w=g;switch(ch(w),w.tag){case 1:w=w.type.childContextTypes,w!=null&&au();break;case 3:Sa(),fn(Zr),fn(Dr),Ch();break;case 5:Ah(w);break;case 4:Sa();break;case 13:fn(Cn);break;case 19:fn(Cn);break;case 10:mh(w.type._context);break;case 22:case 23:tf()}g=g.return}if(or=r,jn=r=go(r.current,null),yr=pi=l,Kn=0,xl=null,qh=Du=Xo=0,ei=Al=null,Wo!==null){for(l=0;l<Wo.length;l++)if(g=Wo[l],w=g.interleaved,w!==null){g.interleaved=null;var v=w.next,T=g.pending;if(T!==null){var O=T.next;T.next=v,w.next=O}g.pending=w}Wo=null}return r}function H0(r,l){do{var g=jn;try{if(ph(),Eu.current=Cu,xu){for(var w=vn.memoizedState;w!==null;){var v=w.queue;v!==null&&(v.pending=null),w=w.next}xu=!1}if(Yo=0,sr=Qn=vn=null,gl=!1,pl=0,Xh.current=null,g===null||g.return===null){Kn=1,xl=l,jn=null;break}e:{var T=r,O=g.return,X=g,Z=l;if(l=yr,X.flags|=32768,Z!==null&&typeof Z=="object"&&typeof Z.then=="function"){var de=Z,ve=X,Te=ve.tag;if((ve.mode&1)===0&&(Te===0||Te===11||Te===15)){var _e=ve.alternate;_e?(ve.updateQueue=_e.updateQueue,ve.memoizedState=_e.memoizedState,ve.lanes=_e.lanes):(ve.updateQueue=null,ve.memoizedState=null)}var Ue=g0(O);if(Ue!==null){Ue.flags&=-257,p0(Ue,O,X,T,l),Ue.mode&1&&d0(T,de,l),l=Ue,Z=de;var Xe=l.updateQueue;if(Xe===null){var qe=new Set;qe.add(Z),l.updateQueue=qe}else Xe.add(Z);break e}else{if((l&1)===0){d0(T,de,l),nf();break e}Z=Error(n(426))}}else if(En&&X.mode&1){var Un=g0(O);if(Un!==null){(Un.flags&65536)===0&&(Un.flags|=256),p0(Un,O,X,T,l),dh(Ra(Z,X));break e}}T=Z=Ra(Z,X),Kn!==4&&(Kn=2),Al===null?Al=[T]:Al.push(T),T=O;do{switch(T.tag){case 3:T.flags|=65536,l&=-l,T.lanes|=l;var ae=h0(T,Z,l);F1(T,ae);break e;case 1:X=Z;var ee=T.type,le=T.stateNode;if((T.flags&128)===0&&(typeof ee.getDerivedStateFromError=="function"||le!==null&&typeof le.componentDidCatch=="function"&&(uo===null||!uo.has(le)))){T.flags|=65536,l&=-l,T.lanes|=l;var De=f0(T,X,l);F1(T,De);break e}}T=T.return}while(T!==null)}Y0(g)}catch(Ke){l=Ke,jn===g&&g!==null&&(jn=g=g.return);continue}break}while(!0)}function W0(){var r=Nu.current;return Nu.current=Cu,r===null?Cu:r}function nf(){(Kn===0||Kn===3||Kn===2)&&(Kn=4),or===null||(Xo&268435455)===0&&(Du&268435455)===0||fo(or,yr)}function ku(r,l){var g=kt;kt|=2;var w=W0();(or!==r||yr!==l)&&(ks=null,Qo(r,l));do try{tw();break}catch(v){H0(r,v)}while(!0);if(ph(),kt=g,Nu.current=w,jn!==null)throw Error(n(261));return or=null,yr=0,Kn}function tw(){for(;jn!==null;)G0(jn)}function nw(){for(;jn!==null&&!Xt();)G0(jn)}function G0(r){var l=Q0(r.alternate,r,pi);r.memoizedProps=r.pendingProps,l===null?Y0(r):jn=l,Xh.current=null}function Y0(r){var l=r;do{var g=l.alternate;if(r=l.return,(l.flags&32768)===0){if(g=qy(g,l,pi),g!==null){jn=g;return}}else{if(g=Qy(g,l),g!==null){g.flags&=32767,jn=g;return}if(r!==null)r.flags|=32768,r.subtreeFlags=0,r.deletions=null;else{Kn=6,jn=null;return}}if(l=l.sibling,l!==null){jn=l;return}jn=l=r}while(l!==null);Kn===0&&(Kn=5)}function Ko(r,l,g){var w=at,v=Ni.transition;try{Ni.transition=null,at=1,rw(r,l,g,w)}finally{Ni.transition=v,at=w}return null}function rw(r,l,g,w){do Ma();while(co!==null);if((kt&6)!==0)throw Error(n(327));g=r.finishedWork;var v=r.finishedLanes;if(g===null)return null;if(r.finishedWork=null,r.finishedLanes=0,g===r.current)throw Error(n(177));r.callbackNode=null,r.callbackPriority=0;var T=g.lanes|g.childLanes;if(Pe(r,T),r===or&&(jn=or=null,yr=0),(g.subtreeFlags&2064)===0&&(g.flags&2064)===0||Mu||(Mu=!0,K0(bt,function(){return Ma(),null})),T=(g.flags&15990)!==0,(g.subtreeFlags&15990)!==0||T){T=Ni.transition,Ni.transition=null;var O=at;at=1;var X=kt;kt|=4,Xh.current=null,Zy(r,g),k0(g,r),Nr(nh),qr=!!th,nh=th=null,r.current=g,$y(g),ua(),kt=X,at=O,Ni.transition=T}else r.current=g;if(Mu&&(Mu=!1,co=r,Ou=v),T=r.pendingLanes,T===0&&(uo=null),xt(g.stateNode),ti(r,Dt()),l!==null)for(w=r.onRecoverableError,g=0;g<l.length;g++)v=l[g],w(v.value,{componentStack:v.stack,digest:v.digest});if(bu)throw bu=!1,r=Kh,Kh=null,r;return(Ou&1)!==0&&r.tag!==0&&Ma(),T=r.pendingLanes,(T&1)!==0?r===Zh?_l++:(_l=0,Zh=r):_l=0,so(),null}function Ma(){if(co!==null){var r=Ji(Ou),l=Ni.transition,g=at;try{if(Ni.transition=null,at=16>r?16:r,co===null)var w=!1;else{if(r=co,co=null,Ou=0,(kt&6)!==0)throw Error(n(331));var v=kt;for(kt|=4,We=r.current;We!==null;){var T=We,O=T.child;if((We.flags&16)!==0){var X=T.deletions;if(X!==null){for(var Z=0;Z<X.length;Z++){var de=X[Z];for(We=de;We!==null;){var ve=We;switch(ve.tag){case 0:case 11:case 15:El(8,ve,T)}var Te=ve.child;if(Te!==null)Te.return=ve,We=Te;else for(;We!==null;){ve=We;var _e=ve.sibling,Ue=ve.return;if(b0(ve),ve===de){We=null;break}if(_e!==null){_e.return=Ue,We=_e;break}We=Ue}}}var Xe=T.alternate;if(Xe!==null){var qe=Xe.child;if(qe!==null){Xe.child=null;do{var Un=qe.sibling;qe.sibling=null,qe=Un}while(qe!==null)}}We=T}}if((T.subtreeFlags&2064)!==0&&O!==null)O.return=T,We=O;else e:for(;We!==null;){if(T=We,(T.flags&2048)!==0)switch(T.tag){case 0:case 11:case 15:El(9,T,T.return)}var ae=T.sibling;if(ae!==null){ae.return=T.return,We=ae;break e}We=T.return}}var ee=r.current;for(We=ee;We!==null;){O=We;var le=O.child;if((O.subtreeFlags&2064)!==0&&le!==null)le.return=O,We=le;else e:for(O=ee;We!==null;){if(X=We,(X.flags&2048)!==0)try{switch(X.tag){case 0:case 11:case 15:Ru(9,X)}}catch(Ke){On(X,X.return,Ke)}if(X===O){We=null;break e}var De=X.sibling;if(De!==null){De.return=X.return,We=De;break e}We=X.return}}if(kt=v,so(),dt&&typeof dt.onPostCommitFiberRoot=="function")try{dt.onPostCommitFiberRoot(It,r)}catch{}w=!0}return w}finally{at=g,Ni.transition=l}}return!1}function X0(r,l,g){l=Ra(g,l),l=h0(r,l,1),r=ao(r,l,1),l=Hr(),r!==null&&(z(r,1,l),ti(r,l))}function On(r,l,g){if(r.tag===3)X0(r,r,g);else for(;l!==null;){if(l.tag===3){X0(l,r,g);break}else if(l.tag===1){var w=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof w.componentDidCatch=="function"&&(uo===null||!uo.has(w))){r=Ra(g,r),r=f0(l,r,1),l=ao(l,r,1),r=Hr(),l!==null&&(z(l,1,r),ti(l,r));break}}l=l.return}}function iw(r,l,g){var w=r.pingCache;w!==null&&w.delete(l),l=Hr(),r.pingedLanes|=r.suspendedLanes&g,or===r&&(yr&g)===g&&(Kn===4||Kn===3&&(yr&130023424)===yr&&500>Dt()-Qh?Qo(r,0):qh|=g),ti(r,l)}function q0(r,l){l===0&&((r.mode&1)===0?l=1:(l=qs,qs<<=1,(qs&130023424)===0&&(qs=4194304)));var g=Hr();r=Os(r,l),r!==null&&(z(r,l,g),ti(r,g))}function sw(r){var l=r.memoizedState,g=0;l!==null&&(g=l.retryLane),q0(r,g)}function ow(r,l){var g=0;switch(r.tag){case 13:var w=r.stateNode,v=r.memoizedState;v!==null&&(g=v.retryLane);break;case 19:w=r.stateNode;break;default:throw Error(n(314))}w!==null&&w.delete(l),q0(r,g)}var Q0;Q0=function(r,l,g){if(r!==null)if(r.memoizedProps!==l.pendingProps||Zr.current)Jr=!0;else{if((r.lanes&g)===0&&(l.flags&128)===0)return Jr=!1,Xy(r,l,g);Jr=(r.flags&131072)!==0}else Jr=!1,En&&(l.flags&1048576)!==0&&R1(l,hu,l.index);switch(l.lanes=0,l.tag){case 2:var w=l.type;Tu(r,l),r=l.pendingProps;var v=xa(l,Dr.current);Ta(l,g),v=Th(null,l,w,r,v,g);var T=Sh();return l.flags|=1,typeof v=="object"&&v!==null&&typeof v.render=="function"&&v.$$typeof===void 0?(l.tag=1,l.memoizedState=null,l.updateQueue=null,$r(w)?(T=!0,lu(l)):T=!1,l.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,Eh(l),v.updater=vu,l.stateNode=v,v._reactInternals=l,Oh(l,w,r,g),l=Bh(null,l,w,!0,T,g)):(l.tag=0,En&&T&&uh(l),jr(null,l,v,g),l=l.child),l;case 16:w=l.elementType;e:{switch(Tu(r,l),r=l.pendingProps,v=w._init,w=v(w._payload),l.type=w,v=l.tag=lw(w),r=zi(w,r),v){case 0:l=kh(null,l,w,r,g);break e;case 1:l=A0(null,l,w,r,g);break e;case 11:l=m0(null,l,w,r,g);break e;case 14:l=y0(null,l,w,zi(w.type,r),g);break e}throw Error(n(306,w,""))}return l;case 0:return w=l.type,v=l.pendingProps,v=l.elementType===w?v:zi(w,v),kh(r,l,w,v,g);case 1:return w=l.type,v=l.pendingProps,v=l.elementType===w?v:zi(w,v),A0(r,l,w,v,g);case 3:e:{if(_0(l),r===null)throw Error(n(387));w=l.pendingProps,T=l.memoizedState,v=T.element,B1(r,l),yu(l,w,null,g);var O=l.memoizedState;if(w=O.element,T.isDehydrated)if(T={element:w,isDehydrated:!1,cache:O.cache,pendingSuspenseBoundaries:O.pendingSuspenseBoundaries,transitions:O.transitions},l.updateQueue.baseState=T,l.memoizedState=T,l.flags&256){v=Ra(Error(n(423)),l),l=C0(r,l,w,g,v);break e}else if(w!==v){v=Ra(Error(n(424)),l),l=C0(r,l,w,g,v);break e}else for(gi=no(l.stateNode.containerInfo.firstChild),di=l,En=!0,Ui=null,g=L1(l,null,w,g),l.child=g;g;)g.flags=g.flags&-3|4096,g=g.sibling;else{if(Ca(),w===v){l=Ls(r,l,g);break e}jr(r,l,w,g)}l=l.child}return l;case 5:return U1(l),r===null&&fh(l),w=l.type,v=l.pendingProps,T=r!==null?r.memoizedProps:null,O=v.children,rh(w,v)?O=null:T!==null&&rh(w,T)&&(l.flags|=32),x0(r,l),jr(r,l,O,g),l.child;case 6:return r===null&&fh(l),null;case 13:return v0(r,l,g);case 4:return xh(l,l.stateNode.containerInfo),w=l.pendingProps,r===null?l.child=va(l,null,w,g):jr(r,l,w,g),l.child;case 11:return w=l.type,v=l.pendingProps,v=l.elementType===w?v:zi(w,v),m0(r,l,w,v,g);case 7:return jr(r,l,l.pendingProps,g),l.child;case 8:return jr(r,l,l.pendingProps.children,g),l.child;case 12:return jr(r,l,l.pendingProps.children,g),l.child;case 10:e:{if(w=l.type._context,v=l.pendingProps,T=l.memoizedProps,O=v.value,on(gu,w._currentValue),w._currentValue=O,T!==null)if(re(T.value,O)){if(T.children===v.children&&!Zr.current){l=Ls(r,l,g);break e}}else for(T=l.child,T!==null&&(T.return=l);T!==null;){var X=T.dependencies;if(X!==null){O=T.child;for(var Z=X.firstContext;Z!==null;){if(Z.context===w){if(T.tag===1){Z=Ps(-1,g&-g),Z.tag=2;var de=T.updateQueue;if(de!==null){de=de.shared;var ve=de.pending;ve===null?Z.next=Z:(Z.next=ve.next,ve.next=Z),de.pending=Z}}T.lanes|=g,Z=T.alternate,Z!==null&&(Z.lanes|=g),yh(T.return,g,l),X.lanes|=g;break}Z=Z.next}}else if(T.tag===10)O=T.type===l.type?null:T.child;else if(T.tag===18){if(O=T.return,O===null)throw Error(n(341));O.lanes|=g,X=O.alternate,X!==null&&(X.lanes|=g),yh(O,g,l),O=T.sibling}else O=T.child;if(O!==null)O.return=T;else for(O=T;O!==null;){if(O===l){O=null;break}if(T=O.sibling,T!==null){T.return=O.return,O=T;break}O=O.return}T=O}jr(r,l,v.children,g),l=l.child}return l;case 9:return v=l.type,w=l.pendingProps.children,Ta(l,g),v=Si(v),w=w(v),l.flags|=1,jr(r,l,w,g),l.child;case 14:return w=l.type,v=zi(w,l.pendingProps),v=zi(w.type,v),y0(r,l,w,v,g);case 15:return w0(r,l,l.type,l.pendingProps,g);case 17:return w=l.type,v=l.pendingProps,v=l.elementType===w?v:zi(w,v),Tu(r,l),l.tag=1,$r(w)?(r=!0,lu(l)):r=!1,Ta(l,g),u0(l,w,v),Oh(l,w,v,g),Bh(null,l,w,!0,r,g);case 19:return T0(r,l,g);case 22:return E0(r,l,g)}throw Error(n(156,l.tag))};function K0(r,l){return hr(r,l)}function aw(r,l,g,w){this.tag=r,this.key=g,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=w,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Di(r,l,g,w){return new aw(r,l,g,w)}function rf(r){return r=r.prototype,!(!r||!r.isReactComponent)}function lw(r){if(typeof r=="function")return rf(r)?1:0;if(r!=null){if(r=r.$$typeof,r===W)return 11;if(r===ue)return 14}return 2}function go(r,l){var g=r.alternate;return g===null?(g=Di(r.tag,l,r.key,r.mode),g.elementType=r.elementType,g.type=r.type,g.stateNode=r.stateNode,g.alternate=r,r.alternate=g):(g.pendingProps=l,g.type=r.type,g.flags=0,g.subtreeFlags=0,g.deletions=null),g.flags=r.flags&14680064,g.childLanes=r.childLanes,g.lanes=r.lanes,g.child=r.child,g.memoizedProps=r.memoizedProps,g.memoizedState=r.memoizedState,g.updateQueue=r.updateQueue,l=r.dependencies,g.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},g.sibling=r.sibling,g.index=r.index,g.ref=r.ref,g}function Bu(r,l,g,w,v,T){var O=2;if(w=r,typeof r=="function")rf(r)&&(O=1);else if(typeof r=="string")O=5;else e:switch(r){case F:return Zo(g.children,v,T,l);case B:O=8,v|=8;break;case P:return r=Di(12,g,l,v|2),r.elementType=P,r.lanes=T,r;case U:return r=Di(13,g,l,v),r.elementType=U,r.lanes=T,r;case Le:return r=Di(19,g,l,v),r.elementType=Le,r.lanes=T,r;case Fe:return Fu(g,v,T,l);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case G:O=10;break e;case Y:O=9;break e;case W:O=11;break e;case ue:O=14;break e;case yt:O=16,w=null;break e}throw Error(n(130,r==null?r:typeof r,""))}return l=Di(O,g,l,v),l.elementType=r,l.type=w,l.lanes=T,l}function Zo(r,l,g,w){return r=Di(7,r,w,l),r.lanes=g,r}function Fu(r,l,g,w){return r=Di(22,r,w,l),r.elementType=Fe,r.lanes=g,r.stateNode={isHidden:!1},r}function sf(r,l,g){return r=Di(6,r,null,l),r.lanes=g,r}function of(r,l,g){return l=Di(4,r.children!==null?r.children:[],r.key,l),l.lanes=g,l.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},l}function uw(r,l,g,w,v){this.tag=l,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=se(0),this.expirationTimes=se(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=se(0),this.identifierPrefix=w,this.onRecoverableError=v,this.mutableSourceEagerHydrationData=null}function af(r,l,g,w,v,T,O,X,Z){return r=new uw(r,l,g,X,Z),l===1?(l=1,T===!0&&(l|=8)):l=0,T=Di(3,null,null,l),r.current=T,T.stateNode=r,T.memoizedState={element:w,isDehydrated:g,cache:null,transitions:null,pendingSuspenseBoundaries:null},Eh(T),r}function cw(r,l,g){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:we,key:w==null?null:""+w,children:r,containerInfo:l,implementation:g}}function Z0(r){if(!r)return io;r=r._reactInternals;e:{if(nr(r)!==r||r.tag!==1)throw Error(n(170));var l=r;do{switch(l.tag){case 3:l=l.stateNode.context;break e;case 1:if($r(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break e}}l=l.return}while(l!==null);throw Error(n(171))}if(r.tag===1){var g=r.type;if($r(g))return I1(r,g,l)}return l}function $0(r,l,g,w,v,T,O,X,Z){return r=af(g,w,!0,r,v,T,O,X,Z),r.context=Z0(null),g=r.current,w=Hr(),v=ho(g),T=Ps(w,v),T.callback=l??null,ao(g,T,v),r.current.lanes=v,z(r,v,w),ti(r,w),r}function Vu(r,l,g,w){var v=l.current,T=Hr(),O=ho(v);return g=Z0(g),l.context===null?l.context=g:l.pendingContext=g,l=Ps(T,O),l.payload={element:r},w=w===void 0?null:w,w!==null&&(l.callback=w),r=ao(v,l,O),r!==null&&(Wi(r,v,O,T),mu(r,v,O)),O}function Uu(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 5:return r.child.stateNode;default:return r.child.stateNode}}function J0(r,l){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var g=r.retryLane;r.retryLane=g!==0&&g<l?g:l}}function lf(r,l){J0(r,l),(r=r.alternate)&&J0(r,l)}function hw(){return null}var eg=typeof reportError=="function"?reportError:function(r){console.error(r)};function uf(r){this._internalRoot=r}zu.prototype.render=uf.prototype.render=function(r){var l=this._internalRoot;if(l===null)throw Error(n(409));Vu(r,l,null,null)},zu.prototype.unmount=uf.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var l=r.containerInfo;qo(function(){Vu(null,r,null,null)}),l[Ns]=null}};function zu(r){this._internalRoot=r}zu.prototype.unstable_scheduleHydration=function(r){if(r){var l=$t();r={blockedOn:null,target:r,priority:l};for(var g=0;g<qn.length&&l!==0&&l<qn[g].priority;g++);qn.splice(g,0,r),g===0&&fa(r)}};function cf(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function ju(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11&&(r.nodeType!==8||r.nodeValue!==" react-mount-point-unstable "))}function tg(){}function fw(r,l,g,w,v){if(v){if(typeof w=="function"){var T=w;w=function(){var de=Uu(O);T.call(de)}}var O=$0(l,w,r,0,null,!1,!1,"",tg);return r._reactRootContainer=O,r[Ns]=O.current,ol(r.nodeType===8?r.parentNode:r),qo(),O}for(;v=r.lastChild;)r.removeChild(v);if(typeof w=="function"){var X=w;w=function(){var de=Uu(Z);X.call(de)}}var Z=af(r,0,!1,null,null,!1,!1,"",tg);return r._reactRootContainer=Z,r[Ns]=Z.current,ol(r.nodeType===8?r.parentNode:r),qo(function(){Vu(l,Z,g,w)}),Z}function Hu(r,l,g,w,v){var T=g._reactRootContainer;if(T){var O=T;if(typeof v=="function"){var X=v;v=function(){var Z=Uu(O);X.call(Z)}}Vu(l,O,r,v)}else O=fw(g,l,r,v,w);return Uu(O)}Qs=function(r){switch(r.tag){case 3:var l=r.stateNode;if(l.current.memoizedState.isDehydrated){var g=Gt(l.pendingLanes);g!==0&&(Jt(l,g|1),ti(l,Dt()),(kt&6)===0&&(ba=Dt()+500,so()))}break;case 13:qo(function(){var w=Os(r,1);if(w!==null){var v=Hr();Wi(w,r,1,v)}}),lf(r,1)}},Xn=function(r){if(r.tag===13){var l=Os(r,134217728);if(l!==null){var g=Hr();Wi(l,r,134217728,g)}lf(r,134217728)}},Ze=function(r){if(r.tag===13){var l=ho(r),g=Os(r,l);if(g!==null){var w=Hr();Wi(g,r,l,w)}lf(r,l)}},$t=function(){return at},Lo=function(r,l){var g=at;try{return at=r,l()}finally{at=g}},xs=function(r,l,g){switch(l){case"input":if(An(r,g),l=g.name,g.type==="radio"&&l!=null){for(g=r;g.parentNode;)g=g.parentNode;for(g=g.querySelectorAll("input[name="+JSON.stringify(""+l)+'][type="radio"]'),l=0;l<g.length;l++){var w=g[l];if(w!==r&&w.form===r.form){var v=ou(w);if(!v)throw Error(n(90));Mi(w),An(w,v)}}}break;case"textarea":Ar(r,g);break;case"select":l=g.value,l!=null&&Ve(r,!!g.multiple,l,!1)}},Li=ef,Rn=qo;var dw={usingClientEntryPoint:!1,Events:[ul,wa,ou,oi,cr,ef]},Cl={findFiberByHostInstance:Uo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},gw={bundleType:Cl.bundleType,version:Cl.version,rendererPackageName:Cl.rendererPackageName,rendererConfig:Cl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:pe.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return r=Po(r),r===null?null:r.stateNode},findFiberByHostInstance:Cl.findFiberByHostInstance||hw,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Wu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Wu.isDisabled&&Wu.supportsFiber)try{It=Wu.inject(gw),dt=Wu}catch{}}return ni.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=dw,ni.createPortal=function(r,l){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!cf(l))throw Error(n(200));return cw(r,l,null,g)},ni.createRoot=function(r,l){if(!cf(r))throw Error(n(299));var g=!1,w="",v=eg;return l!=null&&(l.unstable_strictMode===!0&&(g=!0),l.identifierPrefix!==void 0&&(w=l.identifierPrefix),l.onRecoverableError!==void 0&&(v=l.onRecoverableError)),l=af(r,1,!1,null,null,g,!1,w,v),r[Ns]=l.current,ol(r.nodeType===8?r.parentNode:r),new uf(l)},ni.findDOMNode=function(r){if(r==null)return null;if(r.nodeType===1)return r;var l=r._reactInternals;if(l===void 0)throw typeof r.render=="function"?Error(n(188)):(r=Object.keys(r).join(","),Error(n(268,r)));return r=Po(l),r=r===null?null:r.stateNode,r},ni.flushSync=function(r){return qo(r)},ni.hydrate=function(r,l,g){if(!ju(l))throw Error(n(200));return Hu(null,r,l,!0,g)},ni.hydrateRoot=function(r,l,g){if(!cf(r))throw Error(n(405));var w=g!=null&&g.hydratedSources||null,v=!1,T="",O=eg;if(g!=null&&(g.unstable_strictMode===!0&&(v=!0),g.identifierPrefix!==void 0&&(T=g.identifierPrefix),g.onRecoverableError!==void 0&&(O=g.onRecoverableError)),l=$0(l,null,r,1,g??null,v,!1,T,O),r[Ns]=l.current,ol(r),w)for(r=0;r<w.length;r++)g=w[r],v=g._getVersion,v=v(g._source),l.mutableSourceEagerHydrationData==null?l.mutableSourceEagerHydrationData=[g,v]:l.mutableSourceEagerHydrationData.push(g,v);return new zu(l)},ni.render=function(r,l,g){if(!ju(l))throw Error(n(200));return Hu(null,r,l,!1,g)},ni.unmountComponentAtNode=function(r){if(!ju(r))throw Error(n(40));return r._reactRootContainer?(qo(function(){Hu(null,null,r,!1,function(){r._reactRootContainer=null,r[Ns]=null})}),!0):!1},ni.unstable_batchedUpdates=ef,ni.unstable_renderSubtreeIntoContainer=function(r,l,g,w){if(!ju(g))throw Error(n(200));if(r==null||r._reactInternals===void 0)throw Error(n(38));return Hu(r,l,g,!1,w)},ni.version="18.3.1-next-f1338f8080-20240426",ni}var ug;function Cw(){if(ug)return df.exports;ug=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),df.exports=_w(),df.exports}var cg;function vw(){if(cg)return Yu;cg=1;var s=Cw();return Yu.createRoot=s.createRoot,Yu.hydrateRoot=s.hydrateRoot,Yu}var Iw=vw(),Il={},hg;function Tw(){if(hg)return Il;hg=1,Object.defineProperty(Il,"__esModule",{value:!0}),Il.parse=y,Il.serialize=x;const s=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,n=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,o=/^[\u0020-\u003A\u003D-\u007E]*$/,u=Object.prototype.toString,f=(()=>{const k=function(){};return k.prototype=Object.create(null),k})();function y(k,j){const q=new f,Q=k.length;if(Q<2)return q;const J=(j==null?void 0:j.decode)||R;let ie=0;do{const he=k.indexOf("=",ie);if(he===-1)break;const te=k.indexOf(";",ie),pe=te===-1?Q:te;if(he>pe){ie=k.lastIndexOf(";",he-1)+1;continue}const Ge=A(k,ie,he),we=C(k,he,Ge),F=k.slice(Ge,we);if(q[F]===void 0){let B=A(k,he+1,pe),P=C(k,pe,B);const G=J(k.slice(B,P));q[F]=G}ie=pe+1}while(ie<Q);return q}function A(k,j,q){do{const Q=k.charCodeAt(j);if(Q!==32&&Q!==9)return j}while(++j<q);return q}function C(k,j,q){for(;j>q;){const Q=k.charCodeAt(--j);if(Q!==32&&Q!==9)return j+1}return q}function x(k,j,q){const Q=(q==null?void 0:q.encode)||encodeURIComponent;if(!s.test(k))throw new TypeError(`argument name is invalid: ${k}`);const J=Q(j);if(!e.test(J))throw new TypeError(`argument val is invalid: ${j}`);let ie=k+"="+J;if(!q)return ie;if(q.maxAge!==void 0){if(!Number.isInteger(q.maxAge))throw new TypeError(`option maxAge is invalid: ${q.maxAge}`);ie+="; Max-Age="+q.maxAge}if(q.domain){if(!n.test(q.domain))throw new TypeError(`option domain is invalid: ${q.domain}`);ie+="; Domain="+q.domain}if(q.path){if(!o.test(q.path))throw new TypeError(`option path is invalid: ${q.path}`);ie+="; Path="+q.path}if(q.expires){if(!D(q.expires)||!Number.isFinite(q.expires.valueOf()))throw new TypeError(`option expires is invalid: ${q.expires}`);ie+="; Expires="+q.expires.toUTCString()}if(q.httpOnly&&(ie+="; HttpOnly"),q.secure&&(ie+="; Secure"),q.partitioned&&(ie+="; Partitioned"),q.priority)switch(typeof q.priority=="string"?q.priority.toLowerCase():void 0){case"low":ie+="; Priority=Low";break;case"medium":ie+="; Priority=Medium";break;case"high":ie+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${q.priority}`)}if(q.sameSite)switch(typeof q.sameSite=="string"?q.sameSite.toLowerCase():q.sameSite){case!0:case"strict":ie+="; SameSite=Strict";break;case"lax":ie+="; SameSite=Lax";break;case"none":ie+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${q.sameSite}`)}return ie}function R(k){if(k.indexOf("%")===-1)return k;try{return decodeURIComponent(k)}catch{return k}}function D(k){return u.call(k)==="[object Date]"}return Il}Tw();/**
 * react-router v7.5.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var fg="popstate";function Sw(s={}){function e(o,u){let{pathname:f,search:y,hash:A}=o.location;return Qf("",{pathname:f,search:y,hash:A},u.state&&u.state.usr||null,u.state&&u.state.key||"default")}function n(o,u){return typeof u=="string"?u:Bl(u)}return Nw(e,n,null,s)}function In(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function ds(s,e){if(!s){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Rw(){return Math.random().toString(36).substring(2,10)}function dg(s,e){return{usr:s.state,key:s.key,idx:e}}function Qf(s,e,n=null,o){return{pathname:typeof s=="string"?s:s.pathname,search:"",hash:"",...typeof e=="string"?qa(e):e,state:n,key:e&&e.key||o||Rw()}}function Bl({pathname:s="/",search:e="",hash:n=""}){return e&&e!=="?"&&(s+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(s+=n.charAt(0)==="#"?n:"#"+n),s}function qa(s){let e={};if(s){let n=s.indexOf("#");n>=0&&(e.hash=s.substring(n),s=s.substring(0,n));let o=s.indexOf("?");o>=0&&(e.search=s.substring(o),s=s.substring(0,o)),s&&(e.pathname=s)}return e}function Nw(s,e,n,o={}){let{window:u=document.defaultView,v5Compat:f=!1}=o,y=u.history,A="POP",C=null,x=R();x==null&&(x=0,y.replaceState({...y.state,idx:x},""));function R(){return(y.state||{idx:null}).idx}function D(){A="POP";let J=R(),ie=J==null?null:J-x;x=J,C&&C({action:A,location:Q.location,delta:ie})}function k(J,ie){A="PUSH";let he=Qf(Q.location,J,ie);x=R()+1;let te=dg(he,x),pe=Q.createHref(he);try{y.pushState(te,"",pe)}catch(Ge){if(Ge instanceof DOMException&&Ge.name==="DataCloneError")throw Ge;u.location.assign(pe)}f&&C&&C({action:A,location:Q.location,delta:1})}function j(J,ie){A="REPLACE";let he=Qf(Q.location,J,ie);x=R();let te=dg(he,x),pe=Q.createHref(he);y.replaceState(te,"",pe),f&&C&&C({action:A,location:Q.location,delta:0})}function q(J){let ie=u.location.origin!=="null"?u.location.origin:u.location.href,he=typeof J=="string"?J:Bl(J);return he=he.replace(/ $/,"%20"),In(ie,`No window.location.(origin|href) available to create URL for href: ${he}`),new URL(he,ie)}let Q={get action(){return A},get location(){return s(u,y)},listen(J){if(C)throw new Error("A history only accepts one active listener");return u.addEventListener(fg,D),C=J,()=>{u.removeEventListener(fg,D),C=null}},createHref(J){return e(u,J)},createURL:q,encodeLocation(J){let ie=q(J);return{pathname:ie.pathname,search:ie.search,hash:ie.hash}},push:k,replace:j,go(J){return y.go(J)}};return Q}function gm(s,e,n="/"){return Dw(s,e,n,!1)}function Dw(s,e,n,o){let u=typeof e=="string"?qa(e):e,f=Vs(u.pathname||"/",n);if(f==null)return null;let y=pm(s);bw(y);let A=null;for(let C=0;A==null&&C<y.length;++C){let x=jw(f);A=Uw(y[C],x,o)}return A}function pm(s,e=[],n=[],o=""){let u=(f,y,A)=>{let C={relativePath:A===void 0?f.path||"":A,caseSensitive:f.caseSensitive===!0,childrenIndex:y,route:f};C.relativePath.startsWith("/")&&(In(C.relativePath.startsWith(o),`Absolute route path "${C.relativePath}" nested under path "${o}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),C.relativePath=C.relativePath.slice(o.length));let x=Fs([o,C.relativePath]),R=n.concat(C);f.children&&f.children.length>0&&(In(f.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${x}".`),pm(f.children,e,R,x)),!(f.path==null&&!f.index)&&e.push({path:x,score:Fw(x,f.index),routesMeta:R})};return s.forEach((f,y)=>{var A;if(f.path===""||!((A=f.path)!=null&&A.includes("?")))u(f,y);else for(let C of mm(f.path))u(f,y,C)}),e}function mm(s){let e=s.split("/");if(e.length===0)return[];let[n,...o]=e,u=n.endsWith("?"),f=n.replace(/\?$/,"");if(o.length===0)return u?[f,""]:[f];let y=mm(o.join("/")),A=[];return A.push(...y.map(C=>C===""?f:[f,C].join("/"))),u&&A.push(...y),A.map(C=>s.startsWith("/")&&C===""?"/":C)}function bw(s){s.sort((e,n)=>e.score!==n.score?n.score-e.score:Vw(e.routesMeta.map(o=>o.childrenIndex),n.routesMeta.map(o=>o.childrenIndex)))}var Mw=/^:[\w-]+$/,Ow=3,Pw=2,Lw=1,kw=10,Bw=-2,gg=s=>s==="*";function Fw(s,e){let n=s.split("/"),o=n.length;return n.some(gg)&&(o+=Bw),e&&(o+=Pw),n.filter(u=>!gg(u)).reduce((u,f)=>u+(Mw.test(f)?Ow:f===""?Lw:kw),o)}function Vw(s,e){return s.length===e.length&&s.slice(0,-1).every((o,u)=>o===e[u])?s[s.length-1]-e[e.length-1]:0}function Uw(s,e,n=!1){let{routesMeta:o}=s,u={},f="/",y=[];for(let A=0;A<o.length;++A){let C=o[A],x=A===o.length-1,R=f==="/"?e:e.slice(f.length)||"/",D=fc({path:C.relativePath,caseSensitive:C.caseSensitive,end:x},R),k=C.route;if(!D&&x&&n&&!o[o.length-1].route.index&&(D=fc({path:C.relativePath,caseSensitive:C.caseSensitive,end:!1},R)),!D)return null;Object.assign(u,D.params),y.push({params:u,pathname:Fs([f,D.pathname]),pathnameBase:Yw(Fs([f,D.pathnameBase])),route:k}),D.pathnameBase!=="/"&&(f=Fs([f,D.pathnameBase]))}return y}function fc(s,e){typeof s=="string"&&(s={path:s,caseSensitive:!1,end:!0});let[n,o]=zw(s.path,s.caseSensitive,s.end),u=e.match(n);if(!u)return null;let f=u[0],y=f.replace(/(.)\/+$/,"$1"),A=u.slice(1);return{params:o.reduce((x,{paramName:R,isOptional:D},k)=>{if(R==="*"){let q=A[k]||"";y=f.slice(0,f.length-q.length).replace(/(.)\/+$/,"$1")}const j=A[k];return D&&!j?x[R]=void 0:x[R]=(j||"").replace(/%2F/g,"/"),x},{}),pathname:f,pathnameBase:y,pattern:s}}function zw(s,e=!1,n=!0){ds(s==="*"||!s.endsWith("*")||s.endsWith("/*"),`Route path "${s}" will be treated as if it were "${s.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${s.replace(/\*$/,"/*")}".`);let o=[],u="^"+s.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(y,A,C)=>(o.push({paramName:A,isOptional:C!=null}),C?"/?([^\\/]+)?":"/([^\\/]+)"));return s.endsWith("*")?(o.push({paramName:"*"}),u+=s==="*"||s==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?u+="\\/*$":s!==""&&s!=="/"&&(u+="(?:(?=\\/|$))"),[new RegExp(u,e?void 0:"i"),o]}function jw(s){try{return s.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return ds(!1,`The URL path "${s}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),s}}function Vs(s,e){if(e==="/")return s;if(!s.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,o=s.charAt(n);return o&&o!=="/"?null:s.slice(n)||"/"}function Hw(s,e="/"){let{pathname:n,search:o="",hash:u=""}=typeof s=="string"?qa(s):s;return{pathname:n?n.startsWith("/")?n:Ww(n,e):e,search:Xw(o),hash:qw(u)}}function Ww(s,e){let n=e.replace(/\/+$/,"").split("/");return s.split("/").forEach(u=>{u===".."?n.length>1&&n.pop():u!=="."&&n.push(u)}),n.length>1?n.join("/"):"/"}function mf(s,e,n,o){return`Cannot include a '${s}' character in a manually specified \`to.${e}\` field [${JSON.stringify(o)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Gw(s){return s.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function ym(s){let e=Gw(s);return e.map((n,o)=>o===e.length-1?n.pathname:n.pathnameBase)}function wm(s,e,n,o=!1){let u;typeof s=="string"?u=qa(s):(u={...s},In(!u.pathname||!u.pathname.includes("?"),mf("?","pathname","search",u)),In(!u.pathname||!u.pathname.includes("#"),mf("#","pathname","hash",u)),In(!u.search||!u.search.includes("#"),mf("#","search","hash",u)));let f=s===""||u.pathname==="",y=f?"/":u.pathname,A;if(y==null)A=n;else{let D=e.length-1;if(!o&&y.startsWith("..")){let k=y.split("/");for(;k[0]==="..";)k.shift(),D-=1;u.pathname=k.join("/")}A=D>=0?e[D]:"/"}let C=Hw(u,A),x=y&&y!=="/"&&y.endsWith("/"),R=(f||y===".")&&n.endsWith("/");return!C.pathname.endsWith("/")&&(x||R)&&(C.pathname+="/"),C}var Fs=s=>s.join("/").replace(/\/\/+/g,"/"),Yw=s=>s.replace(/\/+$/,"").replace(/^\/*/,"/"),Xw=s=>!s||s==="?"?"":s.startsWith("?")?s:"?"+s,qw=s=>!s||s==="#"?"":s.startsWith("#")?s:"#"+s;function Qw(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.internal=="boolean"&&"data"in s}var Em=["POST","PUT","PATCH","DELETE"];new Set(Em);var Kw=["GET",...Em];new Set(Kw);var Qa=me.createContext(null);Qa.displayName="DataRouter";var bc=me.createContext(null);bc.displayName="DataRouterState";var xm=me.createContext({isTransitioning:!1});xm.displayName="ViewTransition";var Zw=me.createContext(new Map);Zw.displayName="Fetchers";var $w=me.createContext(null);$w.displayName="Await";var ms=me.createContext(null);ms.displayName="Navigation";var Yl=me.createContext(null);Yl.displayName="Location";var Hs=me.createContext({outlet:null,matches:[],isDataRoute:!1});Hs.displayName="Route";var Ad=me.createContext(null);Ad.displayName="RouteError";function Jw(s,{relative:e}={}){In(Xl(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:o}=me.useContext(ms),{hash:u,pathname:f,search:y}=ql(s,{relative:e}),A=f;return n!=="/"&&(A=f==="/"?n:Fs([n,f])),o.createHref({pathname:A,search:y,hash:u})}function Xl(){return me.useContext(Yl)!=null}function ia(){return In(Xl(),"useLocation() may be used only in the context of a <Router> component."),me.useContext(Yl).location}var Am="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function _m(s){me.useContext(ms).static||me.useLayoutEffect(s)}function eE(){let{isDataRoute:s}=me.useContext(Hs);return s?dE():tE()}function tE(){In(Xl(),"useNavigate() may be used only in the context of a <Router> component.");let s=me.useContext(Qa),{basename:e,navigator:n}=me.useContext(ms),{matches:o}=me.useContext(Hs),{pathname:u}=ia(),f=JSON.stringify(ym(o)),y=me.useRef(!1);return _m(()=>{y.current=!0}),me.useCallback((C,x={})=>{if(ds(y.current,Am),!y.current)return;if(typeof C=="number"){n.go(C);return}let R=wm(C,JSON.parse(f),u,x.relative==="path");s==null&&e!=="/"&&(R.pathname=R.pathname==="/"?e:Fs([e,R.pathname])),(x.replace?n.replace:n.push)(R,x.state,x)},[e,n,f,u,s])}me.createContext(null);function ql(s,{relative:e}={}){let{matches:n}=me.useContext(Hs),{pathname:o}=ia(),u=JSON.stringify(ym(n));return me.useMemo(()=>wm(s,JSON.parse(u),o,e==="path"),[s,u,o,e])}function nE(s,e){return Cm(s,e)}function Cm(s,e,n,o){var he;In(Xl(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:u,static:f}=me.useContext(ms),{matches:y}=me.useContext(Hs),A=y[y.length-1],C=A?A.params:{},x=A?A.pathname:"/",R=A?A.pathnameBase:"/",D=A&&A.route;{let te=D&&D.path||"";vm(x,!D||te.endsWith("*")||te.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${x}" (under <Route path="${te}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${te}"> to <Route path="${te==="/"?"*":`${te}/*`}">.`)}let k=ia(),j;if(e){let te=typeof e=="string"?qa(e):e;In(R==="/"||((he=te.pathname)==null?void 0:he.startsWith(R)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${R}" but pathname "${te.pathname}" was given in the \`location\` prop.`),j=te}else j=k;let q=j.pathname||"/",Q=q;if(R!=="/"){let te=R.replace(/^\//,"").split("/");Q="/"+q.replace(/^\//,"").split("/").slice(te.length).join("/")}let J=!f&&n&&n.matches&&n.matches.length>0?n.matches:gm(s,{pathname:Q});ds(D||J!=null,`No routes matched location "${j.pathname}${j.search}${j.hash}" `),ds(J==null||J[J.length-1].route.element!==void 0||J[J.length-1].route.Component!==void 0||J[J.length-1].route.lazy!==void 0,`Matched leaf route at location "${j.pathname}${j.search}${j.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let ie=aE(J&&J.map(te=>Object.assign({},te,{params:Object.assign({},C,te.params),pathname:Fs([R,u.encodeLocation?u.encodeLocation(te.pathname).pathname:te.pathname]),pathnameBase:te.pathnameBase==="/"?R:Fs([R,u.encodeLocation?u.encodeLocation(te.pathnameBase).pathname:te.pathnameBase])})),y,n,o);return e&&ie?me.createElement(Yl.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...j},navigationType:"POP"}},ie):ie}function rE(){let s=fE(),e=Qw(s)?`${s.status} ${s.statusText}`:s instanceof Error?s.message:JSON.stringify(s),n=s instanceof Error?s.stack:null,o="rgba(200,200,200, 0.5)",u={padding:"0.5rem",backgroundColor:o},f={padding:"2px 4px",backgroundColor:o},y=null;return console.error("Error handled by React Router default ErrorBoundary:",s),y=me.createElement(me.Fragment,null,me.createElement("p",null," Hey developer "),me.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",me.createElement("code",{style:f},"ErrorBoundary")," or"," ",me.createElement("code",{style:f},"errorElement")," prop on your route.")),me.createElement(me.Fragment,null,me.createElement("h2",null,"Unexpected Application Error!"),me.createElement("h3",{style:{fontStyle:"italic"}},e),n?me.createElement("pre",{style:u},n):null,y)}var iE=me.createElement(rE,null),sE=class extends me.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,e){return e.location!==s.location||e.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:e.error,location:e.location,revalidation:s.revalidation||e.revalidation}}componentDidCatch(s,e){console.error("React Router caught the following error during render",s,e)}render(){return this.state.error!==void 0?me.createElement(Hs.Provider,{value:this.props.routeContext},me.createElement(Ad.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function oE({routeContext:s,match:e,children:n}){let o=me.useContext(Qa);return o&&o.static&&o.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=e.route.id),me.createElement(Hs.Provider,{value:s},n)}function aE(s,e=[],n=null,o=null){if(s==null){if(!n)return null;if(n.errors)s=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)s=n.matches;else return null}let u=s,f=n==null?void 0:n.errors;if(f!=null){let C=u.findIndex(x=>x.route.id&&(f==null?void 0:f[x.route.id])!==void 0);In(C>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(f).join(",")}`),u=u.slice(0,Math.min(u.length,C+1))}let y=!1,A=-1;if(n)for(let C=0;C<u.length;C++){let x=u[C];if((x.route.HydrateFallback||x.route.hydrateFallbackElement)&&(A=C),x.route.id){let{loaderData:R,errors:D}=n,k=x.route.loader&&!R.hasOwnProperty(x.route.id)&&(!D||D[x.route.id]===void 0);if(x.route.lazy||k){y=!0,A>=0?u=u.slice(0,A+1):u=[u[0]];break}}}return u.reduceRight((C,x,R)=>{let D,k=!1,j=null,q=null;n&&(D=f&&x.route.id?f[x.route.id]:void 0,j=x.route.errorElement||iE,y&&(A<0&&R===0?(vm("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),k=!0,q=null):A===R&&(k=!0,q=x.route.hydrateFallbackElement||null)));let Q=e.concat(u.slice(0,R+1)),J=()=>{let ie;return D?ie=j:k?ie=q:x.route.Component?ie=me.createElement(x.route.Component,null):x.route.element?ie=x.route.element:ie=C,me.createElement(oE,{match:x,routeContext:{outlet:C,matches:Q,isDataRoute:n!=null},children:ie})};return n&&(x.route.ErrorBoundary||x.route.errorElement||R===0)?me.createElement(sE,{location:n.location,revalidation:n.revalidation,component:j,error:D,children:J(),routeContext:{outlet:null,matches:Q,isDataRoute:!0}}):J()},null)}function _d(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function lE(s){let e=me.useContext(Qa);return In(e,_d(s)),e}function uE(s){let e=me.useContext(bc);return In(e,_d(s)),e}function cE(s){let e=me.useContext(Hs);return In(e,_d(s)),e}function Cd(s){let e=cE(s),n=e.matches[e.matches.length-1];return In(n.route.id,`${s} can only be used on routes that contain a unique "id"`),n.route.id}function hE(){return Cd("useRouteId")}function fE(){var o;let s=me.useContext(Ad),e=uE("useRouteError"),n=Cd("useRouteError");return s!==void 0?s:(o=e.errors)==null?void 0:o[n]}function dE(){let{router:s}=lE("useNavigate"),e=Cd("useNavigate"),n=me.useRef(!1);return _m(()=>{n.current=!0}),me.useCallback(async(u,f={})=>{ds(n.current,Am),n.current&&(typeof u=="number"?s.navigate(u):await s.navigate(u,{fromRouteId:e,...f}))},[s,e])}var pg={};function vm(s,e,n){!e&&!pg[s]&&(pg[s]=!0,ds(!1,n))}me.memo(gE);function gE({routes:s,future:e,state:n}){return Cm(s,void 0,n,e)}function tc(s){In(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function pE({basename:s="/",children:e=null,location:n,navigationType:o="POP",navigator:u,static:f=!1}){In(!Xl(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let y=s.replace(/^\/*/,"/"),A=me.useMemo(()=>({basename:y,navigator:u,static:f,future:{}}),[y,u,f]);typeof n=="string"&&(n=qa(n));let{pathname:C="/",search:x="",hash:R="",state:D=null,key:k="default"}=n,j=me.useMemo(()=>{let q=Vs(C,y);return q==null?null:{location:{pathname:q,search:x,hash:R,state:D,key:k},navigationType:o}},[y,C,x,R,D,k,o]);return ds(j!=null,`<Router basename="${y}"> is not able to match the URL "${C}${x}${R}" because it does not start with the basename, so the <Router> won't render anything.`),j==null?null:me.createElement(ms.Provider,{value:A},me.createElement(Yl.Provider,{children:e,value:j}))}function mE({children:s,location:e}){return nE(Kf(s),e)}function Kf(s,e=[]){let n=[];return me.Children.forEach(s,(o,u)=>{if(!me.isValidElement(o))return;let f=[...e,u];if(o.type===me.Fragment){n.push.apply(n,Kf(o.props.children,f));return}In(o.type===tc,`[${typeof o.type=="string"?o.type:o.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),In(!o.props.index||!o.props.children,"An index route cannot have child routes.");let y={id:o.props.id||f.join("-"),caseSensitive:o.props.caseSensitive,element:o.props.element,Component:o.props.Component,index:o.props.index,path:o.props.path,loader:o.props.loader,action:o.props.action,hydrateFallbackElement:o.props.hydrateFallbackElement,HydrateFallback:o.props.HydrateFallback,errorElement:o.props.errorElement,ErrorBoundary:o.props.ErrorBoundary,hasErrorBoundary:o.props.hasErrorBoundary===!0||o.props.ErrorBoundary!=null||o.props.errorElement!=null,shouldRevalidate:o.props.shouldRevalidate,handle:o.props.handle,lazy:o.props.lazy};o.props.children&&(y.children=Kf(o.props.children,f)),n.push(y)}),n}var nc="get",rc="application/x-www-form-urlencoded";function Mc(s){return s!=null&&typeof s.tagName=="string"}function yE(s){return Mc(s)&&s.tagName.toLowerCase()==="button"}function wE(s){return Mc(s)&&s.tagName.toLowerCase()==="form"}function EE(s){return Mc(s)&&s.tagName.toLowerCase()==="input"}function xE(s){return!!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)}function AE(s,e){return s.button===0&&(!e||e==="_self")&&!xE(s)}var Xu=null;function _E(){if(Xu===null)try{new FormData(document.createElement("form"),0),Xu=!1}catch{Xu=!0}return Xu}var CE=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function yf(s){return s!=null&&!CE.has(s)?(ds(!1,`"${s}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${rc}"`),null):s}function vE(s,e){let n,o,u,f,y;if(wE(s)){let A=s.getAttribute("action");o=A?Vs(A,e):null,n=s.getAttribute("method")||nc,u=yf(s.getAttribute("enctype"))||rc,f=new FormData(s)}else if(yE(s)||EE(s)&&(s.type==="submit"||s.type==="image")){let A=s.form;if(A==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let C=s.getAttribute("formaction")||A.getAttribute("action");if(o=C?Vs(C,e):null,n=s.getAttribute("formmethod")||A.getAttribute("method")||nc,u=yf(s.getAttribute("formenctype"))||yf(A.getAttribute("enctype"))||rc,f=new FormData(A,s),!_E()){let{name:x,type:R,value:D}=s;if(R==="image"){let k=x?`${x}.`:"";f.append(`${k}x`,"0"),f.append(`${k}y`,"0")}else x&&f.append(x,D)}}else{if(Mc(s))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=nc,o=null,u=rc,y=s}return f&&u==="text/plain"&&(y=f,f=void 0),{action:o,method:n.toLowerCase(),encType:u,formData:f,body:y}}function vd(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}async function IE(s,e){if(s.id in e)return e[s.id];try{let n=await import(s.module);return e[s.id]=n,n}catch(n){return console.error(`Error loading route module \`${s.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function TE(s){return s==null?!1:s.href==null?s.rel==="preload"&&typeof s.imageSrcSet=="string"&&typeof s.imageSizes=="string":typeof s.rel=="string"&&typeof s.href=="string"}async function SE(s,e,n){let o=await Promise.all(s.map(async u=>{let f=e.routes[u.route.id];if(f){let y=await IE(f,n);return y.links?y.links():[]}return[]}));return bE(o.flat(1).filter(TE).filter(u=>u.rel==="stylesheet"||u.rel==="preload").map(u=>u.rel==="stylesheet"?{...u,rel:"prefetch",as:"style"}:{...u,rel:"prefetch"}))}function mg(s,e,n,o,u,f){let y=(C,x)=>n[x]?C.route.id!==n[x].route.id:!0,A=(C,x)=>{var R;return n[x].pathname!==C.pathname||((R=n[x].route.path)==null?void 0:R.endsWith("*"))&&n[x].params["*"]!==C.params["*"]};return f==="assets"?e.filter((C,x)=>y(C,x)||A(C,x)):f==="data"?e.filter((C,x)=>{var D;let R=o.routes[C.route.id];if(!R||!R.hasLoader)return!1;if(y(C,x)||A(C,x))return!0;if(C.route.shouldRevalidate){let k=C.route.shouldRevalidate({currentUrl:new URL(u.pathname+u.search+u.hash,window.origin),currentParams:((D=n[0])==null?void 0:D.params)||{},nextUrl:new URL(s,window.origin),nextParams:C.params,defaultShouldRevalidate:!0});if(typeof k=="boolean")return k}return!0}):[]}function RE(s,e,{includeHydrateFallback:n}={}){return NE(s.map(o=>{let u=e.routes[o.route.id];if(!u)return[];let f=[u.module];return u.clientActionModule&&(f=f.concat(u.clientActionModule)),u.clientLoaderModule&&(f=f.concat(u.clientLoaderModule)),n&&u.hydrateFallbackModule&&(f=f.concat(u.hydrateFallbackModule)),u.imports&&(f=f.concat(u.imports)),f}).flat(1))}function NE(s){return[...new Set(s)]}function DE(s){let e={},n=Object.keys(s).sort();for(let o of n)e[o]=s[o];return e}function bE(s,e){let n=new Set;return new Set(e),s.reduce((o,u)=>{let f=JSON.stringify(DE(u));return n.has(f)||(n.add(f),o.push({key:f,link:u})),o},[])}function ME(s,e){let n=typeof s=="string"?new URL(s,typeof window>"u"?"server://singlefetch/":window.location.origin):s;return n.pathname==="/"?n.pathname="_root.data":e&&Vs(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.data`:n.pathname=`${n.pathname.replace(/\/$/,"")}.data`,n}function Im(){let s=me.useContext(Qa);return vd(s,"You must render this element inside a <DataRouterContext.Provider> element"),s}function OE(){let s=me.useContext(bc);return vd(s,"You must render this element inside a <DataRouterStateContext.Provider> element"),s}var Id=me.createContext(void 0);Id.displayName="FrameworkContext";function Tm(){let s=me.useContext(Id);return vd(s,"You must render this element inside a <HydratedRouter> element"),s}function PE(s,e){let n=me.useContext(Id),[o,u]=me.useState(!1),[f,y]=me.useState(!1),{onFocus:A,onBlur:C,onMouseEnter:x,onMouseLeave:R,onTouchStart:D}=e,k=me.useRef(null);me.useEffect(()=>{if(s==="render"&&y(!0),s==="viewport"){let Q=ie=>{ie.forEach(he=>{y(he.isIntersecting)})},J=new IntersectionObserver(Q,{threshold:.5});return k.current&&J.observe(k.current),()=>{J.disconnect()}}},[s]),me.useEffect(()=>{if(o){let Q=setTimeout(()=>{y(!0)},100);return()=>{clearTimeout(Q)}}},[o]);let j=()=>{u(!0)},q=()=>{u(!1),y(!1)};return n?s!=="intent"?[f,k,{}]:[f,k,{onFocus:Tl(A,j),onBlur:Tl(C,q),onMouseEnter:Tl(x,j),onMouseLeave:Tl(R,q),onTouchStart:Tl(D,j)}]:[!1,k,{}]}function Tl(s,e){return n=>{s&&s(n),n.defaultPrevented||e(n)}}function LE({page:s,...e}){let{router:n}=Im(),o=me.useMemo(()=>gm(n.routes,s,n.basename),[n.routes,s,n.basename]);return o?me.createElement(BE,{page:s,matches:o,...e}):null}function kE(s){let{manifest:e,routeModules:n}=Tm(),[o,u]=me.useState([]);return me.useEffect(()=>{let f=!1;return SE(s,e,n).then(y=>{f||u(y)}),()=>{f=!0}},[s,e,n]),o}function BE({page:s,matches:e,...n}){let o=ia(),{manifest:u,routeModules:f}=Tm(),{basename:y}=Im(),{loaderData:A,matches:C}=OE(),x=me.useMemo(()=>mg(s,e,C,u,o,"data"),[s,e,C,u,o]),R=me.useMemo(()=>mg(s,e,C,u,o,"assets"),[s,e,C,u,o]),D=me.useMemo(()=>{if(s===o.pathname+o.search+o.hash)return[];let q=new Set,Q=!1;if(e.forEach(ie=>{var te;let he=u.routes[ie.route.id];!he||!he.hasLoader||(!x.some(pe=>pe.route.id===ie.route.id)&&ie.route.id in A&&((te=f[ie.route.id])!=null&&te.shouldRevalidate)||he.hasClientLoader?Q=!0:q.add(ie.route.id))}),q.size===0)return[];let J=ME(s,y);return Q&&q.size>0&&J.searchParams.set("_routes",e.filter(ie=>q.has(ie.route.id)).map(ie=>ie.route.id).join(",")),[J.pathname+J.search]},[y,A,o,u,x,e,s,f]),k=me.useMemo(()=>RE(R,u),[R,u]),j=kE(R);return me.createElement(me.Fragment,null,D.map(q=>me.createElement("link",{key:q,rel:"prefetch",as:"fetch",href:q,...n})),k.map(q=>me.createElement("link",{key:q,rel:"modulepreload",href:q,...n})),j.map(({key:q,link:Q})=>me.createElement("link",{key:q,...Q})))}function FE(...s){return e=>{s.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var Sm=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Sm&&(window.__reactRouterVersion="7.5.0")}catch{}function VE({basename:s,children:e,window:n}){let o=me.useRef();o.current==null&&(o.current=Sw({window:n,v5Compat:!0}));let u=o.current,[f,y]=me.useState({action:u.action,location:u.location}),A=me.useCallback(C=>{me.startTransition(()=>y(C))},[y]);return me.useLayoutEffect(()=>u.listen(A),[u,A]),me.createElement(pE,{basename:s,children:e,location:f.location,navigationType:f.action,navigator:u})}var Rm=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Nm=me.forwardRef(function({onClick:e,discover:n="render",prefetch:o="none",relative:u,reloadDocument:f,replace:y,state:A,target:C,to:x,preventScrollReset:R,viewTransition:D,...k},j){let{basename:q}=me.useContext(ms),Q=typeof x=="string"&&Rm.test(x),J,ie=!1;if(typeof x=="string"&&Q&&(J=x,Sm))try{let P=new URL(window.location.href),G=x.startsWith("//")?new URL(P.protocol+x):new URL(x),Y=Vs(G.pathname,q);G.origin===P.origin&&Y!=null?x=Y+G.search+G.hash:ie=!0}catch{ds(!1,`<Link to="${x}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let he=Jw(x,{relative:u}),[te,pe,Ge]=PE(o,k),we=jE(x,{replace:y,state:A,target:C,preventScrollReset:R,relative:u,viewTransition:D});function F(P){e&&e(P),P.defaultPrevented||we(P)}let B=me.createElement("a",{...k,...Ge,href:J||he,onClick:ie||f?e:F,ref:FE(j,pe),target:C,"data-discover":!Q&&n==="render"?"true":void 0});return te&&!Q?me.createElement(me.Fragment,null,B,me.createElement(LE,{page:he})):B});Nm.displayName="Link";var ic=me.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:o="",end:u=!1,style:f,to:y,viewTransition:A,children:C,...x},R){let D=ql(y,{relative:x.relative}),k=ia(),j=me.useContext(bc),{navigator:q,basename:Q}=me.useContext(ms),J=j!=null&&XE(D)&&A===!0,ie=q.encodeLocation?q.encodeLocation(D).pathname:D.pathname,he=k.pathname,te=j&&j.navigation&&j.navigation.location?j.navigation.location.pathname:null;n||(he=he.toLowerCase(),te=te?te.toLowerCase():null,ie=ie.toLowerCase()),te&&Q&&(te=Vs(te,Q)||te);const pe=ie!=="/"&&ie.endsWith("/")?ie.length-1:ie.length;let Ge=he===ie||!u&&he.startsWith(ie)&&he.charAt(pe)==="/",we=te!=null&&(te===ie||!u&&te.startsWith(ie)&&te.charAt(ie.length)==="/"),F={isActive:Ge,isPending:we,isTransitioning:J},B=Ge?e:void 0,P;typeof o=="function"?P=o(F):P=[o,Ge?"active":null,we?"pending":null,J?"transitioning":null].filter(Boolean).join(" ");let G=typeof f=="function"?f(F):f;return me.createElement(Nm,{...x,"aria-current":B,className:P,ref:R,style:G,to:y,viewTransition:A},typeof C=="function"?C(F):C)});ic.displayName="NavLink";var UE=me.forwardRef(({discover:s="render",fetcherKey:e,navigate:n,reloadDocument:o,replace:u,state:f,method:y=nc,action:A,onSubmit:C,relative:x,preventScrollReset:R,viewTransition:D,...k},j)=>{let q=GE(),Q=YE(A,{relative:x}),J=y.toLowerCase()==="get"?"get":"post",ie=typeof A=="string"&&Rm.test(A),he=te=>{if(C&&C(te),te.defaultPrevented)return;te.preventDefault();let pe=te.nativeEvent.submitter,Ge=(pe==null?void 0:pe.getAttribute("formmethod"))||y;q(pe||te.currentTarget,{fetcherKey:e,method:Ge,navigate:n,replace:u,state:f,relative:x,preventScrollReset:R,viewTransition:D})};return me.createElement("form",{ref:j,method:J,action:Q,onSubmit:o?C:he,...k,"data-discover":!ie&&s==="render"?"true":void 0})});UE.displayName="Form";function zE(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Dm(s){let e=me.useContext(Qa);return In(e,zE(s)),e}function jE(s,{target:e,replace:n,state:o,preventScrollReset:u,relative:f,viewTransition:y}={}){let A=eE(),C=ia(),x=ql(s,{relative:f});return me.useCallback(R=>{if(AE(R,e)){R.preventDefault();let D=n!==void 0?n:Bl(C)===Bl(x);A(s,{replace:D,state:o,preventScrollReset:u,relative:f,viewTransition:y})}},[C,A,x,n,o,e,s,u,f,y])}var HE=0,WE=()=>`__${String(++HE)}__`;function GE(){let{router:s}=Dm("useSubmit"),{basename:e}=me.useContext(ms),n=hE();return me.useCallback(async(o,u={})=>{let{action:f,method:y,encType:A,formData:C,body:x}=vE(o,e);if(u.navigate===!1){let R=u.fetcherKey||WE();await s.fetch(R,n,u.action||f,{preventScrollReset:u.preventScrollReset,formData:C,body:x,formMethod:u.method||y,formEncType:u.encType||A,flushSync:u.flushSync})}else await s.navigate(u.action||f,{preventScrollReset:u.preventScrollReset,formData:C,body:x,formMethod:u.method||y,formEncType:u.encType||A,replace:u.replace,state:u.state,fromRouteId:n,flushSync:u.flushSync,viewTransition:u.viewTransition})},[s,e,n])}function YE(s,{relative:e}={}){let{basename:n}=me.useContext(ms),o=me.useContext(Hs);In(o,"useFormAction must be used inside a RouteContext");let[u]=o.matches.slice(-1),f={...ql(s||".",{relative:e})},y=ia();if(s==null){f.search=y.search;let A=new URLSearchParams(f.search),C=A.getAll("index");if(C.some(R=>R==="")){A.delete("index"),C.filter(D=>D).forEach(D=>A.append("index",D));let R=A.toString();f.search=R?`?${R}`:""}}return(!s||s===".")&&u.route.index&&(f.search=f.search?f.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(f.pathname=f.pathname==="/"?n:Fs([n,f.pathname])),Bl(f)}function XE(s,e={}){let n=me.useContext(xm);In(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:o}=Dm("useViewTransitionState"),u=ql(s,{relative:e.relative});if(!n.isTransitioning)return!1;let f=Vs(n.currentLocation.pathname,o)||n.currentLocation.pathname,y=Vs(n.nextLocation.pathname,o)||n.nextLocation.pathname;return fc(u.pathname,y)!=null||fc(u.pathname,f)!=null}new TextEncoder;function qE(){const[s,e]=me.useState(!1),[n,o]=me.useState(localStorage.getItem("isLoggedIn")==="true"),[u,f]=me.useState(""),[y,A]=me.useState(""),[C,x]=me.useState(localStorage.getItem("eventDate")||""),[R,D]=me.useState(!1);me.useEffect(()=>{localStorage.setItem("eventDate",C)},[C]);const k=Q=>{Q.preventDefault(),u==="admin"&&y==="iglesiajoven"?(localStorage.setItem("isLoggedIn","true"),o(!0),alert("Acceso exitoso"),D(!1)):alert("Credenciales incorrectas")},j=()=>{localStorage.removeItem("isLoggedIn"),o(!1)},q=()=>{localStorage.setItem("eventDate",C),window.dispatchEvent(new Event("fechaEventoActualizada"))};return Ee.jsxs("nav",{className:"navbar",children:[Ee.jsx("h1",{className:"logo",children:"Registro QR"}),Ee.jsxs("div",{className:`nav-toggle ${s?"open":""}`,onClick:()=>e(!s),children:[Ee.jsx("span",{}),Ee.jsx("span",{}),Ee.jsx("span",{})]}),Ee.jsxs("ul",{className:`nav-links ${s?"show":""}`,children:[Ee.jsx("li",{children:Ee.jsx(ic,{exact:"true",to:"/",onClick:()=>e(!1),children:"Registrar"})}),n&&Ee.jsxs(Ee.Fragment,{children:[Ee.jsx("li",{children:Ee.jsx(ic,{to:"/registros",onClick:()=>e(!1),children:"Lista"})}),Ee.jsx("li",{children:Ee.jsx(ic,{to:"/escanear",onClick:()=>e(!1),children:"Escanear"})})]})]}),n?Ee.jsxs(Ee.Fragment,{children:[Ee.jsxs("div",{className:"event-date-container",children:[Ee.jsx("input",{type:"text",value:C,onChange:Q=>x(Q.target.value),placeholder:"Fecha del evento"}),Ee.jsx("button",{onClick:q,children:"Guardar fecha"})]}),Ee.jsx("button",{onClick:j,className:"logout-btn",children:"Cerrar sesin"})]}):Ee.jsxs(Ee.Fragment,{children:[Ee.jsx("div",{className:"login-toggle-btn",onClick:()=>D(!R),children:R?"Ocultar Login":"Iniciar Sesin"}),Ee.jsxs("form",{onSubmit:k,className:`login-form ${R?"show":""}`,children:[Ee.jsx("input",{type:"text",placeholder:"Usuario",value:u,onChange:Q=>f(Q.target.value),required:!0}),Ee.jsx("input",{type:"password",placeholder:"Contrasea",value:y,onChange:Q=>A(Q.target.value),required:!0}),Ee.jsx("button",{type:"submit",children:"Iniciar sesin"})]})]})]})}var Oa={},wf,yg;function QE(){return yg||(yg=1,wf=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then}),wf}var Ef={},mo={},wg;function sa(){if(wg)return mo;wg=1;let s;const e=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];return mo.getSymbolSize=function(o){if(!o)throw new Error('"version" cannot be null or undefined');if(o<1||o>40)throw new Error('"version" should be in range from 1 to 40');return o*4+17},mo.getSymbolTotalCodewords=function(o){return e[o]},mo.getBCHDigit=function(n){let o=0;for(;n!==0;)o++,n>>>=1;return o},mo.setToSJISFunction=function(o){if(typeof o!="function")throw new Error('"toSJISFunc" is not a valid function.');s=o},mo.isKanjiModeEnabled=function(){return typeof s<"u"},mo.toSJIS=function(o){return s(o)},mo}var xf={},Eg;function Td(){return Eg||(Eg=1,function(s){s.L={bit:1},s.M={bit:0},s.Q={bit:3},s.H={bit:2};function e(n){if(typeof n!="string")throw new Error("Param is not a string");switch(n.toLowerCase()){case"l":case"low":return s.L;case"m":case"medium":return s.M;case"q":case"quartile":return s.Q;case"h":case"high":return s.H;default:throw new Error("Unknown EC Level: "+n)}}s.isValid=function(o){return o&&typeof o.bit<"u"&&o.bit>=0&&o.bit<4},s.from=function(o,u){if(s.isValid(o))return o;try{return e(o)}catch{return u}}}(xf)),xf}var Af,xg;function KE(){if(xg)return Af;xg=1;function s(){this.buffer=[],this.length=0}return s.prototype={get:function(e){const n=Math.floor(e/8);return(this.buffer[n]>>>7-e%8&1)===1},put:function(e,n){for(let o=0;o<n;o++)this.putBit((e>>>n-o-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(e){const n=Math.floor(this.length/8);this.buffer.length<=n&&this.buffer.push(0),e&&(this.buffer[n]|=128>>>this.length%8),this.length++}},Af=s,Af}var _f,Ag;function ZE(){if(Ag)return _f;Ag=1;function s(e){if(!e||e<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=new Uint8Array(e*e),this.reservedBit=new Uint8Array(e*e)}return s.prototype.set=function(e,n,o,u){const f=e*this.size+n;this.data[f]=o,u&&(this.reservedBit[f]=!0)},s.prototype.get=function(e,n){return this.data[e*this.size+n]},s.prototype.xor=function(e,n,o){this.data[e*this.size+n]^=o},s.prototype.isReserved=function(e,n){return this.reservedBit[e*this.size+n]},_f=s,_f}var Cf={},_g;function $E(){return _g||(_g=1,function(s){const e=sa().getSymbolSize;s.getRowColCoords=function(o){if(o===1)return[];const u=Math.floor(o/7)+2,f=e(o),y=f===145?26:Math.ceil((f-13)/(2*u-2))*2,A=[f-7];for(let C=1;C<u-1;C++)A[C]=A[C-1]-y;return A.push(6),A.reverse()},s.getPositions=function(o){const u=[],f=s.getRowColCoords(o),y=f.length;for(let A=0;A<y;A++)for(let C=0;C<y;C++)A===0&&C===0||A===0&&C===y-1||A===y-1&&C===0||u.push([f[A],f[C]]);return u}}(Cf)),Cf}var vf={},Cg;function JE(){if(Cg)return vf;Cg=1;const s=sa().getSymbolSize,e=7;return vf.getPositions=function(o){const u=s(o);return[[0,0],[u-e,0],[0,u-e]]},vf}var If={},vg;function ex(){return vg||(vg=1,function(s){s.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const e={N1:3,N2:3,N3:40,N4:10};s.isValid=function(u){return u!=null&&u!==""&&!isNaN(u)&&u>=0&&u<=7},s.from=function(u){return s.isValid(u)?parseInt(u,10):void 0},s.getPenaltyN1=function(u){const f=u.size;let y=0,A=0,C=0,x=null,R=null;for(let D=0;D<f;D++){A=C=0,x=R=null;for(let k=0;k<f;k++){let j=u.get(D,k);j===x?A++:(A>=5&&(y+=e.N1+(A-5)),x=j,A=1),j=u.get(k,D),j===R?C++:(C>=5&&(y+=e.N1+(C-5)),R=j,C=1)}A>=5&&(y+=e.N1+(A-5)),C>=5&&(y+=e.N1+(C-5))}return y},s.getPenaltyN2=function(u){const f=u.size;let y=0;for(let A=0;A<f-1;A++)for(let C=0;C<f-1;C++){const x=u.get(A,C)+u.get(A,C+1)+u.get(A+1,C)+u.get(A+1,C+1);(x===4||x===0)&&y++}return y*e.N2},s.getPenaltyN3=function(u){const f=u.size;let y=0,A=0,C=0;for(let x=0;x<f;x++){A=C=0;for(let R=0;R<f;R++)A=A<<1&2047|u.get(x,R),R>=10&&(A===1488||A===93)&&y++,C=C<<1&2047|u.get(R,x),R>=10&&(C===1488||C===93)&&y++}return y*e.N3},s.getPenaltyN4=function(u){let f=0;const y=u.data.length;for(let C=0;C<y;C++)f+=u.data[C];return Math.abs(Math.ceil(f*100/y/5)-10)*e.N4};function n(o,u,f){switch(o){case s.Patterns.PATTERN000:return(u+f)%2===0;case s.Patterns.PATTERN001:return u%2===0;case s.Patterns.PATTERN010:return f%3===0;case s.Patterns.PATTERN011:return(u+f)%3===0;case s.Patterns.PATTERN100:return(Math.floor(u/2)+Math.floor(f/3))%2===0;case s.Patterns.PATTERN101:return u*f%2+u*f%3===0;case s.Patterns.PATTERN110:return(u*f%2+u*f%3)%2===0;case s.Patterns.PATTERN111:return(u*f%3+(u+f)%2)%2===0;default:throw new Error("bad maskPattern:"+o)}}s.applyMask=function(u,f){const y=f.size;for(let A=0;A<y;A++)for(let C=0;C<y;C++)f.isReserved(C,A)||f.xor(C,A,n(u,C,A))},s.getBestMask=function(u,f){const y=Object.keys(s.Patterns).length;let A=0,C=1/0;for(let x=0;x<y;x++){f(x),s.applyMask(x,u);const R=s.getPenaltyN1(u)+s.getPenaltyN2(u)+s.getPenaltyN3(u)+s.getPenaltyN4(u);s.applyMask(x,u),R<C&&(C=R,A=x)}return A}}(If)),If}var qu={},Ig;function bm(){if(Ig)return qu;Ig=1;const s=Td(),e=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],n=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];return qu.getBlocksCount=function(u,f){switch(f){case s.L:return e[(u-1)*4+0];case s.M:return e[(u-1)*4+1];case s.Q:return e[(u-1)*4+2];case s.H:return e[(u-1)*4+3];default:return}},qu.getTotalCodewordsCount=function(u,f){switch(f){case s.L:return n[(u-1)*4+0];case s.M:return n[(u-1)*4+1];case s.Q:return n[(u-1)*4+2];case s.H:return n[(u-1)*4+3];default:return}},qu}var Tf={},Sl={},Tg;function tx(){if(Tg)return Sl;Tg=1;const s=new Uint8Array(512),e=new Uint8Array(256);return function(){let o=1;for(let u=0;u<255;u++)s[u]=o,e[o]=u,o<<=1,o&256&&(o^=285);for(let u=255;u<512;u++)s[u]=s[u-255]}(),Sl.log=function(o){if(o<1)throw new Error("log("+o+")");return e[o]},Sl.exp=function(o){return s[o]},Sl.mul=function(o,u){return o===0||u===0?0:s[e[o]+e[u]]},Sl}var Sg;function nx(){return Sg||(Sg=1,function(s){const e=tx();s.mul=function(o,u){const f=new Uint8Array(o.length+u.length-1);for(let y=0;y<o.length;y++)for(let A=0;A<u.length;A++)f[y+A]^=e.mul(o[y],u[A]);return f},s.mod=function(o,u){let f=new Uint8Array(o);for(;f.length-u.length>=0;){const y=f[0];for(let C=0;C<u.length;C++)f[C]^=e.mul(u[C],y);let A=0;for(;A<f.length&&f[A]===0;)A++;f=f.slice(A)}return f},s.generateECPolynomial=function(o){let u=new Uint8Array([1]);for(let f=0;f<o;f++)u=s.mul(u,new Uint8Array([1,e.exp(f)]));return u}}(Tf)),Tf}var Sf,Rg;function rx(){if(Rg)return Sf;Rg=1;const s=nx();function e(n){this.genPoly=void 0,this.degree=n,this.degree&&this.initialize(this.degree)}return e.prototype.initialize=function(o){this.degree=o,this.genPoly=s.generateECPolynomial(this.degree)},e.prototype.encode=function(o){if(!this.genPoly)throw new Error("Encoder not initialized");const u=new Uint8Array(o.length+this.degree);u.set(o);const f=s.mod(u,this.genPoly),y=this.degree-f.length;if(y>0){const A=new Uint8Array(this.degree);return A.set(f,y),A}return f},Sf=e,Sf}var Rf={},Nf={},Df={},Ng;function Mm(){return Ng||(Ng=1,Df.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40}),Df}var ls={},Dg;function Om(){if(Dg)return ls;Dg=1;const s="[0-9]+",e="[A-Z $%*+\\-./:]+";let n="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";n=n.replace(/u/g,"\\u");const o="(?:(?![A-Z0-9 $%*+\\-./:]|"+n+`)(?:.|[\r
]))+`;ls.KANJI=new RegExp(n,"g"),ls.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),ls.BYTE=new RegExp(o,"g"),ls.NUMERIC=new RegExp(s,"g"),ls.ALPHANUMERIC=new RegExp(e,"g");const u=new RegExp("^"+n+"$"),f=new RegExp("^"+s+"$"),y=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");return ls.testKanji=function(C){return u.test(C)},ls.testNumeric=function(C){return f.test(C)},ls.testAlphanumeric=function(C){return y.test(C)},ls}var bg;function oa(){return bg||(bg=1,function(s){const e=Mm(),n=Om();s.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},s.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},s.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},s.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},s.MIXED={bit:-1},s.getCharCountIndicator=function(f,y){if(!f.ccBits)throw new Error("Invalid mode: "+f);if(!e.isValid(y))throw new Error("Invalid version: "+y);return y>=1&&y<10?f.ccBits[0]:y<27?f.ccBits[1]:f.ccBits[2]},s.getBestModeForData=function(f){return n.testNumeric(f)?s.NUMERIC:n.testAlphanumeric(f)?s.ALPHANUMERIC:n.testKanji(f)?s.KANJI:s.BYTE},s.toString=function(f){if(f&&f.id)return f.id;throw new Error("Invalid mode")},s.isValid=function(f){return f&&f.bit&&f.ccBits};function o(u){if(typeof u!="string")throw new Error("Param is not a string");switch(u.toLowerCase()){case"numeric":return s.NUMERIC;case"alphanumeric":return s.ALPHANUMERIC;case"kanji":return s.KANJI;case"byte":return s.BYTE;default:throw new Error("Unknown mode: "+u)}}s.from=function(f,y){if(s.isValid(f))return f;try{return o(f)}catch{return y}}}(Nf)),Nf}var Mg;function ix(){return Mg||(Mg=1,function(s){const e=sa(),n=bm(),o=Td(),u=oa(),f=Mm(),y=7973,A=e.getBCHDigit(y);function C(k,j,q){for(let Q=1;Q<=40;Q++)if(j<=s.getCapacity(Q,q,k))return Q}function x(k,j){return u.getCharCountIndicator(k,j)+4}function R(k,j){let q=0;return k.forEach(function(Q){const J=x(Q.mode,j);q+=J+Q.getBitsLength()}),q}function D(k,j){for(let q=1;q<=40;q++)if(R(k,q)<=s.getCapacity(q,j,u.MIXED))return q}s.from=function(j,q){return f.isValid(j)?parseInt(j,10):q},s.getCapacity=function(j,q,Q){if(!f.isValid(j))throw new Error("Invalid QR Code version");typeof Q>"u"&&(Q=u.BYTE);const J=e.getSymbolTotalCodewords(j),ie=n.getTotalCodewordsCount(j,q),he=(J-ie)*8;if(Q===u.MIXED)return he;const te=he-x(Q,j);switch(Q){case u.NUMERIC:return Math.floor(te/10*3);case u.ALPHANUMERIC:return Math.floor(te/11*2);case u.KANJI:return Math.floor(te/13);case u.BYTE:default:return Math.floor(te/8)}},s.getBestVersionForData=function(j,q){let Q;const J=o.from(q,o.M);if(Array.isArray(j)){if(j.length>1)return D(j,J);if(j.length===0)return 1;Q=j[0]}else Q=j;return C(Q.mode,Q.getLength(),J)},s.getEncodedBits=function(j){if(!f.isValid(j)||j<7)throw new Error("Invalid QR Code version");let q=j<<12;for(;e.getBCHDigit(q)-A>=0;)q^=y<<e.getBCHDigit(q)-A;return j<<12|q}}(Rf)),Rf}var bf={},Og;function sx(){if(Og)return bf;Og=1;const s=sa(),e=1335,n=21522,o=s.getBCHDigit(e);return bf.getEncodedBits=function(f,y){const A=f.bit<<3|y;let C=A<<10;for(;s.getBCHDigit(C)-o>=0;)C^=e<<s.getBCHDigit(C)-o;return(A<<10|C)^n},bf}var Mf={},Of,Pg;function ox(){if(Pg)return Of;Pg=1;const s=oa();function e(n){this.mode=s.NUMERIC,this.data=n.toString()}return e.getBitsLength=function(o){return 10*Math.floor(o/3)+(o%3?o%3*3+1:0)},e.prototype.getLength=function(){return this.data.length},e.prototype.getBitsLength=function(){return e.getBitsLength(this.data.length)},e.prototype.write=function(o){let u,f,y;for(u=0;u+3<=this.data.length;u+=3)f=this.data.substr(u,3),y=parseInt(f,10),o.put(y,10);const A=this.data.length-u;A>0&&(f=this.data.substr(u),y=parseInt(f,10),o.put(y,A*3+1))},Of=e,Of}var Pf,Lg;function ax(){if(Lg)return Pf;Lg=1;const s=oa(),e=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function n(o){this.mode=s.ALPHANUMERIC,this.data=o}return n.getBitsLength=function(u){return 11*Math.floor(u/2)+6*(u%2)},n.prototype.getLength=function(){return this.data.length},n.prototype.getBitsLength=function(){return n.getBitsLength(this.data.length)},n.prototype.write=function(u){let f;for(f=0;f+2<=this.data.length;f+=2){let y=e.indexOf(this.data[f])*45;y+=e.indexOf(this.data[f+1]),u.put(y,11)}this.data.length%2&&u.put(e.indexOf(this.data[f]),6)},Pf=n,Pf}var Lf,kg;function lx(){if(kg)return Lf;kg=1;const s=oa();function e(n){this.mode=s.BYTE,typeof n=="string"?this.data=new TextEncoder().encode(n):this.data=new Uint8Array(n)}return e.getBitsLength=function(o){return o*8},e.prototype.getLength=function(){return this.data.length},e.prototype.getBitsLength=function(){return e.getBitsLength(this.data.length)},e.prototype.write=function(n){for(let o=0,u=this.data.length;o<u;o++)n.put(this.data[o],8)},Lf=e,Lf}var kf,Bg;function ux(){if(Bg)return kf;Bg=1;const s=oa(),e=sa();function n(o){this.mode=s.KANJI,this.data=o}return n.getBitsLength=function(u){return u*13},n.prototype.getLength=function(){return this.data.length},n.prototype.getBitsLength=function(){return n.getBitsLength(this.data.length)},n.prototype.write=function(o){let u;for(u=0;u<this.data.length;u++){let f=e.toSJIS(this.data[u]);if(f>=33088&&f<=40956)f-=33088;else if(f>=57408&&f<=60351)f-=49472;else throw new Error("Invalid SJIS character: "+this.data[u]+`
Make sure your charset is UTF-8`);f=(f>>>8&255)*192+(f&255),o.put(f,13)}},kf=n,kf}var Bf={exports:{}},Fg;function cx(){return Fg||(Fg=1,function(s){var e={single_source_shortest_paths:function(n,o,u){var f={},y={};y[o]=0;var A=e.PriorityQueue.make();A.push(o,0);for(var C,x,R,D,k,j,q,Q,J;!A.empty();){C=A.pop(),x=C.value,D=C.cost,k=n[x]||{};for(R in k)k.hasOwnProperty(R)&&(j=k[R],q=D+j,Q=y[R],J=typeof y[R]>"u",(J||Q>q)&&(y[R]=q,A.push(R,q),f[R]=x))}if(typeof u<"u"&&typeof y[u]>"u"){var ie=["Could not find a path from ",o," to ",u,"."].join("");throw new Error(ie)}return f},extract_shortest_path_from_predecessor_list:function(n,o){for(var u=[],f=o;f;)u.push(f),n[f],f=n[f];return u.reverse(),u},find_path:function(n,o,u){var f=e.single_source_shortest_paths(n,o,u);return e.extract_shortest_path_from_predecessor_list(f,u)},PriorityQueue:{make:function(n){var o=e.PriorityQueue,u={},f;n=n||{};for(f in o)o.hasOwnProperty(f)&&(u[f]=o[f]);return u.queue=[],u.sorter=n.sorter||o.default_sorter,u},default_sorter:function(n,o){return n.cost-o.cost},push:function(n,o){var u={value:n,cost:o};this.queue.push(u),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};s.exports=e}(Bf)),Bf.exports}var Vg;function hx(){return Vg||(Vg=1,function(s){const e=oa(),n=ox(),o=ax(),u=lx(),f=ux(),y=Om(),A=sa(),C=cx();function x(ie){return unescape(encodeURIComponent(ie)).length}function R(ie,he,te){const pe=[];let Ge;for(;(Ge=ie.exec(te))!==null;)pe.push({data:Ge[0],index:Ge.index,mode:he,length:Ge[0].length});return pe}function D(ie){const he=R(y.NUMERIC,e.NUMERIC,ie),te=R(y.ALPHANUMERIC,e.ALPHANUMERIC,ie);let pe,Ge;return A.isKanjiModeEnabled()?(pe=R(y.BYTE,e.BYTE,ie),Ge=R(y.KANJI,e.KANJI,ie)):(pe=R(y.BYTE_KANJI,e.BYTE,ie),Ge=[]),he.concat(te,pe,Ge).sort(function(F,B){return F.index-B.index}).map(function(F){return{data:F.data,mode:F.mode,length:F.length}})}function k(ie,he){switch(he){case e.NUMERIC:return n.getBitsLength(ie);case e.ALPHANUMERIC:return o.getBitsLength(ie);case e.KANJI:return f.getBitsLength(ie);case e.BYTE:return u.getBitsLength(ie)}}function j(ie){return ie.reduce(function(he,te){const pe=he.length-1>=0?he[he.length-1]:null;return pe&&pe.mode===te.mode?(he[he.length-1].data+=te.data,he):(he.push(te),he)},[])}function q(ie){const he=[];for(let te=0;te<ie.length;te++){const pe=ie[te];switch(pe.mode){case e.NUMERIC:he.push([pe,{data:pe.data,mode:e.ALPHANUMERIC,length:pe.length},{data:pe.data,mode:e.BYTE,length:pe.length}]);break;case e.ALPHANUMERIC:he.push([pe,{data:pe.data,mode:e.BYTE,length:pe.length}]);break;case e.KANJI:he.push([pe,{data:pe.data,mode:e.BYTE,length:x(pe.data)}]);break;case e.BYTE:he.push([{data:pe.data,mode:e.BYTE,length:x(pe.data)}])}}return he}function Q(ie,he){const te={},pe={start:{}};let Ge=["start"];for(let we=0;we<ie.length;we++){const F=ie[we],B=[];for(let P=0;P<F.length;P++){const G=F[P],Y=""+we+P;B.push(Y),te[Y]={node:G,lastCount:0},pe[Y]={};for(let W=0;W<Ge.length;W++){const U=Ge[W];te[U]&&te[U].node.mode===G.mode?(pe[U][Y]=k(te[U].lastCount+G.length,G.mode)-k(te[U].lastCount,G.mode),te[U].lastCount+=G.length):(te[U]&&(te[U].lastCount=G.length),pe[U][Y]=k(G.length,G.mode)+4+e.getCharCountIndicator(G.mode,he))}}Ge=B}for(let we=0;we<Ge.length;we++)pe[Ge[we]].end=0;return{map:pe,table:te}}function J(ie,he){let te;const pe=e.getBestModeForData(ie);if(te=e.from(he,pe),te!==e.BYTE&&te.bit<pe.bit)throw new Error('"'+ie+'" cannot be encoded with mode '+e.toString(te)+`.
 Suggested mode is: `+e.toString(pe));switch(te===e.KANJI&&!A.isKanjiModeEnabled()&&(te=e.BYTE),te){case e.NUMERIC:return new n(ie);case e.ALPHANUMERIC:return new o(ie);case e.KANJI:return new f(ie);case e.BYTE:return new u(ie)}}s.fromArray=function(he){return he.reduce(function(te,pe){return typeof pe=="string"?te.push(J(pe,null)):pe.data&&te.push(J(pe.data,pe.mode)),te},[])},s.fromString=function(he,te){const pe=D(he,A.isKanjiModeEnabled()),Ge=q(pe),we=Q(Ge,te),F=C.find_path(we.map,"start","end"),B=[];for(let P=1;P<F.length-1;P++)B.push(we.table[F[P]].node);return s.fromArray(j(B))},s.rawSplit=function(he){return s.fromArray(D(he,A.isKanjiModeEnabled()))}}(Mf)),Mf}var Ug;function fx(){if(Ug)return Ef;Ug=1;const s=sa(),e=Td(),n=KE(),o=ZE(),u=$E(),f=JE(),y=ex(),A=bm(),C=rx(),x=ix(),R=sx(),D=oa(),k=hx();function j(we,F){const B=we.size,P=f.getPositions(F);for(let G=0;G<P.length;G++){const Y=P[G][0],W=P[G][1];for(let U=-1;U<=7;U++)if(!(Y+U<=-1||B<=Y+U))for(let Le=-1;Le<=7;Le++)W+Le<=-1||B<=W+Le||(U>=0&&U<=6&&(Le===0||Le===6)||Le>=0&&Le<=6&&(U===0||U===6)||U>=2&&U<=4&&Le>=2&&Le<=4?we.set(Y+U,W+Le,!0,!0):we.set(Y+U,W+Le,!1,!0))}}function q(we){const F=we.size;for(let B=8;B<F-8;B++){const P=B%2===0;we.set(B,6,P,!0),we.set(6,B,P,!0)}}function Q(we,F){const B=u.getPositions(F);for(let P=0;P<B.length;P++){const G=B[P][0],Y=B[P][1];for(let W=-2;W<=2;W++)for(let U=-2;U<=2;U++)W===-2||W===2||U===-2||U===2||W===0&&U===0?we.set(G+W,Y+U,!0,!0):we.set(G+W,Y+U,!1,!0)}}function J(we,F){const B=we.size,P=x.getEncodedBits(F);let G,Y,W;for(let U=0;U<18;U++)G=Math.floor(U/3),Y=U%3+B-8-3,W=(P>>U&1)===1,we.set(G,Y,W,!0),we.set(Y,G,W,!0)}function ie(we,F,B){const P=we.size,G=R.getEncodedBits(F,B);let Y,W;for(Y=0;Y<15;Y++)W=(G>>Y&1)===1,Y<6?we.set(Y,8,W,!0):Y<8?we.set(Y+1,8,W,!0):we.set(P-15+Y,8,W,!0),Y<8?we.set(8,P-Y-1,W,!0):Y<9?we.set(8,15-Y-1+1,W,!0):we.set(8,15-Y-1,W,!0);we.set(P-8,8,1,!0)}function he(we,F){const B=we.size;let P=-1,G=B-1,Y=7,W=0;for(let U=B-1;U>0;U-=2)for(U===6&&U--;;){for(let Le=0;Le<2;Le++)if(!we.isReserved(G,U-Le)){let ue=!1;W<F.length&&(ue=(F[W]>>>Y&1)===1),we.set(G,U-Le,ue),Y--,Y===-1&&(W++,Y=7)}if(G+=P,G<0||B<=G){G-=P,P=-P;break}}}function te(we,F,B){const P=new n;B.forEach(function(Le){P.put(Le.mode.bit,4),P.put(Le.getLength(),D.getCharCountIndicator(Le.mode,we)),Le.write(P)});const G=s.getSymbolTotalCodewords(we),Y=A.getTotalCodewordsCount(we,F),W=(G-Y)*8;for(P.getLengthInBits()+4<=W&&P.put(0,4);P.getLengthInBits()%8!==0;)P.putBit(0);const U=(W-P.getLengthInBits())/8;for(let Le=0;Le<U;Le++)P.put(Le%2?17:236,8);return pe(P,we,F)}function pe(we,F,B){const P=s.getSymbolTotalCodewords(F),G=A.getTotalCodewordsCount(F,B),Y=P-G,W=A.getBlocksCount(F,B),U=P%W,Le=W-U,ue=Math.floor(P/W),yt=Math.floor(Y/W),Fe=yt+1,be=ue-yt,Ye=new C(be);let ke=0;const ne=new Array(W),ye=new Array(W);let ze=0;const $e=new Uint8Array(we.buffer);for(let _t=0;_t<W;_t++){const Kt=_t<Le?yt:Fe;ne[_t]=$e.slice(ke,ke+Kt),ye[_t]=Ye.encode(ne[_t]),ke+=Kt,ze=Math.max(ze,Kt)}const ct=new Uint8Array(P);let Ne=0,ft,Qe;for(ft=0;ft<ze;ft++)for(Qe=0;Qe<W;Qe++)ft<ne[Qe].length&&(ct[Ne++]=ne[Qe][ft]);for(ft=0;ft<be;ft++)for(Qe=0;Qe<W;Qe++)ct[Ne++]=ye[Qe][ft];return ct}function Ge(we,F,B,P){let G;if(Array.isArray(we))G=k.fromArray(we);else if(typeof we=="string"){let ue=F;if(!ue){const yt=k.rawSplit(we);ue=x.getBestVersionForData(yt,B)}G=k.fromString(we,ue||40)}else throw new Error("Invalid data");const Y=x.getBestVersionForData(G,B);if(!Y)throw new Error("The amount of data is too big to be stored in a QR Code");if(!F)F=Y;else if(F<Y)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+Y+`.
`);const W=te(F,B,G),U=s.getSymbolSize(F),Le=new o(U);return j(Le,F),q(Le),Q(Le,F),ie(Le,B,0),F>=7&&J(Le,F),he(Le,W),isNaN(P)&&(P=y.getBestMask(Le,ie.bind(null,Le,B))),y.applyMask(P,Le),ie(Le,B,P),{modules:Le,version:F,errorCorrectionLevel:B,maskPattern:P,segments:G}}return Ef.create=function(F,B){if(typeof F>"u"||F==="")throw new Error("No input text");let P=e.M,G,Y;return typeof B<"u"&&(P=e.from(B.errorCorrectionLevel,e.M),G=x.from(B.version),Y=y.from(B.maskPattern),B.toSJISFunc&&s.setToSJISFunction(B.toSJISFunc)),Ge(F,G,P,Y)},Ef}var Ff={},Vf={},zg;function Pm(){return zg||(zg=1,function(s){function e(n){if(typeof n=="number"&&(n=n.toString()),typeof n!="string")throw new Error("Color should be defined as hex string");let o=n.slice().replace("#","").split("");if(o.length<3||o.length===5||o.length>8)throw new Error("Invalid hex color: "+n);(o.length===3||o.length===4)&&(o=Array.prototype.concat.apply([],o.map(function(f){return[f,f]}))),o.length===6&&o.push("F","F");const u=parseInt(o.join(""),16);return{r:u>>24&255,g:u>>16&255,b:u>>8&255,a:u&255,hex:"#"+o.slice(0,6).join("")}}s.getOptions=function(o){o||(o={}),o.color||(o.color={});const u=typeof o.margin>"u"||o.margin===null||o.margin<0?4:o.margin,f=o.width&&o.width>=21?o.width:void 0,y=o.scale||4;return{width:f,scale:f?4:y,margin:u,color:{dark:e(o.color.dark||"#000000ff"),light:e(o.color.light||"#ffffffff")},type:o.type,rendererOpts:o.rendererOpts||{}}},s.getScale=function(o,u){return u.width&&u.width>=o+u.margin*2?u.width/(o+u.margin*2):u.scale},s.getImageWidth=function(o,u){const f=s.getScale(o,u);return Math.floor((o+u.margin*2)*f)},s.qrToImageData=function(o,u,f){const y=u.modules.size,A=u.modules.data,C=s.getScale(y,f),x=Math.floor((y+f.margin*2)*C),R=f.margin*C,D=[f.color.light,f.color.dark];for(let k=0;k<x;k++)for(let j=0;j<x;j++){let q=(k*x+j)*4,Q=f.color.light;if(k>=R&&j>=R&&k<x-R&&j<x-R){const J=Math.floor((k-R)/C),ie=Math.floor((j-R)/C);Q=D[A[J*y+ie]?1:0]}o[q++]=Q.r,o[q++]=Q.g,o[q++]=Q.b,o[q]=Q.a}}}(Vf)),Vf}var jg;function dx(){return jg||(jg=1,function(s){const e=Pm();function n(u,f,y){u.clearRect(0,0,f.width,f.height),f.style||(f.style={}),f.height=y,f.width=y,f.style.height=y+"px",f.style.width=y+"px"}function o(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}s.render=function(f,y,A){let C=A,x=y;typeof C>"u"&&(!y||!y.getContext)&&(C=y,y=void 0),y||(x=o()),C=e.getOptions(C);const R=e.getImageWidth(f.modules.size,C),D=x.getContext("2d"),k=D.createImageData(R,R);return e.qrToImageData(k.data,f,C),n(D,x,R),D.putImageData(k,0,0),x},s.renderToDataURL=function(f,y,A){let C=A;typeof C>"u"&&(!y||!y.getContext)&&(C=y,y=void 0),C||(C={});const x=s.render(f,y,C),R=C.type||"image/png",D=C.rendererOpts||{};return x.toDataURL(R,D.quality)}}(Ff)),Ff}var Uf={},Hg;function gx(){if(Hg)return Uf;Hg=1;const s=Pm();function e(u,f){const y=u.a/255,A=f+'="'+u.hex+'"';return y<1?A+" "+f+'-opacity="'+y.toFixed(2).slice(1)+'"':A}function n(u,f,y){let A=u+f;return typeof y<"u"&&(A+=" "+y),A}function o(u,f,y){let A="",C=0,x=!1,R=0;for(let D=0;D<u.length;D++){const k=Math.floor(D%f),j=Math.floor(D/f);!k&&!x&&(x=!0),u[D]?(R++,D>0&&k>0&&u[D-1]||(A+=x?n("M",k+y,.5+j+y):n("m",C,0),C=0,x=!1),k+1<f&&u[D+1]||(A+=n("h",R),R=0)):C++}return A}return Uf.render=function(f,y,A){const C=s.getOptions(y),x=f.modules.size,R=f.modules.data,D=x+C.margin*2,k=C.color.light.a?"<path "+e(C.color.light,"fill")+' d="M0 0h'+D+"v"+D+'H0z"/>':"",j="<path "+e(C.color.dark,"stroke")+' d="'+o(R,x,C.margin)+'"/>',q='viewBox="0 0 '+D+" "+D+'"',J='<svg xmlns="http://www.w3.org/2000/svg" '+(C.width?'width="'+C.width+'" height="'+C.width+'" ':"")+q+' shape-rendering="crispEdges">'+k+j+`</svg>
`;return typeof A=="function"&&A(null,J),J},Uf}var Wg;function px(){if(Wg)return Oa;Wg=1;const s=QE(),e=fx(),n=dx(),o=gx();function u(f,y,A,C,x){const R=[].slice.call(arguments,1),D=R.length,k=typeof R[D-1]=="function";if(!k&&!s())throw new Error("Callback required as last argument");if(k){if(D<2)throw new Error("Too few arguments provided");D===2?(x=A,A=y,y=C=void 0):D===3&&(y.getContext&&typeof x>"u"?(x=C,C=void 0):(x=C,C=A,A=y,y=void 0))}else{if(D<1)throw new Error("Too few arguments provided");return D===1?(A=y,y=C=void 0):D===2&&!y.getContext&&(C=A,A=y,y=void 0),new Promise(function(j,q){try{const Q=e.create(A,C);j(f(Q,y,C))}catch(Q){q(Q)}})}try{const j=e.create(A,C);x(null,f(j,y,C))}catch(j){x(j)}}return Oa.create=e.create,Oa.toCanvas=u.bind(null,n.render),Oa.toDataURL=u.bind(null,n.renderToDataURL),Oa.toString=u.bind(null,function(f,y,A){return o.render(f,A)}),Oa}var mx=px();const yx=dm(mx),wx=()=>{};var Gg={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lm=function(s){const e=[];let n=0;for(let o=0;o<s.length;o++){let u=s.charCodeAt(o);u<128?e[n++]=u:u<2048?(e[n++]=u>>6|192,e[n++]=u&63|128):(u&64512)===55296&&o+1<s.length&&(s.charCodeAt(o+1)&64512)===56320?(u=65536+((u&1023)<<10)+(s.charCodeAt(++o)&1023),e[n++]=u>>18|240,e[n++]=u>>12&63|128,e[n++]=u>>6&63|128,e[n++]=u&63|128):(e[n++]=u>>12|224,e[n++]=u>>6&63|128,e[n++]=u&63|128)}return e},Ex=function(s){const e=[];let n=0,o=0;for(;n<s.length;){const u=s[n++];if(u<128)e[o++]=String.fromCharCode(u);else if(u>191&&u<224){const f=s[n++];e[o++]=String.fromCharCode((u&31)<<6|f&63)}else if(u>239&&u<365){const f=s[n++],y=s[n++],A=s[n++],C=((u&7)<<18|(f&63)<<12|(y&63)<<6|A&63)-65536;e[o++]=String.fromCharCode(55296+(C>>10)),e[o++]=String.fromCharCode(56320+(C&1023))}else{const f=s[n++],y=s[n++];e[o++]=String.fromCharCode((u&15)<<12|(f&63)<<6|y&63)}}return e.join("")},km={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,o=[];for(let u=0;u<s.length;u+=3){const f=s[u],y=u+1<s.length,A=y?s[u+1]:0,C=u+2<s.length,x=C?s[u+2]:0,R=f>>2,D=(f&3)<<4|A>>4;let k=(A&15)<<2|x>>6,j=x&63;C||(j=64,y||(k=64)),o.push(n[R],n[D],n[k],n[j])}return o.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(Lm(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):Ex(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,o=[];for(let u=0;u<s.length;){const f=n[s.charAt(u++)],A=u<s.length?n[s.charAt(u)]:0;++u;const x=u<s.length?n[s.charAt(u)]:64;++u;const D=u<s.length?n[s.charAt(u)]:64;if(++u,f==null||A==null||x==null||D==null)throw new xx;const k=f<<2|A>>4;if(o.push(k),x!==64){const j=A<<4&240|x>>2;if(o.push(j),D!==64){const q=x<<6&192|D;o.push(q)}}}return o},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class xx extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Ax=function(s){const e=Lm(s);return km.encodeByteArray(e,!0)},dc=function(s){return Ax(s).replace(/\./g,"")},_x=function(s){try{return km.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cx(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vx=()=>Cx().__FIREBASE_DEFAULTS__,Ix=()=>{if(typeof process>"u"||typeof Gg>"u")return;const s=Gg.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},Tx=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&_x(s[1]);return e&&JSON.parse(e)},Sd=()=>{try{return wx()||vx()||Ix()||Tx()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},Sx=s=>{var e,n;return(n=(e=Sd())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[s]},Rx=s=>{const e=Sx(s);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const o=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),o]:[e.substring(0,n),o]},Bm=()=>{var s;return(s=Sd())===null||s===void 0?void 0:s.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nx{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,o)=>{n?this.reject(n):this.resolve(o),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,o))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dx(s,e){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},o=e||"demo-project",u=s.iat||0,f=s.sub||s.user_id;if(!f)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const y=Object.assign({iss:`https://securetoken.google.com/${o}`,aud:o,iat:u,exp:u+3600,auth_time:u,sub:f,user_id:f,firebase:{sign_in_provider:"custom",identities:{}}},s);return[dc(JSON.stringify(n)),dc(JSON.stringify(y)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bx(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Mx(){var s;const e=(s=Sd())===null||s===void 0?void 0:s.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Ox(){return!Mx()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Px(){try{return typeof indexedDB=="object"}catch{return!1}}function Lx(){return new Promise((s,e)=>{try{let n=!0;const o="validate-browser-context-for-indexeddb-analytics-module",u=self.indexedDB.open(o);u.onsuccess=()=>{u.result.close(),n||self.indexedDB.deleteDatabase(o),s(!0)},u.onupgradeneeded=()=>{n=!1},u.onerror=()=>{var f;e(((f=u.error)===null||f===void 0?void 0:f.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kx="FirebaseError";class Ka extends Error{constructor(e,n,o){super(n),this.code=e,this.customData=o,this.name=kx,Object.setPrototypeOf(this,Ka.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Fm.prototype.create)}}class Fm{constructor(e,n,o){this.service=e,this.serviceName=n,this.errors=o}create(e,...n){const o=n[0]||{},u=`${this.service}/${e}`,f=this.errors[e],y=f?Bx(f,o):"Error",A=`${this.serviceName}: ${y} (${u}).`;return new Ka(u,A,o)}}function Bx(s,e){return s.replace(Fx,(n,o)=>{const u=e[o];return u!=null?String(u):`<${o}?>`})}const Fx=/\{\$([^}]+)}/g;function gc(s,e){if(s===e)return!0;const n=Object.keys(s),o=Object.keys(e);for(const u of n){if(!o.includes(u))return!1;const f=s[u],y=e[u];if(Yg(f)&&Yg(y)){if(!gc(f,y))return!1}else if(f!==y)return!1}for(const u of o)if(!n.includes(u))return!1;return!0}function Yg(s){return s!==null&&typeof s=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vo(s){return s&&s._delegate?s._delegate:s}class Fl{constructor(e,n,o){this.name=e,this.instanceFactory=n,this.type=o,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $o="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vx{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const o=new Nx;if(this.instancesDeferred.set(n,o),this.isInitialized(n)||this.shouldAutoInitialize())try{const u=this.getOrInitializeService({instanceIdentifier:n});u&&o.resolve(u)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const o=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),u=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(o)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:o})}catch(f){if(u)return null;throw f}else{if(u)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(zx(e))try{this.getOrInitializeService({instanceIdentifier:$o})}catch{}for(const[n,o]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(n);try{const f=this.getOrInitializeService({instanceIdentifier:u});o.resolve(f)}catch{}}}}clearInstance(e=$o){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=$o){return this.instances.has(e)}getOptions(e=$o){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,o=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(o))throw Error(`${this.name}(${o}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const u=this.getOrInitializeService({instanceIdentifier:o,options:n});for(const[f,y]of this.instancesDeferred.entries()){const A=this.normalizeInstanceIdentifier(f);o===A&&y.resolve(u)}return u}onInit(e,n){var o;const u=this.normalizeInstanceIdentifier(n),f=(o=this.onInitCallbacks.get(u))!==null&&o!==void 0?o:new Set;f.add(e),this.onInitCallbacks.set(u,f);const y=this.instances.get(u);return y&&e(y,u),()=>{f.delete(e)}}invokeOnInitCallbacks(e,n){const o=this.onInitCallbacks.get(n);if(o)for(const u of o)try{u(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let o=this.instances.get(e);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:Ux(e),options:n}),this.instances.set(e,o),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(o,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,o)}catch{}return o||null}normalizeInstanceIdentifier(e=$o){return this.component?this.component.multipleInstances?e:$o:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Ux(s){return s===$o?void 0:s}function zx(s){return s.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jx{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Vx(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pt;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(Pt||(Pt={}));const Hx={debug:Pt.DEBUG,verbose:Pt.VERBOSE,info:Pt.INFO,warn:Pt.WARN,error:Pt.ERROR,silent:Pt.SILENT},Wx=Pt.INFO,Gx={[Pt.DEBUG]:"log",[Pt.VERBOSE]:"log",[Pt.INFO]:"info",[Pt.WARN]:"warn",[Pt.ERROR]:"error"},Yx=(s,e,...n)=>{if(e<s.logLevel)return;const o=new Date().toISOString(),u=Gx[e];if(u)console[u](`[${o}]  ${s.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Vm{constructor(e){this.name=e,this._logLevel=Wx,this._logHandler=Yx,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Pt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Hx[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Pt.DEBUG,...e),this._logHandler(this,Pt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Pt.VERBOSE,...e),this._logHandler(this,Pt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Pt.INFO,...e),this._logHandler(this,Pt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Pt.WARN,...e),this._logHandler(this,Pt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Pt.ERROR,...e),this._logHandler(this,Pt.ERROR,...e)}}const Xx=(s,e)=>e.some(n=>s instanceof n);let Xg,qg;function qx(){return Xg||(Xg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Qx(){return qg||(qg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Um=new WeakMap,Zf=new WeakMap,zm=new WeakMap,zf=new WeakMap,Rd=new WeakMap;function Kx(s){const e=new Promise((n,o)=>{const u=()=>{s.removeEventListener("success",f),s.removeEventListener("error",y)},f=()=>{n(Eo(s.result)),u()},y=()=>{o(s.error),u()};s.addEventListener("success",f),s.addEventListener("error",y)});return e.then(n=>{n instanceof IDBCursor&&Um.set(n,s)}).catch(()=>{}),Rd.set(e,s),e}function Zx(s){if(Zf.has(s))return;const e=new Promise((n,o)=>{const u=()=>{s.removeEventListener("complete",f),s.removeEventListener("error",y),s.removeEventListener("abort",y)},f=()=>{n(),u()},y=()=>{o(s.error||new DOMException("AbortError","AbortError")),u()};s.addEventListener("complete",f),s.addEventListener("error",y),s.addEventListener("abort",y)});Zf.set(s,e)}let $f={get(s,e,n){if(s instanceof IDBTransaction){if(e==="done")return Zf.get(s);if(e==="objectStoreNames")return s.objectStoreNames||zm.get(s);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Eo(s[e])},set(s,e,n){return s[e]=n,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function $x(s){$f=s($f)}function Jx(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const o=s.call(jf(this),e,...n);return zm.set(o,e.sort?e.sort():[e]),Eo(o)}:Qx().includes(s)?function(...e){return s.apply(jf(this),e),Eo(Um.get(this))}:function(...e){return Eo(s.apply(jf(this),e))}}function eA(s){return typeof s=="function"?Jx(s):(s instanceof IDBTransaction&&Zx(s),Xx(s,qx())?new Proxy(s,$f):s)}function Eo(s){if(s instanceof IDBRequest)return Kx(s);if(zf.has(s))return zf.get(s);const e=eA(s);return e!==s&&(zf.set(s,e),Rd.set(e,s)),e}const jf=s=>Rd.get(s);function tA(s,e,{blocked:n,upgrade:o,blocking:u,terminated:f}={}){const y=indexedDB.open(s,e),A=Eo(y);return o&&y.addEventListener("upgradeneeded",C=>{o(Eo(y.result),C.oldVersion,C.newVersion,Eo(y.transaction),C)}),n&&y.addEventListener("blocked",C=>n(C.oldVersion,C.newVersion,C)),A.then(C=>{f&&C.addEventListener("close",()=>f()),u&&C.addEventListener("versionchange",x=>u(x.oldVersion,x.newVersion,x))}).catch(()=>{}),A}const nA=["get","getKey","getAll","getAllKeys","count"],rA=["put","add","delete","clear"],Hf=new Map;function Qg(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(Hf.get(e))return Hf.get(e);const n=e.replace(/FromIndex$/,""),o=e!==n,u=rA.includes(n);if(!(n in(o?IDBIndex:IDBObjectStore).prototype)||!(u||nA.includes(n)))return;const f=async function(y,...A){const C=this.transaction(y,u?"readwrite":"readonly");let x=C.store;return o&&(x=x.index(A.shift())),(await Promise.all([x[n](...A),u&&C.done]))[0]};return Hf.set(e,f),f}$x(s=>({...s,get:(e,n,o)=>Qg(e,n)||s.get(e,n,o),has:(e,n)=>!!Qg(e,n)||s.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iA{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(sA(n)){const o=n.getImmediate();return`${o.library}/${o.version}`}else return null}).filter(n=>n).join(" ")}}function sA(s){const e=s.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Jf="@firebase/app",Kg="0.11.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Us=new Vm("@firebase/app"),oA="@firebase/app-compat",aA="@firebase/analytics-compat",lA="@firebase/analytics",uA="@firebase/app-check-compat",cA="@firebase/app-check",hA="@firebase/auth",fA="@firebase/auth-compat",dA="@firebase/database",gA="@firebase/data-connect",pA="@firebase/database-compat",mA="@firebase/functions",yA="@firebase/functions-compat",wA="@firebase/installations",EA="@firebase/installations-compat",xA="@firebase/messaging",AA="@firebase/messaging-compat",_A="@firebase/performance",CA="@firebase/performance-compat",vA="@firebase/remote-config",IA="@firebase/remote-config-compat",TA="@firebase/storage",SA="@firebase/storage-compat",RA="@firebase/firestore",NA="@firebase/vertexai",DA="@firebase/firestore-compat",bA="firebase",MA="11.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ed="[DEFAULT]",OA={[Jf]:"fire-core",[oA]:"fire-core-compat",[lA]:"fire-analytics",[aA]:"fire-analytics-compat",[cA]:"fire-app-check",[uA]:"fire-app-check-compat",[hA]:"fire-auth",[fA]:"fire-auth-compat",[dA]:"fire-rtdb",[gA]:"fire-data-connect",[pA]:"fire-rtdb-compat",[mA]:"fire-fn",[yA]:"fire-fn-compat",[wA]:"fire-iid",[EA]:"fire-iid-compat",[xA]:"fire-fcm",[AA]:"fire-fcm-compat",[_A]:"fire-perf",[CA]:"fire-perf-compat",[vA]:"fire-rc",[IA]:"fire-rc-compat",[TA]:"fire-gcs",[SA]:"fire-gcs-compat",[RA]:"fire-fst",[DA]:"fire-fst-compat",[NA]:"fire-vertex","fire-js":"fire-js",[bA]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pc=new Map,PA=new Map,td=new Map;function Zg(s,e){try{s.container.addComponent(e)}catch(n){Us.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,n)}}function mc(s){const e=s.name;if(td.has(e))return Us.debug(`There were multiple attempts to register component ${e}.`),!1;td.set(e,s);for(const n of pc.values())Zg(n,s);for(const n of PA.values())Zg(n,s);return!0}function LA(s,e){const n=s.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),s.container.getProvider(e)}function kA(s){return s==null?!1:s.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},xo=new Fm("app","Firebase",BA);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FA{constructor(e,n,o){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=o,this.container.addComponent(new Fl("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw xo.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VA=MA;function jm(s,e={}){let n=s;typeof e!="object"&&(e={name:e});const o=Object.assign({name:ed,automaticDataCollectionEnabled:!1},e),u=o.name;if(typeof u!="string"||!u)throw xo.create("bad-app-name",{appName:String(u)});if(n||(n=Bm()),!n)throw xo.create("no-options");const f=pc.get(u);if(f){if(gc(n,f.options)&&gc(o,f.config))return f;throw xo.create("duplicate-app",{appName:u})}const y=new jx(u);for(const C of td.values())y.addComponent(C);const A=new FA(n,o,y);return pc.set(u,A),A}function UA(s=ed){const e=pc.get(s);if(!e&&s===ed&&Bm())return jm();if(!e)throw xo.create("no-app",{appName:s});return e}function Va(s,e,n){var o;let u=(o=OA[s])!==null&&o!==void 0?o:s;n&&(u+=`-${n}`);const f=u.match(/\s|\//),y=e.match(/\s|\//);if(f||y){const A=[`Unable to register library "${u}" with version "${e}":`];f&&A.push(`library name "${u}" contains illegal characters (whitespace or "/")`),f&&y&&A.push("and"),y&&A.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Us.warn(A.join(" "));return}mc(new Fl(`${u}-version`,()=>({library:u,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zA="firebase-heartbeat-database",jA=1,Vl="firebase-heartbeat-store";let Wf=null;function Hm(){return Wf||(Wf=tA(zA,jA,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(Vl)}catch(n){console.warn(n)}}}}).catch(s=>{throw xo.create("idb-open",{originalErrorMessage:s.message})})),Wf}async function HA(s){try{const n=(await Hm()).transaction(Vl),o=await n.objectStore(Vl).get(Wm(s));return await n.done,o}catch(e){if(e instanceof Ka)Us.warn(e.message);else{const n=xo.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Us.warn(n.message)}}}async function $g(s,e){try{const o=(await Hm()).transaction(Vl,"readwrite");await o.objectStore(Vl).put(e,Wm(s)),await o.done}catch(n){if(n instanceof Ka)Us.warn(n.message);else{const o=xo.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Us.warn(o.message)}}}function Wm(s){return`${s.name}!${s.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WA=1024,GA=30;class YA{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new qA(n),this._heartbeatsCachePromise=this._storage.read().then(o=>(this._heartbeatsCache=o,o))}async triggerHeartbeat(){var e,n;try{const u=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),f=Jg();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===f||this._heartbeatsCache.heartbeats.some(y=>y.date===f))return;if(this._heartbeatsCache.heartbeats.push({date:f,agent:u}),this._heartbeatsCache.heartbeats.length>GA){const y=QA(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(y,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(o){Us.warn(o)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Jg(),{heartbeatsToSend:o,unsentEntries:u}=XA(this._heartbeatsCache.heartbeats),f=dc(JSON.stringify({version:2,heartbeats:o}));return this._heartbeatsCache.lastSentHeartbeatDate=n,u.length>0?(this._heartbeatsCache.heartbeats=u,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),f}catch(n){return Us.warn(n),""}}}function Jg(){return new Date().toISOString().substring(0,10)}function XA(s,e=WA){const n=[];let o=s.slice();for(const u of s){const f=n.find(y=>y.agent===u.agent);if(f){if(f.dates.push(u.date),ep(n)>e){f.dates.pop();break}}else if(n.push({agent:u.agent,dates:[u.date]}),ep(n)>e){n.pop();break}o=o.slice(1)}return{heartbeatsToSend:n,unsentEntries:o}}class qA{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Px()?Lx().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await HA(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const u=await this.read();return $g(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:u.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const u=await this.read();return $g(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:u.lastSentHeartbeatDate,heartbeats:[...u.heartbeats,...e.heartbeats]})}else return}}function ep(s){return dc(JSON.stringify({version:2,heartbeats:s})).length}function QA(s){if(s.length===0)return-1;let e=0,n=s[0].date;for(let o=1;o<s.length;o++)s[o].date<n&&(n=s[o].date,e=o);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KA(s){mc(new Fl("platform-logger",e=>new iA(e),"PRIVATE")),mc(new Fl("heartbeat",e=>new YA(e),"PRIVATE")),Va(Jf,Kg,s),Va(Jf,Kg,"esm2017"),Va("fire-js","")}KA("");var ZA="firebase",$A="11.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Va(ZA,$A,"app");var tp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ao,Gm;(function(){var s;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(F,B){function P(){}P.prototype=B.prototype,F.D=B.prototype,F.prototype=new P,F.prototype.constructor=F,F.C=function(G,Y,W){for(var U=Array(arguments.length-2),Le=2;Le<arguments.length;Le++)U[Le-2]=arguments[Le];return B.prototype[Y].apply(G,U)}}function n(){this.blockSize=-1}function o(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(o,n),o.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function u(F,B,P){P||(P=0);var G=Array(16);if(typeof B=="string")for(var Y=0;16>Y;++Y)G[Y]=B.charCodeAt(P++)|B.charCodeAt(P++)<<8|B.charCodeAt(P++)<<16|B.charCodeAt(P++)<<24;else for(Y=0;16>Y;++Y)G[Y]=B[P++]|B[P++]<<8|B[P++]<<16|B[P++]<<24;B=F.g[0],P=F.g[1],Y=F.g[2];var W=F.g[3],U=B+(W^P&(Y^W))+G[0]+3614090360&4294967295;B=P+(U<<7&4294967295|U>>>25),U=W+(Y^B&(P^Y))+G[1]+3905402710&4294967295,W=B+(U<<12&4294967295|U>>>20),U=Y+(P^W&(B^P))+G[2]+606105819&4294967295,Y=W+(U<<17&4294967295|U>>>15),U=P+(B^Y&(W^B))+G[3]+3250441966&4294967295,P=Y+(U<<22&4294967295|U>>>10),U=B+(W^P&(Y^W))+G[4]+4118548399&4294967295,B=P+(U<<7&4294967295|U>>>25),U=W+(Y^B&(P^Y))+G[5]+1200080426&4294967295,W=B+(U<<12&4294967295|U>>>20),U=Y+(P^W&(B^P))+G[6]+2821735955&4294967295,Y=W+(U<<17&4294967295|U>>>15),U=P+(B^Y&(W^B))+G[7]+4249261313&4294967295,P=Y+(U<<22&4294967295|U>>>10),U=B+(W^P&(Y^W))+G[8]+1770035416&4294967295,B=P+(U<<7&4294967295|U>>>25),U=W+(Y^B&(P^Y))+G[9]+2336552879&4294967295,W=B+(U<<12&4294967295|U>>>20),U=Y+(P^W&(B^P))+G[10]+4294925233&4294967295,Y=W+(U<<17&4294967295|U>>>15),U=P+(B^Y&(W^B))+G[11]+2304563134&4294967295,P=Y+(U<<22&4294967295|U>>>10),U=B+(W^P&(Y^W))+G[12]+1804603682&4294967295,B=P+(U<<7&4294967295|U>>>25),U=W+(Y^B&(P^Y))+G[13]+4254626195&4294967295,W=B+(U<<12&4294967295|U>>>20),U=Y+(P^W&(B^P))+G[14]+2792965006&4294967295,Y=W+(U<<17&4294967295|U>>>15),U=P+(B^Y&(W^B))+G[15]+1236535329&4294967295,P=Y+(U<<22&4294967295|U>>>10),U=B+(Y^W&(P^Y))+G[1]+4129170786&4294967295,B=P+(U<<5&4294967295|U>>>27),U=W+(P^Y&(B^P))+G[6]+3225465664&4294967295,W=B+(U<<9&4294967295|U>>>23),U=Y+(B^P&(W^B))+G[11]+643717713&4294967295,Y=W+(U<<14&4294967295|U>>>18),U=P+(W^B&(Y^W))+G[0]+3921069994&4294967295,P=Y+(U<<20&4294967295|U>>>12),U=B+(Y^W&(P^Y))+G[5]+3593408605&4294967295,B=P+(U<<5&4294967295|U>>>27),U=W+(P^Y&(B^P))+G[10]+38016083&4294967295,W=B+(U<<9&4294967295|U>>>23),U=Y+(B^P&(W^B))+G[15]+3634488961&4294967295,Y=W+(U<<14&4294967295|U>>>18),U=P+(W^B&(Y^W))+G[4]+3889429448&4294967295,P=Y+(U<<20&4294967295|U>>>12),U=B+(Y^W&(P^Y))+G[9]+568446438&4294967295,B=P+(U<<5&4294967295|U>>>27),U=W+(P^Y&(B^P))+G[14]+3275163606&4294967295,W=B+(U<<9&4294967295|U>>>23),U=Y+(B^P&(W^B))+G[3]+4107603335&4294967295,Y=W+(U<<14&4294967295|U>>>18),U=P+(W^B&(Y^W))+G[8]+1163531501&4294967295,P=Y+(U<<20&4294967295|U>>>12),U=B+(Y^W&(P^Y))+G[13]+2850285829&4294967295,B=P+(U<<5&4294967295|U>>>27),U=W+(P^Y&(B^P))+G[2]+4243563512&4294967295,W=B+(U<<9&4294967295|U>>>23),U=Y+(B^P&(W^B))+G[7]+1735328473&4294967295,Y=W+(U<<14&4294967295|U>>>18),U=P+(W^B&(Y^W))+G[12]+2368359562&4294967295,P=Y+(U<<20&4294967295|U>>>12),U=B+(P^Y^W)+G[5]+4294588738&4294967295,B=P+(U<<4&4294967295|U>>>28),U=W+(B^P^Y)+G[8]+2272392833&4294967295,W=B+(U<<11&4294967295|U>>>21),U=Y+(W^B^P)+G[11]+1839030562&4294967295,Y=W+(U<<16&4294967295|U>>>16),U=P+(Y^W^B)+G[14]+4259657740&4294967295,P=Y+(U<<23&4294967295|U>>>9),U=B+(P^Y^W)+G[1]+2763975236&4294967295,B=P+(U<<4&4294967295|U>>>28),U=W+(B^P^Y)+G[4]+1272893353&4294967295,W=B+(U<<11&4294967295|U>>>21),U=Y+(W^B^P)+G[7]+4139469664&4294967295,Y=W+(U<<16&4294967295|U>>>16),U=P+(Y^W^B)+G[10]+3200236656&4294967295,P=Y+(U<<23&4294967295|U>>>9),U=B+(P^Y^W)+G[13]+681279174&4294967295,B=P+(U<<4&4294967295|U>>>28),U=W+(B^P^Y)+G[0]+3936430074&4294967295,W=B+(U<<11&4294967295|U>>>21),U=Y+(W^B^P)+G[3]+3572445317&4294967295,Y=W+(U<<16&4294967295|U>>>16),U=P+(Y^W^B)+G[6]+76029189&4294967295,P=Y+(U<<23&4294967295|U>>>9),U=B+(P^Y^W)+G[9]+3654602809&4294967295,B=P+(U<<4&4294967295|U>>>28),U=W+(B^P^Y)+G[12]+3873151461&4294967295,W=B+(U<<11&4294967295|U>>>21),U=Y+(W^B^P)+G[15]+530742520&4294967295,Y=W+(U<<16&4294967295|U>>>16),U=P+(Y^W^B)+G[2]+3299628645&4294967295,P=Y+(U<<23&4294967295|U>>>9),U=B+(Y^(P|~W))+G[0]+4096336452&4294967295,B=P+(U<<6&4294967295|U>>>26),U=W+(P^(B|~Y))+G[7]+1126891415&4294967295,W=B+(U<<10&4294967295|U>>>22),U=Y+(B^(W|~P))+G[14]+2878612391&4294967295,Y=W+(U<<15&4294967295|U>>>17),U=P+(W^(Y|~B))+G[5]+4237533241&4294967295,P=Y+(U<<21&4294967295|U>>>11),U=B+(Y^(P|~W))+G[12]+1700485571&4294967295,B=P+(U<<6&4294967295|U>>>26),U=W+(P^(B|~Y))+G[3]+2399980690&4294967295,W=B+(U<<10&4294967295|U>>>22),U=Y+(B^(W|~P))+G[10]+4293915773&4294967295,Y=W+(U<<15&4294967295|U>>>17),U=P+(W^(Y|~B))+G[1]+2240044497&4294967295,P=Y+(U<<21&4294967295|U>>>11),U=B+(Y^(P|~W))+G[8]+1873313359&4294967295,B=P+(U<<6&4294967295|U>>>26),U=W+(P^(B|~Y))+G[15]+4264355552&4294967295,W=B+(U<<10&4294967295|U>>>22),U=Y+(B^(W|~P))+G[6]+2734768916&4294967295,Y=W+(U<<15&4294967295|U>>>17),U=P+(W^(Y|~B))+G[13]+1309151649&4294967295,P=Y+(U<<21&4294967295|U>>>11),U=B+(Y^(P|~W))+G[4]+4149444226&4294967295,B=P+(U<<6&4294967295|U>>>26),U=W+(P^(B|~Y))+G[11]+3174756917&4294967295,W=B+(U<<10&4294967295|U>>>22),U=Y+(B^(W|~P))+G[2]+718787259&4294967295,Y=W+(U<<15&4294967295|U>>>17),U=P+(W^(Y|~B))+G[9]+3951481745&4294967295,F.g[0]=F.g[0]+B&4294967295,F.g[1]=F.g[1]+(Y+(U<<21&4294967295|U>>>11))&4294967295,F.g[2]=F.g[2]+Y&4294967295,F.g[3]=F.g[3]+W&4294967295}o.prototype.u=function(F,B){B===void 0&&(B=F.length);for(var P=B-this.blockSize,G=this.B,Y=this.h,W=0;W<B;){if(Y==0)for(;W<=P;)u(this,F,W),W+=this.blockSize;if(typeof F=="string"){for(;W<B;)if(G[Y++]=F.charCodeAt(W++),Y==this.blockSize){u(this,G),Y=0;break}}else for(;W<B;)if(G[Y++]=F[W++],Y==this.blockSize){u(this,G),Y=0;break}}this.h=Y,this.o+=B},o.prototype.v=function(){var F=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);F[0]=128;for(var B=1;B<F.length-8;++B)F[B]=0;var P=8*this.o;for(B=F.length-8;B<F.length;++B)F[B]=P&255,P/=256;for(this.u(F),F=Array(16),B=P=0;4>B;++B)for(var G=0;32>G;G+=8)F[P++]=this.g[B]>>>G&255;return F};function f(F,B){var P=A;return Object.prototype.hasOwnProperty.call(P,F)?P[F]:P[F]=B(F)}function y(F,B){this.h=B;for(var P=[],G=!0,Y=F.length-1;0<=Y;Y--){var W=F[Y]|0;G&&W==B||(P[Y]=W,G=!1)}this.g=P}var A={};function C(F){return-128<=F&&128>F?f(F,function(B){return new y([B|0],0>B?-1:0)}):new y([F|0],0>F?-1:0)}function x(F){if(isNaN(F)||!isFinite(F))return D;if(0>F)return J(x(-F));for(var B=[],P=1,G=0;F>=P;G++)B[G]=F/P|0,P*=4294967296;return new y(B,0)}function R(F,B){if(F.length==0)throw Error("number format error: empty string");if(B=B||10,2>B||36<B)throw Error("radix out of range: "+B);if(F.charAt(0)=="-")return J(R(F.substring(1),B));if(0<=F.indexOf("-"))throw Error('number format error: interior "-" character');for(var P=x(Math.pow(B,8)),G=D,Y=0;Y<F.length;Y+=8){var W=Math.min(8,F.length-Y),U=parseInt(F.substring(Y,Y+W),B);8>W?(W=x(Math.pow(B,W)),G=G.j(W).add(x(U))):(G=G.j(P),G=G.add(x(U)))}return G}var D=C(0),k=C(1),j=C(16777216);s=y.prototype,s.m=function(){if(Q(this))return-J(this).m();for(var F=0,B=1,P=0;P<this.g.length;P++){var G=this.i(P);F+=(0<=G?G:4294967296+G)*B,B*=4294967296}return F},s.toString=function(F){if(F=F||10,2>F||36<F)throw Error("radix out of range: "+F);if(q(this))return"0";if(Q(this))return"-"+J(this).toString(F);for(var B=x(Math.pow(F,6)),P=this,G="";;){var Y=pe(P,B).g;P=ie(P,Y.j(B));var W=((0<P.g.length?P.g[0]:P.h)>>>0).toString(F);if(P=Y,q(P))return W+G;for(;6>W.length;)W="0"+W;G=W+G}},s.i=function(F){return 0>F?0:F<this.g.length?this.g[F]:this.h};function q(F){if(F.h!=0)return!1;for(var B=0;B<F.g.length;B++)if(F.g[B]!=0)return!1;return!0}function Q(F){return F.h==-1}s.l=function(F){return F=ie(this,F),Q(F)?-1:q(F)?0:1};function J(F){for(var B=F.g.length,P=[],G=0;G<B;G++)P[G]=~F.g[G];return new y(P,~F.h).add(k)}s.abs=function(){return Q(this)?J(this):this},s.add=function(F){for(var B=Math.max(this.g.length,F.g.length),P=[],G=0,Y=0;Y<=B;Y++){var W=G+(this.i(Y)&65535)+(F.i(Y)&65535),U=(W>>>16)+(this.i(Y)>>>16)+(F.i(Y)>>>16);G=U>>>16,W&=65535,U&=65535,P[Y]=U<<16|W}return new y(P,P[P.length-1]&-2147483648?-1:0)};function ie(F,B){return F.add(J(B))}s.j=function(F){if(q(this)||q(F))return D;if(Q(this))return Q(F)?J(this).j(J(F)):J(J(this).j(F));if(Q(F))return J(this.j(J(F)));if(0>this.l(j)&&0>F.l(j))return x(this.m()*F.m());for(var B=this.g.length+F.g.length,P=[],G=0;G<2*B;G++)P[G]=0;for(G=0;G<this.g.length;G++)for(var Y=0;Y<F.g.length;Y++){var W=this.i(G)>>>16,U=this.i(G)&65535,Le=F.i(Y)>>>16,ue=F.i(Y)&65535;P[2*G+2*Y]+=U*ue,he(P,2*G+2*Y),P[2*G+2*Y+1]+=W*ue,he(P,2*G+2*Y+1),P[2*G+2*Y+1]+=U*Le,he(P,2*G+2*Y+1),P[2*G+2*Y+2]+=W*Le,he(P,2*G+2*Y+2)}for(G=0;G<B;G++)P[G]=P[2*G+1]<<16|P[2*G];for(G=B;G<2*B;G++)P[G]=0;return new y(P,0)};function he(F,B){for(;(F[B]&65535)!=F[B];)F[B+1]+=F[B]>>>16,F[B]&=65535,B++}function te(F,B){this.g=F,this.h=B}function pe(F,B){if(q(B))throw Error("division by zero");if(q(F))return new te(D,D);if(Q(F))return B=pe(J(F),B),new te(J(B.g),J(B.h));if(Q(B))return B=pe(F,J(B)),new te(J(B.g),B.h);if(30<F.g.length){if(Q(F)||Q(B))throw Error("slowDivide_ only works with positive integers.");for(var P=k,G=B;0>=G.l(F);)P=Ge(P),G=Ge(G);var Y=we(P,1),W=we(G,1);for(G=we(G,2),P=we(P,2);!q(G);){var U=W.add(G);0>=U.l(F)&&(Y=Y.add(P),W=U),G=we(G,1),P=we(P,1)}return B=ie(F,Y.j(B)),new te(Y,B)}for(Y=D;0<=F.l(B);){for(P=Math.max(1,Math.floor(F.m()/B.m())),G=Math.ceil(Math.log(P)/Math.LN2),G=48>=G?1:Math.pow(2,G-48),W=x(P),U=W.j(B);Q(U)||0<U.l(F);)P-=G,W=x(P),U=W.j(B);q(W)&&(W=k),Y=Y.add(W),F=ie(F,U)}return new te(Y,F)}s.A=function(F){return pe(this,F).h},s.and=function(F){for(var B=Math.max(this.g.length,F.g.length),P=[],G=0;G<B;G++)P[G]=this.i(G)&F.i(G);return new y(P,this.h&F.h)},s.or=function(F){for(var B=Math.max(this.g.length,F.g.length),P=[],G=0;G<B;G++)P[G]=this.i(G)|F.i(G);return new y(P,this.h|F.h)},s.xor=function(F){for(var B=Math.max(this.g.length,F.g.length),P=[],G=0;G<B;G++)P[G]=this.i(G)^F.i(G);return new y(P,this.h^F.h)};function Ge(F){for(var B=F.g.length+1,P=[],G=0;G<B;G++)P[G]=F.i(G)<<1|F.i(G-1)>>>31;return new y(P,F.h)}function we(F,B){var P=B>>5;B%=32;for(var G=F.g.length-P,Y=[],W=0;W<G;W++)Y[W]=0<B?F.i(W+P)>>>B|F.i(W+P+1)<<32-B:F.i(W+P);return new y(Y,F.h)}o.prototype.digest=o.prototype.v,o.prototype.reset=o.prototype.s,o.prototype.update=o.prototype.u,Gm=o,y.prototype.add=y.prototype.add,y.prototype.multiply=y.prototype.j,y.prototype.modulo=y.prototype.A,y.prototype.compare=y.prototype.l,y.prototype.toNumber=y.prototype.m,y.prototype.toString=y.prototype.toString,y.prototype.getBits=y.prototype.i,y.fromNumber=x,y.fromString=R,Ao=y}).apply(typeof tp<"u"?tp:typeof self<"u"?self:typeof window<"u"?window:{});var Qu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ym,Rl,Xm,sc,nd,qm,Qm,Km;(function(){var s,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(m,I,N){return m==Array.prototype||m==Object.prototype||(m[I]=N.value),m};function n(m){m=[typeof globalThis=="object"&&globalThis,m,typeof window=="object"&&window,typeof self=="object"&&self,typeof Qu=="object"&&Qu];for(var I=0;I<m.length;++I){var N=m[I];if(N&&N.Math==Math)return N}throw Error("Cannot find global object")}var o=n(this);function u(m,I){if(I)e:{var N=o;m=m.split(".");for(var V=0;V<m.length-1;V++){var oe=m[V];if(!(oe in N))break e;N=N[oe]}m=m[m.length-1],V=N[m],I=I(V),I!=V&&I!=null&&e(N,m,{configurable:!0,writable:!0,value:I})}}function f(m,I){m instanceof String&&(m+="");var N=0,V=!1,oe={next:function(){if(!V&&N<m.length){var ge=N++;return{value:I(ge,m[ge]),done:!1}}return V=!0,{done:!0,value:void 0}}};return oe[Symbol.iterator]=function(){return oe},oe}u("Array.prototype.values",function(m){return m||function(){return f(this,function(I,N){return N})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var y=y||{},A=this||self;function C(m){var I=typeof m;return I=I!="object"?I:m?Array.isArray(m)?"array":I:"null",I=="array"||I=="object"&&typeof m.length=="number"}function x(m){var I=typeof m;return I=="object"&&m!=null||I=="function"}function R(m,I,N){return m.call.apply(m.bind,arguments)}function D(m,I,N){if(!m)throw Error();if(2<arguments.length){var V=Array.prototype.slice.call(arguments,2);return function(){var oe=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(oe,V),m.apply(I,oe)}}return function(){return m.apply(I,arguments)}}function k(m,I,N){return k=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?R:D,k.apply(null,arguments)}function j(m,I){var N=Array.prototype.slice.call(arguments,1);return function(){var V=N.slice();return V.push.apply(V,arguments),m.apply(this,V)}}function q(m,I){function N(){}N.prototype=I.prototype,m.aa=I.prototype,m.prototype=new N,m.prototype.constructor=m,m.Qb=function(V,oe,ge){for(var Me=Array(arguments.length-2),Ht=2;Ht<arguments.length;Ht++)Me[Ht-2]=arguments[Ht];return I.prototype[oe].apply(V,Me)}}function Q(m){const I=m.length;if(0<I){const N=Array(I);for(let V=0;V<I;V++)N[V]=m[V];return N}return[]}function J(m,I){for(let N=1;N<arguments.length;N++){const V=arguments[N];if(C(V)){const oe=m.length||0,ge=V.length||0;m.length=oe+ge;for(let Me=0;Me<ge;Me++)m[oe+Me]=V[Me]}else m.push(V)}}class ie{constructor(I,N){this.i=I,this.j=N,this.h=0,this.g=null}get(){let I;return 0<this.h?(this.h--,I=this.g,this.g=I.next,I.next=null):I=this.i(),I}}function he(m){return/^[\s\xa0]*$/.test(m)}function te(){var m=A.navigator;return m&&(m=m.userAgent)?m:""}function pe(m){return pe[" "](m),m}pe[" "]=function(){};var Ge=te().indexOf("Gecko")!=-1&&!(te().toLowerCase().indexOf("webkit")!=-1&&te().indexOf("Edge")==-1)&&!(te().indexOf("Trident")!=-1||te().indexOf("MSIE")!=-1)&&te().indexOf("Edge")==-1;function we(m,I,N){for(const V in m)I.call(N,m[V],V,m)}function F(m,I){for(const N in m)I.call(void 0,m[N],N,m)}function B(m){const I={};for(const N in m)I[N]=m[N];return I}const P="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function G(m,I){let N,V;for(let oe=1;oe<arguments.length;oe++){V=arguments[oe];for(N in V)m[N]=V[N];for(let ge=0;ge<P.length;ge++)N=P[ge],Object.prototype.hasOwnProperty.call(V,N)&&(m[N]=V[N])}}function Y(m){var I=1;m=m.split(":");const N=[];for(;0<I&&m.length;)N.push(m.shift()),I--;return m.length&&N.push(m.join(":")),N}function W(m){A.setTimeout(()=>{throw m},0)}function U(){var m=Ye;let I=null;return m.g&&(I=m.g,m.g=m.g.next,m.g||(m.h=null),I.next=null),I}class Le{constructor(){this.h=this.g=null}add(I,N){const V=ue.get();V.set(I,N),this.h?this.h.next=V:this.g=V,this.h=V}}var ue=new ie(()=>new yt,m=>m.reset());class yt{constructor(){this.next=this.g=this.h=null}set(I,N){this.h=I,this.g=N,this.next=null}reset(){this.next=this.g=this.h=null}}let Fe,be=!1,Ye=new Le,ke=()=>{const m=A.Promise.resolve(void 0);Fe=()=>{m.then(ne)}};var ne=()=>{for(var m;m=U();){try{m.h.call(m.g)}catch(N){W(N)}var I=ue;I.j(m),100>I.h&&(I.h++,m.next=I.g,I.g=m)}be=!1};function ye(){this.s=this.s,this.C=this.C}ye.prototype.s=!1,ye.prototype.ma=function(){this.s||(this.s=!0,this.N())},ye.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ze(m,I){this.type=m,this.g=this.target=I,this.defaultPrevented=!1}ze.prototype.h=function(){this.defaultPrevented=!0};var $e=function(){if(!A.addEventListener||!Object.defineProperty)return!1;var m=!1,I=Object.defineProperty({},"passive",{get:function(){m=!0}});try{const N=()=>{};A.addEventListener("test",N,I),A.removeEventListener("test",N,I)}catch{}return m}();function ct(m,I){if(ze.call(this,m?m.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,m){var N=this.type=m.type,V=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;if(this.target=m.target||m.srcElement,this.g=I,I=m.relatedTarget){if(Ge){e:{try{pe(I.nodeName);var oe=!0;break e}catch{}oe=!1}oe||(I=null)}}else N=="mouseover"?I=m.fromElement:N=="mouseout"&&(I=m.toElement);this.relatedTarget=I,V?(this.clientX=V.clientX!==void 0?V.clientX:V.pageX,this.clientY=V.clientY!==void 0?V.clientY:V.pageY,this.screenX=V.screenX||0,this.screenY=V.screenY||0):(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType=typeof m.pointerType=="string"?m.pointerType:Ne[m.pointerType]||"",this.state=m.state,this.i=m,m.defaultPrevented&&ct.aa.h.call(this)}}q(ct,ze);var Ne={2:"touch",3:"pen",4:"mouse"};ct.prototype.h=function(){ct.aa.h.call(this);var m=this.i;m.preventDefault?m.preventDefault():m.returnValue=!1};var ft="closure_listenable_"+(1e6*Math.random()|0),Qe=0;function _t(m,I,N,V,oe){this.listener=m,this.proxy=null,this.src=I,this.type=N,this.capture=!!V,this.ha=oe,this.key=++Qe,this.da=this.fa=!1}function Kt(m){m.da=!0,m.listener=null,m.proxy=null,m.src=null,m.ha=null}function gn(m){this.src=m,this.g={},this.h=0}gn.prototype.add=function(m,I,N,V,oe){var ge=m.toString();m=this.g[ge],m||(m=this.g[ge]=[],this.h++);var Me=wt(m,I,V,oe);return-1<Me?(I=m[Me],N||(I.fa=!1)):(I=new _t(I,this.src,ge,!!V,oe),I.fa=N,m.push(I)),I};function Mi(m,I){var N=I.type;if(N in m.g){var V=m.g[N],oe=Array.prototype.indexOf.call(V,I,void 0),ge;(ge=0<=oe)&&Array.prototype.splice.call(V,oe,1),ge&&(Kt(I),m.g[N].length==0&&(delete m.g[N],m.h--))}}function wt(m,I,N,V){for(var oe=0;oe<m.length;++oe){var ge=m[oe];if(!ge.da&&ge.listener==I&&ge.capture==!!N&&ge.ha==V)return oe}return-1}var Wr="closure_lm_"+(1e6*Math.random()|0),ur={};function Oi(m,I,N,V,oe){if(Array.isArray(I)){for(var ge=0;ge<I.length;ge++)Oi(m,I[ge],N,V,oe);return null}return N=ws(N),m&&m[ft]?m.K(I,N,x(V)?!!V.capture:!1,oe):An(m,I,N,!1,V,oe)}function An(m,I,N,V,oe,ge){if(!I)throw Error("Invalid event type");var Me=x(oe)?!!oe.capture:!!oe,Ht=ys(m);if(Ht||(m[Wr]=Ht=new gn(m)),N=Ht.add(I,N,V,Me,ge),N.proxy)return N;if(V=Ut(),N.proxy=V,V.src=m,V.listener=N,m.addEventListener)$e||(oe=Me),oe===void 0&&(oe=!1),m.addEventListener(I.toString(),V,oe);else if(m.attachEvent)m.attachEvent(Ve(I.toString()),V);else if(m.addListener&&m.removeListener)m.addListener(V);else throw Error("addEventListener and attachEvent are unavailable.");return N}function Ut(){function m(N){return I.call(m.src,m.listener,N)}const I=Xi;return m}function Et(m,I,N,V,oe){if(Array.isArray(I))for(var ge=0;ge<I.length;ge++)Et(m,I[ge],N,V,oe);else V=x(V)?!!V.capture:!!V,N=ws(N),m&&m[ft]?(m=m.i,I=String(I).toString(),I in m.g&&(ge=m.g[I],N=wt(ge,N,V,oe),-1<N&&(Kt(ge[N]),Array.prototype.splice.call(ge,N,1),ge.length==0&&(delete m.g[I],m.h--)))):m&&(m=ys(m))&&(I=m.g[I.toString()],m=-1,I&&(m=wt(I,N,V,oe)),(N=-1<m?I[m]:null)&&Gr(N))}function Gr(m){if(typeof m!="number"&&m&&!m.da){var I=m.src;if(I&&I[ft])Mi(I.i,m);else{var N=m.type,V=m.proxy;I.removeEventListener?I.removeEventListener(N,V,m.capture):I.detachEvent?I.detachEvent(Ve(N),V):I.addListener&&I.removeListener&&I.removeListener(V),(N=ys(I))?(Mi(N,m),N.h==0&&(N.src=null,I[Wr]=null)):Kt(m)}}}function Ve(m){return m in ur?ur[m]:ur[m]="on"+m}function Xi(m,I){if(m.da)m=!0;else{I=new ct(I,this);var N=m.listener,V=m.ha||m.src;m.fa&&Gr(m),m=N.call(V,I)}return m}function ys(m){return m=m[Wr],m instanceof gn?m:null}var Ar="__closure_events_fn_"+(1e9*Math.random()>>>0);function ws(m){return typeof m=="function"?m:(m[Ar]||(m[Ar]=function(I){return m.handleEvent(I)}),m[Ar])}function zt(){ye.call(this),this.i=new gn(this),this.M=this,this.F=null}q(zt,ye),zt.prototype[ft]=!0,zt.prototype.removeEventListener=function(m,I,N,V){Et(this,m,I,N,V)};function Sn(m,I){var N,V=m.F;if(V)for(N=[];V;V=V.F)N.push(V);if(m=m.M,V=I.type||I,typeof I=="string")I=new ze(I,m);else if(I instanceof ze)I.target=I.target||m;else{var oe=I;I=new ze(V,m),G(I,oe)}if(oe=!0,N)for(var ge=N.length-1;0<=ge;ge--){var Me=I.g=N[ge];oe=er(Me,V,!0,I)&&oe}if(Me=I.g=m,oe=er(Me,V,!0,I)&&oe,oe=er(Me,V,!1,I)&&oe,N)for(ge=0;ge<N.length;ge++)Me=I.g=N[ge],oe=er(Me,V,!1,I)&&oe}zt.prototype.N=function(){if(zt.aa.N.call(this),this.i){var m=this.i,I;for(I in m.g){for(var N=m.g[I],V=0;V<N.length;V++)Kt(N[V]);delete m.g[I],m.h--}}this.F=null},zt.prototype.K=function(m,I,N,V){return this.i.add(String(m),I,!1,N,V)},zt.prototype.L=function(m,I,N,V){return this.i.add(String(m),I,!0,N,V)};function er(m,I,N,V){if(I=m.i.g[String(I)],!I)return!0;I=I.concat();for(var oe=!0,ge=0;ge<I.length;++ge){var Me=I[ge];if(Me&&!Me.da&&Me.capture==N){var Ht=Me.listener,ln=Me.ha||Me.src;Me.fa&&Mi(m.i,Me),oe=Ht.call(ln,V)!==!1&&oe}}return oe&&!V.defaultPrevented}function Ln(m,I,N){if(typeof m=="function")N&&(m=k(m,N));else if(m&&typeof m.handleEvent=="function")m=k(m.handleEvent,m);else throw Error("Invalid listener argument");return 2147483647<Number(I)?-1:A.setTimeout(m,I||0)}function Pi(m){m.g=Ln(()=>{m.g=null,m.i&&(m.i=!1,Pi(m))},m.l);const I=m.h;m.h=null,m.m.apply(null,I)}class xi extends ye{constructor(I,N){super(),this.m=I,this.l=N,this.h=null,this.i=!1,this.g=null}j(I){this.h=arguments,this.g?this.i=!0:Pi(this)}N(){super.N(),this.g&&(A.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Es(m){ye.call(this),this.h=m,this.g={}}q(Es,ye);var rn=[];function Oe(m){we(m.g,function(I,N){this.g.hasOwnProperty(N)&&Gr(I)},m),m.g={}}Es.prototype.N=function(){Es.aa.N.call(this),Oe(this)},Es.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var an=A.JSON.stringify,Lt=A.JSON.parse,Zt=class{stringify(m){return A.JSON.stringify(m,void 0)}parse(m){return A.JSON.parse(m,void 0)}};function si(){}si.prototype.h=null;function qi(m){return m.h||(m.h=m.i())}function xs(){}var pt={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function tr(){ze.call(this,"d")}q(tr,ze);function As(){ze.call(this,"c")}q(As,ze);var oi={},cr=null;function Li(){return cr=cr||new zt}oi.La="serverreachability";function Rn(m){ze.call(this,oi.La,m)}q(Rn,ze);function _r(m){const I=Li();Sn(I,new Rn(I))}oi.STAT_EVENT="statevent";function Qi(m,I){ze.call(this,oi.STAT_EVENT,m),this.stat=I}q(Qi,ze);function Bt(m){const I=Li();Sn(I,new Qi(I,m))}oi.Ma="timingevent";function Ws(m,I){ze.call(this,oi.Ma,m),this.size=I}q(Ws,ze);function Wn(m,I){if(typeof m!="function")throw Error("Fn must not be null and must be a function");return A.setTimeout(function(){m()},I)}function ki(){this.g=!0}ki.prototype.xa=function(){this.g=!1};function Nn(m,I,N,V,oe,ge){m.info(function(){if(m.g)if(ge)for(var Me="",Ht=ge.split("&"),ln=0;ln<Ht.length;ln++){var St=Ht[ln].split("=");if(1<St.length){var nn=St[0];St=St[1];var un=nn.split("_");Me=2<=un.length&&un[1]=="type"?Me+(nn+"="+St+"&"):Me+(nn+"=redacted&")}}else Me=null;else Me=ge;return"XMLHTTP REQ ("+V+") [attempt "+oe+"]: "+I+`
`+N+`
`+Me})}function Yr(m,I,N,V,oe,ge,Me){m.info(function(){return"XMLHTTP RESP ("+V+") [ attempt "+oe+"]: "+I+`
`+N+`
`+ge+" "+Me})}function pn(m,I,N,V){m.info(function(){return"XMLHTTP TEXT ("+I+"): "+Ki(m,N)+(V?" "+V:"")})}function Be(m,I){m.info(function(){return"TIMEOUT: "+I})}ki.prototype.info=function(){};function Ki(m,I){if(!m.g)return I;if(!I)return null;try{var N=JSON.parse(I);if(N){for(m=0;m<N.length;m++)if(Array.isArray(N[m])){var V=N[m];if(!(2>V.length)){var oe=V[1];if(Array.isArray(oe)&&!(1>oe.length)){var ge=oe[0];if(ge!="noop"&&ge!="stop"&&ge!="close")for(var Me=1;Me<oe.length;Me++)oe[Me]=""}}}}return an(N)}catch{return I}}var Zi={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Gn={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},nr;function Ai(){}q(Ai,si),Ai.prototype.g=function(){return new XMLHttpRequest},Ai.prototype.i=function(){return{}},nr=new Ai;function Cr(m,I,N,V){this.j=m,this.i=I,this.l=N,this.R=V||1,this.U=new Es(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Br}function Br(){this.i=null,this.g="",this.h=!1}var Po={},Gs={};function hr(m,I,N){m.L=1,m.v=Jt(At(I)),m.m=N,m.P=!0,kn(m,null)}function kn(m,I){m.F=Date.now(),Dt(m),m.A=At(m.v);var N=m.A,V=m.R;Array.isArray(V)||(V=[String(V)]),en(N.i,"t",V),m.C=0,N=m.j.J,m.h=new Br,m.g=da(m.j,N?I:null,!m.m),0<m.O&&(m.M=new xi(k(m.Y,m,m.g),m.O)),I=m.U,N=m.g,V=m.ca;var oe="readystatechange";Array.isArray(oe)||(oe&&(rn[0]=oe.toString()),oe=rn);for(var ge=0;ge<oe.length;ge++){var Me=Oi(N,oe[ge],V||I.handleEvent,!1,I.h||I);if(!Me)break;I.g[Me.key]=Me}I=m.H?B(m.H):{},m.m?(m.u||(m.u="POST"),I["Content-Type"]="application/x-www-form-urlencoded",m.g.ea(m.A,m.u,m.m,I)):(m.u="GET",m.g.ea(m.A,m.u,null,I)),_r(),Nn(m.i,m.u,m.A,m.l,m.R,m.m)}Cr.prototype.ca=function(m){m=m.target;const I=this.M;I&&Sr(m)==3?I.j():this.Y(m)},Cr.prototype.Y=function(m){try{if(m==this.g)e:{const un=Sr(this.g);var I=this.g.Ba();const cn=this.g.Z();if(!(3>un)&&(un!=3||this.g&&(this.h.h||this.g.oa()||Bo(this.g)))){this.J||un!=4||I==7||(I==8||0>=cn?_r(3):_r(2)),xe(this);var N=this.g.Z();this.X=N;t:if(Xt(this)){var V=Bo(this.g);m="";var oe=V.length,ge=Sr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){bt(this),$i(this);var Me="";break t}this.h.i=new A.TextDecoder}for(I=0;I<oe;I++)this.h.h=!0,m+=this.h.i.decode(V[I],{stream:!(ge&&I==oe-1)});V.length=0,this.h.g+=m,this.C=0,Me=this.h.g}else Me=this.g.oa();if(this.o=N==200,Yr(this.i,this.u,this.A,this.l,this.R,un,N),this.o){if(this.T&&!this.K){t:{if(this.g){var Ht,ln=this.g;if((Ht=ln.g?ln.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!he(Ht)){var St=Ht;break t}}St=null}if(N=St)pn(this.i,this.l,N,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,_i(this,N);else{this.o=!1,this.s=3,Bt(12),bt(this),$i(this);break e}}if(this.P){N=!0;let Rr;for(;!this.J&&this.C<Me.length;)if(Rr=ua(this,Me),Rr==Gs){un==4&&(this.s=4,Bt(14),N=!1),pn(this.i,this.l,null,"[Incomplete Response]");break}else if(Rr==Po){this.s=4,Bt(15),pn(this.i,this.l,Me,"[Invalid Chunk]"),N=!1;break}else pn(this.i,this.l,Rr,null),_i(this,Rr);if(Xt(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),un!=4||Me.length!=0||this.h.h||(this.s=1,Bt(16),N=!1),this.o=this.o&&N,!N)pn(this.i,this.l,Me,"[Invalid Chunked Response]"),bt(this),$i(this);else if(0<Me.length&&!this.W){this.W=!0;var nn=this.j;nn.g==this&&nn.ba&&!nn.M&&(nn.j.info("Great, no buffering proxy detected. Bytes received: "+Me.length),Ts(nn),nn.M=!0,Bt(11))}}else pn(this.i,this.l,Me,null),_i(this,Me);un==4&&bt(this),this.o&&!this.J&&(un==4?qt(this.j,this):(this.o=!1,Dt(this)))}else Mt(this.g),N==400&&0<Me.indexOf("Unknown SID")?(this.s=3,Bt(12)):(this.s=0,Bt(13)),bt(this),$i(this)}}}catch{}finally{}};function Xt(m){return m.g?m.u=="GET"&&m.L!=2&&m.j.Ca:!1}function ua(m,I){var N=m.C,V=I.indexOf(`
`,N);return V==-1?Gs:(N=Number(I.substring(N,V)),isNaN(N)?Po:(V+=1,V+N>I.length?Gs:(I=I.slice(V,V+N),m.C=V+N,I)))}Cr.prototype.cancel=function(){this.J=!0,bt(this)};function Dt(m){m.S=Date.now()+m.I,Ys(m,m.I)}function Ys(m,I){if(m.B!=null)throw Error("WatchDog timer not null");m.B=Wn(k(m.ba,m),I)}function xe(m){m.B&&(A.clearTimeout(m.B),m.B=null)}Cr.prototype.ba=function(){this.B=null;const m=Date.now();0<=m-this.S?(Be(this.i,this.A),this.L!=2&&(_r(),Bt(17)),bt(this),this.s=2,$i(this)):Ys(this,this.S-m)};function $i(m){m.j.G==0||m.J||qt(m.j,m)}function bt(m){xe(m);var I=m.M;I&&typeof I.ma=="function"&&I.ma(),m.M=null,Oe(m.U),m.g&&(I=m.g,m.g=null,I.abort(),I.ma())}function _i(m,I){try{var N=m.j;if(N.G!=0&&(N.g==m||Yn(N.h,m))){if(!m.K&&Yn(N.h,m)&&N.G==3){try{var V=N.Da.g.parse(I)}catch{V=null}if(Array.isArray(V)&&V.length==3){var oe=V;if(oe[0]==0){e:if(!N.u){if(N.g)if(N.g.F+3e3<m.F)rs(N),hi(N);else break e;$s(N),Bt(18)}}else N.za=oe[1],0<N.za-N.T&&37500>oe[2]&&N.F&&N.v==0&&!N.C&&(N.C=Wn(k(N.Za,N),6e3));if(1>=xt(N.h)&&N.ca){try{N.ca()}catch{}N.ca=void 0}}else dr(N,11)}else if((m.K||N.g==m)&&rs(N),!he(I))for(oe=N.Da.g.parse(I),I=0;I<oe.length;I++){let St=oe[I];if(N.T=St[0],St=St[1],N.G==2)if(St[0]=="c"){N.K=St[1],N.ia=St[2];const nn=St[3];nn!=null&&(N.la=nn,N.j.info("VER="+N.la));const un=St[4];un!=null&&(N.Aa=un,N.j.info("SVER="+N.Aa));const cn=St[5];cn!=null&&typeof cn=="number"&&0<cn&&(V=1.5*cn,N.L=V,N.j.info("backChannelRequestTimeoutMs_="+V)),V=N;const Rr=m.g;if(Rr){const ir=Rr.g?Rr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ir){var ge=V.h;ge.g||ir.indexOf("spdy")==-1&&ir.indexOf("quic")==-1&&ir.indexOf("h2")==-1||(ge.j=ge.l,ge.g=new Set,ge.h&&(_s(ge,ge.h),ge.h=null))}if(V.D){const Js=Rr.g?Rr.g.getResponseHeader("X-HTTP-Session-Id"):null;Js&&(V.ya=Js,Pe(V.I,V.D,Js))}}N.G=3,N.l&&N.l.ua(),N.ba&&(N.R=Date.now()-m.F,N.j.info("Handshake RTT: "+N.R+"ms")),V=N;var Me=m;if(V.qa=Je(V,V.J?V.ia:null,V.W),Me.K){Xs(V.h,Me);var Ht=Me,ln=V.L;ln&&(Ht.I=ln),Ht.B&&(xe(Ht),Dt(Ht)),V.g=Me}else Is(V);0<N.i.length&&ot(N)}else St[0]!="stop"&&St[0]!="close"||dr(N,7);else N.G==3&&(St[0]=="stop"||St[0]=="close"?St[0]=="stop"?dr(N,7):sn(N):St[0]!="noop"&&N.l&&N.l.ta(St),N.v=0)}}_r(4)}catch{}}var ca=class{constructor(m,I){this.g=m,this.map=I}};function It(m){this.l=m||10,A.PerformanceNavigationTiming?(m=A.performance.getEntriesByType("navigation"),m=0<m.length&&(m[0].nextHopProtocol=="hq"||m[0].nextHopProtocol=="h2")):m=!!(A.chrome&&A.chrome.loadTimes&&A.chrome.loadTimes()&&A.chrome.loadTimes().wasFetchedViaSpdy),this.j=m?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function dt(m){return m.h?!0:m.g?m.g.size>=m.j:!1}function xt(m){return m.h?1:m.g?m.g.size:0}function Yn(m,I){return m.h?m.h==I:m.g?m.g.has(I):!1}function _s(m,I){m.g?m.g.add(I):m.h=I}function Xs(m,I){m.h&&m.h==I?m.h=null:m.g&&m.g.has(I)&&m.g.delete(I)}It.prototype.cancel=function(){if(this.i=mn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const m of this.g.values())m.cancel();this.g.clear()}};function mn(m){if(m.h!=null)return m.i.concat(m.h.D);if(m.g!=null&&m.g.size!==0){let I=m.i;for(const N of m.g.values())I=I.concat(N.D);return I}return Q(m.i)}function Fr(m){if(m.V&&typeof m.V=="function")return m.V();if(typeof Map<"u"&&m instanceof Map||typeof Set<"u"&&m instanceof Set)return Array.from(m.values());if(typeof m=="string")return m.split("");if(C(m)){for(var I=[],N=m.length,V=0;V<N;V++)I.push(m[V]);return I}I=[],N=0;for(V in m)I[N++]=m[V];return I}function qs(m){if(m.na&&typeof m.na=="function")return m.na();if(!m.V||typeof m.V!="function"){if(typeof Map<"u"&&m instanceof Map)return Array.from(m.keys());if(!(typeof Set<"u"&&m instanceof Set)){if(C(m)||typeof m=="string"){var I=[];m=m.length;for(var N=0;N<m;N++)I.push(N);return I}I=[],N=0;for(const V in m)I[N++]=V;return I}}}function Gt(m,I){if(m.forEach&&typeof m.forEach=="function")m.forEach(I,void 0);else if(C(m)||typeof m=="string")Array.prototype.forEach.call(m,I,void 0);else for(var N=qs(m),V=Fr(m),oe=V.length,ge=0;ge<oe;ge++)I.call(void 0,V[ge],N&&N[ge],m)}var vr=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function tl(m,I){if(m){m=m.split("&");for(var N=0;N<m.length;N++){var V=m[N].indexOf("="),oe=null;if(0<=V){var ge=m[N].substring(0,V);oe=m[N].substring(V+1)}else ge=m[N];I(ge,oe?decodeURIComponent(oe.replace(/\+/g," ")):"")}}}function Ir(m){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,m instanceof Ir){this.h=m.h,yn(this,m.j),this.o=m.o,this.g=m.g,se(this,m.s),this.l=m.l;var I=m.i,N=new Xr;N.i=I.i,I.g&&(N.g=new Map(I.g),N.h=I.h),z(this,N),this.m=m.m}else m&&(I=String(m).match(vr))?(this.h=!1,yn(this,I[1]||"",!0),this.o=at(I[2]||""),this.g=at(I[3]||"",!0),se(this,I[4]),this.l=at(I[5]||"",!0),z(this,I[6]||"",!0),this.m=at(I[7]||"")):(this.h=!1,this.i=new Xr(null,this.h))}Ir.prototype.toString=function(){var m=[],I=this.j;I&&m.push(Ji(I,Xn,!0),":");var N=this.g;return(N||I=="file")&&(m.push("//"),(I=this.o)&&m.push(Ji(I,Xn,!0),"@"),m.push(encodeURIComponent(String(N)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),N=this.s,N!=null&&m.push(":",String(N))),(N=this.l)&&(this.g&&N.charAt(0)!="/"&&m.push("/"),m.push(Ji(N,N.charAt(0)=="/"?$t:Ze,!0))),(N=this.i.toString())&&m.push("?",N),(N=this.m)&&m.push("#",Ji(N,ko)),m.join("")};function At(m){return new Ir(m)}function yn(m,I,N){m.j=N?at(I,!0):I,m.j&&(m.j=m.j.replace(/:$/,""))}function se(m,I){if(I){if(I=Number(I),isNaN(I)||0>I)throw Error("Bad port number "+I);m.s=I}else m.s=null}function z(m,I,N){I instanceof Xr?(m.i=I,qn(m.i,m.h)):(N||(I=Ji(I,Lo)),m.i=new Xr(I,m.h))}function Pe(m,I,N){m.i.set(I,N)}function Jt(m){return Pe(m,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),m}function at(m,I){return m?I?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function Ji(m,I,N){return typeof m=="string"?(m=encodeURI(m).replace(I,Qs),N&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function Qs(m){return m=m.charCodeAt(0),"%"+(m>>4&15).toString(16)+(m&15).toString(16)}var Xn=/[#\/\?@]/g,Ze=/[#\?:]/g,$t=/[#\?]/g,Lo=/[#\?@]/g,ko=/#/g;function Xr(m,I){this.h=this.g=null,this.i=m||null,this.j=!!I}function Dn(m){m.g||(m.g=new Map,m.h=0,m.i&&tl(m.i,function(I,N){m.add(decodeURIComponent(I.replace(/\+/g," ")),N)}))}s=Xr.prototype,s.add=function(m,I){Dn(this),this.i=null,m=rr(this,m);var N=this.g.get(m);return N||this.g.set(m,N=[]),N.push(I),this.h+=1,this};function Vr(m,I){Dn(m),I=rr(m,I),m.g.has(I)&&(m.i=null,m.h-=m.g.get(I).length,m.g.delete(I))}function ai(m,I){return Dn(m),I=rr(m,I),m.g.has(I)}s.forEach=function(m,I){Dn(this),this.g.forEach(function(N,V){N.forEach(function(oe){m.call(I,oe,V,this)},this)},this)},s.na=function(){Dn(this);const m=Array.from(this.g.values()),I=Array.from(this.g.keys()),N=[];for(let V=0;V<I.length;V++){const oe=m[V];for(let ge=0;ge<oe.length;ge++)N.push(I[V])}return N},s.V=function(m){Dn(this);let I=[];if(typeof m=="string")ai(this,m)&&(I=I.concat(this.g.get(rr(this,m))));else{m=Array.from(this.g.values());for(let N=0;N<m.length;N++)I=I.concat(m[N])}return I},s.set=function(m,I){return Dn(this),this.i=null,m=rr(this,m),ai(this,m)&&(this.h-=this.g.get(m).length),this.g.set(m,[I]),this.h+=1,this},s.get=function(m,I){return m?(m=this.V(m),0<m.length?String(m[0]):I):I};function en(m,I,N){Vr(m,I),0<N.length&&(m.i=null,m.g.set(rr(m,I),Q(N)),m.h+=N.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const m=[],I=Array.from(this.g.keys());for(var N=0;N<I.length;N++){var V=I[N];const ge=encodeURIComponent(String(V)),Me=this.V(V);for(V=0;V<Me.length;V++){var oe=ge;Me[V]!==""&&(oe+="="+encodeURIComponent(String(Me[V]))),m.push(oe)}}return this.i=m.join("&")};function rr(m,I){return I=String(I),m.j&&(I=I.toLowerCase()),I}function qn(m,I){I&&!m.j&&(Dn(m),m.i=null,m.g.forEach(function(N,V){var oe=V.toLowerCase();V!=oe&&(Vr(this,V),en(this,oe,N))},m)),m.j=I}function nt(m,I){const N=new ki;if(A.Image){const V=new Image;V.onload=j(et,N,"TestLoadImage: loaded",!0,I,V),V.onerror=j(et,N,"TestLoadImage: error",!1,I,V),V.onabort=j(et,N,"TestLoadImage: abort",!1,I,V),V.ontimeout=j(et,N,"TestLoadImage: timeout",!1,I,V),A.setTimeout(function(){V.ontimeout&&V.ontimeout()},1e4),V.src=m}else I(!1)}function ha(m,I){const N=new ki,V=new AbortController,oe=setTimeout(()=>{V.abort(),et(N,"TestPingServer: timeout",!1,I)},1e4);fetch(m,{signal:V.signal}).then(ge=>{clearTimeout(oe),ge.ok?et(N,"TestPingServer: ok",!0,I):et(N,"TestPingServer: server error",!1,I)}).catch(()=>{clearTimeout(oe),et(N,"TestPingServer: error",!1,I)})}function et(m,I,N,V,oe){try{oe&&(oe.onload=null,oe.onerror=null,oe.onabort=null,oe.ontimeout=null),V(N)}catch{}}function Bn(){this.g=new Zt}function fa(m,I,N){const V=N||"";try{Gt(m,function(oe,ge){let Me=oe;x(oe)&&(Me=an(oe)),I.push(V+ge+"="+encodeURIComponent(Me))})}catch(oe){throw I.push(V+"type="+encodeURIComponent("_badmap")),oe}}function li(m){this.l=m.Ub||null,this.j=m.eb||!1}q(li,si),li.prototype.g=function(){return new es(this.l,this.j)},li.prototype.i=function(m){return function(){return m}}({});function es(m,I){zt.call(this),this.D=m,this.o=I,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}q(es,zt),s=es.prototype,s.open=function(m,I){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=m,this.A=I,this.readyState=1,fr(this)},s.send=function(m){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const I={headers:this.u,method:this.B,credentials:this.m,cache:void 0};m&&(I.body=m),(this.D||A).fetch(new Request(this.A,I)).then(this.Sa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ui(this)),this.readyState=0},s.Sa=function(m){if(this.g&&(this.l=m,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=m.headers,this.readyState=2,fr(this)),this.g&&(this.readyState=3,fr(this),this.g)))if(this.responseType==="arraybuffer")m.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof A.ReadableStream<"u"&&"body"in m){if(this.j=m.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ci(this)}else m.text().then(this.Ra.bind(this),this.ga.bind(this))};function Ci(m){m.j.read().then(m.Pa.bind(m)).catch(m.ga.bind(m))}s.Pa=function(m){if(this.g){if(this.o&&m.value)this.response.push(m.value);else if(!this.o){var I=m.value?m.value:new Uint8Array(0);(I=this.v.decode(I,{stream:!m.done}))&&(this.response=this.responseText+=I)}m.done?ui(this):fr(this),this.readyState==3&&Ci(this)}},s.Ra=function(m){this.g&&(this.response=this.responseText=m,ui(this))},s.Qa=function(m){this.g&&(this.response=m,ui(this))},s.ga=function(){this.g&&ui(this)};function ui(m){m.readyState=4,m.l=null,m.j=null,m.v=null,fr(m)}s.setRequestHeader=function(m,I){this.u.append(m,I)},s.getResponseHeader=function(m){return this.h&&this.h.get(m.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const m=[],I=this.h.entries();for(var N=I.next();!N.done;)N=N.value,m.push(N[0]+": "+N[1]),N=I.next();return m.join(`\r
`)};function fr(m){m.onreadystatechange&&m.onreadystatechange.call(m)}Object.defineProperty(es.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(m){this.m=m?"include":"same-origin"}});function Ur(m){let I="";return we(m,function(N,V){I+=V,I+=":",I+=N,I+=`\r
`}),I}function qr(m,I,N){e:{for(V in N){var V=!1;break e}V=!0}V||(N=Ur(N),typeof m=="string"?N!=null&&encodeURIComponent(String(N)):Pe(m,I,N))}function tn(m){zt.call(this),this.headers=new Map,this.o=m||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}q(tn,zt);var Cs=/^https?$/i,Bi=["POST","PUT"];s=tn.prototype,s.Ha=function(m){this.J=m},s.ea=function(m,I,N,V){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+m);I=I?I.toUpperCase():"GET",this.D=m,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():nr.g(),this.v=this.o?qi(this.o):qi(nr),this.g.onreadystatechange=k(this.Ea,this);try{this.B=!0,this.g.open(I,String(m),!0),this.B=!1}catch(ge){bn(this,ge);return}if(m=N||"",N=new Map(this.headers),V)if(Object.getPrototypeOf(V)===Object.prototype)for(var oe in V)N.set(oe,V[oe]);else if(typeof V.keys=="function"&&typeof V.get=="function")for(const ge of V.keys())N.set(ge,V.get(ge));else throw Error("Unknown input type for opt_headers: "+String(V));V=Array.from(N.keys()).find(ge=>ge.toLowerCase()=="content-type"),oe=A.FormData&&m instanceof A.FormData,!(0<=Array.prototype.indexOf.call(Bi,I,void 0))||V||oe||N.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ge,Me]of N)this.g.setRequestHeader(ge,Me);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Zs(this),this.u=!0,this.g.send(m),this.u=!1}catch(ge){bn(this,ge)}};function bn(m,I){m.h=!1,m.g&&(m.j=!0,m.g.abort(),m.j=!1),m.l=I,m.m=5,vs(m),Tr(m)}function vs(m){m.A||(m.A=!0,Sn(m,"complete"),Sn(m,"error"))}s.abort=function(m){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=m||7,Sn(this,"complete"),Sn(this,"abort"),Tr(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Tr(this,!0)),tn.aa.N.call(this)},s.Ea=function(){this.s||(this.B||this.u||this.j?Ks(this):this.bb())},s.bb=function(){Ks(this)};function Ks(m){if(m.h&&typeof y<"u"&&(!m.v[1]||Sr(m)!=4||m.Z()!=2)){if(m.u&&Sr(m)==4)Ln(m.Ea,0,m);else if(Sn(m,"readystatechange"),Sr(m)==4){m.h=!1;try{const Me=m.Z();e:switch(Me){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var I=!0;break e;default:I=!1}var N;if(!(N=I)){var V;if(V=Me===0){var oe=String(m.D).match(vr)[1]||null;!oe&&A.self&&A.self.location&&(oe=A.self.location.protocol.slice(0,-1)),V=!Cs.test(oe?oe.toLowerCase():"")}N=V}if(N)Sn(m,"complete"),Sn(m,"success");else{m.m=6;try{var ge=2<Sr(m)?m.g.statusText:""}catch{ge=""}m.l=ge+" ["+m.Z()+"]",vs(m)}}finally{Tr(m)}}}}function Tr(m,I){if(m.g){Zs(m);const N=m.g,V=m.v[0]?()=>{}:null;m.g=null,m.v=null,I||Sn(m,"ready");try{N.onreadystatechange=V}catch{}}}function Zs(m){m.I&&(A.clearTimeout(m.I),m.I=null)}s.isActive=function(){return!!this.g};function Sr(m){return m.g?m.g.readyState:0}s.Z=function(){try{return 2<Sr(this)?this.g.status:-1}catch{return-1}},s.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.Oa=function(m){if(this.g){var I=this.g.responseText;return m&&I.indexOf(m)==0&&(I=I.substring(m.length)),Lt(I)}};function Bo(m){try{if(!m.g)return null;if("response"in m.g)return m.g.response;switch(m.H){case"":case"text":return m.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in m.g)return m.g.mozResponseArrayBuffer}return null}catch{return null}}function Mt(m){const I={};m=(m.g&&2<=Sr(m)&&m.g.getAllResponseHeaders()||"").split(`\r
`);for(let V=0;V<m.length;V++){if(he(m[V]))continue;var N=Y(m[V]);const oe=N[0];if(N=N[1],typeof N!="string")continue;N=N.trim();const ge=I[oe]||[];I[oe]=ge,ge.push(N)}F(I,function(V){return V.join(", ")})}s.Ba=function(){return this.m},s.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ci(m,I,N){return N&&N.internalChannelParams&&N.internalChannelParams[m]||I}function ts(m){this.Aa=0,this.i=[],this.j=new ki,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ci("failFast",!1,m),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ci("baseRetryDelayMs",5e3,m),this.cb=ci("retryDelaySeedMs",1e4,m),this.Wa=ci("forwardChannelMaxRetries",2,m),this.wa=ci("forwardChannelRequestTimeoutMs",2e4,m),this.pa=m&&m.xmlHttpFactory||void 0,this.Xa=m&&m.Tb||void 0,this.Ca=m&&m.useFetchStreams||!1,this.L=void 0,this.J=m&&m.supportsCrossDomainXhr||!1,this.K="",this.h=new It(m&&m.concurrentRequestLimit),this.Da=new Bn,this.P=m&&m.fastHandshake||!1,this.O=m&&m.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=m&&m.Rb||!1,m&&m.xa&&this.j.xa(),m&&m.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&m&&m.detectBufferingProxy||!1,this.ja=void 0,m&&m.longPollingTimeout&&0<m.longPollingTimeout&&(this.ja=m.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}s=ts.prototype,s.la=8,s.G=1,s.connect=function(m,I,N,V){Bt(0),this.W=m,this.H=I||{},N&&V!==void 0&&(this.H.OSID=N,this.H.OAID=V),this.F=this.X,this.I=Je(this,null,this.W),ot(this)};function sn(m){if(ce(m),m.G==3){var I=m.U++,N=At(m.I);if(Pe(N,"SID",m.K),Pe(N,"RID",I),Pe(N,"TYPE","terminate"),vi(m,N),I=new Cr(m,m.j,I),I.L=2,I.v=Jt(At(N)),N=!1,A.navigator&&A.navigator.sendBeacon)try{N=A.navigator.sendBeacon(I.v.toString(),"")}catch{}!N&&A.Image&&(new Image().src=I.v,N=!0),N||(I.g=da(I.j,null),I.g.ea(I.v)),I.F=Date.now(),Dt(I)}Ft(m)}function hi(m){m.g&&(Ts(m),m.g.cancel(),m.g=null)}function ce(m){hi(m),m.u&&(A.clearTimeout(m.u),m.u=null),rs(m),m.h.cancel(),m.s&&(typeof m.s=="number"&&A.clearTimeout(m.s),m.s=null)}function ot(m){if(!dt(m.h)&&!m.s){m.s=!0;var I=m.Ga;Fe||ke(),be||(Fe(),be=!0),Ye.add(I,m),m.B=0}}function Fn(m,I){return xt(m.h)>=m.h.j-(m.s?1:0)?!1:m.s?(m.i=I.D.concat(m.i),!0):m.G==1||m.G==2||m.B>=(m.Va?0:m.Wa)?!1:(m.s=Wn(k(m.Ga,m,I),Ss(m,m.B)),m.B++,!0)}s.Ga=function(m){if(this.s)if(this.s=null,this.G==1){if(!m){this.U=Math.floor(1e5*Math.random()),m=this.U++;const oe=new Cr(this,this.j,m);let ge=this.o;if(this.S&&(ge?(ge=B(ge),G(ge,this.S)):ge=this.S),this.m!==null||this.O||(oe.H=ge,ge=null),this.P)e:{for(var I=0,N=0;N<this.i.length;N++){t:{var V=this.i[N];if("__data__"in V.map&&(V=V.map.__data__,typeof V=="string")){V=V.length;break t}V=void 0}if(V===void 0)break;if(I+=V,4096<I){I=N;break e}if(I===4096||N===this.i.length-1){I=N+1;break e}}I=1e3}else I=1e3;I=ns(this,oe,I),N=At(this.I),Pe(N,"RID",m),Pe(N,"CVER",22),this.D&&Pe(N,"X-HTTP-Session-Id",this.D),vi(this,N),ge&&(this.O?I="headers="+encodeURIComponent(String(Ur(ge)))+"&"+I:this.m&&qr(N,this.m,ge)),_s(this.h,oe),this.Ua&&Pe(N,"TYPE","init"),this.P?(Pe(N,"$req",I),Pe(N,"SID","null"),oe.T=!0,hr(oe,N,null)):hr(oe,N,I),this.G=2}}else this.G==3&&(m?Fi(this,m):this.i.length==0||dt(this.h)||Fi(this))};function Fi(m,I){var N;I?N=I.l:N=m.U++;const V=At(m.I);Pe(V,"SID",m.K),Pe(V,"RID",N),Pe(V,"AID",m.T),vi(m,V),m.m&&m.o&&qr(V,m.m,m.o),N=new Cr(m,m.j,N,m.B+1),m.m===null&&(N.H=m.o),I&&(m.i=I.D.concat(m.i)),I=ns(m,N,1e3),N.I=Math.round(.5*m.wa)+Math.round(.5*m.wa*Math.random()),_s(m.h,N),hr(N,V,I)}function vi(m,I){m.H&&we(m.H,function(N,V){Pe(I,V,N)}),m.l&&Gt({},function(N,V){Pe(I,V,N)})}function ns(m,I,N){N=Math.min(m.i.length,N);var V=m.l?k(m.l.Na,m.l,m):null;e:{var oe=m.i;let ge=-1;for(;;){const Me=["count="+N];ge==-1?0<N?(ge=oe[0].g,Me.push("ofs="+ge)):ge=0:Me.push("ofs="+ge);let Ht=!0;for(let ln=0;ln<N;ln++){let St=oe[ln].g;const nn=oe[ln].map;if(St-=ge,0>St)ge=Math.max(0,oe[ln].g-100),Ht=!1;else try{fa(nn,Me,"req"+St+"_")}catch{V&&V(nn)}}if(Ht){V=Me.join("&");break e}}}return m=m.i.splice(0,N),I.D=m,V}function Is(m){if(!m.g&&!m.u){m.Y=1;var I=m.Fa;Fe||ke(),be||(Fe(),be=!0),Ye.add(I,m),m.v=0}}function $s(m){return m.g||m.u||3<=m.v?!1:(m.Y++,m.u=Wn(k(m.Fa,m),Ss(m,m.v)),m.v++,!0)}s.Fa=function(){if(this.u=null,wn(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var m=2*this.R;this.j.info("BP detection timer enabled: "+m),this.A=Wn(k(this.ab,this),m)}},s.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Bt(10),hi(this),wn(this))};function Ts(m){m.A!=null&&(A.clearTimeout(m.A),m.A=null)}function wn(m){m.g=new Cr(m,m.j,"rpc",m.Y),m.m===null&&(m.g.H=m.o),m.g.O=0;var I=At(m.qa);Pe(I,"RID","rpc"),Pe(I,"SID",m.K),Pe(I,"AID",m.T),Pe(I,"CI",m.F?"0":"1"),!m.F&&m.ja&&Pe(I,"TO",m.ja),Pe(I,"TYPE","xmlhttp"),vi(m,I),m.m&&m.o&&qr(I,m.m,m.o),m.L&&(m.g.I=m.L);var N=m.g;m=m.ia,N.L=1,N.v=Jt(At(I)),N.m=null,N.P=!0,kn(N,m)}s.Za=function(){this.C!=null&&(this.C=null,hi(this),$s(this),Bt(19))};function rs(m){m.C!=null&&(A.clearTimeout(m.C),m.C=null)}function qt(m,I){var N=null;if(m.g==I){rs(m),Ts(m),m.g=null;var V=2}else if(Yn(m.h,I))N=I.D,Xs(m.h,I),V=1;else return;if(m.G!=0){if(I.o)if(V==1){N=I.m?I.m.length:0,I=Date.now()-I.F;var oe=m.B;V=Li(),Sn(V,new Ws(V,N)),ot(m)}else Is(m);else if(oe=I.s,oe==3||oe==0&&0<I.X||!(V==1&&Fn(m,I)||V==2&&$s(m)))switch(N&&0<N.length&&(I=m.h,I.i=I.i.concat(N)),oe){case 1:dr(m,5);break;case 4:dr(m,10);break;case 3:dr(m,6);break;default:dr(m,2)}}}function Ss(m,I){let N=m.Ta+Math.floor(Math.random()*m.cb);return m.isActive()||(N*=2),N*I}function dr(m,I){if(m.j.info("Error code "+I),I==2){var N=k(m.fb,m),V=m.Xa;const oe=!V;V=new Ir(V||"//www.google.com/images/cleardot.gif"),A.location&&A.location.protocol=="http"||yn(V,"https"),Jt(V),oe?nt(V.toString(),N):ha(V.toString(),N)}else Bt(2);m.G=0,m.l&&m.l.sa(I),Ft(m),ce(m)}s.fb=function(m){m?(this.j.info("Successfully pinged google.com"),Bt(2)):(this.j.info("Failed to ping google.com"),Bt(1))};function Ft(m){if(m.G=0,m.ka=[],m.l){const I=mn(m.h);(I.length!=0||m.i.length!=0)&&(J(m.ka,I),J(m.ka,m.i),m.h.i.length=0,Q(m.i),m.i.length=0),m.l.ra()}}function Je(m,I,N){var V=N instanceof Ir?At(N):new Ir(N);if(V.g!="")I&&(V.g=I+"."+V.g),se(V,V.s);else{var oe=A.location;V=oe.protocol,I=I?I+"."+oe.hostname:oe.hostname,oe=+oe.port;var ge=new Ir(null);V&&yn(ge,V),I&&(ge.g=I),oe&&se(ge,oe),N&&(ge.l=N),V=ge}return N=m.D,I=m.ya,N&&I&&Pe(V,N,I),Pe(V,"VER",m.la),vi(m,V),V}function da(m,I,N){if(I&&!m.J)throw Error("Can't create secondary domain capable XhrIo object.");return I=m.Ca&&!m.pa?new tn(new li({eb:N})):new tn(m.pa),I.Ha(m.J),I}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function jt(){}s=jt.prototype,s.ua=function(){},s.ta=function(){},s.sa=function(){},s.ra=function(){},s.isActive=function(){return!0},s.Na=function(){};function Qr(){}Qr.prototype.g=function(m,I){return new Mn(m,I)};function Mn(m,I){zt.call(this),this.g=new ts(I),this.l=m,this.h=I&&I.messageUrlParams||null,m=I&&I.messageHeaders||null,I&&I.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.g.o=m,m=I&&I.initMessageHeaders||null,I&&I.messageContentType&&(m?m["X-WebChannel-Content-Type"]=I.messageContentType:m={"X-WebChannel-Content-Type":I.messageContentType}),I&&I.va&&(m?m["X-WebChannel-Client-Profile"]=I.va:m={"X-WebChannel-Client-Profile":I.va}),this.g.S=m,(m=I&&I.Sb)&&!he(m)&&(this.g.m=m),this.v=I&&I.supportsCrossDomainXhr||!1,this.u=I&&I.sendRawJson||!1,(I=I&&I.httpSessionIdParam)&&!he(I)&&(this.g.D=I,m=this.h,m!==null&&I in m&&(m=this.h,I in m&&delete m[I])),this.j=new Kr(this)}q(Mn,zt),Mn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Mn.prototype.close=function(){sn(this.g)},Mn.prototype.o=function(m){var I=this.g;if(typeof m=="string"){var N={};N.__data__=m,m=N}else this.u&&(N={},N.__data__=an(m),m=N);I.i.push(new ca(I.Ya++,m)),I.G==3&&ot(I)},Mn.prototype.N=function(){this.g.l=null,delete this.j,sn(this.g),delete this.g,Mn.aa.N.call(this)};function ga(m){tr.call(this),m.__headers__&&(this.headers=m.__headers__,this.statusCode=m.__status__,delete m.__headers__,delete m.__status__);var I=m.__sm__;if(I){e:{for(const N in I){m=N;break e}m=void 0}(this.i=m)&&(m=this.i,I=I!==null&&m in I?I[m]:void 0),this.data=I}else this.data=m}q(ga,tr);function zr(){As.call(this),this.status=1}q(zr,As);function Kr(m){this.g=m}q(Kr,jt),Kr.prototype.ua=function(){Sn(this.g,"a")},Kr.prototype.ta=function(m){Sn(this.g,new ga(m))},Kr.prototype.sa=function(m){Sn(this.g,new zr)},Kr.prototype.ra=function(){Sn(this.g,"b")},Qr.prototype.createWebChannel=Qr.prototype.g,Mn.prototype.send=Mn.prototype.o,Mn.prototype.open=Mn.prototype.m,Mn.prototype.close=Mn.prototype.close,Km=function(){return new Qr},Qm=function(){return Li()},qm=oi,nd={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Zi.NO_ERROR=0,Zi.TIMEOUT=8,Zi.HTTP_ERROR=6,sc=Zi,Gn.COMPLETE="complete",Xm=Gn,xs.EventType=pt,pt.OPEN="a",pt.CLOSE="b",pt.ERROR="c",pt.MESSAGE="d",zt.prototype.listen=zt.prototype.K,Rl=xs,tn.prototype.listenOnce=tn.prototype.L,tn.prototype.getLastError=tn.prototype.Ka,tn.prototype.getLastErrorCode=tn.prototype.Ba,tn.prototype.getStatus=tn.prototype.Z,tn.prototype.getResponseJson=tn.prototype.Oa,tn.prototype.getResponseText=tn.prototype.oa,tn.prototype.send=tn.prototype.ea,tn.prototype.setWithCredentials=tn.prototype.Ha,Ym=tn}).apply(typeof Qu<"u"?Qu:typeof self<"u"?self:typeof window<"u"?window:{});const np="@firebase/firestore",rp="4.7.10";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lr{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Lr.UNAUTHENTICATED=new Lr(null),Lr.GOOGLE_CREDENTIALS=new Lr("google-credentials-uid"),Lr.FIRST_PARTY=new Lr("first-party-uid"),Lr.MOCK_USER=new Lr("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Za="11.5.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ta=new Vm("@firebase/firestore");function Pa(){return ta.logLevel}function je(s,...e){if(ta.logLevel<=Pt.DEBUG){const n=e.map(Nd);ta.debug(`Firestore (${Za}): ${s}`,...n)}}function zs(s,...e){if(ta.logLevel<=Pt.ERROR){const n=e.map(Nd);ta.error(`Firestore (${Za}): ${s}`,...n)}}function za(s,...e){if(ta.logLevel<=Pt.WARN){const n=e.map(Nd);ta.warn(`Firestore (${Za}): ${s}`,...n)}}function Nd(s){if(typeof s=="string")return s;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(s)}catch{return s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lt(s="Unexpected state"){const e=`FIRESTORE (${Za}) INTERNAL ASSERTION FAILED: `+s;throw zs(e),new Error(e)}function Yt(s,e){s||lt()}function mt(s,e){return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ie={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class tt extends Ka{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _o{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zm{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class JA{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Lr.UNAUTHENTICATED))}shutdown(){}}class e_{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class t_{constructor(e){this.t=e,this.currentUser=Lr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Yt(this.o===void 0);let o=this.i;const u=C=>this.i!==o?(o=this.i,n(C)):Promise.resolve();let f=new _o;this.o=()=>{this.i++,this.currentUser=this.u(),f.resolve(),f=new _o,e.enqueueRetryable(()=>u(this.currentUser))};const y=()=>{const C=f;e.enqueueRetryable(async()=>{await C.promise,await u(this.currentUser)})},A=C=>{je("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=C,this.o&&(this.auth.addAuthTokenListener(this.o),y())};this.t.onInit(C=>A(C)),setTimeout(()=>{if(!this.auth){const C=this.t.getImmediate({optional:!0});C?A(C):(je("FirebaseAuthCredentialsProvider","Auth not yet detected"),f.resolve(),f=new _o)}},0),y()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(o=>this.i!==e?(je("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):o?(Yt(typeof o.accessToken=="string"),new Zm(o.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Yt(e===null||typeof e=="string"),new Lr(e)}}class n_{constructor(e,n,o){this.l=e,this.h=n,this.P=o,this.type="FirstParty",this.user=Lr.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class r_{constructor(e,n,o){this.l=e,this.h=n,this.P=o}getToken(){return Promise.resolve(new n_(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Lr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ip{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class i_{constructor(e,n){this.A=n,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,kA(e)&&e.settings.appCheckToken&&(this.V=e.settings.appCheckToken)}start(e,n){Yt(this.o===void 0);const o=f=>{f.error!=null&&je("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${f.error.message}`);const y=f.token!==this.R;return this.R=f.token,je("FirebaseAppCheckTokenProvider",`Received ${y?"new":"existing"} token.`),y?n(f.token):Promise.resolve()};this.o=f=>{e.enqueueRetryable(()=>o(f))};const u=f=>{je("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=f,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(f=>u(f)),setTimeout(()=>{if(!this.appCheck){const f=this.A.getImmediate({optional:!0});f?u(f):je("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new ip(this.V));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Yt(typeof n.token=="string"),this.R=n.token,new ip(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s_(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let o=0;o<s;o++)n[o]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $m(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jm{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let o="";for(;o.length<20;){const u=s_(40);for(let f=0;f<u.length;++f)o.length<20&&u[f]<n&&(o+=e.charAt(u[f]%62))}return o}}function vt(s,e){return s<e?-1:s>e?1:0}function rd(s,e){let n=0;for(;n<s.length&&n<e.length;){const o=s.codePointAt(n),u=e.codePointAt(n);if(o!==u){if(o<128&&u<128)return vt(o,u);{const f=$m(),y=o_(f.encode(sp(s,n)),f.encode(sp(e,n)));return y!==0?y:vt(o,u)}}n+=o>65535?2:1}return vt(s.length,e.length)}function sp(s,e){return s.codePointAt(e)>65535?s.substring(e,e+2):s.substring(e,e+1)}function o_(s,e){for(let n=0;n<s.length&&n<e.length;++n)if(s[n]!==e[n])return vt(s[n],e[n]);return vt(s.length,e.length)}function ja(s,e,n){return s.length===e.length&&s.every((o,u)=>n(o,e[u]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const op=-62135596800,ap=1e6;class $n{static now(){return $n.fromMillis(Date.now())}static fromDate(e){return $n.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),o=Math.floor((e-1e3*n)*ap);return new $n(n,o)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new tt(Ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new tt(Ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<op)throw new tt(Ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new tt(Ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/ap}_compareTo(e){return this.seconds===e.seconds?vt(this.nanoseconds,e.nanoseconds):vt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-op;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{static fromTimestamp(e){return new gt(e)}static min(){return new gt(new $n(0,0))}static max(){return new gt(new $n(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lp="__name__";class cs{constructor(e,n,o){n===void 0?n=0:n>e.length&&lt(),o===void 0?o=e.length-n:o>e.length-n&&lt(),this.segments=e,this.offset=n,this.len=o}get length(){return this.len}isEqual(e){return cs.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof cs?e.forEach(o=>{n.push(o)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,o=this.limit();n<o;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const o=Math.min(e.length,n.length);for(let u=0;u<o;u++){const f=cs.compareSegments(e.get(u),n.get(u));if(f!==0)return f}return vt(e.length,n.length)}static compareSegments(e,n){const o=cs.isNumericId(e),u=cs.isNumericId(n);return o&&!u?-1:!o&&u?1:o&&u?cs.extractNumericId(e).compare(cs.extractNumericId(n)):rd(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ao.fromString(e.substring(4,e.length-2))}}class xn extends cs{construct(e,n,o){return new xn(e,n,o)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const o of e){if(o.indexOf("//")>=0)throw new tt(Ie.INVALID_ARGUMENT,`Invalid segment (${o}). Paths must not contain // in them.`);n.push(...o.split("/").filter(u=>u.length>0))}return new xn(n)}static emptyPath(){return new xn([])}}const a_=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Er extends cs{construct(e,n,o){return new Er(e,n,o)}static isValidIdentifier(e){return a_.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Er.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===lp}static keyField(){return new Er([lp])}static fromServerFormat(e){const n=[];let o="",u=0;const f=()=>{if(o.length===0)throw new tt(Ie.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(o),o=""};let y=!1;for(;u<e.length;){const A=e[u];if(A==="\\"){if(u+1===e.length)throw new tt(Ie.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const C=e[u+1];if(C!=="\\"&&C!=="."&&C!=="`")throw new tt(Ie.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);o+=C,u+=2}else A==="`"?(y=!y,u++):A!=="."||y?(o+=A,u++):(f(),u++)}if(f(),y)throw new tt(Ie.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Er(n)}static emptyPath(){return new Er([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class st{constructor(e){this.path=e}static fromPath(e){return new st(xn.fromString(e))}static fromName(e){return new st(xn.fromString(e).popFirst(5))}static empty(){return new st(xn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&xn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return xn.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new st(new xn(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ul=-1;function l_(s,e){const n=s.toTimestamp().seconds,o=s.toTimestamp().nanoseconds+1,u=gt.fromTimestamp(o===1e9?new $n(n+1,0):new $n(n,o));return new Io(u,st.empty(),e)}function u_(s){return new Io(s.readTime,s.key,Ul)}class Io{constructor(e,n,o){this.readTime=e,this.documentKey=n,this.largestBatchId=o}static min(){return new Io(gt.min(),st.empty(),Ul)}static max(){return new Io(gt.max(),st.empty(),Ul)}}function c_(s,e){let n=s.readTime.compareTo(e.readTime);return n!==0?n:(n=st.comparator(s.documentKey,e.documentKey),n!==0?n:vt(s.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h_="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class f_{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $a(s){if(s.code!==Ie.FAILED_PRECONDITION||s.message!==h_)throw s;je("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&lt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Ae((o,u)=>{this.nextCallback=f=>{this.wrapSuccess(e,f).next(o,u)},this.catchCallback=f=>{this.wrapFailure(n,f).next(o,u)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof Ae?n:Ae.resolve(n)}catch(n){return Ae.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):Ae.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):Ae.reject(n)}static resolve(e){return new Ae((n,o)=>{n(e)})}static reject(e){return new Ae((n,o)=>{o(e)})}static waitFor(e){return new Ae((n,o)=>{let u=0,f=0,y=!1;e.forEach(A=>{++u,A.next(()=>{++f,y&&f===u&&n()},C=>o(C))}),y=!0,f===u&&n()})}static or(e){let n=Ae.resolve(!1);for(const o of e)n=n.next(u=>u?Ae.resolve(u):o());return n}static forEach(e,n){const o=[];return e.forEach((u,f)=>{o.push(n.call(this,u,f))}),this.waitFor(o)}static mapArray(e,n){return new Ae((o,u)=>{const f=e.length,y=new Array(f);let A=0;for(let C=0;C<f;C++){const x=C;n(e[x]).next(R=>{y[x]=R,++A,A===f&&o(y)},R=>u(R))}})}static doWhile(e,n){return new Ae((o,u)=>{const f=()=>{e()===!0?n().next(()=>{f()},u):o()};f()})}}function d_(s){const e=s.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ja(s){return s.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oc{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=o=>this.oe(o),this._e=o=>n.writeSequenceNumber(o))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}Oc.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dd=-1;function Pc(s){return s==null}function yc(s){return s===0&&1/s==-1/0}function g_(s){return typeof s=="number"&&Number.isInteger(s)&&!yc(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e2="";function p_(s){let e="";for(let n=0;n<s.length;n++)e.length>0&&(e=up(e)),e=m_(s.get(n),e);return up(e)}function m_(s,e){let n=e;const o=s.length;for(let u=0;u<o;u++){const f=s.charAt(u);switch(f){case"\0":n+="";break;case e2:n+="";break;default:n+=f}}return n}function up(s){return s+e2+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cp(s){let e=0;for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&e++;return e}function Mo(s,e){for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&e(n,s[n])}function t2(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(e,n){this.comparator=e,this.root=n||wr.EMPTY}insert(e,n){return new Tn(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,wr.BLACK,null,null))}remove(e){return new Tn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,wr.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const o=this.comparator(e,n.key);if(o===0)return n.value;o<0?n=n.left:o>0&&(n=n.right)}return null}indexOf(e){let n=0,o=this.root;for(;!o.isEmpty();){const u=this.comparator(e,o.key);if(u===0)return n+o.left.size;u<0?o=o.left:(n+=o.left.size+1,o=o.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,o)=>(e(n,o),!1))}toString(){const e=[];return this.inorderTraversal((n,o)=>(e.push(`${n}:${o}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ku(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ku(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ku(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ku(this.root,e,this.comparator,!0)}}class Ku{constructor(e,n,o,u){this.isReverse=u,this.nodeStack=[];let f=1;for(;!e.isEmpty();)if(f=n?o(e.key,n):1,n&&u&&(f*=-1),f<0)e=this.isReverse?e.left:e.right;else{if(f===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class wr{constructor(e,n,o,u,f){this.key=e,this.value=n,this.color=o??wr.RED,this.left=u??wr.EMPTY,this.right=f??wr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,o,u,f){return new wr(e??this.key,n??this.value,o??this.color,u??this.left,f??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,o){let u=this;const f=o(e,u.key);return u=f<0?u.copy(null,null,null,u.left.insert(e,n,o),null):f===0?u.copy(null,n,null,null,null):u.copy(null,null,null,null,u.right.insert(e,n,o)),u.fixUp()}removeMin(){if(this.left.isEmpty())return wr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let o,u=this;if(n(e,u.key)<0)u.left.isEmpty()||u.left.isRed()||u.left.left.isRed()||(u=u.moveRedLeft()),u=u.copy(null,null,null,u.left.remove(e,n),null);else{if(u.left.isRed()&&(u=u.rotateRight()),u.right.isEmpty()||u.right.isRed()||u.right.left.isRed()||(u=u.moveRedRight()),n(e,u.key)===0){if(u.right.isEmpty())return wr.EMPTY;o=u.right.min(),u=u.copy(o.key,o.value,null,null,u.right.removeMin())}u=u.copy(null,null,null,null,u.right.remove(e,n))}return u.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,wr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,wr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw lt();const e=this.left.check();if(e!==this.right.check())throw lt();return e+(this.isRed()?0:1)}}wr.EMPTY=null,wr.RED=!0,wr.BLACK=!1;wr.EMPTY=new class{constructor(){this.size=0}get key(){throw lt()}get value(){throw lt()}get color(){throw lt()}get left(){throw lt()}get right(){throw lt()}copy(e,n,o,u,f){return this}insert(e,n,o){return new wr(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jn{constructor(e){this.comparator=e,this.data=new Tn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,o)=>(e(n),!1))}forEachInRange(e,n){const o=this.data.getIteratorFrom(e[0]);for(;o.hasNext();){const u=o.getNext();if(this.comparator(u.key,e[1])>=0)return;n(u.key)}}forEachWhile(e,n){let o;for(o=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();o.hasNext();)if(!e(o.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new hp(this.data.getIterator())}getIteratorFrom(e){return new hp(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(o=>{n=n.add(o)}),n}isEqual(e){if(!(e instanceof Jn)||this.size!==e.size)return!1;const n=this.data.getIterator(),o=e.data.getIterator();for(;n.hasNext();){const u=n.getNext().key,f=o.getNext().key;if(this.comparator(u,f)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Jn(this.comparator);return n.data=e,n}}class hp{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ei{constructor(e){this.fields=e,e.sort(Er.comparator)}static empty(){return new Ei([])}unionWith(e){let n=new Jn(Er.comparator);for(const o of this.fields)n=n.add(o);for(const o of e)n=n.add(o);return new Ei(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ja(this.fields,e.fields,(n,o)=>n.isEqual(o))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n2 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xr{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(u){try{return atob(u)}catch(f){throw typeof DOMException<"u"&&f instanceof DOMException?new n2("Invalid base64 string: "+f):f}}(e);return new xr(n)}static fromUint8Array(e){const n=function(u){let f="";for(let y=0;y<u.length;++y)f+=String.fromCharCode(u[y]);return f}(e);return new xr(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const o=new Uint8Array(n.length);for(let u=0;u<n.length;u++)o[u]=n.charCodeAt(u);return o}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return vt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}xr.EMPTY_BYTE_STRING=new xr("");const y_=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function To(s){if(Yt(!!s),typeof s=="string"){let e=0;const n=y_.exec(s);if(Yt(!!n),n[1]){let u=n[1];u=(u+"000000000").substr(0,9),e=Number(u)}const o=new Date(s);return{seconds:Math.floor(o.getTime()/1e3),nanos:e}}return{seconds:zn(s.seconds),nanos:zn(s.nanos)}}function zn(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function So(s){return typeof s=="string"?xr.fromBase64String(s):xr.fromUint8Array(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r2="server_timestamp",i2="__type__",s2="__previous_value__",o2="__local_write_time__";function bd(s){var e,n;return((n=(((e=s==null?void 0:s.mapValue)===null||e===void 0?void 0:e.fields)||{})[i2])===null||n===void 0?void 0:n.stringValue)===r2}function Lc(s){const e=s.mapValue.fields[s2];return bd(e)?Lc(e):e}function zl(s){const e=To(s.mapValue.fields[o2].timestampValue);return new $n(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w_{constructor(e,n,o,u,f,y,A,C,x){this.databaseId=e,this.appId=n,this.persistenceKey=o,this.host=u,this.ssl=f,this.forceLongPolling=y,this.autoDetectLongPolling=A,this.longPollingOptions=C,this.useFetchStreams=x}}const wc="(default)";class jl{constructor(e,n){this.projectId=e,this.database=n||wc}static empty(){return new jl("","")}get isDefaultDatabase(){return this.database===wc}isEqual(e){return e instanceof jl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a2="__type__",E_="__max__",Zu={mapValue:{}},l2="__vector__",Ec="value";function Ro(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?bd(s)?4:A_(s)?9007199254740991:x_(s)?10:11:lt()}function gs(s,e){if(s===e)return!0;const n=Ro(s);if(n!==Ro(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return zl(s).isEqual(zl(e));case 3:return function(u,f){if(typeof u.timestampValue=="string"&&typeof f.timestampValue=="string"&&u.timestampValue.length===f.timestampValue.length)return u.timestampValue===f.timestampValue;const y=To(u.timestampValue),A=To(f.timestampValue);return y.seconds===A.seconds&&y.nanos===A.nanos}(s,e);case 5:return s.stringValue===e.stringValue;case 6:return function(u,f){return So(u.bytesValue).isEqual(So(f.bytesValue))}(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return function(u,f){return zn(u.geoPointValue.latitude)===zn(f.geoPointValue.latitude)&&zn(u.geoPointValue.longitude)===zn(f.geoPointValue.longitude)}(s,e);case 2:return function(u,f){if("integerValue"in u&&"integerValue"in f)return zn(u.integerValue)===zn(f.integerValue);if("doubleValue"in u&&"doubleValue"in f){const y=zn(u.doubleValue),A=zn(f.doubleValue);return y===A?yc(y)===yc(A):isNaN(y)&&isNaN(A)}return!1}(s,e);case 9:return ja(s.arrayValue.values||[],e.arrayValue.values||[],gs);case 10:case 11:return function(u,f){const y=u.mapValue.fields||{},A=f.mapValue.fields||{};if(cp(y)!==cp(A))return!1;for(const C in y)if(y.hasOwnProperty(C)&&(A[C]===void 0||!gs(y[C],A[C])))return!1;return!0}(s,e);default:return lt()}}function Hl(s,e){return(s.values||[]).find(n=>gs(n,e))!==void 0}function Ha(s,e){if(s===e)return 0;const n=Ro(s),o=Ro(e);if(n!==o)return vt(n,o);switch(n){case 0:case 9007199254740991:return 0;case 1:return vt(s.booleanValue,e.booleanValue);case 2:return function(f,y){const A=zn(f.integerValue||f.doubleValue),C=zn(y.integerValue||y.doubleValue);return A<C?-1:A>C?1:A===C?0:isNaN(A)?isNaN(C)?0:-1:1}(s,e);case 3:return fp(s.timestampValue,e.timestampValue);case 4:return fp(zl(s),zl(e));case 5:return rd(s.stringValue,e.stringValue);case 6:return function(f,y){const A=So(f),C=So(y);return A.compareTo(C)}(s.bytesValue,e.bytesValue);case 7:return function(f,y){const A=f.split("/"),C=y.split("/");for(let x=0;x<A.length&&x<C.length;x++){const R=vt(A[x],C[x]);if(R!==0)return R}return vt(A.length,C.length)}(s.referenceValue,e.referenceValue);case 8:return function(f,y){const A=vt(zn(f.latitude),zn(y.latitude));return A!==0?A:vt(zn(f.longitude),zn(y.longitude))}(s.geoPointValue,e.geoPointValue);case 9:return dp(s.arrayValue,e.arrayValue);case 10:return function(f,y){var A,C,x,R;const D=f.fields||{},k=y.fields||{},j=(A=D[Ec])===null||A===void 0?void 0:A.arrayValue,q=(C=k[Ec])===null||C===void 0?void 0:C.arrayValue,Q=vt(((x=j==null?void 0:j.values)===null||x===void 0?void 0:x.length)||0,((R=q==null?void 0:q.values)===null||R===void 0?void 0:R.length)||0);return Q!==0?Q:dp(j,q)}(s.mapValue,e.mapValue);case 11:return function(f,y){if(f===Zu.mapValue&&y===Zu.mapValue)return 0;if(f===Zu.mapValue)return 1;if(y===Zu.mapValue)return-1;const A=f.fields||{},C=Object.keys(A),x=y.fields||{},R=Object.keys(x);C.sort(),R.sort();for(let D=0;D<C.length&&D<R.length;++D){const k=rd(C[D],R[D]);if(k!==0)return k;const j=Ha(A[C[D]],x[R[D]]);if(j!==0)return j}return vt(C.length,R.length)}(s.mapValue,e.mapValue);default:throw lt()}}function fp(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return vt(s,e);const n=To(s),o=To(e),u=vt(n.seconds,o.seconds);return u!==0?u:vt(n.nanos,o.nanos)}function dp(s,e){const n=s.values||[],o=e.values||[];for(let u=0;u<n.length&&u<o.length;++u){const f=Ha(n[u],o[u]);if(f)return f}return vt(n.length,o.length)}function Wa(s){return id(s)}function id(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?function(n){const o=To(n);return`time(${o.seconds},${o.nanos})`}(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?function(n){return So(n).toBase64()}(s.bytesValue):"referenceValue"in s?function(n){return st.fromName(n).toString()}(s.referenceValue):"geoPointValue"in s?function(n){return`geo(${n.latitude},${n.longitude})`}(s.geoPointValue):"arrayValue"in s?function(n){let o="[",u=!0;for(const f of n.values||[])u?u=!1:o+=",",o+=id(f);return o+"]"}(s.arrayValue):"mapValue"in s?function(n){const o=Object.keys(n.fields||{}).sort();let u="{",f=!0;for(const y of o)f?f=!1:u+=",",u+=`${y}:${id(n.fields[y])}`;return u+"}"}(s.mapValue):lt()}function oc(s){switch(Ro(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Lc(s);return e?16+oc(e):16;case 5:return 2*s.stringValue.length;case 6:return So(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return function(o){return(o.values||[]).reduce((u,f)=>u+oc(f),0)}(s.arrayValue);case 10:case 11:return function(o){let u=0;return Mo(o.fields,(f,y)=>{u+=f.length+oc(y)}),u}(s.mapValue);default:throw lt()}}function sd(s){return!!s&&"integerValue"in s}function Md(s){return!!s&&"arrayValue"in s}function gp(s){return!!s&&"nullValue"in s}function pp(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function ac(s){return!!s&&"mapValue"in s}function x_(s){var e,n;return((n=(((e=s==null?void 0:s.mapValue)===null||e===void 0?void 0:e.fields)||{})[a2])===null||n===void 0?void 0:n.stringValue)===l2}function Ml(s){if(s.geoPointValue)return{geoPointValue:Object.assign({},s.geoPointValue)};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:Object.assign({},s.timestampValue)};if(s.mapValue){const e={mapValue:{fields:{}}};return Mo(s.mapValue.fields,(n,o)=>e.mapValue.fields[n]=Ml(o)),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(s.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ml(s.arrayValue.values[n]);return e}return Object.assign({},s)}function A_(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===E_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ii{constructor(e){this.value=e}static empty(){return new ii({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let o=0;o<e.length-1;++o)if(n=(n.mapValue.fields||{})[e.get(o)],!ac(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ml(n)}setAll(e){let n=Er.emptyPath(),o={},u=[];e.forEach((y,A)=>{if(!n.isImmediateParentOf(A)){const C=this.getFieldsMap(n);this.applyChanges(C,o,u),o={},u=[],n=A.popLast()}y?o[A.lastSegment()]=Ml(y):u.push(A.lastSegment())});const f=this.getFieldsMap(n);this.applyChanges(f,o,u)}delete(e){const n=this.field(e.popLast());ac(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return gs(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let o=0;o<e.length;++o){let u=n.mapValue.fields[e.get(o)];ac(u)&&u.mapValue.fields||(u={mapValue:{fields:{}}},n.mapValue.fields[e.get(o)]=u),n=u}return n.mapValue.fields}applyChanges(e,n,o){Mo(n,(u,f)=>e[u]=f);for(const u of o)delete e[u]}clone(){return new ii(Ml(this.value))}}function u2(s){const e=[];return Mo(s.fields,(n,o)=>{const u=new Er([n]);if(ac(o)){const f=u2(o.mapValue).fields;if(f.length===0)e.push(u);else for(const y of f)e.push(u.child(y))}else e.push(u)}),new Ei(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kr{constructor(e,n,o,u,f,y,A){this.key=e,this.documentType=n,this.version=o,this.readTime=u,this.createTime=f,this.data=y,this.documentState=A}static newInvalidDocument(e){return new kr(e,0,gt.min(),gt.min(),gt.min(),ii.empty(),0)}static newFoundDocument(e,n,o,u){return new kr(e,1,n,gt.min(),o,u,0)}static newNoDocument(e,n){return new kr(e,2,n,gt.min(),gt.min(),ii.empty(),0)}static newUnknownDocument(e,n){return new kr(e,3,n,gt.min(),gt.min(),ii.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(gt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ii.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ii.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=gt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof kr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new kr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xc{constructor(e,n){this.position=e,this.inclusive=n}}function mp(s,e,n){let o=0;for(let u=0;u<s.position.length;u++){const f=e[u],y=s.position[u];if(f.field.isKeyField()?o=st.comparator(st.fromName(y.referenceValue),n.key):o=Ha(y,n.data.field(f.field)),f.dir==="desc"&&(o*=-1),o!==0)break}return o}function yp(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let n=0;n<s.position.length;n++)if(!gs(s.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ac{constructor(e,n="asc"){this.field=e,this.dir=n}}function __(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c2{}class Zn extends c2{constructor(e,n,o){super(),this.field=e,this.op=n,this.value=o}static create(e,n,o){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,o):new v_(e,n,o):n==="array-contains"?new S_(e,o):n==="in"?new R_(e,o):n==="not-in"?new N_(e,o):n==="array-contains-any"?new D_(e,o):new Zn(e,n,o)}static createKeyFieldInFilter(e,n,o){return n==="in"?new I_(e,o):new T_(e,o)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Ha(n,this.value)):n!==null&&Ro(this.value)===Ro(n)&&this.matchesComparison(Ha(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return lt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ps extends c2{constructor(e,n){super(),this.filters=e,this.op=n,this.ce=null}static create(e,n){return new ps(e,n)}matches(e){return h2(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function h2(s){return s.op==="and"}function f2(s){return C_(s)&&h2(s)}function C_(s){for(const e of s.filters)if(e instanceof ps)return!1;return!0}function od(s){if(s instanceof Zn)return s.field.canonicalString()+s.op.toString()+Wa(s.value);if(f2(s))return s.filters.map(e=>od(e)).join(",");{const e=s.filters.map(n=>od(n)).join(",");return`${s.op}(${e})`}}function d2(s,e){return s instanceof Zn?function(o,u){return u instanceof Zn&&o.op===u.op&&o.field.isEqual(u.field)&&gs(o.value,u.value)}(s,e):s instanceof ps?function(o,u){return u instanceof ps&&o.op===u.op&&o.filters.length===u.filters.length?o.filters.reduce((f,y,A)=>f&&d2(y,u.filters[A]),!0):!1}(s,e):void lt()}function g2(s){return s instanceof Zn?function(n){return`${n.field.canonicalString()} ${n.op} ${Wa(n.value)}`}(s):s instanceof ps?function(n){return n.op.toString()+" {"+n.getFilters().map(g2).join(" ,")+"}"}(s):"Filter"}class v_ extends Zn{constructor(e,n,o){super(e,n,o),this.key=st.fromName(o.referenceValue)}matches(e){const n=st.comparator(e.key,this.key);return this.matchesComparison(n)}}class I_ extends Zn{constructor(e,n){super(e,"in",n),this.keys=p2("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class T_ extends Zn{constructor(e,n){super(e,"not-in",n),this.keys=p2("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function p2(s,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(o=>st.fromName(o.referenceValue))}class S_ extends Zn{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Md(n)&&Hl(n.arrayValue,this.value)}}class R_ extends Zn{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Hl(this.value.arrayValue,n)}}class N_ extends Zn{constructor(e,n){super(e,"not-in",n)}matches(e){if(Hl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Hl(this.value.arrayValue,n)}}class D_ extends Zn{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Md(n)||!n.arrayValue.values)&&n.arrayValue.values.some(o=>Hl(this.value.arrayValue,o))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b_{constructor(e,n=null,o=[],u=[],f=null,y=null,A=null){this.path=e,this.collectionGroup=n,this.orderBy=o,this.filters=u,this.limit=f,this.startAt=y,this.endAt=A,this.le=null}}function wp(s,e=null,n=[],o=[],u=null,f=null,y=null){return new b_(s,e,n,o,u,f,y)}function Od(s){const e=mt(s);if(e.le===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(o=>od(o)).join(","),n+="|ob:",n+=e.orderBy.map(o=>function(f){return f.field.canonicalString()+f.dir}(o)).join(","),Pc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(o=>Wa(o)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(o=>Wa(o)).join(",")),e.le=n}return e.le}function Pd(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<s.orderBy.length;n++)if(!__(s.orderBy[n],e.orderBy[n]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let n=0;n<s.filters.length;n++)if(!d2(s.filters[n],e.filters[n]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!yp(s.startAt,e.startAt)&&yp(s.endAt,e.endAt)}function ad(s){return st.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kc{constructor(e,n=null,o=[],u=[],f=null,y="F",A=null,C=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=o,this.filters=u,this.limit=f,this.limitType=y,this.startAt=A,this.endAt=C,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function M_(s,e,n,o,u,f,y,A){return new kc(s,e,n,o,u,f,y,A)}function m2(s){return new kc(s)}function Ep(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function O_(s){return s.collectionGroup!==null}function Ol(s){const e=mt(s);if(e.he===null){e.he=[];const n=new Set;for(const f of e.explicitOrderBy)e.he.push(f),n.add(f.field.canonicalString());const o=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(y){let A=new Jn(Er.comparator);return y.filters.forEach(C=>{C.getFlattenedFilters().forEach(x=>{x.isInequality()&&(A=A.add(x.field))})}),A})(e).forEach(f=>{n.has(f.canonicalString())||f.isKeyField()||e.he.push(new Ac(f,o))}),n.has(Er.keyField().canonicalString())||e.he.push(new Ac(Er.keyField(),o))}return e.he}function hs(s){const e=mt(s);return e.Pe||(e.Pe=P_(e,Ol(s))),e.Pe}function P_(s,e){if(s.limitType==="F")return wp(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map(u=>{const f=u.dir==="desc"?"asc":"desc";return new Ac(u.field,f)});const n=s.endAt?new xc(s.endAt.position,s.endAt.inclusive):null,o=s.startAt?new xc(s.startAt.position,s.startAt.inclusive):null;return wp(s.path,s.collectionGroup,e,s.filters,s.limit,n,o)}}function ld(s,e,n){return new kc(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,n,s.startAt,s.endAt)}function Bc(s,e){return Pd(hs(s),hs(e))&&s.limitType===e.limitType}function y2(s){return`${Od(hs(s))}|lt:${s.limitType}`}function La(s){return`Query(target=${function(n){let o=n.path.canonicalString();return n.collectionGroup!==null&&(o+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(o+=`, filters: [${n.filters.map(u=>g2(u)).join(", ")}]`),Pc(n.limit)||(o+=", limit: "+n.limit),n.orderBy.length>0&&(o+=`, orderBy: [${n.orderBy.map(u=>function(y){return`${y.field.canonicalString()} (${y.dir})`}(u)).join(", ")}]`),n.startAt&&(o+=", startAt: ",o+=n.startAt.inclusive?"b:":"a:",o+=n.startAt.position.map(u=>Wa(u)).join(",")),n.endAt&&(o+=", endAt: ",o+=n.endAt.inclusive?"a:":"b:",o+=n.endAt.position.map(u=>Wa(u)).join(",")),`Target(${o})`}(hs(s))}; limitType=${s.limitType})`}function Fc(s,e){return e.isFoundDocument()&&function(o,u){const f=u.key.path;return o.collectionGroup!==null?u.key.hasCollectionId(o.collectionGroup)&&o.path.isPrefixOf(f):st.isDocumentKey(o.path)?o.path.isEqual(f):o.path.isImmediateParentOf(f)}(s,e)&&function(o,u){for(const f of Ol(o))if(!f.field.isKeyField()&&u.data.field(f.field)===null)return!1;return!0}(s,e)&&function(o,u){for(const f of o.filters)if(!f.matches(u))return!1;return!0}(s,e)&&function(o,u){return!(o.startAt&&!function(y,A,C){const x=mp(y,A,C);return y.inclusive?x<=0:x<0}(o.startAt,Ol(o),u)||o.endAt&&!function(y,A,C){const x=mp(y,A,C);return y.inclusive?x>=0:x>0}(o.endAt,Ol(o),u))}(s,e)}function L_(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function w2(s){return(e,n)=>{let o=!1;for(const u of Ol(s)){const f=k_(u,e,n);if(f!==0)return f;o=o||u.field.isKeyField()}return 0}}function k_(s,e,n){const o=s.field.isKeyField()?st.comparator(e.key,n.key):function(f,y,A){const C=y.data.field(f),x=A.data.field(f);return C!==null&&x!==null?Ha(C,x):lt()}(s.field,e,n);switch(s.dir){case"asc":return o;case"desc":return-1*o;default:return lt()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aa{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),o=this.inner[n];if(o!==void 0){for(const[u,f]of o)if(this.equalsFn(u,e))return f}}has(e){return this.get(e)!==void 0}set(e,n){const o=this.mapKeyFn(e),u=this.inner[o];if(u===void 0)return this.inner[o]=[[e,n]],void this.innerSize++;for(let f=0;f<u.length;f++)if(this.equalsFn(u[f][0],e))return void(u[f]=[e,n]);u.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),o=this.inner[n];if(o===void 0)return!1;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return o.length===1?delete this.inner[n]:o.splice(u,1),this.innerSize--,!0;return!1}forEach(e){Mo(this.inner,(n,o)=>{for(const[u,f]of o)e(u,f)})}isEmpty(){return t2(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B_=new Tn(st.comparator);function js(){return B_}const E2=new Tn(st.comparator);function Nl(...s){let e=E2;for(const n of s)e=e.insert(n.key,n);return e}function x2(s){let e=E2;return s.forEach((n,o)=>e=e.insert(n,o.overlayedDocument)),e}function Jo(){return Pl()}function A2(){return Pl()}function Pl(){return new aa(s=>s.toString(),(s,e)=>s.isEqual(e))}const F_=new Tn(st.comparator),V_=new Jn(st.comparator);function Nt(...s){let e=V_;for(const n of s)e=e.add(n);return e}const U_=new Jn(vt);function z_(){return U_}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ld(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:yc(e)?"-0":e}}function _2(s){return{integerValue:""+s}}function j_(s,e){return g_(e)?_2(e):Ld(s,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vc{constructor(){this._=void 0}}function H_(s,e,n){return s instanceof _c?function(u,f){const y={fields:{[i2]:{stringValue:r2},[o2]:{timestampValue:{seconds:u.seconds,nanos:u.nanoseconds}}}};return f&&bd(f)&&(f=Lc(f)),f&&(y.fields[s2]=f),{mapValue:y}}(n,e):s instanceof Wl?v2(s,e):s instanceof Gl?I2(s,e):function(u,f){const y=C2(u,f),A=xp(y)+xp(u.Ie);return sd(y)&&sd(u.Ie)?_2(A):Ld(u.serializer,A)}(s,e)}function W_(s,e,n){return s instanceof Wl?v2(s,e):s instanceof Gl?I2(s,e):n}function C2(s,e){return s instanceof Cc?function(o){return sd(o)||function(f){return!!f&&"doubleValue"in f}(o)}(e)?e:{integerValue:0}:null}class _c extends Vc{}class Wl extends Vc{constructor(e){super(),this.elements=e}}function v2(s,e){const n=T2(e);for(const o of s.elements)n.some(u=>gs(u,o))||n.push(o);return{arrayValue:{values:n}}}class Gl extends Vc{constructor(e){super(),this.elements=e}}function I2(s,e){let n=T2(e);for(const o of s.elements)n=n.filter(u=>!gs(u,o));return{arrayValue:{values:n}}}class Cc extends Vc{constructor(e,n){super(),this.serializer=e,this.Ie=n}}function xp(s){return zn(s.integerValue||s.doubleValue)}function T2(s){return Md(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}function G_(s,e){return s.field.isEqual(e.field)&&function(o,u){return o instanceof Wl&&u instanceof Wl||o instanceof Gl&&u instanceof Gl?ja(o.elements,u.elements,gs):o instanceof Cc&&u instanceof Cc?gs(o.Ie,u.Ie):o instanceof _c&&u instanceof _c}(s.transform,e.transform)}class Y_{constructor(e,n){this.version=e,this.transformResults=n}}class Yi{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Yi}static exists(e){return new Yi(void 0,e)}static updateTime(e){return new Yi(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function lc(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class Uc{}function S2(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new kd(s.key,Yi.none()):new Ql(s.key,s.data,Yi.none());{const n=s.data,o=ii.empty();let u=new Jn(Er.comparator);for(let f of e.fields)if(!u.has(f)){let y=n.field(f);y===null&&f.length>1&&(f=f.popLast(),y=n.field(f)),y===null?o.delete(f):o.set(f,y),u=u.add(f)}return new Oo(s.key,o,new Ei(u.toArray()),Yi.none())}}function X_(s,e,n){s instanceof Ql?function(u,f,y){const A=u.value.clone(),C=_p(u.fieldTransforms,f,y.transformResults);A.setAll(C),f.convertToFoundDocument(y.version,A).setHasCommittedMutations()}(s,e,n):s instanceof Oo?function(u,f,y){if(!lc(u.precondition,f))return void f.convertToUnknownDocument(y.version);const A=_p(u.fieldTransforms,f,y.transformResults),C=f.data;C.setAll(R2(u)),C.setAll(A),f.convertToFoundDocument(y.version,C).setHasCommittedMutations()}(s,e,n):function(u,f,y){f.convertToNoDocument(y.version).setHasCommittedMutations()}(0,e,n)}function Ll(s,e,n,o){return s instanceof Ql?function(f,y,A,C){if(!lc(f.precondition,y))return A;const x=f.value.clone(),R=Cp(f.fieldTransforms,C,y);return x.setAll(R),y.convertToFoundDocument(y.version,x).setHasLocalMutations(),null}(s,e,n,o):s instanceof Oo?function(f,y,A,C){if(!lc(f.precondition,y))return A;const x=Cp(f.fieldTransforms,C,y),R=y.data;return R.setAll(R2(f)),R.setAll(x),y.convertToFoundDocument(y.version,R).setHasLocalMutations(),A===null?null:A.unionWith(f.fieldMask.fields).unionWith(f.fieldTransforms.map(D=>D.field))}(s,e,n,o):function(f,y,A){return lc(f.precondition,y)?(y.convertToNoDocument(y.version).setHasLocalMutations(),null):A}(s,e,n)}function q_(s,e){let n=null;for(const o of s.fieldTransforms){const u=e.data.field(o.field),f=C2(o.transform,u||null);f!=null&&(n===null&&(n=ii.empty()),n.set(o.field,f))}return n||null}function Ap(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!function(o,u){return o===void 0&&u===void 0||!(!o||!u)&&ja(o,u,(f,y)=>G_(f,y))}(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class Ql extends Uc{constructor(e,n,o,u=[]){super(),this.key=e,this.value=n,this.precondition=o,this.fieldTransforms=u,this.type=0}getFieldMask(){return null}}class Oo extends Uc{constructor(e,n,o,u,f=[]){super(),this.key=e,this.data=n,this.fieldMask=o,this.precondition=u,this.fieldTransforms=f,this.type=1}getFieldMask(){return this.fieldMask}}function R2(s){const e=new Map;return s.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const o=s.data.field(n);e.set(n,o)}}),e}function _p(s,e,n){const o=new Map;Yt(s.length===n.length);for(let u=0;u<n.length;u++){const f=s[u],y=f.transform,A=e.data.field(f.field);o.set(f.field,W_(y,A,n[u]))}return o}function Cp(s,e,n){const o=new Map;for(const u of s){const f=u.transform,y=n.data.field(u.field);o.set(u.field,H_(f,y,e))}return o}class kd extends Uc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Q_ extends Uc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K_{constructor(e,n,o,u){this.batchId=e,this.localWriteTime=n,this.baseMutations=o,this.mutations=u}applyToRemoteDocument(e,n){const o=n.mutationResults;for(let u=0;u<this.mutations.length;u++){const f=this.mutations[u];f.key.isEqual(e.key)&&X_(f,e,o[u])}}applyToLocalView(e,n){for(const o of this.baseMutations)o.key.isEqual(e.key)&&(n=Ll(o,e,n,this.localWriteTime));for(const o of this.mutations)o.key.isEqual(e.key)&&(n=Ll(o,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const o=A2();return this.mutations.forEach(u=>{const f=e.get(u.key),y=f.overlayedDocument;let A=this.applyToLocalView(y,f.mutatedFields);A=n.has(u.key)?null:A;const C=S2(y,A);C!==null&&o.set(u.key,C),y.isValidDocument()||y.convertToNoDocument(gt.min())}),o}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Nt())}isEqual(e){return this.batchId===e.batchId&&ja(this.mutations,e.mutations,(n,o)=>Ap(n,o))&&ja(this.baseMutations,e.baseMutations,(n,o)=>Ap(n,o))}}class Bd{constructor(e,n,o,u){this.batch=e,this.commitVersion=n,this.mutationResults=o,this.docVersions=u}static from(e,n,o){Yt(e.mutations.length===o.length);let u=function(){return F_}();const f=e.mutations;for(let y=0;y<f.length;y++)u=u.insert(f[y].key,o[y].version);return new Bd(e,n,o,u)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z_{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $_{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Hn,Ot;function J_(s){switch(s){case Ie.OK:return lt();case Ie.CANCELLED:case Ie.UNKNOWN:case Ie.DEADLINE_EXCEEDED:case Ie.RESOURCE_EXHAUSTED:case Ie.INTERNAL:case Ie.UNAVAILABLE:case Ie.UNAUTHENTICATED:return!1;case Ie.INVALID_ARGUMENT:case Ie.NOT_FOUND:case Ie.ALREADY_EXISTS:case Ie.PERMISSION_DENIED:case Ie.FAILED_PRECONDITION:case Ie.ABORTED:case Ie.OUT_OF_RANGE:case Ie.UNIMPLEMENTED:case Ie.DATA_LOSS:return!0;default:return lt()}}function N2(s){if(s===void 0)return zs("GRPC error has no .code"),Ie.UNKNOWN;switch(s){case Hn.OK:return Ie.OK;case Hn.CANCELLED:return Ie.CANCELLED;case Hn.UNKNOWN:return Ie.UNKNOWN;case Hn.DEADLINE_EXCEEDED:return Ie.DEADLINE_EXCEEDED;case Hn.RESOURCE_EXHAUSTED:return Ie.RESOURCE_EXHAUSTED;case Hn.INTERNAL:return Ie.INTERNAL;case Hn.UNAVAILABLE:return Ie.UNAVAILABLE;case Hn.UNAUTHENTICATED:return Ie.UNAUTHENTICATED;case Hn.INVALID_ARGUMENT:return Ie.INVALID_ARGUMENT;case Hn.NOT_FOUND:return Ie.NOT_FOUND;case Hn.ALREADY_EXISTS:return Ie.ALREADY_EXISTS;case Hn.PERMISSION_DENIED:return Ie.PERMISSION_DENIED;case Hn.FAILED_PRECONDITION:return Ie.FAILED_PRECONDITION;case Hn.ABORTED:return Ie.ABORTED;case Hn.OUT_OF_RANGE:return Ie.OUT_OF_RANGE;case Hn.UNIMPLEMENTED:return Ie.UNIMPLEMENTED;case Hn.DATA_LOSS:return Ie.DATA_LOSS;default:return lt()}}(Ot=Hn||(Hn={}))[Ot.OK=0]="OK",Ot[Ot.CANCELLED=1]="CANCELLED",Ot[Ot.UNKNOWN=2]="UNKNOWN",Ot[Ot.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ot[Ot.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ot[Ot.NOT_FOUND=5]="NOT_FOUND",Ot[Ot.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ot[Ot.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ot[Ot.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ot[Ot.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ot[Ot.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ot[Ot.ABORTED=10]="ABORTED",Ot[Ot.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ot[Ot.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ot[Ot.INTERNAL=13]="INTERNAL",Ot[Ot.UNAVAILABLE=14]="UNAVAILABLE",Ot[Ot.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eC=new Ao([4294967295,4294967295],0);function vp(s){const e=$m().encode(s),n=new Gm;return n.update(e),new Uint8Array(n.digest())}function Ip(s){const e=new DataView(s.buffer),n=e.getUint32(0,!0),o=e.getUint32(4,!0),u=e.getUint32(8,!0),f=e.getUint32(12,!0);return[new Ao([n,o],0),new Ao([u,f],0)]}class Fd{constructor(e,n,o){if(this.bitmap=e,this.padding=n,this.hashCount=o,n<0||n>=8)throw new Dl(`Invalid padding: ${n}`);if(o<0)throw new Dl(`Invalid hash count: ${o}`);if(e.length>0&&this.hashCount===0)throw new Dl(`Invalid hash count: ${o}`);if(e.length===0&&n!==0)throw new Dl(`Invalid padding when bitmap length is 0: ${n}`);this.Ee=8*e.length-n,this.de=Ao.fromNumber(this.Ee)}Ae(e,n,o){let u=e.add(n.multiply(Ao.fromNumber(o)));return u.compare(eC)===1&&(u=new Ao([u.getBits(0),u.getBits(1)],0)),u.modulo(this.de).toNumber()}Re(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.Ee===0)return!1;const n=vp(e),[o,u]=Ip(n);for(let f=0;f<this.hashCount;f++){const y=this.Ae(o,u,f);if(!this.Re(y))return!1}return!0}static create(e,n,o){const u=e%8==0?0:8-e%8,f=new Uint8Array(Math.ceil(e/8)),y=new Fd(f,u,n);return o.forEach(A=>y.insert(A)),y}insert(e){if(this.Ee===0)return;const n=vp(e),[o,u]=Ip(n);for(let f=0;f<this.hashCount;f++){const y=this.Ae(o,u,f);this.Ve(y)}}Ve(e){const n=Math.floor(e/8),o=e%8;this.bitmap[n]|=1<<o}}class Dl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zc{constructor(e,n,o,u,f){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=o,this.documentUpdates=u,this.resolvedLimboDocuments=f}static createSynthesizedRemoteEventForCurrentChange(e,n,o){const u=new Map;return u.set(e,Kl.createSynthesizedTargetChangeForCurrentChange(e,n,o)),new zc(gt.min(),u,new Tn(vt),js(),Nt())}}class Kl{constructor(e,n,o,u,f){this.resumeToken=e,this.current=n,this.addedDocuments=o,this.modifiedDocuments=u,this.removedDocuments=f}static createSynthesizedTargetChangeForCurrentChange(e,n,o){return new Kl(o,n,Nt(),Nt(),Nt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uc{constructor(e,n,o,u){this.me=e,this.removedTargetIds=n,this.key=o,this.fe=u}}class D2{constructor(e,n){this.targetId=e,this.ge=n}}class b2{constructor(e,n,o=xr.EMPTY_BYTE_STRING,u=null){this.state=e,this.targetIds=n,this.resumeToken=o,this.cause=u}}class Tp{constructor(){this.pe=0,this.ye=Sp(),this.we=xr.EMPTY_BYTE_STRING,this.Se=!1,this.be=!0}get current(){return this.Se}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.be}Ce(e){e.approximateByteSize()>0&&(this.be=!0,this.we=e)}Fe(){let e=Nt(),n=Nt(),o=Nt();return this.ye.forEach((u,f)=>{switch(f){case 0:e=e.add(u);break;case 2:n=n.add(u);break;case 1:o=o.add(u);break;default:lt()}}),new Kl(this.we,this.Se,e,n,o)}Me(){this.be=!1,this.ye=Sp()}xe(e,n){this.be=!0,this.ye=this.ye.insert(e,n)}Oe(e){this.be=!0,this.ye=this.ye.remove(e)}Ne(){this.pe+=1}Be(){this.pe-=1,Yt(this.pe>=0)}Le(){this.be=!0,this.Se=!0}}class tC{constructor(e){this.ke=e,this.qe=new Map,this.Qe=js(),this.$e=$u(),this.Ue=$u(),this.Ke=new Tn(vt)}We(e){for(const n of e.me)e.fe&&e.fe.isFoundDocument()?this.Ge(n,e.fe):this.ze(n,e.key,e.fe);for(const n of e.removedTargetIds)this.ze(n,e.key,e.fe)}je(e){this.forEachTarget(e,n=>{const o=this.He(n);switch(e.state){case 0:this.Je(n)&&o.Ce(e.resumeToken);break;case 1:o.Be(),o.De||o.Me(),o.Ce(e.resumeToken);break;case 2:o.Be(),o.De||this.removeTarget(n);break;case 3:this.Je(n)&&(o.Le(),o.Ce(e.resumeToken));break;case 4:this.Je(n)&&(this.Ye(n),o.Ce(e.resumeToken));break;default:lt()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.qe.forEach((o,u)=>{this.Je(u)&&n(u)})}Ze(e){const n=e.targetId,o=e.ge.count,u=this.Xe(n);if(u){const f=u.target;if(ad(f))if(o===0){const y=new st(f.path);this.ze(n,y,kr.newNoDocument(y,gt.min()))}else Yt(o===1);else{const y=this.et(n);if(y!==o){const A=this.tt(e),C=A?this.nt(A,e,y):1;if(C!==0){this.Ye(n);const x=C===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,x)}}}}}tt(e){const n=e.ge.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:o="",padding:u=0},hashCount:f=0}=n;let y,A;try{y=So(o).toUint8Array()}catch(C){if(C instanceof n2)return za("Decoding the base64 bloom filter in existence filter failed ("+C.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw C}try{A=new Fd(y,u,f)}catch(C){return za(C instanceof Dl?"BloomFilter error: ":"Applying bloom filter failed: ",C),null}return A.Ee===0?null:A}nt(e,n,o){return n.ge.count===o-this.st(e,n.targetId)?0:2}st(e,n){const o=this.ke.getRemoteKeysForTarget(n);let u=0;return o.forEach(f=>{const y=this.ke.it(),A=`projects/${y.projectId}/databases/${y.database}/documents/${f.path.canonicalString()}`;e.mightContain(A)||(this.ze(n,f,null),u++)}),u}ot(e){const n=new Map;this.qe.forEach((f,y)=>{const A=this.Xe(y);if(A){if(f.current&&ad(A.target)){const C=new st(A.target.path);this._t(C).has(y)||this.ut(y,C)||this.ze(y,C,kr.newNoDocument(C,e))}f.ve&&(n.set(y,f.Fe()),f.Me())}});let o=Nt();this.Ue.forEach((f,y)=>{let A=!0;y.forEachWhile(C=>{const x=this.Xe(C);return!x||x.purpose==="TargetPurposeLimboResolution"||(A=!1,!1)}),A&&(o=o.add(f))}),this.Qe.forEach((f,y)=>y.setReadTime(e));const u=new zc(e,n,this.Ke,this.Qe,o);return this.Qe=js(),this.$e=$u(),this.Ue=$u(),this.Ke=new Tn(vt),u}Ge(e,n){if(!this.Je(e))return;const o=this.ut(e,n.key)?2:0;this.He(e).xe(n.key,o),this.Qe=this.Qe.insert(n.key,n),this.$e=this.$e.insert(n.key,this._t(n.key).add(e)),this.Ue=this.Ue.insert(n.key,this.ct(n.key).add(e))}ze(e,n,o){if(!this.Je(e))return;const u=this.He(e);this.ut(e,n)?u.xe(n,1):u.Oe(n),this.Ue=this.Ue.insert(n,this.ct(n).delete(e)),this.Ue=this.Ue.insert(n,this.ct(n).add(e)),o&&(this.Qe=this.Qe.insert(n,o))}removeTarget(e){this.qe.delete(e)}et(e){const n=this.He(e).Fe();return this.ke.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ne(e){this.He(e).Ne()}He(e){let n=this.qe.get(e);return n||(n=new Tp,this.qe.set(e,n)),n}ct(e){let n=this.Ue.get(e);return n||(n=new Jn(vt),this.Ue=this.Ue.insert(e,n)),n}_t(e){let n=this.$e.get(e);return n||(n=new Jn(vt),this.$e=this.$e.insert(e,n)),n}Je(e){const n=this.Xe(e)!==null;return n||je("WatchChangeAggregator","Detected inactive target",e),n}Xe(e){const n=this.qe.get(e);return n&&n.De?null:this.ke.lt(e)}Ye(e){this.qe.set(e,new Tp),this.ke.getRemoteKeysForTarget(e).forEach(n=>{this.ze(e,n,null)})}ut(e,n){return this.ke.getRemoteKeysForTarget(e).has(n)}}function $u(){return new Tn(st.comparator)}function Sp(){return new Tn(st.comparator)}const nC={asc:"ASCENDING",desc:"DESCENDING"},rC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},iC={and:"AND",or:"OR"};class sC{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function ud(s,e){return s.useProto3Json||Pc(e)?e:{value:e}}function vc(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function M2(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function oC(s,e){return vc(s,e.toTimestamp())}function fs(s){return Yt(!!s),gt.fromTimestamp(function(n){const o=To(n);return new $n(o.seconds,o.nanos)}(s))}function Vd(s,e){return cd(s,e).canonicalString()}function cd(s,e){const n=function(u){return new xn(["projects",u.projectId,"databases",u.database])}(s).child("documents");return e===void 0?n:n.child(e)}function O2(s){const e=xn.fromString(s);return Yt(F2(e)),e}function hd(s,e){return Vd(s.databaseId,e.path)}function Gf(s,e){const n=O2(e);if(n.get(1)!==s.databaseId.projectId)throw new tt(Ie.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+s.databaseId.projectId);if(n.get(3)!==s.databaseId.database)throw new tt(Ie.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+s.databaseId.database);return new st(L2(n))}function P2(s,e){return Vd(s.databaseId,e)}function aC(s){const e=O2(s);return e.length===4?xn.emptyPath():L2(e)}function fd(s){return new xn(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function L2(s){return Yt(s.length>4&&s.get(4)==="documents"),s.popFirst(5)}function Rp(s,e,n){return{name:hd(s,e),fields:n.value.mapValue.fields}}function lC(s,e){let n;if("targetChange"in e){e.targetChange;const o=function(x){return x==="NO_CHANGE"?0:x==="ADD"?1:x==="REMOVE"?2:x==="CURRENT"?3:x==="RESET"?4:lt()}(e.targetChange.targetChangeType||"NO_CHANGE"),u=e.targetChange.targetIds||[],f=function(x,R){return x.useProto3Json?(Yt(R===void 0||typeof R=="string"),xr.fromBase64String(R||"")):(Yt(R===void 0||R instanceof Buffer||R instanceof Uint8Array),xr.fromUint8Array(R||new Uint8Array))}(s,e.targetChange.resumeToken),y=e.targetChange.cause,A=y&&function(x){const R=x.code===void 0?Ie.UNKNOWN:N2(x.code);return new tt(R,x.message||"")}(y);n=new b2(o,u,f,A||null)}else if("documentChange"in e){e.documentChange;const o=e.documentChange;o.document,o.document.name,o.document.updateTime;const u=Gf(s,o.document.name),f=fs(o.document.updateTime),y=o.document.createTime?fs(o.document.createTime):gt.min(),A=new ii({mapValue:{fields:o.document.fields}}),C=kr.newFoundDocument(u,f,y,A),x=o.targetIds||[],R=o.removedTargetIds||[];n=new uc(x,R,C.key,C)}else if("documentDelete"in e){e.documentDelete;const o=e.documentDelete;o.document;const u=Gf(s,o.document),f=o.readTime?fs(o.readTime):gt.min(),y=kr.newNoDocument(u,f),A=o.removedTargetIds||[];n=new uc([],A,y.key,y)}else if("documentRemove"in e){e.documentRemove;const o=e.documentRemove;o.document;const u=Gf(s,o.document),f=o.removedTargetIds||[];n=new uc([],f,u,null)}else{if(!("filter"in e))return lt();{e.filter;const o=e.filter;o.targetId;const{count:u=0,unchangedNames:f}=o,y=new $_(u,f),A=o.targetId;n=new D2(A,y)}}return n}function uC(s,e){let n;if(e instanceof Ql)n={update:Rp(s,e.key,e.value)};else if(e instanceof kd)n={delete:hd(s,e.key)};else if(e instanceof Oo)n={update:Rp(s,e.key,e.data),updateMask:wC(e.fieldMask)};else{if(!(e instanceof Q_))return lt();n={verify:hd(s,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(o=>function(f,y){const A=y.transform;if(A instanceof _c)return{fieldPath:y.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(A instanceof Wl)return{fieldPath:y.field.canonicalString(),appendMissingElements:{values:A.elements}};if(A instanceof Gl)return{fieldPath:y.field.canonicalString(),removeAllFromArray:{values:A.elements}};if(A instanceof Cc)return{fieldPath:y.field.canonicalString(),increment:A.Ie};throw lt()}(0,o))),e.precondition.isNone||(n.currentDocument=function(u,f){return f.updateTime!==void 0?{updateTime:oC(u,f.updateTime)}:f.exists!==void 0?{exists:f.exists}:lt()}(s,e.precondition)),n}function cC(s,e){return s&&s.length>0?(Yt(e!==void 0),s.map(n=>function(u,f){let y=u.updateTime?fs(u.updateTime):fs(f);return y.isEqual(gt.min())&&(y=fs(f)),new Y_(y,u.transformResults||[])}(n,e))):[]}function hC(s,e){return{documents:[P2(s,e.path)]}}function fC(s,e){const n={structuredQuery:{}},o=e.path;let u;e.collectionGroup!==null?(u=o,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(u=o.popLast(),n.structuredQuery.from=[{collectionId:o.lastSegment()}]),n.parent=P2(s,u);const f=function(x){if(x.length!==0)return B2(ps.create(x,"and"))}(e.filters);f&&(n.structuredQuery.where=f);const y=function(x){if(x.length!==0)return x.map(R=>function(k){return{field:ka(k.field),direction:pC(k.dir)}}(R))}(e.orderBy);y&&(n.structuredQuery.orderBy=y);const A=ud(s,e.limit);return A!==null&&(n.structuredQuery.limit=A),e.startAt&&(n.structuredQuery.startAt=function(x){return{before:x.inclusive,values:x.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(x){return{before:!x.inclusive,values:x.position}}(e.endAt)),{ht:n,parent:u}}function dC(s){let e=aC(s.parent);const n=s.structuredQuery,o=n.from?n.from.length:0;let u=null;if(o>0){Yt(o===1);const R=n.from[0];R.allDescendants?u=R.collectionId:e=e.child(R.collectionId)}let f=[];n.where&&(f=function(D){const k=k2(D);return k instanceof ps&&f2(k)?k.getFilters():[k]}(n.where));let y=[];n.orderBy&&(y=function(D){return D.map(k=>function(q){return new Ac(Ba(q.field),function(J){switch(J){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(q.direction))}(k))}(n.orderBy));let A=null;n.limit&&(A=function(D){let k;return k=typeof D=="object"?D.value:D,Pc(k)?null:k}(n.limit));let C=null;n.startAt&&(C=function(D){const k=!!D.before,j=D.values||[];return new xc(j,k)}(n.startAt));let x=null;return n.endAt&&(x=function(D){const k=!D.before,j=D.values||[];return new xc(j,k)}(n.endAt)),M_(e,u,y,f,A,"F",C,x)}function gC(s,e){const n=function(u){switch(u){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return lt()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function k2(s){return s.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const o=Ba(n.unaryFilter.field);return Zn.create(o,"==",{doubleValue:NaN});case"IS_NULL":const u=Ba(n.unaryFilter.field);return Zn.create(u,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const f=Ba(n.unaryFilter.field);return Zn.create(f,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const y=Ba(n.unaryFilter.field);return Zn.create(y,"!=",{nullValue:"NULL_VALUE"});default:return lt()}}(s):s.fieldFilter!==void 0?function(n){return Zn.create(Ba(n.fieldFilter.field),function(u){switch(u){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return lt()}}(n.fieldFilter.op),n.fieldFilter.value)}(s):s.compositeFilter!==void 0?function(n){return ps.create(n.compositeFilter.filters.map(o=>k2(o)),function(u){switch(u){case"AND":return"and";case"OR":return"or";default:return lt()}}(n.compositeFilter.op))}(s):lt()}function pC(s){return nC[s]}function mC(s){return rC[s]}function yC(s){return iC[s]}function ka(s){return{fieldPath:s.canonicalString()}}function Ba(s){return Er.fromServerFormat(s.fieldPath)}function B2(s){return s instanceof Zn?function(n){if(n.op==="=="){if(pp(n.value))return{unaryFilter:{field:ka(n.field),op:"IS_NAN"}};if(gp(n.value))return{unaryFilter:{field:ka(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(pp(n.value))return{unaryFilter:{field:ka(n.field),op:"IS_NOT_NAN"}};if(gp(n.value))return{unaryFilter:{field:ka(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ka(n.field),op:mC(n.op),value:n.value}}}(s):s instanceof ps?function(n){const o=n.getFilters().map(u=>B2(u));return o.length===1?o[0]:{compositeFilter:{op:yC(n.op),filters:o}}}(s):lt()}function wC(s){const e=[];return s.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function F2(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wo{constructor(e,n,o,u,f=gt.min(),y=gt.min(),A=xr.EMPTY_BYTE_STRING,C=null){this.target=e,this.targetId=n,this.purpose=o,this.sequenceNumber=u,this.snapshotVersion=f,this.lastLimboFreeSnapshotVersion=y,this.resumeToken=A,this.expectedCount=C}withSequenceNumber(e){return new wo(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new wo(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new wo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new wo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EC{constructor(e){this.Tt=e}}function xC(s){const e=dC({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?ld(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AC{constructor(){this.Tn=new _C}addToCollectionParentIndex(e,n){return this.Tn.add(n),Ae.resolve()}getCollectionParents(e,n){return Ae.resolve(this.Tn.getEntries(n))}addFieldIndex(e,n){return Ae.resolve()}deleteFieldIndex(e,n){return Ae.resolve()}deleteAllFieldIndexes(e){return Ae.resolve()}createTargetIndexes(e,n){return Ae.resolve()}getDocumentsMatchingTarget(e,n){return Ae.resolve(null)}getIndexType(e,n){return Ae.resolve(0)}getFieldIndexes(e,n){return Ae.resolve([])}getNextCollectionGroupToUpdate(e){return Ae.resolve(null)}getMinOffset(e,n){return Ae.resolve(Io.min())}getMinOffsetFromCollectionGroup(e,n){return Ae.resolve(Io.min())}updateCollectionGroup(e,n,o){return Ae.resolve()}updateIndexEntries(e,n){return Ae.resolve()}}class _C{constructor(){this.index={}}add(e){const n=e.lastSegment(),o=e.popLast(),u=this.index[n]||new Jn(xn.comparator),f=!u.has(o);return this.index[n]=u.add(o),f}has(e){const n=e.lastSegment(),o=e.popLast(),u=this.index[n];return u&&u.has(o)}getEntries(e){return(this.index[e]||new Jn(xn.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Np={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},V2=41943040;class ri{static withCacheSize(e){return new ri(e,ri.DEFAULT_COLLECTION_PERCENTILE,ri.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,o){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=o}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ri.DEFAULT_COLLECTION_PERCENTILE=10,ri.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ri.DEFAULT=new ri(V2,ri.DEFAULT_COLLECTION_PERCENTILE,ri.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ri.DISABLED=new ri(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ga{constructor(e){this.$n=e}next(){return this.$n+=2,this.$n}static Un(){return new Ga(0)}static Kn(){return new Ga(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dp="LruGarbageCollector",CC=1048576;function bp([s,e],[n,o]){const u=vt(s,n);return u===0?vt(e,o):u}class vC{constructor(e){this.Hn=e,this.buffer=new Jn(bp),this.Jn=0}Yn(){return++this.Jn}Zn(e){const n=[e,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(n);else{const o=this.buffer.last();bp(n,o)<0&&(this.buffer=this.buffer.delete(o).add(n))}}get maxValue(){return this.buffer.last()[0]}}class IC{constructor(e,n,o){this.garbageCollector=e,this.asyncQueue=n,this.localStore=o,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(e){je(Dp,`Garbage collection scheduled in ${e}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Ja(n)?je(Dp,"Ignoring IndexedDB error during garbage collection: ",n):await $a(n)}await this.er(3e5)})}}class TC{constructor(e,n){this.tr=e,this.params=n}calculateTargetCount(e,n){return this.tr.nr(e).next(o=>Math.floor(n/100*o))}nthSequenceNumber(e,n){if(n===0)return Ae.resolve(Oc.ae);const o=new vC(n);return this.tr.forEachTarget(e,u=>o.Zn(u.sequenceNumber)).next(()=>this.tr.rr(e,u=>o.Zn(u))).next(()=>o.maxValue)}removeTargets(e,n,o){return this.tr.removeTargets(e,n,o)}removeOrphanedDocuments(e,n){return this.tr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(je("LruGarbageCollector","Garbage collection skipped; disabled"),Ae.resolve(Np)):this.getCacheSize(e).next(o=>o<this.params.cacheSizeCollectionThreshold?(je("LruGarbageCollector",`Garbage collection skipped; Cache size ${o} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Np):this.ir(e,n))}getCacheSize(e){return this.tr.getCacheSize(e)}ir(e,n){let o,u,f,y,A,C,x;const R=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(D=>(D>this.params.maximumSequenceNumbersToCollect?(je("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${D}`),u=this.params.maximumSequenceNumbersToCollect):u=D,y=Date.now(),this.nthSequenceNumber(e,u))).next(D=>(o=D,A=Date.now(),this.removeTargets(e,o,n))).next(D=>(f=D,C=Date.now(),this.removeOrphanedDocuments(e,o))).next(D=>(x=Date.now(),Pa()<=Pt.DEBUG&&je("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${y-R}ms
	Determined least recently used ${u} in `+(A-y)+`ms
	Removed ${f} targets in `+(C-A)+`ms
	Removed ${D} documents in `+(x-C)+`ms
Total Duration: ${x-R}ms`),Ae.resolve({didRun:!0,sequenceNumbersCollected:u,targetsRemoved:f,documentsRemoved:D})))}}function SC(s,e){return new TC(s,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RC{constructor(){this.changes=new aa(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,kr.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const o=this.changes.get(n);return o!==void 0?Ae.resolve(o):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NC{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DC{constructor(e,n,o,u){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=o,this.indexManager=u}getDocument(e,n){let o=null;return this.documentOverlayCache.getOverlay(e,n).next(u=>(o=u,this.remoteDocumentCache.getEntry(e,n))).next(u=>(o!==null&&Ll(o.mutation,u,Ei.empty(),$n.now()),u))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(o=>this.getLocalViewOfDocuments(e,o,Nt()).next(()=>o))}getLocalViewOfDocuments(e,n,o=Nt()){const u=Jo();return this.populateOverlays(e,u,n).next(()=>this.computeViews(e,n,u,o).next(f=>{let y=Nl();return f.forEach((A,C)=>{y=y.insert(A,C.overlayedDocument)}),y}))}getOverlayedDocuments(e,n){const o=Jo();return this.populateOverlays(e,o,n).next(()=>this.computeViews(e,n,o,Nt()))}populateOverlays(e,n,o){const u=[];return o.forEach(f=>{n.has(f)||u.push(f)}),this.documentOverlayCache.getOverlays(e,u).next(f=>{f.forEach((y,A)=>{n.set(y,A)})})}computeViews(e,n,o,u){let f=js();const y=Pl(),A=function(){return Pl()}();return n.forEach((C,x)=>{const R=o.get(x.key);u.has(x.key)&&(R===void 0||R.mutation instanceof Oo)?f=f.insert(x.key,x):R!==void 0?(y.set(x.key,R.mutation.getFieldMask()),Ll(R.mutation,x,R.mutation.getFieldMask(),$n.now())):y.set(x.key,Ei.empty())}),this.recalculateAndSaveOverlays(e,f).next(C=>(C.forEach((x,R)=>y.set(x,R)),n.forEach((x,R)=>{var D;return A.set(x,new NC(R,(D=y.get(x))!==null&&D!==void 0?D:null))}),A))}recalculateAndSaveOverlays(e,n){const o=Pl();let u=new Tn((y,A)=>y-A),f=Nt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(y=>{for(const A of y)A.keys().forEach(C=>{const x=n.get(C);if(x===null)return;let R=o.get(C)||Ei.empty();R=A.applyToLocalView(x,R),o.set(C,R);const D=(u.get(A.batchId)||Nt()).add(C);u=u.insert(A.batchId,D)})}).next(()=>{const y=[],A=u.getReverseIterator();for(;A.hasNext();){const C=A.getNext(),x=C.key,R=C.value,D=A2();R.forEach(k=>{if(!f.has(k)){const j=S2(n.get(k),o.get(k));j!==null&&D.set(k,j),f=f.add(k)}}),y.push(this.documentOverlayCache.saveOverlays(e,x,D))}return Ae.waitFor(y)}).next(()=>o)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(o=>this.recalculateAndSaveOverlays(e,o))}getDocumentsMatchingQuery(e,n,o,u){return function(y){return st.isDocumentKey(y.path)&&y.collectionGroup===null&&y.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):O_(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,o,u):this.getDocumentsMatchingCollectionQuery(e,n,o,u)}getNextDocuments(e,n,o,u){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,o,u).next(f=>{const y=u-f.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,o.largestBatchId,u-f.size):Ae.resolve(Jo());let A=Ul,C=f;return y.next(x=>Ae.forEach(x,(R,D)=>(A<D.largestBatchId&&(A=D.largestBatchId),f.get(R)?Ae.resolve():this.remoteDocumentCache.getEntry(e,R).next(k=>{C=C.insert(R,k)}))).next(()=>this.populateOverlays(e,x,f)).next(()=>this.computeViews(e,C,x,Nt())).next(R=>({batchId:A,changes:x2(R)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new st(n)).next(o=>{let u=Nl();return o.isFoundDocument()&&(u=u.insert(o.key,o)),u})}getDocumentsMatchingCollectionGroupQuery(e,n,o,u){const f=n.collectionGroup;let y=Nl();return this.indexManager.getCollectionParents(e,f).next(A=>Ae.forEach(A,C=>{const x=function(D,k){return new kc(k,null,D.explicitOrderBy.slice(),D.filters.slice(),D.limit,D.limitType,D.startAt,D.endAt)}(n,C.child(f));return this.getDocumentsMatchingCollectionQuery(e,x,o,u).next(R=>{R.forEach((D,k)=>{y=y.insert(D,k)})})}).next(()=>y))}getDocumentsMatchingCollectionQuery(e,n,o,u){let f;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,o.largestBatchId).next(y=>(f=y,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,o,f,u))).next(y=>{f.forEach((C,x)=>{const R=x.getKey();y.get(R)===null&&(y=y.insert(R,kr.newInvalidDocument(R)))});let A=Nl();return y.forEach((C,x)=>{const R=f.get(C);R!==void 0&&Ll(R.mutation,x,Ei.empty(),$n.now()),Fc(n,x)&&(A=A.insert(C,x))}),A})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bC{constructor(e){this.serializer=e,this.dr=new Map,this.Ar=new Map}getBundleMetadata(e,n){return Ae.resolve(this.dr.get(n))}saveBundleMetadata(e,n){return this.dr.set(n.id,function(u){return{id:u.id,version:u.version,createTime:fs(u.createTime)}}(n)),Ae.resolve()}getNamedQuery(e,n){return Ae.resolve(this.Ar.get(n))}saveNamedQuery(e,n){return this.Ar.set(n.name,function(u){return{name:u.name,query:xC(u.bundledQuery),readTime:fs(u.readTime)}}(n)),Ae.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MC{constructor(){this.overlays=new Tn(st.comparator),this.Rr=new Map}getOverlay(e,n){return Ae.resolve(this.overlays.get(n))}getOverlays(e,n){const o=Jo();return Ae.forEach(n,u=>this.getOverlay(e,u).next(f=>{f!==null&&o.set(u,f)})).next(()=>o)}saveOverlays(e,n,o){return o.forEach((u,f)=>{this.Et(e,n,f)}),Ae.resolve()}removeOverlaysForBatchId(e,n,o){const u=this.Rr.get(o);return u!==void 0&&(u.forEach(f=>this.overlays=this.overlays.remove(f)),this.Rr.delete(o)),Ae.resolve()}getOverlaysForCollection(e,n,o){const u=Jo(),f=n.length+1,y=new st(n.child("")),A=this.overlays.getIteratorFrom(y);for(;A.hasNext();){const C=A.getNext().value,x=C.getKey();if(!n.isPrefixOf(x.path))break;x.path.length===f&&C.largestBatchId>o&&u.set(C.getKey(),C)}return Ae.resolve(u)}getOverlaysForCollectionGroup(e,n,o,u){let f=new Tn((x,R)=>x-R);const y=this.overlays.getIterator();for(;y.hasNext();){const x=y.getNext().value;if(x.getKey().getCollectionGroup()===n&&x.largestBatchId>o){let R=f.get(x.largestBatchId);R===null&&(R=Jo(),f=f.insert(x.largestBatchId,R)),R.set(x.getKey(),x)}}const A=Jo(),C=f.getIterator();for(;C.hasNext()&&(C.getNext().value.forEach((x,R)=>A.set(x,R)),!(A.size()>=u)););return Ae.resolve(A)}Et(e,n,o){const u=this.overlays.get(o.key);if(u!==null){const y=this.Rr.get(u.largestBatchId).delete(o.key);this.Rr.set(u.largestBatchId,y)}this.overlays=this.overlays.insert(o.key,new Z_(n,o));let f=this.Rr.get(n);f===void 0&&(f=Nt(),this.Rr.set(n,f)),this.Rr.set(n,f.add(o.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OC{constructor(){this.sessionToken=xr.EMPTY_BYTE_STRING}getSessionToken(e){return Ae.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,Ae.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ud{constructor(){this.Vr=new Jn(lr.mr),this.gr=new Jn(lr.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(e,n){const o=new lr(e,n);this.Vr=this.Vr.add(o),this.gr=this.gr.add(o)}yr(e,n){e.forEach(o=>this.addReference(o,n))}removeReference(e,n){this.wr(new lr(e,n))}Sr(e,n){e.forEach(o=>this.removeReference(o,n))}br(e){const n=new st(new xn([])),o=new lr(n,e),u=new lr(n,e+1),f=[];return this.gr.forEachInRange([o,u],y=>{this.wr(y),f.push(y.key)}),f}Dr(){this.Vr.forEach(e=>this.wr(e))}wr(e){this.Vr=this.Vr.delete(e),this.gr=this.gr.delete(e)}vr(e){const n=new st(new xn([])),o=new lr(n,e),u=new lr(n,e+1);let f=Nt();return this.gr.forEachInRange([o,u],y=>{f=f.add(y.key)}),f}containsKey(e){const n=new lr(e,0),o=this.Vr.firstAfterOrEqual(n);return o!==null&&e.isEqual(o.key)}}class lr{constructor(e,n){this.key=e,this.Cr=n}static mr(e,n){return st.comparator(e.key,n.key)||vt(e.Cr,n.Cr)}static pr(e,n){return vt(e.Cr,n.Cr)||st.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PC{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Fr=1,this.Mr=new Jn(lr.mr)}checkEmpty(e){return Ae.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,o,u){const f=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const y=new K_(f,n,o,u);this.mutationQueue.push(y);for(const A of u)this.Mr=this.Mr.add(new lr(A.key,f)),this.indexManager.addToCollectionParentIndex(e,A.key.path.popLast());return Ae.resolve(y)}lookupMutationBatch(e,n){return Ae.resolve(this.Or(n))}getNextMutationBatchAfterBatchId(e,n){const o=n+1,u=this.Nr(o),f=u<0?0:u;return Ae.resolve(this.mutationQueue.length>f?this.mutationQueue[f]:null)}getHighestUnacknowledgedBatchId(){return Ae.resolve(this.mutationQueue.length===0?Dd:this.Fr-1)}getAllMutationBatches(e){return Ae.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const o=new lr(n,0),u=new lr(n,Number.POSITIVE_INFINITY),f=[];return this.Mr.forEachInRange([o,u],y=>{const A=this.Or(y.Cr);f.push(A)}),Ae.resolve(f)}getAllMutationBatchesAffectingDocumentKeys(e,n){let o=new Jn(vt);return n.forEach(u=>{const f=new lr(u,0),y=new lr(u,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([f,y],A=>{o=o.add(A.Cr)})}),Ae.resolve(this.Br(o))}getAllMutationBatchesAffectingQuery(e,n){const o=n.path,u=o.length+1;let f=o;st.isDocumentKey(f)||(f=f.child(""));const y=new lr(new st(f),0);let A=new Jn(vt);return this.Mr.forEachWhile(C=>{const x=C.key.path;return!!o.isPrefixOf(x)&&(x.length===u&&(A=A.add(C.Cr)),!0)},y),Ae.resolve(this.Br(A))}Br(e){const n=[];return e.forEach(o=>{const u=this.Or(o);u!==null&&n.push(u)}),n}removeMutationBatch(e,n){Yt(this.Lr(n.batchId,"removed")===0),this.mutationQueue.shift();let o=this.Mr;return Ae.forEach(n.mutations,u=>{const f=new lr(u.key,n.batchId);return o=o.delete(f),this.referenceDelegate.markPotentiallyOrphaned(e,u.key)}).next(()=>{this.Mr=o})}qn(e){}containsKey(e,n){const o=new lr(n,0),u=this.Mr.firstAfterOrEqual(o);return Ae.resolve(n.isEqual(u&&u.key))}performConsistencyCheck(e){return this.mutationQueue.length,Ae.resolve()}Lr(e,n){return this.Nr(e)}Nr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Or(e){const n=this.Nr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LC{constructor(e){this.kr=e,this.docs=function(){return new Tn(st.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const o=n.key,u=this.docs.get(o),f=u?u.size:0,y=this.kr(n);return this.docs=this.docs.insert(o,{document:n.mutableCopy(),size:y}),this.size+=y-f,this.indexManager.addToCollectionParentIndex(e,o.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const o=this.docs.get(n);return Ae.resolve(o?o.document.mutableCopy():kr.newInvalidDocument(n))}getEntries(e,n){let o=js();return n.forEach(u=>{const f=this.docs.get(u);o=o.insert(u,f?f.document.mutableCopy():kr.newInvalidDocument(u))}),Ae.resolve(o)}getDocumentsMatchingQuery(e,n,o,u){let f=js();const y=n.path,A=new st(y.child("__id-9223372036854775808__")),C=this.docs.getIteratorFrom(A);for(;C.hasNext();){const{key:x,value:{document:R}}=C.getNext();if(!y.isPrefixOf(x.path))break;x.path.length>y.length+1||c_(u_(R),o)<=0||(u.has(R.key)||Fc(n,R))&&(f=f.insert(R.key,R.mutableCopy()))}return Ae.resolve(f)}getAllFromCollectionGroup(e,n,o,u){lt()}qr(e,n){return Ae.forEach(this.docs,o=>n(o))}newChangeBuffer(e){return new kC(this)}getSize(e){return Ae.resolve(this.size)}}class kC extends RC{constructor(e){super(),this.Ir=e}applyChanges(e){const n=[];return this.changes.forEach((o,u)=>{u.isValidDocument()?n.push(this.Ir.addEntry(e,u)):this.Ir.removeEntry(o)}),Ae.waitFor(n)}getFromCache(e,n){return this.Ir.getEntry(e,n)}getAllFromCache(e,n){return this.Ir.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BC{constructor(e){this.persistence=e,this.Qr=new aa(n=>Od(n),Pd),this.lastRemoteSnapshotVersion=gt.min(),this.highestTargetId=0,this.$r=0,this.Ur=new Ud,this.targetCount=0,this.Kr=Ga.Un()}forEachTarget(e,n){return this.Qr.forEach((o,u)=>n(u)),Ae.resolve()}getLastRemoteSnapshotVersion(e){return Ae.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ae.resolve(this.$r)}allocateTargetId(e){return this.highestTargetId=this.Kr.next(),Ae.resolve(this.highestTargetId)}setTargetsMetadata(e,n,o){return o&&(this.lastRemoteSnapshotVersion=o),n>this.$r&&(this.$r=n),Ae.resolve()}zn(e){this.Qr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Kr=new Ga(n),this.highestTargetId=n),e.sequenceNumber>this.$r&&(this.$r=e.sequenceNumber)}addTargetData(e,n){return this.zn(n),this.targetCount+=1,Ae.resolve()}updateTargetData(e,n){return this.zn(n),Ae.resolve()}removeTargetData(e,n){return this.Qr.delete(n.target),this.Ur.br(n.targetId),this.targetCount-=1,Ae.resolve()}removeTargets(e,n,o){let u=0;const f=[];return this.Qr.forEach((y,A)=>{A.sequenceNumber<=n&&o.get(A.targetId)===null&&(this.Qr.delete(y),f.push(this.removeMatchingKeysForTargetId(e,A.targetId)),u++)}),Ae.waitFor(f).next(()=>u)}getTargetCount(e){return Ae.resolve(this.targetCount)}getTargetData(e,n){const o=this.Qr.get(n)||null;return Ae.resolve(o)}addMatchingKeys(e,n,o){return this.Ur.yr(n,o),Ae.resolve()}removeMatchingKeys(e,n,o){this.Ur.Sr(n,o);const u=this.persistence.referenceDelegate,f=[];return u&&n.forEach(y=>{f.push(u.markPotentiallyOrphaned(e,y))}),Ae.waitFor(f)}removeMatchingKeysForTargetId(e,n){return this.Ur.br(n),Ae.resolve()}getMatchingKeysForTargetId(e,n){const o=this.Ur.vr(n);return Ae.resolve(o)}containsKey(e,n){return Ae.resolve(this.Ur.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U2{constructor(e,n){this.Wr={},this.overlays={},this.Gr=new Oc(0),this.zr=!1,this.zr=!0,this.jr=new OC,this.referenceDelegate=e(this),this.Hr=new BC(this),this.indexManager=new AC,this.remoteDocumentCache=function(u){return new LC(u)}(o=>this.referenceDelegate.Jr(o)),this.serializer=new EC(n),this.Yr=new bC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new MC,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let o=this.Wr[e.toKey()];return o||(o=new PC(n,this.referenceDelegate),this.Wr[e.toKey()]=o),o}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(e,n,o){je("MemoryPersistence","Starting transaction:",e);const u=new FC(this.Gr.next());return this.referenceDelegate.Zr(),o(u).next(f=>this.referenceDelegate.Xr(u).next(()=>f)).toPromise().then(f=>(u.raiseOnCommittedEvent(),f))}ei(e,n){return Ae.or(Object.values(this.Wr).map(o=>()=>o.containsKey(e,n)))}}class FC extends f_{constructor(e){super(),this.currentSequenceNumber=e}}class zd{constructor(e){this.persistence=e,this.ti=new Ud,this.ni=null}static ri(e){return new zd(e)}get ii(){if(this.ni)return this.ni;throw lt()}addReference(e,n,o){return this.ti.addReference(o,n),this.ii.delete(o.toString()),Ae.resolve()}removeReference(e,n,o){return this.ti.removeReference(o,n),this.ii.add(o.toString()),Ae.resolve()}markPotentiallyOrphaned(e,n){return this.ii.add(n.toString()),Ae.resolve()}removeTarget(e,n){this.ti.br(n.targetId).forEach(u=>this.ii.add(u.toString()));const o=this.persistence.getTargetCache();return o.getMatchingKeysForTargetId(e,n.targetId).next(u=>{u.forEach(f=>this.ii.add(f.toString()))}).next(()=>o.removeTargetData(e,n))}Zr(){this.ni=new Set}Xr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ae.forEach(this.ii,o=>{const u=st.fromPath(o);return this.si(e,u).next(f=>{f||n.removeEntry(u,gt.min())})}).next(()=>(this.ni=null,n.apply(e)))}updateLimboDocument(e,n){return this.si(e,n).next(o=>{o?this.ii.delete(n.toString()):this.ii.add(n.toString())})}Jr(e){return 0}si(e,n){return Ae.or([()=>Ae.resolve(this.ti.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.ei(e,n)])}}class Ic{constructor(e,n){this.persistence=e,this.oi=new aa(o=>p_(o.path),(o,u)=>o.isEqual(u)),this.garbageCollector=SC(this,n)}static ri(e,n){return new Ic(e,n)}Zr(){}Xr(e){return Ae.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}nr(e){const n=this.sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(o=>n.next(u=>o+u))}sr(e){let n=0;return this.rr(e,o=>{n++}).next(()=>n)}rr(e,n){return Ae.forEach(this.oi,(o,u)=>this.ar(e,o,u).next(f=>f?Ae.resolve():n(u)))}removeTargets(e,n,o){return this.persistence.getTargetCache().removeTargets(e,n,o)}removeOrphanedDocuments(e,n){let o=0;const u=this.persistence.getRemoteDocumentCache(),f=u.newChangeBuffer();return u.qr(e,y=>this.ar(e,y,n).next(A=>{A||(o++,f.removeEntry(y,gt.min()))})).next(()=>f.apply(e)).next(()=>o)}markPotentiallyOrphaned(e,n){return this.oi.set(n,e.currentSequenceNumber),Ae.resolve()}removeTarget(e,n){const o=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,o)}addReference(e,n,o){return this.oi.set(o,e.currentSequenceNumber),Ae.resolve()}removeReference(e,n,o){return this.oi.set(o,e.currentSequenceNumber),Ae.resolve()}updateLimboDocument(e,n){return this.oi.set(n,e.currentSequenceNumber),Ae.resolve()}Jr(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=oc(e.data.value)),n}ar(e,n,o){return Ae.or([()=>this.persistence.ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const u=this.oi.get(n);return Ae.resolve(u!==void 0&&u>o)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jd{constructor(e,n,o,u){this.targetId=e,this.fromCache=n,this.Hi=o,this.Ji=u}static Yi(e,n){let o=Nt(),u=Nt();for(const f of n.docChanges)switch(f.type){case 0:o=o.add(f.doc.key);break;case 1:u=u.add(f.doc.key)}return new jd(e,n.fromCache,o,u)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VC{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UC{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return Ox()?8:d_(bx())>0?6:4}()}initialize(e,n){this.ns=e,this.indexManager=n,this.Zi=!0}getDocumentsMatchingQuery(e,n,o,u){const f={result:null};return this.rs(e,n).next(y=>{f.result=y}).next(()=>{if(!f.result)return this.ss(e,n,u,o).next(y=>{f.result=y})}).next(()=>{if(f.result)return;const y=new VC;return this._s(e,n,y).next(A=>{if(f.result=A,this.Xi)return this.us(e,n,y,A.size)})}).next(()=>f.result)}us(e,n,o,u){return o.documentReadCount<this.es?(Pa()<=Pt.DEBUG&&je("QueryEngine","SDK will not create cache indexes for query:",La(n),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),Ae.resolve()):(Pa()<=Pt.DEBUG&&je("QueryEngine","Query:",La(n),"scans",o.documentReadCount,"local documents and returns",u,"documents as results."),o.documentReadCount>this.ts*u?(Pa()<=Pt.DEBUG&&je("QueryEngine","The SDK decides to create cache indexes for query:",La(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,hs(n))):Ae.resolve())}rs(e,n){if(Ep(n))return Ae.resolve(null);let o=hs(n);return this.indexManager.getIndexType(e,o).next(u=>u===0?null:(n.limit!==null&&u===1&&(n=ld(n,null,"F"),o=hs(n)),this.indexManager.getDocumentsMatchingTarget(e,o).next(f=>{const y=Nt(...f);return this.ns.getDocuments(e,y).next(A=>this.indexManager.getMinOffset(e,o).next(C=>{const x=this.cs(n,A);return this.ls(n,x,y,C.readTime)?this.rs(e,ld(n,null,"F")):this.hs(e,x,n,C)}))})))}ss(e,n,o,u){return Ep(n)||u.isEqual(gt.min())?Ae.resolve(null):this.ns.getDocuments(e,o).next(f=>{const y=this.cs(n,f);return this.ls(n,y,o,u)?Ae.resolve(null):(Pa()<=Pt.DEBUG&&je("QueryEngine","Re-using previous result from %s to execute query: %s",u.toString(),La(n)),this.hs(e,y,n,l_(u,Ul)).next(A=>A))})}cs(e,n){let o=new Jn(w2(e));return n.forEach((u,f)=>{Fc(e,f)&&(o=o.add(f))}),o}ls(e,n,o,u){if(e.limit===null)return!1;if(o.size!==n.size)return!0;const f=e.limitType==="F"?n.last():n.first();return!!f&&(f.hasPendingWrites||f.version.compareTo(u)>0)}_s(e,n,o){return Pa()<=Pt.DEBUG&&je("QueryEngine","Using full collection scan to execute query:",La(n)),this.ns.getDocumentsMatchingQuery(e,n,Io.min(),o)}hs(e,n,o,u){return this.ns.getDocumentsMatchingQuery(e,o,u).next(f=>(n.forEach(y=>{f=f.insert(y.key,y)}),f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hd="LocalStore",zC=3e8;class jC{constructor(e,n,o,u){this.persistence=e,this.Ps=n,this.serializer=u,this.Ts=new Tn(vt),this.Is=new aa(f=>Od(f),Pd),this.Es=new Map,this.ds=e.getRemoteDocumentCache(),this.Hr=e.getTargetCache(),this.Yr=e.getBundleCache(),this.As(o)}As(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new DC(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ts))}}function HC(s,e,n,o){return new jC(s,e,n,o)}async function z2(s,e){const n=mt(s);return await n.persistence.runTransaction("Handle user change","readonly",o=>{let u;return n.mutationQueue.getAllMutationBatches(o).next(f=>(u=f,n.As(e),n.mutationQueue.getAllMutationBatches(o))).next(f=>{const y=[],A=[];let C=Nt();for(const x of u){y.push(x.batchId);for(const R of x.mutations)C=C.add(R.key)}for(const x of f){A.push(x.batchId);for(const R of x.mutations)C=C.add(R.key)}return n.localDocuments.getDocuments(o,C).next(x=>({Rs:x,removedBatchIds:y,addedBatchIds:A}))})})}function WC(s,e){const n=mt(s);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",o=>{const u=e.batch.keys(),f=n.ds.newChangeBuffer({trackRemovals:!0});return function(A,C,x,R){const D=x.batch,k=D.keys();let j=Ae.resolve();return k.forEach(q=>{j=j.next(()=>R.getEntry(C,q)).next(Q=>{const J=x.docVersions.get(q);Yt(J!==null),Q.version.compareTo(J)<0&&(D.applyToRemoteDocument(Q,x),Q.isValidDocument()&&(Q.setReadTime(x.commitVersion),R.addEntry(Q)))})}),j.next(()=>A.mutationQueue.removeMutationBatch(C,D))}(n,o,e,f).next(()=>f.apply(o)).next(()=>n.mutationQueue.performConsistencyCheck(o)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(o,u,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(o,function(A){let C=Nt();for(let x=0;x<A.mutationResults.length;++x)A.mutationResults[x].transformResults.length>0&&(C=C.add(A.batch.mutations[x].key));return C}(e))).next(()=>n.localDocuments.getDocuments(o,u))})}function j2(s){const e=mt(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Hr.getLastRemoteSnapshotVersion(n))}function GC(s,e){const n=mt(s),o=e.snapshotVersion;let u=n.Ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",f=>{const y=n.ds.newChangeBuffer({trackRemovals:!0});u=n.Ts;const A=[];e.targetChanges.forEach((R,D)=>{const k=u.get(D);if(!k)return;A.push(n.Hr.removeMatchingKeys(f,R.removedDocuments,D).next(()=>n.Hr.addMatchingKeys(f,R.addedDocuments,D)));let j=k.withSequenceNumber(f.currentSequenceNumber);e.targetMismatches.get(D)!==null?j=j.withResumeToken(xr.EMPTY_BYTE_STRING,gt.min()).withLastLimboFreeSnapshotVersion(gt.min()):R.resumeToken.approximateByteSize()>0&&(j=j.withResumeToken(R.resumeToken,o)),u=u.insert(D,j),function(Q,J,ie){return Q.resumeToken.approximateByteSize()===0||J.snapshotVersion.toMicroseconds()-Q.snapshotVersion.toMicroseconds()>=zC?!0:ie.addedDocuments.size+ie.modifiedDocuments.size+ie.removedDocuments.size>0}(k,j,R)&&A.push(n.Hr.updateTargetData(f,j))});let C=js(),x=Nt();if(e.documentUpdates.forEach(R=>{e.resolvedLimboDocuments.has(R)&&A.push(n.persistence.referenceDelegate.updateLimboDocument(f,R))}),A.push(YC(f,y,e.documentUpdates).next(R=>{C=R.Vs,x=R.fs})),!o.isEqual(gt.min())){const R=n.Hr.getLastRemoteSnapshotVersion(f).next(D=>n.Hr.setTargetsMetadata(f,f.currentSequenceNumber,o));A.push(R)}return Ae.waitFor(A).next(()=>y.apply(f)).next(()=>n.localDocuments.getLocalViewOfDocuments(f,C,x)).next(()=>C)}).then(f=>(n.Ts=u,f))}function YC(s,e,n){let o=Nt(),u=Nt();return n.forEach(f=>o=o.add(f)),e.getEntries(s,o).next(f=>{let y=js();return n.forEach((A,C)=>{const x=f.get(A);C.isFoundDocument()!==x.isFoundDocument()&&(u=u.add(A)),C.isNoDocument()&&C.version.isEqual(gt.min())?(e.removeEntry(A,C.readTime),y=y.insert(A,C)):!x.isValidDocument()||C.version.compareTo(x.version)>0||C.version.compareTo(x.version)===0&&x.hasPendingWrites?(e.addEntry(C),y=y.insert(A,C)):je(Hd,"Ignoring outdated watch update for ",A,". Current version:",x.version," Watch version:",C.version)}),{Vs:y,fs:u}})}function XC(s,e){const n=mt(s);return n.persistence.runTransaction("Get next mutation batch","readonly",o=>(e===void 0&&(e=Dd),n.mutationQueue.getNextMutationBatchAfterBatchId(o,e)))}function qC(s,e){const n=mt(s);return n.persistence.runTransaction("Allocate target","readwrite",o=>{let u;return n.Hr.getTargetData(o,e).next(f=>f?(u=f,Ae.resolve(u)):n.Hr.allocateTargetId(o).next(y=>(u=new wo(e,y,"TargetPurposeListen",o.currentSequenceNumber),n.Hr.addTargetData(o,u).next(()=>u))))}).then(o=>{const u=n.Ts.get(o.targetId);return(u===null||o.snapshotVersion.compareTo(u.snapshotVersion)>0)&&(n.Ts=n.Ts.insert(o.targetId,o),n.Is.set(e,o.targetId)),o})}async function dd(s,e,n){const o=mt(s),u=o.Ts.get(e),f=n?"readwrite":"readwrite-primary";try{n||await o.persistence.runTransaction("Release target",f,y=>o.persistence.referenceDelegate.removeTarget(y,u))}catch(y){if(!Ja(y))throw y;je(Hd,`Failed to update sequence numbers for target ${e}: ${y}`)}o.Ts=o.Ts.remove(e),o.Is.delete(u.target)}function Mp(s,e,n){const o=mt(s);let u=gt.min(),f=Nt();return o.persistence.runTransaction("Execute query","readwrite",y=>function(C,x,R){const D=mt(C),k=D.Is.get(R);return k!==void 0?Ae.resolve(D.Ts.get(k)):D.Hr.getTargetData(x,R)}(o,y,hs(e)).next(A=>{if(A)return u=A.lastLimboFreeSnapshotVersion,o.Hr.getMatchingKeysForTargetId(y,A.targetId).next(C=>{f=C})}).next(()=>o.Ps.getDocumentsMatchingQuery(y,e,n?u:gt.min(),n?f:Nt())).next(A=>(QC(o,L_(e),A),{documents:A,gs:f})))}function QC(s,e,n){let o=s.Es.get(e)||gt.min();n.forEach((u,f)=>{f.readTime.compareTo(o)>0&&(o=f.readTime)}),s.Es.set(e,o)}class Op{constructor(){this.activeTargetIds=z_()}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}bs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class KC{constructor(){this.ho=new Op,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,o){}addLocalQueryTarget(e,n=!0){return n&&this.ho.Ds(e),this.Po[e]||"not-current"}updateQueryState(e,n,o){this.Po[e]=n}removeLocalQueryTarget(e){this.ho.vs(e)}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){delete this.Po[e]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(e){return this.ho.activeTargetIds.has(e)}start(){return this.ho=new Op,Promise.resolve()}handleUserChange(e,n,o){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZC{To(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pp="ConnectivityMonitor";class Lp{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(e){this.Vo.push(e)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){je(Pp,"Network connectivity changed: AVAILABLE");for(const e of this.Vo)e(0)}Ro(){je(Pp,"Network connectivity changed: UNAVAILABLE");for(const e of this.Vo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ju=null;function gd(){return Ju===null?Ju=function(){return 268435456+Math.round(2147483648*Math.random())}():Ju++,"0x"+Ju.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yf="RestConnection",$C={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class JC{get fo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",o=encodeURIComponent(this.databaseId.projectId),u=encodeURIComponent(this.databaseId.database);this.po=n+"://"+e.host,this.yo=`projects/${o}/databases/${u}`,this.wo=this.databaseId.database===wc?`project_id=${o}`:`project_id=${o}&database_id=${u}`}So(e,n,o,u,f){const y=gd(),A=this.bo(e,n.toUriEncodedString());je(Yf,`Sending RPC '${e}' ${y}:`,A,o);const C={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(C,u,f),this.vo(e,A,C,o).then(x=>(je(Yf,`Received RPC '${e}' ${y}: `,x),x),x=>{throw za(Yf,`RPC '${e}' ${y} failed with error: `,x,"url: ",A,"request:",o),x})}Co(e,n,o,u,f,y){return this.So(e,n,o,u,f)}Do(e,n,o){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Za}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((u,f)=>e[f]=u),o&&o.headers.forEach((u,f)=>e[f]=u)}bo(e,n){const o=$C[e];return`${this.po}/v1/${n}:${o}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ev{constructor(e){this.Fo=e.Fo,this.Mo=e.Mo}xo(e){this.Oo=e}No(e){this.Bo=e}Lo(e){this.ko=e}onMessage(e){this.qo=e}close(){this.Mo()}send(e){this.Fo(e)}Qo(){this.Oo()}$o(){this.Bo()}Uo(e){this.ko(e)}Ko(e){this.qo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pr="WebChannelConnection";class tv extends JC{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,n,o,u){const f=gd();return new Promise((y,A)=>{const C=new Ym;C.setWithCredentials(!0),C.listenOnce(Xm.COMPLETE,()=>{try{switch(C.getLastErrorCode()){case sc.NO_ERROR:const R=C.getResponseJson();je(Pr,`XHR for RPC '${e}' ${f} received:`,JSON.stringify(R)),y(R);break;case sc.TIMEOUT:je(Pr,`RPC '${e}' ${f} timed out`),A(new tt(Ie.DEADLINE_EXCEEDED,"Request time out"));break;case sc.HTTP_ERROR:const D=C.getStatus();if(je(Pr,`RPC '${e}' ${f} failed with status:`,D,"response text:",C.getResponseText()),D>0){let k=C.getResponseJson();Array.isArray(k)&&(k=k[0]);const j=k==null?void 0:k.error;if(j&&j.status&&j.message){const q=function(J){const ie=J.toLowerCase().replace(/_/g,"-");return Object.values(Ie).indexOf(ie)>=0?ie:Ie.UNKNOWN}(j.status);A(new tt(q,j.message))}else A(new tt(Ie.UNKNOWN,"Server responded with status "+C.getStatus()))}else A(new tt(Ie.UNAVAILABLE,"Connection failed."));break;default:lt()}}finally{je(Pr,`RPC '${e}' ${f} completed.`)}});const x=JSON.stringify(u);je(Pr,`RPC '${e}' ${f} sending request:`,u),C.send(n,"POST",x,o,15)})}Wo(e,n,o){const u=gd(),f=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],y=Km(),A=Qm(),C={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},x=this.longPollingOptions.timeoutSeconds;x!==void 0&&(C.longPollingTimeout=Math.round(1e3*x)),this.useFetchStreams&&(C.useFetchStreams=!0),this.Do(C.initMessageHeaders,n,o),C.encodeInitMessageHeaders=!0;const R=f.join("");je(Pr,`Creating RPC '${e}' stream ${u}: ${R}`,C);const D=y.createWebChannel(R,C);let k=!1,j=!1;const q=new ev({Fo:J=>{j?je(Pr,`Not sending because RPC '${e}' stream ${u} is closed:`,J):(k||(je(Pr,`Opening RPC '${e}' stream ${u} transport.`),D.open(),k=!0),je(Pr,`RPC '${e}' stream ${u} sending:`,J),D.send(J))},Mo:()=>D.close()}),Q=(J,ie,he)=>{J.listen(ie,te=>{try{he(te)}catch(pe){setTimeout(()=>{throw pe},0)}})};return Q(D,Rl.EventType.OPEN,()=>{j||(je(Pr,`RPC '${e}' stream ${u} transport opened.`),q.Qo())}),Q(D,Rl.EventType.CLOSE,()=>{j||(j=!0,je(Pr,`RPC '${e}' stream ${u} transport closed`),q.Uo())}),Q(D,Rl.EventType.ERROR,J=>{j||(j=!0,za(Pr,`RPC '${e}' stream ${u} transport errored:`,J),q.Uo(new tt(Ie.UNAVAILABLE,"The operation could not be completed")))}),Q(D,Rl.EventType.MESSAGE,J=>{var ie;if(!j){const he=J.data[0];Yt(!!he);const te=he,pe=(te==null?void 0:te.error)||((ie=te[0])===null||ie===void 0?void 0:ie.error);if(pe){je(Pr,`RPC '${e}' stream ${u} received error:`,pe);const Ge=pe.status;let we=function(P){const G=Hn[P];if(G!==void 0)return N2(G)}(Ge),F=pe.message;we===void 0&&(we=Ie.INTERNAL,F="Unknown error status: "+Ge+" with message "+pe.message),j=!0,q.Uo(new tt(we,F)),D.close()}else je(Pr,`RPC '${e}' stream ${u} received:`,he),q.Ko(he)}}),Q(A,qm.STAT_EVENT,J=>{J.stat===nd.PROXY?je(Pr,`RPC '${e}' stream ${u} detected buffering proxy`):J.stat===nd.NOPROXY&&je(Pr,`RPC '${e}' stream ${u} detected no buffering proxy`)}),setTimeout(()=>{q.$o()},0),q}}function Xf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jc(s){return new sC(s,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H2{constructor(e,n,o=1e3,u=1.5,f=6e4){this.Ti=e,this.timerId=n,this.Go=o,this.zo=u,this.jo=f,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(e){this.cancel();const n=Math.floor(this.Ho+this.e_()),o=Math.max(0,Date.now()-this.Yo),u=Math.max(0,n-o);u>0&&je("ExponentialBackoff",`Backing off for ${u} ms (base delay: ${this.Ho} ms, delay with jitter: ${n} ms, last attempt: ${o} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,u,()=>(this.Yo=Date.now(),e())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kp="PersistentStream";class W2{constructor(e,n,o,u,f,y,A,C){this.Ti=e,this.n_=o,this.r_=u,this.connection=f,this.authCredentialsProvider=y,this.appCheckCredentialsProvider=A,this.listener=C,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new H2(e,n)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(e){this.E_(),this.stream.send(e)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(e,n){this.E_(),this.d_(),this.a_.cancel(),this.i_++,e!==4?this.a_.reset():n&&n.code===Ie.RESOURCE_EXHAUSTED?(zs(n.toString()),zs("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):n&&n.code===Ie.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Lo(n)}A_(){}auth(){this.state=1;const e=this.R_(this.i_),n=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([o,u])=>{this.i_===n&&this.V_(o,u)},o=>{e(()=>{const u=new tt(Ie.UNKNOWN,"Fetching auth token failed: "+o.message);return this.m_(u)})})}V_(e,n){const o=this.R_(this.i_);this.stream=this.f_(e,n),this.stream.xo(()=>{o(()=>this.listener.xo())}),this.stream.No(()=>{o(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(u=>{o(()=>this.m_(u))}),this.stream.onMessage(u=>{o(()=>++this.__==1?this.g_(u):this.onNext(u))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(e){return je(kp,`close with error: ${e}`),this.stream=null,this.close(4,e)}R_(e){return n=>{this.Ti.enqueueAndForget(()=>this.i_===e?n():(je(kp,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class nv extends W2{constructor(e,n,o,u,f,y){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,o,u,y),this.serializer=f}f_(e,n){return this.connection.Wo("Listen",e,n)}g_(e){return this.onNext(e)}onNext(e){this.a_.reset();const n=lC(this.serializer,e),o=function(f){if(!("targetChange"in f))return gt.min();const y=f.targetChange;return y.targetIds&&y.targetIds.length?gt.min():y.readTime?fs(y.readTime):gt.min()}(e);return this.listener.p_(n,o)}y_(e){const n={};n.database=fd(this.serializer),n.addTarget=function(f,y){let A;const C=y.target;if(A=ad(C)?{documents:hC(f,C)}:{query:fC(f,C).ht},A.targetId=y.targetId,y.resumeToken.approximateByteSize()>0){A.resumeToken=M2(f,y.resumeToken);const x=ud(f,y.expectedCount);x!==null&&(A.expectedCount=x)}else if(y.snapshotVersion.compareTo(gt.min())>0){A.readTime=vc(f,y.snapshotVersion.toTimestamp());const x=ud(f,y.expectedCount);x!==null&&(A.expectedCount=x)}return A}(this.serializer,e);const o=gC(this.serializer,e);o&&(n.labels=o),this.I_(n)}w_(e){const n={};n.database=fd(this.serializer),n.removeTarget=e,this.I_(n)}}class rv extends W2{constructor(e,n,o,u,f,y){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,o,u,y),this.serializer=f}get S_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.S_&&this.b_([])}f_(e,n){return this.connection.Wo("Write",e,n)}g_(e){return Yt(!!e.streamToken),this.lastStreamToken=e.streamToken,Yt(!e.writeResults||e.writeResults.length===0),this.listener.D_()}onNext(e){Yt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_.reset();const n=cC(e.writeResults,e.commitTime),o=fs(e.commitTime);return this.listener.v_(o,n)}C_(){const e={};e.database=fd(this.serializer),this.I_(e)}b_(e){const n={streamToken:this.lastStreamToken,writes:e.map(o=>uC(this.serializer,o))};this.I_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iv{}class sv extends iv{constructor(e,n,o,u){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=o,this.serializer=u,this.F_=!1}M_(){if(this.F_)throw new tt(Ie.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,n,o,u){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([f,y])=>this.connection.So(e,cd(n,o),u,f,y)).catch(f=>{throw f.name==="FirebaseError"?(f.code===Ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new tt(Ie.UNKNOWN,f.toString())})}Co(e,n,o,u,f){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([y,A])=>this.connection.Co(e,cd(n,o),u,y,A,f)).catch(y=>{throw y.name==="FirebaseError"?(y.code===Ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),y):new tt(Ie.UNKNOWN,y.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class ov{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(e){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.L_("Offline")))}set(e){this.Q_(),this.x_=0,e==="Online"&&(this.N_=!1),this.L_(e)}L_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}k_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(zs(n),this.N_=!1):je("OnlineStateTracker",n)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const na="RemoteStore";class av{constructor(e,n,o,u,f){this.localStore=e,this.datastore=n,this.asyncQueue=o,this.remoteSyncer={},this.U_=[],this.K_=new Map,this.W_=new Set,this.G_=[],this.z_=f,this.z_.To(y=>{o.enqueueAndForget(async()=>{la(this)&&(je(na,"Restarting streams for network reachability change."),await async function(C){const x=mt(C);x.W_.add(4),await Zl(x),x.j_.set("Unknown"),x.W_.delete(4),await Hc(x)}(this))})}),this.j_=new ov(o,u)}}async function Hc(s){if(la(s))for(const e of s.G_)await e(!0)}async function Zl(s){for(const e of s.G_)await e(!1)}function G2(s,e){const n=mt(s);n.K_.has(e.targetId)||(n.K_.set(e.targetId,e),Xd(n)?Yd(n):el(n).c_()&&Gd(n,e))}function Wd(s,e){const n=mt(s),o=el(n);n.K_.delete(e),o.c_()&&Y2(n,e),n.K_.size===0&&(o.c_()?o.P_():la(n)&&n.j_.set("Unknown"))}function Gd(s,e){if(s.H_.Ne(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(gt.min())>0){const n=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}el(s).y_(e)}function Y2(s,e){s.H_.Ne(e),el(s).w_(e)}function Yd(s){s.H_=new tC({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>s.K_.get(e)||null,it:()=>s.datastore.serializer.databaseId}),el(s).start(),s.j_.B_()}function Xd(s){return la(s)&&!el(s).u_()&&s.K_.size>0}function la(s){return mt(s).W_.size===0}function X2(s){s.H_=void 0}async function lv(s){s.j_.set("Online")}async function uv(s){s.K_.forEach((e,n)=>{Gd(s,e)})}async function cv(s,e){X2(s),Xd(s)?(s.j_.q_(e),Yd(s)):s.j_.set("Unknown")}async function hv(s,e,n){if(s.j_.set("Online"),e instanceof b2&&e.state===2&&e.cause)try{await async function(u,f){const y=f.cause;for(const A of f.targetIds)u.K_.has(A)&&(await u.remoteSyncer.rejectListen(A,y),u.K_.delete(A),u.H_.removeTarget(A))}(s,e)}catch(o){je(na,"Failed to remove targets %s: %s ",e.targetIds.join(","),o),await Tc(s,o)}else if(e instanceof uc?s.H_.We(e):e instanceof D2?s.H_.Ze(e):s.H_.je(e),!n.isEqual(gt.min()))try{const o=await j2(s.localStore);n.compareTo(o)>=0&&await function(f,y){const A=f.H_.ot(y);return A.targetChanges.forEach((C,x)=>{if(C.resumeToken.approximateByteSize()>0){const R=f.K_.get(x);R&&f.K_.set(x,R.withResumeToken(C.resumeToken,y))}}),A.targetMismatches.forEach((C,x)=>{const R=f.K_.get(C);if(!R)return;f.K_.set(C,R.withResumeToken(xr.EMPTY_BYTE_STRING,R.snapshotVersion)),Y2(f,C);const D=new wo(R.target,C,x,R.sequenceNumber);Gd(f,D)}),f.remoteSyncer.applyRemoteEvent(A)}(s,n)}catch(o){je(na,"Failed to raise snapshot:",o),await Tc(s,o)}}async function Tc(s,e,n){if(!Ja(e))throw e;s.W_.add(1),await Zl(s),s.j_.set("Offline"),n||(n=()=>j2(s.localStore)),s.asyncQueue.enqueueRetryable(async()=>{je(na,"Retrying IndexedDB access"),await n(),s.W_.delete(1),await Hc(s)})}function q2(s,e){return e().catch(n=>Tc(s,n,e))}async function Wc(s){const e=mt(s),n=No(e);let o=e.U_.length>0?e.U_[e.U_.length-1].batchId:Dd;for(;fv(e);)try{const u=await XC(e.localStore,o);if(u===null){e.U_.length===0&&n.P_();break}o=u.batchId,dv(e,u)}catch(u){await Tc(e,u)}Q2(e)&&K2(e)}function fv(s){return la(s)&&s.U_.length<10}function dv(s,e){s.U_.push(e);const n=No(s);n.c_()&&n.S_&&n.b_(e.mutations)}function Q2(s){return la(s)&&!No(s).u_()&&s.U_.length>0}function K2(s){No(s).start()}async function gv(s){No(s).C_()}async function pv(s){const e=No(s);for(const n of s.U_)e.b_(n.mutations)}async function mv(s,e,n){const o=s.U_.shift(),u=Bd.from(o,e,n);await q2(s,()=>s.remoteSyncer.applySuccessfulWrite(u)),await Wc(s)}async function yv(s,e){e&&No(s).S_&&await async function(o,u){if(function(y){return J_(y)&&y!==Ie.ABORTED}(u.code)){const f=o.U_.shift();No(o).h_(),await q2(o,()=>o.remoteSyncer.rejectFailedWrite(f.batchId,u)),await Wc(o)}}(s,e),Q2(s)&&K2(s)}async function Bp(s,e){const n=mt(s);n.asyncQueue.verifyOperationInProgress(),je(na,"RemoteStore received new credentials");const o=la(n);n.W_.add(3),await Zl(n),o&&n.j_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.W_.delete(3),await Hc(n)}async function wv(s,e){const n=mt(s);e?(n.W_.delete(2),await Hc(n)):e||(n.W_.add(2),await Zl(n),n.j_.set("Unknown"))}function el(s){return s.J_||(s.J_=function(n,o,u){const f=mt(n);return f.M_(),new nv(o,f.connection,f.authCredentials,f.appCheckCredentials,f.serializer,u)}(s.datastore,s.asyncQueue,{xo:lv.bind(null,s),No:uv.bind(null,s),Lo:cv.bind(null,s),p_:hv.bind(null,s)}),s.G_.push(async e=>{e?(s.J_.h_(),Xd(s)?Yd(s):s.j_.set("Unknown")):(await s.J_.stop(),X2(s))})),s.J_}function No(s){return s.Y_||(s.Y_=function(n,o,u){const f=mt(n);return f.M_(),new rv(o,f.connection,f.authCredentials,f.appCheckCredentials,f.serializer,u)}(s.datastore,s.asyncQueue,{xo:()=>Promise.resolve(),No:gv.bind(null,s),Lo:yv.bind(null,s),D_:pv.bind(null,s),v_:mv.bind(null,s)}),s.G_.push(async e=>{e?(s.Y_.h_(),await Wc(s)):(await s.Y_.stop(),s.U_.length>0&&(je(na,`Stopping write stream with ${s.U_.length} pending writes`),s.U_=[]))})),s.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qd{constructor(e,n,o,u,f){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=o,this.op=u,this.removalCallback=f,this.deferred=new _o,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(y=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,o,u,f){const y=Date.now()+o,A=new qd(e,n,y,u,f);return A.start(o),A}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new tt(Ie.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Qd(s,e){if(zs("AsyncQueue",`${e}: ${s}`),Ja(s))return new tt(Ie.UNAVAILABLE,`${e}: ${s}`);throw s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ua{static emptySet(e){return new Ua(e.comparator)}constructor(e){this.comparator=e?(n,o)=>e(n,o)||st.comparator(n.key,o.key):(n,o)=>st.comparator(n.key,o.key),this.keyedMap=Nl(),this.sortedSet=new Tn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,o)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ua)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),o=e.sortedSet.getIterator();for(;n.hasNext();){const u=n.getNext().key,f=o.getNext().key;if(!u.isEqual(f))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const o=new Ua;return o.comparator=this.comparator,o.keyedMap=e,o.sortedSet=n,o}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fp{constructor(){this.Z_=new Tn(st.comparator)}track(e){const n=e.doc.key,o=this.Z_.get(n);o?e.type!==0&&o.type===3?this.Z_=this.Z_.insert(n,e):e.type===3&&o.type!==1?this.Z_=this.Z_.insert(n,{type:o.type,doc:e.doc}):e.type===2&&o.type===2?this.Z_=this.Z_.insert(n,{type:2,doc:e.doc}):e.type===2&&o.type===0?this.Z_=this.Z_.insert(n,{type:0,doc:e.doc}):e.type===1&&o.type===0?this.Z_=this.Z_.remove(n):e.type===1&&o.type===2?this.Z_=this.Z_.insert(n,{type:1,doc:o.doc}):e.type===0&&o.type===1?this.Z_=this.Z_.insert(n,{type:2,doc:e.doc}):lt():this.Z_=this.Z_.insert(n,e)}X_(){const e=[];return this.Z_.inorderTraversal((n,o)=>{e.push(o)}),e}}class Ya{constructor(e,n,o,u,f,y,A,C,x){this.query=e,this.docs=n,this.oldDocs=o,this.docChanges=u,this.mutatedKeys=f,this.fromCache=y,this.syncStateChanged=A,this.excludesMetadataChanges=C,this.hasCachedResults=x}static fromInitialDocuments(e,n,o,u,f){const y=[];return n.forEach(A=>{y.push({type:0,doc:A})}),new Ya(e,n,Ua.emptySet(n),y,o,u,!0,!1,f)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Bc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,o=e.docChanges;if(n.length!==o.length)return!1;for(let u=0;u<n.length;u++)if(n[u].type!==o[u].type||!n[u].doc.isEqual(o[u].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ev{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(e=>e.ra())}}class xv{constructor(){this.queries=Vp(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(n,o){const u=mt(n),f=u.queries;u.queries=Vp(),f.forEach((y,A)=>{for(const C of A.ta)C.onError(o)})})(this,new tt(Ie.ABORTED,"Firestore shutting down"))}}function Vp(){return new aa(s=>y2(s),Bc)}async function Av(s,e){const n=mt(s);let o=3;const u=e.query;let f=n.queries.get(u);f?!f.na()&&e.ra()&&(o=2):(f=new Ev,o=e.ra()?0:1);try{switch(o){case 0:f.ea=await n.onListen(u,!0);break;case 1:f.ea=await n.onListen(u,!1);break;case 2:await n.onFirstRemoteStoreListen(u)}}catch(y){const A=Qd(y,`Initialization of query '${La(e.query)}' failed`);return void e.onError(A)}n.queries.set(u,f),f.ta.push(e),e.sa(n.onlineState),f.ea&&e.oa(f.ea)&&Kd(n)}async function _v(s,e){const n=mt(s),o=e.query;let u=3;const f=n.queries.get(o);if(f){const y=f.ta.indexOf(e);y>=0&&(f.ta.splice(y,1),f.ta.length===0?u=e.ra()?0:1:!f.na()&&e.ra()&&(u=2))}switch(u){case 0:return n.queries.delete(o),n.onUnlisten(o,!0);case 1:return n.queries.delete(o),n.onUnlisten(o,!1);case 2:return n.onLastRemoteStoreUnlisten(o);default:return}}function Cv(s,e){const n=mt(s);let o=!1;for(const u of e){const f=u.query,y=n.queries.get(f);if(y){for(const A of y.ta)A.oa(u)&&(o=!0);y.ea=u}}o&&Kd(n)}function vv(s,e,n){const o=mt(s),u=o.queries.get(e);if(u)for(const f of u.ta)f.onError(n);o.queries.delete(e)}function Kd(s){s.ia.forEach(e=>{e.next()})}var pd,Up;(Up=pd||(pd={}))._a="default",Up.Cache="cache";class Iv{constructor(e,n,o){this.query=e,this.aa=n,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=o||{}}oa(e){if(!this.options.includeMetadataChanges){const o=[];for(const u of e.docChanges)u.type!==3&&o.push(u);e=new Ya(e.query,e.docs,e.oldDocs,o,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.ua?this.la(e)&&(this.aa.next(e),n=!0):this.ha(e,this.onlineState)&&(this.Pa(e),n=!0),this.ca=e,n}onError(e){this.aa.error(e)}sa(e){this.onlineState=e;let n=!1;return this.ca&&!this.ua&&this.ha(this.ca,e)&&(this.Pa(this.ca),n=!0),n}ha(e,n){if(!e.fromCache||!this.ra())return!0;const o=n!=="Offline";return(!this.options.Ta||!o)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}la(e){if(e.docChanges.length>0)return!0;const n=this.ca&&this.ca.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Pa(e){e=Ya.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ua=!0,this.aa.next(e)}ra(){return this.options.source!==pd.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z2{constructor(e){this.key=e}}class $2{constructor(e){this.key=e}}class Tv{constructor(e,n){this.query=e,this.fa=n,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=Nt(),this.mutatedKeys=Nt(),this.ya=w2(e),this.wa=new Ua(this.ya)}get Sa(){return this.fa}ba(e,n){const o=n?n.Da:new Fp,u=n?n.wa:this.wa;let f=n?n.mutatedKeys:this.mutatedKeys,y=u,A=!1;const C=this.query.limitType==="F"&&u.size===this.query.limit?u.last():null,x=this.query.limitType==="L"&&u.size===this.query.limit?u.first():null;if(e.inorderTraversal((R,D)=>{const k=u.get(R),j=Fc(this.query,D)?D:null,q=!!k&&this.mutatedKeys.has(k.key),Q=!!j&&(j.hasLocalMutations||this.mutatedKeys.has(j.key)&&j.hasCommittedMutations);let J=!1;k&&j?k.data.isEqual(j.data)?q!==Q&&(o.track({type:3,doc:j}),J=!0):this.va(k,j)||(o.track({type:2,doc:j}),J=!0,(C&&this.ya(j,C)>0||x&&this.ya(j,x)<0)&&(A=!0)):!k&&j?(o.track({type:0,doc:j}),J=!0):k&&!j&&(o.track({type:1,doc:k}),J=!0,(C||x)&&(A=!0)),J&&(j?(y=y.add(j),f=Q?f.add(R):f.delete(R)):(y=y.delete(R),f=f.delete(R)))}),this.query.limit!==null)for(;y.size>this.query.limit;){const R=this.query.limitType==="F"?y.last():y.first();y=y.delete(R.key),f=f.delete(R.key),o.track({type:1,doc:R})}return{wa:y,Da:o,ls:A,mutatedKeys:f}}va(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,o,u){const f=this.wa;this.wa=e.wa,this.mutatedKeys=e.mutatedKeys;const y=e.Da.X_();y.sort((R,D)=>function(j,q){const Q=J=>{switch(J){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return lt()}};return Q(j)-Q(q)}(R.type,D.type)||this.ya(R.doc,D.doc)),this.Ca(o),u=u!=null&&u;const A=n&&!u?this.Fa():[],C=this.pa.size===0&&this.current&&!u?1:0,x=C!==this.ga;return this.ga=C,y.length!==0||x?{snapshot:new Ya(this.query,e.wa,f,y,e.mutatedKeys,C===0,x,!1,!!o&&o.resumeToken.approximateByteSize()>0),Ma:A}:{Ma:A}}sa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new Fp,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(e){return!this.fa.has(e)&&!!this.wa.has(e)&&!this.wa.get(e).hasLocalMutations}Ca(e){e&&(e.addedDocuments.forEach(n=>this.fa=this.fa.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.fa=this.fa.delete(n)),this.current=e.current)}Fa(){if(!this.current)return[];const e=this.pa;this.pa=Nt(),this.wa.forEach(o=>{this.xa(o.key)&&(this.pa=this.pa.add(o.key))});const n=[];return e.forEach(o=>{this.pa.has(o)||n.push(new $2(o))}),this.pa.forEach(o=>{e.has(o)||n.push(new Z2(o))}),n}Oa(e){this.fa=e.gs,this.pa=Nt();const n=this.ba(e.documents);return this.applyChanges(n,!0)}Na(){return Ya.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const Zd="SyncEngine";class Sv{constructor(e,n,o){this.query=e,this.targetId=n,this.view=o}}class Rv{constructor(e){this.key=e,this.Ba=!1}}class Nv{constructor(e,n,o,u,f,y){this.localStore=e,this.remoteStore=n,this.eventManager=o,this.sharedClientState=u,this.currentUser=f,this.maxConcurrentLimboResolutions=y,this.La={},this.ka=new aa(A=>y2(A),Bc),this.qa=new Map,this.Qa=new Set,this.$a=new Tn(st.comparator),this.Ua=new Map,this.Ka=new Ud,this.Wa={},this.Ga=new Map,this.za=Ga.Kn(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function Dv(s,e,n=!0){const o=iy(s);let u;const f=o.ka.get(e);return f?(o.sharedClientState.addLocalQueryTarget(f.targetId),u=f.view.Na()):u=await J2(o,e,n,!0),u}async function bv(s,e){const n=iy(s);await J2(n,e,!0,!1)}async function J2(s,e,n,o){const u=await qC(s.localStore,hs(e)),f=u.targetId,y=s.sharedClientState.addLocalQueryTarget(f,n);let A;return o&&(A=await Mv(s,e,f,y==="current",u.resumeToken)),s.isPrimaryClient&&n&&G2(s.remoteStore,u),A}async function Mv(s,e,n,o,u){s.Ha=(D,k,j)=>async function(Q,J,ie,he){let te=J.view.ba(ie);te.ls&&(te=await Mp(Q.localStore,J.query,!1).then(({documents:F})=>J.view.ba(F,te)));const pe=he&&he.targetChanges.get(J.targetId),Ge=he&&he.targetMismatches.get(J.targetId)!=null,we=J.view.applyChanges(te,Q.isPrimaryClient,pe,Ge);return jp(Q,J.targetId,we.Ma),we.snapshot}(s,D,k,j);const f=await Mp(s.localStore,e,!0),y=new Tv(e,f.gs),A=y.ba(f.documents),C=Kl.createSynthesizedTargetChangeForCurrentChange(n,o&&s.onlineState!=="Offline",u),x=y.applyChanges(A,s.isPrimaryClient,C);jp(s,n,x.Ma);const R=new Sv(e,n,y);return s.ka.set(e,R),s.qa.has(n)?s.qa.get(n).push(e):s.qa.set(n,[e]),x.snapshot}async function Ov(s,e,n){const o=mt(s),u=o.ka.get(e),f=o.qa.get(u.targetId);if(f.length>1)return o.qa.set(u.targetId,f.filter(y=>!Bc(y,e))),void o.ka.delete(e);o.isPrimaryClient?(o.sharedClientState.removeLocalQueryTarget(u.targetId),o.sharedClientState.isActiveQueryTarget(u.targetId)||await dd(o.localStore,u.targetId,!1).then(()=>{o.sharedClientState.clearQueryState(u.targetId),n&&Wd(o.remoteStore,u.targetId),md(o,u.targetId)}).catch($a)):(md(o,u.targetId),await dd(o.localStore,u.targetId,!0))}async function Pv(s,e){const n=mt(s),o=n.ka.get(e),u=n.qa.get(o.targetId);n.isPrimaryClient&&u.length===1&&(n.sharedClientState.removeLocalQueryTarget(o.targetId),Wd(n.remoteStore,o.targetId))}async function Lv(s,e,n){const o=jv(s);try{const u=await function(y,A){const C=mt(y),x=$n.now(),R=A.reduce((j,q)=>j.add(q.key),Nt());let D,k;return C.persistence.runTransaction("Locally write mutations","readwrite",j=>{let q=js(),Q=Nt();return C.ds.getEntries(j,R).next(J=>{q=J,q.forEach((ie,he)=>{he.isValidDocument()||(Q=Q.add(ie))})}).next(()=>C.localDocuments.getOverlayedDocuments(j,q)).next(J=>{D=J;const ie=[];for(const he of A){const te=q_(he,D.get(he.key).overlayedDocument);te!=null&&ie.push(new Oo(he.key,te,u2(te.value.mapValue),Yi.exists(!0)))}return C.mutationQueue.addMutationBatch(j,x,ie,A)}).next(J=>{k=J;const ie=J.applyToLocalDocumentSet(D,Q);return C.documentOverlayCache.saveOverlays(j,J.batchId,ie)})}).then(()=>({batchId:k.batchId,changes:x2(D)}))}(o.localStore,e);o.sharedClientState.addPendingMutation(u.batchId),function(y,A,C){let x=y.Wa[y.currentUser.toKey()];x||(x=new Tn(vt)),x=x.insert(A,C),y.Wa[y.currentUser.toKey()]=x}(o,u.batchId,n),await $l(o,u.changes),await Wc(o.remoteStore)}catch(u){const f=Qd(u,"Failed to persist write");n.reject(f)}}async function ey(s,e){const n=mt(s);try{const o=await GC(n.localStore,e);e.targetChanges.forEach((u,f)=>{const y=n.Ua.get(f);y&&(Yt(u.addedDocuments.size+u.modifiedDocuments.size+u.removedDocuments.size<=1),u.addedDocuments.size>0?y.Ba=!0:u.modifiedDocuments.size>0?Yt(y.Ba):u.removedDocuments.size>0&&(Yt(y.Ba),y.Ba=!1))}),await $l(n,o,e)}catch(o){await $a(o)}}function zp(s,e,n){const o=mt(s);if(o.isPrimaryClient&&n===0||!o.isPrimaryClient&&n===1){const u=[];o.ka.forEach((f,y)=>{const A=y.view.sa(e);A.snapshot&&u.push(A.snapshot)}),function(y,A){const C=mt(y);C.onlineState=A;let x=!1;C.queries.forEach((R,D)=>{for(const k of D.ta)k.sa(A)&&(x=!0)}),x&&Kd(C)}(o.eventManager,e),u.length&&o.La.p_(u),o.onlineState=e,o.isPrimaryClient&&o.sharedClientState.setOnlineState(e)}}async function kv(s,e,n){const o=mt(s);o.sharedClientState.updateQueryState(e,"rejected",n);const u=o.Ua.get(e),f=u&&u.key;if(f){let y=new Tn(st.comparator);y=y.insert(f,kr.newNoDocument(f,gt.min()));const A=Nt().add(f),C=new zc(gt.min(),new Map,new Tn(vt),y,A);await ey(o,C),o.$a=o.$a.remove(f),o.Ua.delete(e),$d(o)}else await dd(o.localStore,e,!1).then(()=>md(o,e,n)).catch($a)}async function Bv(s,e){const n=mt(s),o=e.batch.batchId;try{const u=await WC(n.localStore,e);ny(n,o,null),ty(n,o),n.sharedClientState.updateMutationState(o,"acknowledged"),await $l(n,u)}catch(u){await $a(u)}}async function Fv(s,e,n){const o=mt(s);try{const u=await function(y,A){const C=mt(y);return C.persistence.runTransaction("Reject batch","readwrite-primary",x=>{let R;return C.mutationQueue.lookupMutationBatch(x,A).next(D=>(Yt(D!==null),R=D.keys(),C.mutationQueue.removeMutationBatch(x,D))).next(()=>C.mutationQueue.performConsistencyCheck(x)).next(()=>C.documentOverlayCache.removeOverlaysForBatchId(x,R,A)).next(()=>C.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(x,R)).next(()=>C.localDocuments.getDocuments(x,R))})}(o.localStore,e);ny(o,e,n),ty(o,e),o.sharedClientState.updateMutationState(e,"rejected",n),await $l(o,u)}catch(u){await $a(u)}}function ty(s,e){(s.Ga.get(e)||[]).forEach(n=>{n.resolve()}),s.Ga.delete(e)}function ny(s,e,n){const o=mt(s);let u=o.Wa[o.currentUser.toKey()];if(u){const f=u.get(e);f&&(n?f.reject(n):f.resolve(),u=u.remove(e)),o.Wa[o.currentUser.toKey()]=u}}function md(s,e,n=null){s.sharedClientState.removeLocalQueryTarget(e);for(const o of s.qa.get(e))s.ka.delete(o),n&&s.La.Ja(o,n);s.qa.delete(e),s.isPrimaryClient&&s.Ka.br(e).forEach(o=>{s.Ka.containsKey(o)||ry(s,o)})}function ry(s,e){s.Qa.delete(e.path.canonicalString());const n=s.$a.get(e);n!==null&&(Wd(s.remoteStore,n),s.$a=s.$a.remove(e),s.Ua.delete(n),$d(s))}function jp(s,e,n){for(const o of n)o instanceof Z2?(s.Ka.addReference(o.key,e),Vv(s,o)):o instanceof $2?(je(Zd,"Document no longer in limbo: "+o.key),s.Ka.removeReference(o.key,e),s.Ka.containsKey(o.key)||ry(s,o.key)):lt()}function Vv(s,e){const n=e.key,o=n.path.canonicalString();s.$a.get(n)||s.Qa.has(o)||(je(Zd,"New document in limbo: "+n),s.Qa.add(o),$d(s))}function $d(s){for(;s.Qa.size>0&&s.$a.size<s.maxConcurrentLimboResolutions;){const e=s.Qa.values().next().value;s.Qa.delete(e);const n=new st(xn.fromString(e)),o=s.za.next();s.Ua.set(o,new Rv(n)),s.$a=s.$a.insert(n,o),G2(s.remoteStore,new wo(hs(m2(n.path)),o,"TargetPurposeLimboResolution",Oc.ae))}}async function $l(s,e,n){const o=mt(s),u=[],f=[],y=[];o.ka.isEmpty()||(o.ka.forEach((A,C)=>{y.push(o.Ha(C,e,n).then(x=>{var R;if((x||n)&&o.isPrimaryClient){const D=x?!x.fromCache:(R=n==null?void 0:n.targetChanges.get(C.targetId))===null||R===void 0?void 0:R.current;o.sharedClientState.updateQueryState(C.targetId,D?"current":"not-current")}if(x){u.push(x);const D=jd.Yi(C.targetId,x);f.push(D)}}))}),await Promise.all(y),o.La.p_(u),await async function(C,x){const R=mt(C);try{await R.persistence.runTransaction("notifyLocalViewChanges","readwrite",D=>Ae.forEach(x,k=>Ae.forEach(k.Hi,j=>R.persistence.referenceDelegate.addReference(D,k.targetId,j)).next(()=>Ae.forEach(k.Ji,j=>R.persistence.referenceDelegate.removeReference(D,k.targetId,j)))))}catch(D){if(!Ja(D))throw D;je(Hd,"Failed to update sequence numbers: "+D)}for(const D of x){const k=D.targetId;if(!D.fromCache){const j=R.Ts.get(k),q=j.snapshotVersion,Q=j.withLastLimboFreeSnapshotVersion(q);R.Ts=R.Ts.insert(k,Q)}}}(o.localStore,f))}async function Uv(s,e){const n=mt(s);if(!n.currentUser.isEqual(e)){je(Zd,"User change. New user:",e.toKey());const o=await z2(n.localStore,e);n.currentUser=e,function(f,y){f.Ga.forEach(A=>{A.forEach(C=>{C.reject(new tt(Ie.CANCELLED,y))})}),f.Ga.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,o.removedBatchIds,o.addedBatchIds),await $l(n,o.Rs)}}function zv(s,e){const n=mt(s),o=n.Ua.get(e);if(o&&o.Ba)return Nt().add(o.key);{let u=Nt();const f=n.qa.get(e);if(!f)return u;for(const y of f){const A=n.ka.get(y);u=u.unionWith(A.view.Sa)}return u}}function iy(s){const e=mt(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=ey.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=zv.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=kv.bind(null,e),e.La.p_=Cv.bind(null,e.eventManager),e.La.Ja=vv.bind(null,e.eventManager),e}function jv(s){const e=mt(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Bv.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Fv.bind(null,e),e}class Sc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=jc(e.databaseInfo.databaseId),this.sharedClientState=this.Za(e),this.persistence=this.Xa(e),await this.persistence.start(),this.localStore=this.eu(e),this.gcScheduler=this.tu(e,this.localStore),this.indexBackfillerScheduler=this.nu(e,this.localStore)}tu(e,n){return null}nu(e,n){return null}eu(e){return HC(this.persistence,new UC,e.initialUser,this.serializer)}Xa(e){return new U2(zd.ri,this.serializer)}Za(e){return new KC}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Sc.provider={build:()=>new Sc};class Hv extends Sc{constructor(e){super(),this.cacheSizeBytes=e}tu(e,n){Yt(this.persistence.referenceDelegate instanceof Ic);const o=this.persistence.referenceDelegate.garbageCollector;return new IC(o,e.asyncQueue,n)}Xa(e){const n=this.cacheSizeBytes!==void 0?ri.withCacheSize(this.cacheSizeBytes):ri.DEFAULT;return new U2(o=>Ic.ri(o,n),this.serializer)}}class yd{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=o=>zp(this.syncEngine,o,1),this.remoteStore.remoteSyncer.handleCredentialChange=Uv.bind(null,this.syncEngine),await wv(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new xv}()}createDatastore(e){const n=jc(e.databaseInfo.databaseId),o=function(f){return new tv(f)}(e.databaseInfo);return function(f,y,A,C){return new sv(f,y,A,C)}(e.authCredentials,e.appCheckCredentials,o,n)}createRemoteStore(e){return function(o,u,f,y,A){return new av(o,u,f,y,A)}(this.localStore,this.datastore,e.asyncQueue,n=>zp(this.syncEngine,n,0),function(){return Lp.D()?new Lp:new ZC}())}createSyncEngine(e,n){return function(u,f,y,A,C,x,R){const D=new Nv(u,f,y,A,C,x);return R&&(D.ja=!0),D}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(u){const f=mt(u);je(na,"RemoteStore shutting down."),f.W_.add(5),await Zl(f),f.z_.shutdown(),f.j_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}yd.provider={build:()=>new yd};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wv{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.iu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.iu(this.observer.error,e):zs("Uncaught Error in snapshot listener:",e.toString()))}su(){this.muted=!0}iu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Do="FirestoreClient";class Gv{constructor(e,n,o,u,f){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=o,this.databaseInfo=u,this.user=Lr.UNAUTHENTICATED,this.clientId=Jm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=f,this.authCredentials.start(o,async y=>{je(Do,"Received user=",y.uid),await this.authCredentialListener(y),this.user=y}),this.appCheckCredentials.start(o,y=>(je(Do,"Received new app check token=",y),this.appCheckCredentialListener(y,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new _o;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const o=Qd(n,"Failed to shutdown persistence");e.reject(o)}}),e.promise}}async function qf(s,e){s.asyncQueue.verifyOperationInProgress(),je(Do,"Initializing OfflineComponentProvider");const n=s.configuration;await e.initialize(n);let o=n.initialUser;s.setCredentialChangeListener(async u=>{o.isEqual(u)||(await z2(e.localStore,u),o=u)}),e.persistence.setDatabaseDeletedListener(()=>s.terminate()),s._offlineComponents=e}async function Hp(s,e){s.asyncQueue.verifyOperationInProgress();const n=await Yv(s);je(Do,"Initializing OnlineComponentProvider"),await e.initialize(n,s.configuration),s.setCredentialChangeListener(o=>Bp(e.remoteStore,o)),s.setAppCheckTokenChangeListener((o,u)=>Bp(e.remoteStore,u)),s._onlineComponents=e}async function Yv(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){je(Do,"Using user provided OfflineComponentProvider");try{await qf(s,s._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(u){return u.name==="FirebaseError"?u.code===Ie.FAILED_PRECONDITION||u.code===Ie.UNIMPLEMENTED:!(typeof DOMException<"u"&&u instanceof DOMException)||u.code===22||u.code===20||u.code===11}(n))throw n;za("Error using user provided cache. Falling back to memory cache: "+n),await qf(s,new Sc)}}else je(Do,"Using default OfflineComponentProvider"),await qf(s,new Hv(void 0));return s._offlineComponents}async function sy(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(je(Do,"Using user provided OnlineComponentProvider"),await Hp(s,s._uninitializedComponentsProvider._online)):(je(Do,"Using default OnlineComponentProvider"),await Hp(s,new yd))),s._onlineComponents}function Xv(s){return sy(s).then(e=>e.syncEngine)}async function qv(s){const e=await sy(s),n=e.eventManager;return n.onListen=Dv.bind(null,e.syncEngine),n.onUnlisten=Ov.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=bv.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=Pv.bind(null,e.syncEngine),n}function Qv(s,e,n={}){const o=new _o;return s.asyncQueue.enqueueAndForget(async()=>function(f,y,A,C,x){const R=new Wv({next:k=>{R.su(),y.enqueueAndForget(()=>_v(f,D)),k.fromCache&&C.source==="server"?x.reject(new tt(Ie.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):x.resolve(k)},error:k=>x.reject(k)}),D=new Iv(A,R,{includeMetadataChanges:!0,Ta:!0});return Av(f,D)}(await qv(s),s.asyncQueue,e,n,o)),o.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oy(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wp=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ay(s,e,n){if(!n)throw new tt(Ie.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function Kv(s,e,n,o){if(e===!0&&o===!0)throw new tt(Ie.INVALID_ARGUMENT,`${s} and ${n} cannot be used together.`)}function Gp(s){if(!st.isDocumentKey(s))throw new tt(Ie.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function Yp(s){if(st.isDocumentKey(s))throw new tt(Ie.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function Jd(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=function(o){return o.constructor?o.constructor.name:null}(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":lt()}function ra(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new tt(Ie.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Jd(s);throw new tt(Ie.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ly="firestore.googleapis.com",Xp=!0;class qp{constructor(e){var n,o;if(e.host===void 0){if(e.ssl!==void 0)throw new tt(Ie.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=ly,this.ssl=Xp}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:Xp;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=V2;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<CC)throw new tt(Ie.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Kv("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=oy((o=e.experimentalLongPollingOptions)!==null&&o!==void 0?o:{}),function(f){if(f.timeoutSeconds!==void 0){if(isNaN(f.timeoutSeconds))throw new tt(Ie.INVALID_ARGUMENT,`invalid long polling timeout: ${f.timeoutSeconds} (must not be NaN)`);if(f.timeoutSeconds<5)throw new tt(Ie.INVALID_ARGUMENT,`invalid long polling timeout: ${f.timeoutSeconds} (minimum allowed value is 5)`);if(f.timeoutSeconds>30)throw new tt(Ie.INVALID_ARGUMENT,`invalid long polling timeout: ${f.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(o,u){return o.timeoutSeconds===u.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Gc{constructor(e,n,o,u){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=o,this._app=u,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new qp({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new tt(Ie.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new tt(Ie.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new qp(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(o){if(!o)return new JA;switch(o.type){case"firstParty":return new r_(o.sessionIndex||"0",o.iamToken||null,o.authTokenFactory||null);case"provider":return o.client;default:throw new tt(Ie.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const o=Wp.get(n);o&&(je("ComponentProvider","Removing Datastore"),Wp.delete(n),o.terminate())}(this),Promise.resolve()}}function Zv(s,e,n,o={}){var u;const f=(s=ra(s,Gc))._getSettings(),y=Object.assign(Object.assign({},f),{emulatorOptions:s._getEmulatorOptions()}),A=`${e}:${n}`;f.host!==ly&&f.host!==A&&za("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const C=Object.assign(Object.assign({},f),{host:A,ssl:!1,emulatorOptions:o});if(!gc(C,y)&&(s._setSettings(C),o.mockUserToken)){let x,R;if(typeof o.mockUserToken=="string")x=o.mockUserToken,R=Lr.MOCK_USER;else{x=Dx(o.mockUserToken,(u=s._app)===null||u===void 0?void 0:u.options.projectId);const D=o.mockUserToken.sub||o.mockUserToken.user_id;if(!D)throw new tt(Ie.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");R=new Lr(D)}s._authCredentials=new e_(new Zm(x,R))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yc{constructor(e,n,o){this.converter=n,this._query=o,this.type="query",this.firestore=e}withConverter(e){return new Yc(this.firestore,e,this._query)}}class bi{constructor(e,n,o){this.converter=n,this._key=o,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Co(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new bi(this.firestore,e,this._key)}}class Co extends Yc{constructor(e,n,o){super(e,n,m2(o)),this._path=o,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new bi(this.firestore,null,new st(e))}withConverter(e){return new Co(this.firestore,e,this._path)}}function kl(s,e,...n){if(s=vo(s),ay("collection","path",e),s instanceof Gc){const o=xn.fromString(e,...n);return Yp(o),new Co(s,null,o)}{if(!(s instanceof bi||s instanceof Co))throw new tt(Ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=s._path.child(xn.fromString(e,...n));return Yp(o),new Co(s.firestore,null,o)}}function e1(s,e,...n){if(s=vo(s),arguments.length===1&&(e=Jm.newId()),ay("doc","path",e),s instanceof Gc){const o=xn.fromString(e,...n);return Gp(o),new bi(s,null,new st(o))}{if(!(s instanceof bi||s instanceof Co))throw new tt(Ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=s._path.child(xn.fromString(e,...n));return Gp(o),new bi(s.firestore,s instanceof Co?s.converter:null,new st(o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qp="AsyncQueue";class Kp{constructor(e=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new H2(this,"async_queue_retry"),this.Su=()=>{const o=Xf();o&&je(Qp,"Visibility state changed to "+o.visibilityState),this.a_.t_()},this.bu=e;const n=Xf();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Su)}get isShuttingDown(){return this.mu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Du(),this.vu(e)}enterRestrictedMode(e){if(!this.mu){this.mu=!0,this.yu=e||!1;const n=Xf();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Su)}}enqueue(e){if(this.Du(),this.mu)return new Promise(()=>{});const n=new _o;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Vu.push(e),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(e){if(!Ja(e))throw e;je(Qp,"Operation failed with retryable error: "+e)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(e){const n=this.bu.then(()=>(this.pu=!0,e().catch(o=>{this.gu=o,this.pu=!1;const u=function(y){let A=y.message||"";return y.stack&&(A=y.stack.includes(y.message)?y.stack:y.message+`
`+y.stack),A}(o);throw zs("INTERNAL UNHANDLED ERROR: ",u),o}).then(o=>(this.pu=!1,o))));return this.bu=n,n}enqueueAfterDelay(e,n,o){this.Du(),this.wu.indexOf(e)>-1&&(n=0);const u=qd.createAndSchedule(this,e,n,o,f=>this.Fu(f));return this.fu.push(u),u}Du(){this.gu&&lt()}verifyOperationInProgress(){}async Mu(){let e;do e=this.bu,await e;while(e!==this.bu)}xu(e){for(const n of this.fu)if(n.timerId===e)return!0;return!1}Ou(e){return this.Mu().then(()=>{this.fu.sort((n,o)=>n.targetTimeMs-o.targetTimeMs);for(const n of this.fu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Mu()})}Nu(e){this.wu.push(e)}Fu(e){const n=this.fu.indexOf(e);this.fu.splice(n,1)}}class Jl extends Gc{constructor(e,n,o,u){super(e,n,o,u),this.type="firestore",this._queue=new Kp,this._persistenceKey=(u==null?void 0:u.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Kp(e),this._firestoreClient=void 0,await e}}}function $v(s,e){const n=typeof s=="object"?s:UA(),o=typeof s=="string"?s:wc,u=LA(n,"firestore").getImmediate({identifier:o});if(!u._initialized){const f=Rx("firestore");f&&Zv(u,...f)}return u}function uy(s){if(s._terminated)throw new tt(Ie.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||Jv(s),s._firestoreClient}function Jv(s){var e,n,o;const u=s._freezeSettings(),f=function(A,C,x,R){return new w_(A,C,x,R.host,R.ssl,R.experimentalForceLongPolling,R.experimentalAutoDetectLongPolling,oy(R.experimentalLongPollingOptions),R.useFetchStreams)}(s._databaseId,((e=s._app)===null||e===void 0?void 0:e.options.appId)||"",s._persistenceKey,u);s._componentsProvider||!((n=u.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((o=u.localCache)===null||o===void 0)&&o._onlineComponentProvider)&&(s._componentsProvider={_offline:u.localCache._offlineComponentProvider,_online:u.localCache._onlineComponentProvider}),s._firestoreClient=new Gv(s._authCredentials,s._appCheckCredentials,s._queue,f,s._componentsProvider&&function(A){const C=A==null?void 0:A._online.build();return{_offline:A==null?void 0:A._offline.build(C),_online:C}}(s._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xa{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Xa(xr.fromBase64String(e))}catch(n){throw new tt(Ie.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Xa(xr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xc{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new tt(Ie.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Er(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t1{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n1{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new tt(Ie.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new tt(Ie.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return vt(this._lat,e._lat)||vt(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r1{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(o,u){if(o.length!==u.length)return!1;for(let f=0;f<o.length;++f)if(o[f]!==u[f])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eI=/^__.*__$/;class tI{constructor(e,n,o){this.data=e,this.fieldMask=n,this.fieldTransforms=o}toMutation(e,n){return this.fieldMask!==null?new Oo(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ql(e,this.data,n,this.fieldTransforms)}}class cy{constructor(e,n,o){this.data=e,this.fieldMask=n,this.fieldTransforms=o}toMutation(e,n){return new Oo(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function hy(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw lt()}}class i1{constructor(e,n,o,u,f,y){this.settings=e,this.databaseId=n,this.serializer=o,this.ignoreUndefinedProperties=u,f===void 0&&this.Bu(),this.fieldTransforms=f||[],this.fieldMask=y||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(e){return new i1(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(e){var n;const o=(n=this.path)===null||n===void 0?void 0:n.child(e),u=this.ku({path:o,Qu:!1});return u.$u(e),u}Uu(e){var n;const o=(n=this.path)===null||n===void 0?void 0:n.child(e),u=this.ku({path:o,Qu:!1});return u.Bu(),u}Ku(e){return this.ku({path:void 0,Qu:!0})}Wu(e){return Rc(e,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Bu(){if(this.path)for(let e=0;e<this.path.length;e++)this.$u(this.path.get(e))}$u(e){if(e.length===0)throw this.Wu("Document fields must not be empty");if(hy(this.Lu)&&eI.test(e))throw this.Wu('Document fields cannot begin and end with "__"')}}class nI{constructor(e,n,o){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=o||jc(e)}ju(e,n,o,u=!1){return new i1({Lu:e,methodName:n,zu:o,path:Er.emptyPath(),Qu:!1,Gu:u},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function fy(s){const e=s._freezeSettings(),n=jc(s._databaseId);return new nI(s._databaseId,!!e.ignoreUndefinedProperties,n)}function rI(s,e,n,o,u,f={}){const y=s.ju(f.merge||f.mergeFields?2:0,e,n,u);s1("Data must be an object, but it was:",y,o);const A=dy(o,y);let C,x;if(f.merge)C=new Ei(y.fieldMask),x=y.fieldTransforms;else if(f.mergeFields){const R=[];for(const D of f.mergeFields){const k=wd(e,D,n);if(!y.contains(k))throw new tt(Ie.INVALID_ARGUMENT,`Field '${k}' is specified in your field mask but missing from your input data.`);py(R,k)||R.push(k)}C=new Ei(R),x=y.fieldTransforms.filter(D=>C.covers(D.field))}else C=null,x=y.fieldTransforms;return new tI(new ii(A),C,x)}class qc extends t1{_toFieldTransform(e){if(e.Lu!==2)throw e.Lu===1?e.Wu(`${this._methodName}() can only appear at the top level of your update data`):e.Wu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof qc}}function iI(s,e,n,o){const u=s.ju(1,e,n);s1("Data must be an object, but it was:",u,o);const f=[],y=ii.empty();Mo(o,(C,x)=>{const R=o1(e,C,n);x=vo(x);const D=u.Uu(R);if(x instanceof qc)f.push(R);else{const k=Qc(x,D);k!=null&&(f.push(R),y.set(R,k))}});const A=new Ei(f);return new cy(y,A,u.fieldTransforms)}function sI(s,e,n,o,u,f){const y=s.ju(1,e,n),A=[wd(e,o,n)],C=[u];if(f.length%2!=0)throw new tt(Ie.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let k=0;k<f.length;k+=2)A.push(wd(e,f[k])),C.push(f[k+1]);const x=[],R=ii.empty();for(let k=A.length-1;k>=0;--k)if(!py(x,A[k])){const j=A[k];let q=C[k];q=vo(q);const Q=y.Uu(j);if(q instanceof qc)x.push(j);else{const J=Qc(q,Q);J!=null&&(x.push(j),R.set(j,J))}}const D=new Ei(x);return new cy(R,D,y.fieldTransforms)}function Qc(s,e){if(gy(s=vo(s)))return s1("Unsupported field value:",e,s),dy(s,e);if(s instanceof t1)return function(o,u){if(!hy(u.Lu))throw u.Wu(`${o._methodName}() can only be used with update() and set()`);if(!u.path)throw u.Wu(`${o._methodName}() is not currently supported inside arrays`);const f=o._toFieldTransform(u);f&&u.fieldTransforms.push(f)}(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.Qu&&e.Lu!==4)throw e.Wu("Nested arrays are not supported");return function(o,u){const f=[];let y=0;for(const A of o){let C=Qc(A,u.Ku(y));C==null&&(C={nullValue:"NULL_VALUE"}),f.push(C),y++}return{arrayValue:{values:f}}}(s,e)}return function(o,u){if((o=vo(o))===null)return{nullValue:"NULL_VALUE"};if(typeof o=="number")return j_(u.serializer,o);if(typeof o=="boolean")return{booleanValue:o};if(typeof o=="string")return{stringValue:o};if(o instanceof Date){const f=$n.fromDate(o);return{timestampValue:vc(u.serializer,f)}}if(o instanceof $n){const f=new $n(o.seconds,1e3*Math.floor(o.nanoseconds/1e3));return{timestampValue:vc(u.serializer,f)}}if(o instanceof n1)return{geoPointValue:{latitude:o.latitude,longitude:o.longitude}};if(o instanceof Xa)return{bytesValue:M2(u.serializer,o._byteString)};if(o instanceof bi){const f=u.databaseId,y=o.firestore._databaseId;if(!y.isEqual(f))throw u.Wu(`Document reference is for database ${y.projectId}/${y.database} but should be for database ${f.projectId}/${f.database}`);return{referenceValue:Vd(o.firestore._databaseId||u.databaseId,o._key.path)}}if(o instanceof r1)return function(y,A){return{mapValue:{fields:{[a2]:{stringValue:l2},[Ec]:{arrayValue:{values:y.toArray().map(x=>{if(typeof x!="number")throw A.Wu("VectorValues must only contain numeric values.");return Ld(A.serializer,x)})}}}}}}(o,u);throw u.Wu(`Unsupported field value: ${Jd(o)}`)}(s,e)}function dy(s,e){const n={};return t2(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Mo(s,(o,u)=>{const f=Qc(u,e.qu(o));f!=null&&(n[o]=f)}),{mapValue:{fields:n}}}function gy(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof $n||s instanceof n1||s instanceof Xa||s instanceof bi||s instanceof t1||s instanceof r1)}function s1(s,e,n){if(!gy(n)||!function(u){return typeof u=="object"&&u!==null&&(Object.getPrototypeOf(u)===Object.prototype||Object.getPrototypeOf(u)===null)}(n)){const o=Jd(n);throw o==="an object"?e.Wu(s+" a custom object"):e.Wu(s+" "+o)}}function wd(s,e,n){if((e=vo(e))instanceof Xc)return e._internalPath;if(typeof e=="string")return o1(s,e);throw Rc("Field path arguments must be of type string or ",s,!1,void 0,n)}const oI=new RegExp("[~\\*/\\[\\]]");function o1(s,e,n){if(e.search(oI)>=0)throw Rc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,n);try{return new Xc(...e.split("."))._internalPath}catch{throw Rc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,n)}}function Rc(s,e,n,o,u){const f=o&&!o.isEmpty(),y=u!==void 0;let A=`Function ${e}() called with invalid data`;n&&(A+=" (via `toFirestore()`)"),A+=". ";let C="";return(f||y)&&(C+=" (found",f&&(C+=` in field ${o}`),y&&(C+=` in document ${u}`),C+=")"),new tt(Ie.INVALID_ARGUMENT,A+s+C)}function py(s,e){return s.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class my{constructor(e,n,o,u,f){this._firestore=e,this._userDataWriter=n,this._key=o,this._document=u,this._converter=f}get id(){return this._key.path.lastSegment()}get ref(){return new bi(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new aI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(yy("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class aI extends my{data(){return super.data()}}function yy(s,e){return typeof e=="string"?o1(s,e):e instanceof Xc?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lI(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new tt(Ie.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class uI{convertValue(e,n="none"){switch(Ro(e)){case 0:return null;case 1:return e.booleanValue;case 2:return zn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(So(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw lt()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const o={};return Mo(e,(u,f)=>{o[u]=this.convertValue(f,n)}),o}convertVectorValue(e){var n,o,u;const f=(u=(o=(n=e.fields)===null||n===void 0?void 0:n[Ec].arrayValue)===null||o===void 0?void 0:o.values)===null||u===void 0?void 0:u.map(y=>zn(y.doubleValue));return new r1(f)}convertGeoPoint(e){return new n1(zn(e.latitude),zn(e.longitude))}convertArray(e,n){return(e.values||[]).map(o=>this.convertValue(o,n))}convertServerTimestamp(e,n){switch(n){case"previous":const o=Lc(e);return o==null?null:this.convertValue(o,n);case"estimate":return this.convertTimestamp(zl(e));default:return null}}convertTimestamp(e){const n=To(e);return new $n(n.seconds,n.nanos)}convertDocumentKey(e,n){const o=xn.fromString(e);Yt(F2(o));const u=new jl(o.get(1),o.get(3)),f=new st(o.popFirst(5));return u.isEqual(n)||zs(`Document ${f} contains a document reference within a different database (${u.projectId}/${u.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),f}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cI(s,e,n){let o;return o=s?s.toFirestore(e):e,o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ec{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class hI extends my{constructor(e,n,o,u,f,y){super(e,n,o,u,y),this._firestore=e,this._firestoreImpl=e,this.metadata=f}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new cc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const o=this._document.data.field(yy("DocumentSnapshot.get",e));if(o!==null)return this._userDataWriter.convertValue(o,n.serverTimestamps)}}}class cc extends hI{data(e={}){return super.data(e)}}class fI{constructor(e,n,o,u){this._firestore=e,this._userDataWriter=n,this._snapshot=u,this.metadata=new ec(u.hasPendingWrites,u.fromCache),this.query=o}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(o=>{e.call(n,new cc(this._firestore,this._userDataWriter,o.key,o,new ec(this._snapshot.mutatedKeys.has(o.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new tt(Ie.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(u,f){if(u._snapshot.oldDocs.isEmpty()){let y=0;return u._snapshot.docChanges.map(A=>{const C=new cc(u._firestore,u._userDataWriter,A.doc.key,A.doc,new ec(u._snapshot.mutatedKeys.has(A.doc.key),u._snapshot.fromCache),u.query.converter);return A.doc,{type:"added",doc:C,oldIndex:-1,newIndex:y++}})}{let y=u._snapshot.oldDocs;return u._snapshot.docChanges.filter(A=>f||A.type!==3).map(A=>{const C=new cc(u._firestore,u._userDataWriter,A.doc.key,A.doc,new ec(u._snapshot.mutatedKeys.has(A.doc.key),u._snapshot.fromCache),u.query.converter);let x=-1,R=-1;return A.type!==0&&(x=y.indexOf(A.doc.key),y=y.delete(A.doc.key)),A.type!==1&&(y=y.add(A.doc),R=y.indexOf(A.doc.key)),{type:dI(A.type),doc:C,oldIndex:x,newIndex:R}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function dI(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return lt()}}class gI extends uI{constructor(e){super(),this.firestore=e}convertBytes(e){return new Xa(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new bi(this.firestore,null,n)}}function hc(s){s=ra(s,Yc);const e=ra(s.firestore,Jl),n=uy(e),o=new gI(e);return lI(s._query),Qv(n,s._query).then(u=>new fI(e,o,s,u))}function pI(s,e,n,...o){s=ra(s,bi);const u=ra(s.firestore,Jl),f=fy(u);let y;return y=typeof(e=vo(e))=="string"||e instanceof Xc?sI(f,"updateDoc",s._key,e,n,o):iI(f,"updateDoc",s._key,e),a1(u,[y.toMutation(s._key,Yi.exists(!0))])}function mI(s){return a1(ra(s.firestore,Jl),[new kd(s._key,Yi.none())])}function yI(s,e){const n=ra(s.firestore,Jl),o=e1(s),u=cI(s.converter,e);return a1(n,[rI(fy(s.firestore),"addDoc",o._key,u,s.converter!==null,{}).toMutation(o._key,Yi.exists(!1))]).then(()=>o)}function a1(s,e){return function(o,u){const f=new _o;return o.asyncQueue.enqueueAndForget(async()=>Lv(await Xv(o),u,f)),f.promise}(uy(s),e)}(function(e,n=!0){(function(u){Za=u})(VA),mc(new Fl("firestore",(o,{instanceIdentifier:u,options:f})=>{const y=o.getProvider("app").getImmediate(),A=new Jl(new t_(o.getProvider("auth-internal")),new i_(y,o.getProvider("app-check-internal")),function(x,R){if(!Object.prototype.hasOwnProperty.apply(x.options,["projectId"]))throw new tt(Ie.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new jl(x.options.projectId,R)}(y,u),y);return f=Object.assign({useFetchStreams:n},f),A._setSettings(f),A},"PUBLIC").setMultipleInstances(!0)),Va(np,rp,e),Va(np,rp,"esm2017")})();const wI={apiKey:"AIzaSyDzmRI40M38EDi-Jw1yGxRATtNUVi-7cKw",authDomain:"asistenciaqr25-6a704.firebaseapp.com",projectId:"asistenciaqr25-6a704",storageBucket:"asistenciaqr25-6a704.appspot.com",messagingSenderId:"204769454869",appId:"1:204769454869:web:559c21ed0043583139d71c",measurementId:"G-1NRVYW073B"},EI=jm(wI),ea=$v(EI);function xI(){const[s,e]=me.useState({nombre:"",apellido:"",telefono:"",edad:"",direccion:"",estadoCivil:"",bautizado:"",genero:""}),[n,o]=me.useState(""),u=me.useRef(null),[f,y]=me.useState(""),[A,C]=me.useState("");me.useEffect(()=>{const k=()=>{const j=localStorage.getItem("eventDate")||"";y(j)};return window.addEventListener("fechaEventoActualizada",k),k(),()=>{window.removeEventListener("fechaEventoActualizada",k)}},[]),me.useEffect(()=>{if(s.nombre&&s.apellido){const k="ID"+Date.now().toString(36)+Math.random().toString(36).substr(2,5);o(k);const j=`${s.nombre} ${s.apellido}-${k}`;yx.toCanvas(u.current,j,{width:200,margin:2,color:{dark:"#000",light:"#fff"}})}},[s.nombre,s.apellido]);const x=k=>{e({...s,[k.target.name]:k.target.value})},R=async()=>{if(Object.values(s).includes("")||s.bautizado===""){C("Por favor, complet todos los campos.");return}const j={...s,id:n,asistencia:!1,fechaEvento:f};try{await yI(kl(ea,"usuarios"),j),C(""),alert("Registrado correctamente en Firebase")}catch(q){console.error("Error al registrar en Firebase:",q),C("Hubo un error al registrar. Intent de nuevo.")}},D=()=>{const j=u.current.toDataURL("image/jpeg"),q=document.createElement("a");q.href=j,q.download=`${s.nombre}_${n}.jpg`,q.click()};return Ee.jsxs("div",{className:"registro-form",children:[Ee.jsx("h2",{children:"BIENVENIDOS "}),f&&Ee.jsxs("p",{children:[Ee.jsx("strong",{children:"Evento:"})," ",f]}),A&&Ee.jsx("p",{className:"error-message",children:A}),Ee.jsxs("div",{className:"form-field",children:[Ee.jsx("label",{children:"Nombre"}),Ee.jsx("input",{name:"nombre",value:s.nombre,onChange:x})]}),Ee.jsxs("div",{className:"form-field",children:[Ee.jsx("label",{children:"Apellido"}),Ee.jsx("input",{name:"apellido",value:s.apellido,onChange:x})]}),Ee.jsxs("div",{className:"form-field",children:[Ee.jsx("label",{children:"Telfono"}),Ee.jsx("input",{name:"telefono",value:s.telefono,onChange:x,type:"tel"})]}),Ee.jsxs("div",{className:"form-field",children:[Ee.jsx("label",{children:"Edad"}),Ee.jsx("input",{name:"edad",value:s.edad,onChange:x,type:"number"})]}),Ee.jsxs("div",{className:"form-field",children:[Ee.jsx("label",{children:"Direccin"}),Ee.jsx("input",{name:"direccion",value:s.direccion,onChange:x})]}),Ee.jsxs("div",{className:"form-field",children:[Ee.jsx("label",{children:"Estado civil"}),Ee.jsx("input",{name:"estadoCivil",value:s.estadoCivil,onChange:x})]}),Ee.jsxs("div",{className:"form-field",children:[Ee.jsx("label",{children:"Est bautizado?"}),Ee.jsxs("div",{children:[Ee.jsxs("label",{children:[Ee.jsx("input",{type:"radio",name:"bautizado",value:"S",checked:s.bautizado==="S",onChange:x})," S"]}),Ee.jsxs("label",{children:[Ee.jsx("input",{type:"radio",name:"bautizado",value:"No",checked:s.bautizado==="No",onChange:x})," No"]})]})]}),Ee.jsxs("div",{className:"form-field",children:[Ee.jsx("label",{children:"Gnero"}),Ee.jsxs("div",{children:[Ee.jsxs("label",{children:[Ee.jsx("input",{type:"radio",name:"genero",value:"Mujer",checked:s.genero==="Mujer",onChange:x})," Mujer"]}),Ee.jsxs("label",{children:[Ee.jsx("input",{type:"radio",name:"genero",value:"Hombre",checked:s.genero==="Hombre",onChange:x})," Hombre"]})]})]}),Ee.jsx("button",{onClick:R,className:"btn-submit",children:"Registrar"}),n&&Ee.jsxs("div",{className:"qr-preview",children:[Ee.jsx("canvas",{ref:u}),Ee.jsx("button",{onClick:D,className:"btn-download",children:"Descargar QR"})]})]})}function AI(){const[s,e]=me.useState([]),[n,o]=me.useState("todos"),[u,f]=me.useState("");me.useEffect(()=>{(async()=>{const j=(await hc(kl(ea,"usuarios"))).docs.map(Q=>({...Q.data(),firebaseId:Q.id})),q=await hc(kl(ea,"configuraciones"));q.empty||f(q.docs[0].data().fechaEvento),e(j)})()},[]);const y=async()=>{if(window.confirm("Ests seguro de borrar todos los registros?")){const k=(await hc(kl(ea,"usuarios"))).docs.map(j=>mI(e1(ea,"usuarios",j.id)));await Promise.all(k),e([])}},A=s.filter(D=>n==="todos"||D.genero===n),C=s.filter(D=>D.asistencia).length,x=s.length-C,R=D=>{const k=`
      Nombre: ${D.nombre} ${D.apellido}
      Telfono: ${D.telefono}
      Edad: ${D.edad}
      Direccin: ${D.direccion}
      Estado Civil: ${D.estadoCivil}
      Bautizado: ${D.bautizado}
      Gnero: ${D.genero}
      ID: ${D.id}
      Asistencia: ${D.asistencia?" Presente":" Ausente"}
      Fecha del Evento: ${u||"No disponible"}
    `;navigator.clipboard.writeText(k).then(()=>{alert("Informacin copiada al portapapeles")})};return Ee.jsxs("div",{className:"lista-container",children:[Ee.jsx("h2",{children:"Lista de Registros"}),Ee.jsxs("div",{className:"filtros-genero",children:[Ee.jsx("button",{onClick:()=>o("todos"),className:n==="todos"?"active":"",children:"Todos"}),Ee.jsx("button",{onClick:()=>o("Mujer"),className:n==="Mujer"?"active":"",children:"Mujeres"}),Ee.jsx("button",{onClick:()=>o("Hombre"),className:n==="Hombre"?"active":"",children:"Hombres"})]}),Ee.jsxs("div",{className:"resumen",children:[Ee.jsxs("span",{children:[" Presentes: ",C]}),Ee.jsxs("span",{children:[" Ausentes: ",x]})]}),Ee.jsx("button",{onClick:y,className:"btn-borrar",children:"Borrar todos"}),Ee.jsx("div",{className:"tarjetas-usuarios",children:A.map((D,k)=>Ee.jsxs("div",{className:`tarjeta ${D.asistencia?"asistio":"no-asistio"}`,children:[Ee.jsx("div",{className:"copiar-info",onClick:()=>R(D),children:Ee.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24",fill:"#4CAF50",className:"copiar-icono",title:"Copiar informacin",children:Ee.jsx("path",{d:"M17 3H7c-1.1 0-1.99.9-1.99 2L5 17c0 1.1.89 2 1.99 2h10c1.1 0 1.99-.9 1.99-2V5c0-1.1-.89-2-1.99-2zm0 14H7V5h10v12z"})})}),Ee.jsx("div",{className:"fecha-evento",children:u&&Ee.jsxs("strong",{children:["Evento: ",u]})}),Ee.jsxs("h3",{children:[D.nombre," ",D.apellido]}),Ee.jsxs("p",{children:[Ee.jsx("strong",{children:"Telfono:"})," ",D.telefono]}),Ee.jsxs("p",{children:[Ee.jsx("strong",{children:"Edad:"})," ",D.edad]}),Ee.jsxs("p",{children:[Ee.jsx("strong",{children:"Direccin:"})," ",D.direccion]}),Ee.jsxs("p",{children:[Ee.jsx("strong",{children:"Estado civil:"})," ",D.estadoCivil]}),Ee.jsxs("p",{children:[Ee.jsx("strong",{children:"Bautizado:"})," ",D.bautizado]}),Ee.jsxs("p",{children:[Ee.jsx("strong",{children:"Gnero:"})," ",D.genero]}),Ee.jsxs("p",{children:[Ee.jsx("strong",{children:"ID:"})," ",D.id]}),Ee.jsxs("p",{children:[Ee.jsx("strong",{children:"Asistencia:"})," ",D.asistencia?"/ Presente":"/ Ausente"]})]},k))})]})}var He;(function(s){s[s.QR_CODE=0]="QR_CODE",s[s.AZTEC=1]="AZTEC",s[s.CODABAR=2]="CODABAR",s[s.CODE_39=3]="CODE_39",s[s.CODE_93=4]="CODE_93",s[s.CODE_128=5]="CODE_128",s[s.DATA_MATRIX=6]="DATA_MATRIX",s[s.MAXICODE=7]="MAXICODE",s[s.ITF=8]="ITF",s[s.EAN_13=9]="EAN_13",s[s.EAN_8=10]="EAN_8",s[s.PDF_417=11]="PDF_417",s[s.RSS_14=12]="RSS_14",s[s.RSS_EXPANDED=13]="RSS_EXPANDED",s[s.UPC_A=14]="UPC_A",s[s.UPC_E=15]="UPC_E",s[s.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(He||(He={}));var Zp=new Map([[He.QR_CODE,"QR_CODE"],[He.AZTEC,"AZTEC"],[He.CODABAR,"CODABAR"],[He.CODE_39,"CODE_39"],[He.CODE_93,"CODE_93"],[He.CODE_128,"CODE_128"],[He.DATA_MATRIX,"DATA_MATRIX"],[He.MAXICODE,"MAXICODE"],[He.ITF,"ITF"],[He.EAN_13,"EAN_13"],[He.EAN_8,"EAN_8"],[He.PDF_417,"PDF_417"],[He.RSS_14,"RSS_14"],[He.RSS_EXPANDED,"RSS_EXPANDED"],[He.UPC_A,"UPC_A"],[He.UPC_E,"UPC_E"],[He.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),$p;(function(s){s[s.UNKNOWN=0]="UNKNOWN",s[s.URL=1]="URL"})($p||($p={}));function _I(s){return Object.values(He).includes(s)}var bo;(function(s){s[s.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",s[s.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(bo||(bo={}));var Gi=function(){function s(){}return s.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",s.SCAN_DEFAULT_FPS=2,s.DEFAULT_DISABLE_FLIP=!1,s.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,s.DEFAULT_SUPPORTED_SCAN_TYPE=[bo.SCAN_TYPE_CAMERA,bo.SCAN_TYPE_FILE],s}(),wy=function(){function s(e,n){this.format=e,this.formatName=n}return s.prototype.toString=function(){return this.formatName},s.create=function(e){if(!Zp.has(e))throw"".concat(e," not in html5QrcodeSupportedFormatsTextMap");return new s(e,Zp.get(e))},s}(),Jp=function(){function s(){}return s.createFromText=function(e){var n={text:e};return{decodedText:e,result:n}},s.createFromQrcodeResult=function(e){return{decodedText:e.text,result:e}},s}(),Ed;(function(s){s[s.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",s[s.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",s[s.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(Ed||(Ed={}));var Ey=function(){function s(){}return s.createFrom=function(e){return{errorMessage:e,type:Ed.UNKWOWN_ERROR}},s}(),xy=function(){function s(e){this.verbose=e}return s.prototype.log=function(e){this.verbose&&console.log(e)},s.prototype.warn=function(e){this.verbose&&console.warn(e)},s.prototype.logError=function(e,n){(this.verbose||n===!0)&&console.error(e)},s.prototype.logErrors=function(e){if(e.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(e)},s}();function us(s){return typeof s>"u"||s===null}function CI(s,e,n){return s>n?n:s<e?e:s}var Fa=function(){function s(){}return s.codeParseError=function(e){return"QR code parse error, error = ".concat(e)},s.errorGettingUserMedia=function(e){return"Error getting userMedia, error = ".concat(e)},s.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},s.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},s.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},s.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},s.scannerPaused=function(){return"Scanner paused"},s}(),Qt=function(){function s(){}return s.scanningStatus=function(){return"Scanning"},s.idleStatus=function(){return"Idle"},s.errorStatus=function(){return"Error"},s.permissionStatus=function(){return"Permission"},s.noCameraFoundErrorStatus=function(){return"No Cameras"},s.lastMatch=function(e){return"Last Match: ".concat(e)},s.codeScannerTitle=function(){return"Code Scanner"},s.cameraPermissionTitle=function(){return"Request Camera Permissions"},s.cameraPermissionRequesting=function(){return"Requesting camera permissions..."},s.noCameraFound=function(){return"No camera found"},s.scanButtonStopScanningText=function(){return"Stop Scanning"},s.scanButtonStartScanningText=function(){return"Start Scanning"},s.torchOnButton=function(){return"Switch On Torch"},s.torchOffButton=function(){return"Switch Off Torch"},s.torchOnFailedMessage=function(){return"Failed to turn on torch"},s.torchOffFailedMessage=function(){return"Failed to turn off torch"},s.scanButtonScanningStarting=function(){return"Launching Camera..."},s.textIfCameraScanSelected=function(){return"Scan an Image File"},s.textIfFileScanSelected=function(){return"Scan using camera directly"},s.selectCamera=function(){return"Select Camera"},s.fileSelectionChooseImage=function(){return"Choose Image"},s.fileSelectionChooseAnother=function(){return"Choose Another"},s.fileSelectionNoImageSelected=function(){return"No image choosen"},s.anonymousCameraPrefix=function(){return"Anonymous Camera"},s.dragAndDropMessage=function(){return"Or drop an image to scan"},s.dragAndDropMessageOnlyImages=function(){return"Or drop an image to scan (other files not supported)"},s.zoom=function(){return"zoom"},s.loadingImage=function(){return"Loading image..."},s.cameraScanAltText=function(){return"Camera based scan"},s.fileScanAltText=function(){return"Fule based scan"},s}(),em=function(){function s(){}return s.poweredBy=function(){return"Powered by "},s.reportIssues=function(){return"Report issues"},s}(),Ay=function(){function s(){}return s.isMediaStreamConstraintsValid=function(e,n){if(typeof e!="object"){var o=typeof e;return n.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(o,"."),!0),!1}for(var u=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],f=new Set(u),y=Object.keys(e),A=0,C=y;A<C.length;A++){var x=C[A];if(f.has(x))return n.logError("".concat(x," is not supported videoConstaints."),!0),!1}return!0},s}(),bl={exports:{}},vI=bl.exports,tm;function II(){return tm||(tm=1,function(s,e){(function(n,o){o(e)})(vI,function(n){function o(b){return b==null}var u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,t){b.__proto__=t}||function(b,t){for(var i in t)t.hasOwnProperty(i)&&(b[i]=t[i])};function f(b,t){u(b,t);function i(){this.constructor=b}b.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}function y(b,t){var i=Object.setPrototypeOf;i?i(b,t):b.__proto__=t}function A(b,t){t===void 0&&(t=b.constructor);var i=Error.captureStackTrace;i&&i(b,t)}var C=function(b){f(t,b);function t(i){var a=this.constructor,c=b.call(this,i)||this;return Object.defineProperty(c,"name",{value:a.name,enumerable:!1}),y(c,a.prototype),A(c),c}return t}(Error);class x extends C{constructor(t=void 0){super(t),this.message=t}getKind(){return this.constructor.kind}}x.kind="Exception";class R extends x{}R.kind="ArgumentException";class D extends x{}D.kind="IllegalArgumentException";class k{constructor(t){if(this.binarizer=t,t===null)throw new D("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(t,i){return this.binarizer.getBlackRow(t,i)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(t,i,a,c){const h=this.binarizer.getLuminanceSource().crop(t,i,a,c);return new k(this.binarizer.createBinarizer(h))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const t=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new k(this.binarizer.createBinarizer(t))}rotateCounterClockwise45(){const t=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new k(this.binarizer.createBinarizer(t))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class j extends x{static getChecksumInstance(){return new j}}j.kind="ChecksumException";class q{constructor(t){this.source=t}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class Q{static arraycopy(t,i,a,c,h){for(;h--;)a[c++]=t[i++]}static currentTimeMillis(){return Date.now()}}class J extends x{}J.kind="IndexOutOfBoundsException";class ie extends J{constructor(t=void 0,i=void 0){super(i),this.index=t,this.message=i}}ie.kind="ArrayIndexOutOfBoundsException";class he{static fill(t,i){for(let a=0,c=t.length;a<c;a++)t[a]=i}static fillWithin(t,i,a,c){he.rangeCheck(t.length,i,a);for(let h=i;h<a;h++)t[h]=c}static rangeCheck(t,i,a){if(i>a)throw new D("fromIndex("+i+") > toIndex("+a+")");if(i<0)throw new ie(i);if(a>t)throw new ie(a)}static asList(...t){return t}static create(t,i,a){return Array.from({length:t}).map(h=>Array.from({length:i}).fill(a))}static createInt32Array(t,i,a){return Array.from({length:t}).map(h=>Int32Array.from({length:i}).fill(a))}static equals(t,i){if(!t||!i||!t.length||!i.length||t.length!==i.length)return!1;for(let a=0,c=t.length;a<c;a++)if(t[a]!==i[a])return!1;return!0}static hashCode(t){if(t===null)return 0;let i=1;for(const a of t)i=31*i+a;return i}static fillUint8Array(t,i){for(let a=0;a!==t.length;a++)t[a]=i}static copyOf(t,i){return t.slice(0,i)}static copyOfUint8Array(t,i){if(t.length<=i){const a=new Uint8Array(i);return a.set(t),a}return t.slice(0,i)}static copyOfRange(t,i,a){const c=a-i,h=new Int32Array(c);return Q.arraycopy(t,i,h,0,c),h}static binarySearch(t,i,a){a===void 0&&(a=he.numberComparator);let c=0,h=t.length-1;for(;c<=h;){const d=h+c>>1,p=a(i,t[d]);if(p>0)c=d+1;else if(p<0)h=d-1;else return d}return-c-1}static numberComparator(t,i){return t-i}}class te{static numberOfTrailingZeros(t){let i;if(t===0)return 32;let a=31;return i=t<<16,i!==0&&(a-=16,t=i),i=t<<8,i!==0&&(a-=8,t=i),i=t<<4,i!==0&&(a-=4,t=i),i=t<<2,i!==0&&(a-=2,t=i),a-(t<<1>>>31)}static numberOfLeadingZeros(t){if(t===0)return 32;let i=1;return t>>>16||(i+=16,t<<=16),t>>>24||(i+=8,t<<=8),t>>>28||(i+=4,t<<=4),t>>>30||(i+=2,t<<=2),i-=t>>>31,i}static toHexString(t){return t.toString(16)}static toBinaryString(t){return String(parseInt(String(t),2))}static bitCount(t){return t=t-(t>>>1&1431655765),t=(t&858993459)+(t>>>2&858993459),t=t+(t>>>4)&252645135,t=t+(t>>>8),t=t+(t>>>16),t&63}static truncDivision(t,i){return Math.trunc(t/i)}static parseInt(t,i=void 0){return parseInt(t,i)}}te.MIN_VALUE_32_BITS=-2147483648,te.MAX_VALUE=Number.MAX_SAFE_INTEGER;class pe{constructor(t,i){t===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=t,i==null?this.bits=pe.makeArray(t):this.bits=i)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(t){if(t>this.bits.length*32){const i=pe.makeArray(t);Q.arraycopy(this.bits,0,i,0,this.bits.length),this.bits=i}}get(t){return(this.bits[Math.floor(t/32)]&1<<(t&31))!==0}set(t){this.bits[Math.floor(t/32)]|=1<<(t&31)}flip(t){this.bits[Math.floor(t/32)]^=1<<(t&31)}getNextSet(t){const i=this.size;if(t>=i)return i;const a=this.bits;let c=Math.floor(t/32),h=a[c];h&=~((1<<(t&31))-1);const d=a.length;for(;h===0;){if(++c===d)return i;h=a[c]}const p=c*32+te.numberOfTrailingZeros(h);return p>i?i:p}getNextUnset(t){const i=this.size;if(t>=i)return i;const a=this.bits;let c=Math.floor(t/32),h=~a[c];h&=~((1<<(t&31))-1);const d=a.length;for(;h===0;){if(++c===d)return i;h=~a[c]}const p=c*32+te.numberOfTrailingZeros(h);return p>i?i:p}setBulk(t,i){this.bits[Math.floor(t/32)]=i}setRange(t,i){if(i<t||t<0||i>this.size)throw new D;if(i===t)return;i--;const a=Math.floor(t/32),c=Math.floor(i/32),h=this.bits;for(let d=a;d<=c;d++){const p=d>a?0:t&31,_=(2<<(d<c?31:i&31))-(1<<p);h[d]|=_}}clear(){const t=this.bits.length,i=this.bits;for(let a=0;a<t;a++)i[a]=0}isRange(t,i,a){if(i<t||t<0||i>this.size)throw new D;if(i===t)return!0;i--;const c=Math.floor(t/32),h=Math.floor(i/32),d=this.bits;for(let p=c;p<=h;p++){const E=p>c?0:t&31,S=(2<<(p<h?31:i&31))-(1<<E)&4294967295;if((d[p]&S)!==(a?S:0))return!1}return!0}appendBit(t){this.ensureCapacity(this.size+1),t&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(t,i){if(i<0||i>32)throw new D("Num bits must be between 0 and 32");this.ensureCapacity(this.size+i);for(let a=i;a>0;a--)this.appendBit((t>>a-1&1)===1)}appendBitArray(t){const i=t.size;this.ensureCapacity(this.size+i);for(let a=0;a<i;a++)this.appendBit(t.get(a))}xor(t){if(this.size!==t.size)throw new D("Sizes don't match");const i=this.bits;for(let a=0,c=i.length;a<c;a++)i[a]^=t.bits[a]}toBytes(t,i,a,c){for(let h=0;h<c;h++){let d=0;for(let p=0;p<8;p++)this.get(t)&&(d|=1<<7-p),t++;i[a+h]=d}}getBitArray(){return this.bits}reverse(){const t=new Int32Array(this.bits.length),i=Math.floor((this.size-1)/32),a=i+1,c=this.bits;for(let h=0;h<a;h++){let d=c[h];d=d>>1&1431655765|(d&1431655765)<<1,d=d>>2&858993459|(d&858993459)<<2,d=d>>4&252645135|(d&252645135)<<4,d=d>>8&16711935|(d&16711935)<<8,d=d>>16&65535|(d&65535)<<16,t[i-h]=d}if(this.size!==a*32){const h=a*32-this.size;let d=t[0]>>>h;for(let p=1;p<a;p++){const E=t[p];d|=E<<32-h,t[p-1]=d,d=E>>>h}t[a-1]=d}this.bits=t}static makeArray(t){return new Int32Array(Math.floor((t+31)/32))}equals(t){if(!(t instanceof pe))return!1;const i=t;return this.size===i.size&&he.equals(this.bits,i.bits)}hashCode(){return 31*this.size+he.hashCode(this.bits)}toString(){let t="";for(let i=0,a=this.size;i<a;i++)(i&7)===0&&(t+=" "),t+=this.get(i)?"X":".";return t}clone(){return new pe(this.size,this.bits.slice())}}var Ge;(function(b){b[b.OTHER=0]="OTHER",b[b.PURE_BARCODE=1]="PURE_BARCODE",b[b.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",b[b.TRY_HARDER=3]="TRY_HARDER",b[b.CHARACTER_SET=4]="CHARACTER_SET",b[b.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",b[b.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",b[b.ASSUME_GS1=7]="ASSUME_GS1",b[b.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",b[b.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",b[b.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(Ge||(Ge={}));var we=Ge;class F extends x{static getFormatInstance(){return new F}}F.kind="FormatException";var B;(function(b){b[b.Cp437=0]="Cp437",b[b.ISO8859_1=1]="ISO8859_1",b[b.ISO8859_2=2]="ISO8859_2",b[b.ISO8859_3=3]="ISO8859_3",b[b.ISO8859_4=4]="ISO8859_4",b[b.ISO8859_5=5]="ISO8859_5",b[b.ISO8859_6=6]="ISO8859_6",b[b.ISO8859_7=7]="ISO8859_7",b[b.ISO8859_8=8]="ISO8859_8",b[b.ISO8859_9=9]="ISO8859_9",b[b.ISO8859_10=10]="ISO8859_10",b[b.ISO8859_11=11]="ISO8859_11",b[b.ISO8859_13=12]="ISO8859_13",b[b.ISO8859_14=13]="ISO8859_14",b[b.ISO8859_15=14]="ISO8859_15",b[b.ISO8859_16=15]="ISO8859_16",b[b.SJIS=16]="SJIS",b[b.Cp1250=17]="Cp1250",b[b.Cp1251=18]="Cp1251",b[b.Cp1252=19]="Cp1252",b[b.Cp1256=20]="Cp1256",b[b.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",b[b.UTF8=22]="UTF8",b[b.ASCII=23]="ASCII",b[b.Big5=24]="Big5",b[b.GB18030=25]="GB18030",b[b.EUC_KR=26]="EUC_KR"})(B||(B={}));class P{constructor(t,i,a,...c){this.valueIdentifier=t,this.name=a,typeof i=="number"?this.values=Int32Array.from([i]):this.values=i,this.otherEncodingNames=c,P.VALUE_IDENTIFIER_TO_ECI.set(t,this),P.NAME_TO_ECI.set(a,this);const h=this.values;for(let d=0,p=h.length;d!==p;d++){const E=h[d];P.VALUES_TO_ECI.set(E,this)}for(const d of c)P.NAME_TO_ECI.set(d,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(t){if(t<0||t>=900)throw new F("incorect value");const i=P.VALUES_TO_ECI.get(t);if(i===void 0)throw new F("incorect value");return i}static getCharacterSetECIByName(t){const i=P.NAME_TO_ECI.get(t);if(i===void 0)throw new F("incorect value");return i}equals(t){if(!(t instanceof P))return!1;const i=t;return this.getName()===i.getName()}}P.VALUE_IDENTIFIER_TO_ECI=new Map,P.VALUES_TO_ECI=new Map,P.NAME_TO_ECI=new Map,P.Cp437=new P(B.Cp437,Int32Array.from([0,2]),"Cp437"),P.ISO8859_1=new P(B.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),P.ISO8859_2=new P(B.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),P.ISO8859_3=new P(B.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),P.ISO8859_4=new P(B.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),P.ISO8859_5=new P(B.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),P.ISO8859_6=new P(B.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),P.ISO8859_7=new P(B.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),P.ISO8859_8=new P(B.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),P.ISO8859_9=new P(B.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),P.ISO8859_10=new P(B.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),P.ISO8859_11=new P(B.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),P.ISO8859_13=new P(B.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),P.ISO8859_14=new P(B.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),P.ISO8859_15=new P(B.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),P.ISO8859_16=new P(B.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),P.SJIS=new P(B.SJIS,20,"SJIS","Shift_JIS"),P.Cp1250=new P(B.Cp1250,21,"Cp1250","windows-1250"),P.Cp1251=new P(B.Cp1251,22,"Cp1251","windows-1251"),P.Cp1252=new P(B.Cp1252,23,"Cp1252","windows-1252"),P.Cp1256=new P(B.Cp1256,24,"Cp1256","windows-1256"),P.UnicodeBigUnmarked=new P(B.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),P.UTF8=new P(B.UTF8,26,"UTF8","UTF-8"),P.ASCII=new P(B.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),P.Big5=new P(B.Big5,28,"Big5"),P.GB18030=new P(B.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),P.EUC_KR=new P(B.EUC_KR,30,"EUC_KR","EUC-KR");class G extends x{}G.kind="UnsupportedOperationException";class Y{static decode(t,i){const a=this.encodingName(i);return this.customDecoder?this.customDecoder(t,a):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(a)?this.decodeFallback(t,a):new TextDecoder(a).decode(t)}static shouldDecodeOnFallback(t){return!Y.isBrowser()&&t==="ISO-8859-1"}static encode(t,i){const a=this.encodingName(i);return this.customEncoder?this.customEncoder(t,a):typeof TextEncoder>"u"?this.encodeFallback(t):new TextEncoder().encode(t)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(t){return typeof t=="string"?t:t.getName()}static encodingCharacterSet(t){return t instanceof P?t:P.getCharacterSetECIByName(t)}static decodeFallback(t,i){const a=this.encodingCharacterSet(i);if(Y.isDecodeFallbackSupported(a)){let c="";for(let h=0,d=t.length;h<d;h++){let p=t[h].toString(16);p.length<2&&(p="0"+p),c+="%"+p}return decodeURIComponent(c)}if(a.equals(P.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(t.buffer));throw new G(`Encoding ${this.encodingName(i)} not supported by fallback.`)}static isDecodeFallbackSupported(t){return t.equals(P.UTF8)||t.equals(P.ISO8859_1)||t.equals(P.ASCII)}static encodeFallback(t){const a=btoa(unescape(encodeURIComponent(t))).split(""),c=[];for(let h=0;h<a.length;h++)c.push(a[h].charCodeAt(0));return new Uint8Array(c)}}class W{static castAsNonUtf8Char(t,i=null){const a=i?i.getName():this.ISO88591;return Y.decode(new Uint8Array([t]),a)}static guessEncoding(t,i){if(i!=null&&i.get(we.CHARACTER_SET)!==void 0)return i.get(we.CHARACTER_SET).toString();const a=t.length;let c=!0,h=!0,d=!0,p=0,E=0,_=0,S=0,M=0,L=0,H=0,K=0,$=0,re=0,fe=0;const Se=t.length>3&&t[0]===239&&t[1]===187&&t[2]===191;for(let Re=0;Re<a&&(c||h||d);Re++){const Ce=t[Re]&255;d&&(p>0?(Ce&128)===0?d=!1:p--:(Ce&128)!==0&&((Ce&64)===0?d=!1:(p++,(Ce&32)===0?E++:(p++,(Ce&16)===0?_++:(p++,(Ce&8)===0?S++:d=!1))))),c&&(Ce>127&&Ce<160?c=!1:Ce>159&&(Ce<192||Ce===215||Ce===247)&&fe++),h&&(M>0?Ce<64||Ce===127||Ce>252?h=!1:M--:Ce===128||Ce===160||Ce>239?h=!1:Ce>160&&Ce<224?(L++,K=0,H++,H>$&&($=H)):Ce>127?(M++,H=0,K++,K>re&&(re=K)):(H=0,K=0))}return d&&p>0&&(d=!1),h&&M>0&&(h=!1),d&&(Se||E+_+S>0)?W.UTF8:h&&(W.ASSUME_SHIFT_JIS||$>=3||re>=3)?W.SHIFT_JIS:c&&h?$===2&&L===2||fe*10>=a?W.SHIFT_JIS:W.ISO88591:c?W.ISO88591:h?W.SHIFT_JIS:d?W.UTF8:W.PLATFORM_DEFAULT_ENCODING}static format(t,...i){let a=-1;function c(d,p,E,_,S,M){if(d==="%%")return"%";if(i[++a]===void 0)return;d=_?parseInt(_.substr(1)):void 0;let L=S?parseInt(S.substr(1)):void 0,H;switch(M){case"s":H=i[a];break;case"c":H=i[a][0];break;case"f":H=parseFloat(i[a]).toFixed(d);break;case"p":H=parseFloat(i[a]).toPrecision(d);break;case"e":H=parseFloat(i[a]).toExponential(d);break;case"x":H=parseInt(i[a]).toString(L||16);break;case"d":H=parseFloat(parseInt(i[a],L||10).toPrecision(d)).toFixed(0);break}H=typeof H=="object"?JSON.stringify(H):(+H).toString(L);let K=parseInt(E),$=E&&E[0]+""=="0"?"0":" ";for(;H.length<K;)H=p!==void 0?H+$:$+H;return H}let h=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return t.replace(h,c)}static getBytes(t,i){return Y.encode(t,i)}static getCharCode(t,i=0){return t.charCodeAt(i)}static getCharAt(t){return String.fromCharCode(t)}}W.SHIFT_JIS=P.SJIS.getName(),W.GB2312="GB2312",W.ISO88591=P.ISO8859_1.getName(),W.EUC_JP="EUC_JP",W.UTF8=P.UTF8.getName(),W.PLATFORM_DEFAULT_ENCODING=W.UTF8,W.ASSUME_SHIFT_JIS=!1;class U{constructor(t=""){this.value=t}enableDecoding(t){return this.encoding=t,this}append(t){return typeof t=="string"?this.value+=t.toString():this.encoding?this.value+=W.castAsNonUtf8Char(t,this.encoding):this.value+=String.fromCharCode(t),this}appendChars(t,i,a){for(let c=i;i<i+a;c++)this.append(t[c]);return this}length(){return this.value.length}charAt(t){return this.value.charAt(t)}deleteCharAt(t){this.value=this.value.substr(0,t)+this.value.substring(t+1)}setCharAt(t,i){this.value=this.value.substr(0,t)+i+this.value.substr(t+1)}substring(t,i){return this.value.substring(t,i)}setLengthToZero(){this.value=""}toString(){return this.value}insert(t,i){this.value=this.value.substr(0,t)+i+this.value.substr(t+i.length)}}class Le{constructor(t,i,a,c){if(this.width=t,this.height=i,this.rowSize=a,this.bits=c,i==null&&(i=t),this.height=i,t<1||i<1)throw new D("Both dimensions must be greater than 0");a==null&&(a=Math.floor((t+31)/32)),this.rowSize=a,c==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(t){const i=t.length,a=t[0].length,c=new Le(a,i);for(let h=0;h<i;h++){const d=t[h];for(let p=0;p<a;p++)d[p]&&c.set(p,h)}return c}static parseFromString(t,i,a){if(t===null)throw new D("stringRepresentation cannot be null");const c=new Array(t.length);let h=0,d=0,p=-1,E=0,_=0;for(;_<t.length;)if(t.charAt(_)===`
`||t.charAt(_)==="\r"){if(h>d){if(p===-1)p=h-d;else if(h-d!==p)throw new D("row lengths do not match");d=h,E++}_++}else if(t.substring(_,_+i.length)===i)_+=i.length,c[h]=!0,h++;else if(t.substring(_,_+a.length)===a)_+=a.length,c[h]=!1,h++;else throw new D("illegal character encountered: "+t.substring(_));if(h>d){if(p===-1)p=h-d;else if(h-d!==p)throw new D("row lengths do not match");E++}const S=new Le(p,E);for(let M=0;M<h;M++)c[M]&&S.set(Math.floor(M%p),Math.floor(M/p));return S}get(t,i){const a=i*this.rowSize+Math.floor(t/32);return(this.bits[a]>>>(t&31)&1)!==0}set(t,i){const a=i*this.rowSize+Math.floor(t/32);this.bits[a]|=1<<(t&31)&4294967295}unset(t,i){const a=i*this.rowSize+Math.floor(t/32);this.bits[a]&=~(1<<(t&31)&4294967295)}flip(t,i){const a=i*this.rowSize+Math.floor(t/32);this.bits[a]^=1<<(t&31)&4294967295}xor(t){if(this.width!==t.getWidth()||this.height!==t.getHeight()||this.rowSize!==t.getRowSize())throw new D("input matrix dimensions do not match");const i=new pe(Math.floor(this.width/32)+1),a=this.rowSize,c=this.bits;for(let h=0,d=this.height;h<d;h++){const p=h*a,E=t.getRow(h,i).getBitArray();for(let _=0;_<a;_++)c[p+_]^=E[_]}}clear(){const t=this.bits,i=t.length;for(let a=0;a<i;a++)t[a]=0}setRegion(t,i,a,c){if(i<0||t<0)throw new D("Left and top must be nonnegative");if(c<1||a<1)throw new D("Height and width must be at least 1");const h=t+a,d=i+c;if(d>this.height||h>this.width)throw new D("The region must fit inside the matrix");const p=this.rowSize,E=this.bits;for(let _=i;_<d;_++){const S=_*p;for(let M=t;M<h;M++)E[S+Math.floor(M/32)]|=1<<(M&31)&4294967295}}getRow(t,i){i==null||i.getSize()<this.width?i=new pe(this.width):i.clear();const a=this.rowSize,c=this.bits,h=t*a;for(let d=0;d<a;d++)i.setBulk(d*32,c[h+d]);return i}setRow(t,i){Q.arraycopy(i.getBitArray(),0,this.bits,t*this.rowSize,this.rowSize)}rotate180(){const t=this.getWidth(),i=this.getHeight();let a=new pe(t),c=new pe(t);for(let h=0,d=Math.floor((i+1)/2);h<d;h++)a=this.getRow(h,a),c=this.getRow(i-1-h,c),a.reverse(),c.reverse(),this.setRow(h,c),this.setRow(i-1-h,a)}getEnclosingRectangle(){const t=this.width,i=this.height,a=this.rowSize,c=this.bits;let h=t,d=i,p=-1,E=-1;for(let _=0;_<i;_++)for(let S=0;S<a;S++){const M=c[_*a+S];if(M!==0){if(_<d&&(d=_),_>E&&(E=_),S*32<h){let L=0;for(;(M<<31-L&4294967295)===0;)L++;S*32+L<h&&(h=S*32+L)}if(S*32+31>p){let L=31;for(;!(M>>>L);)L--;S*32+L>p&&(p=S*32+L)}}}return p<h||E<d?null:Int32Array.from([h,d,p-h+1,E-d+1])}getTopLeftOnBit(){const t=this.rowSize,i=this.bits;let a=0;for(;a<i.length&&i[a]===0;)a++;if(a===i.length)return null;const c=a/t;let h=a%t*32;const d=i[a];let p=0;for(;(d<<31-p&4294967295)===0;)p++;return h+=p,Int32Array.from([h,c])}getBottomRightOnBit(){const t=this.rowSize,i=this.bits;let a=i.length-1;for(;a>=0&&i[a]===0;)a--;if(a<0)return null;const c=Math.floor(a/t);let h=Math.floor(a%t)*32;const d=i[a];let p=31;for(;!(d>>>p);)p--;return h+=p,Int32Array.from([h,c])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(t){if(!(t instanceof Le))return!1;const i=t;return this.width===i.width&&this.height===i.height&&this.rowSize===i.rowSize&&he.equals(this.bits,i.bits)}hashCode(){let t=this.width;return t=31*t+this.width,t=31*t+this.height,t=31*t+this.rowSize,t=31*t+he.hashCode(this.bits),t}toString(t="X ",i="  ",a=`
`){return this.buildToString(t,i,a)}buildToString(t,i,a){let c=new U;for(let h=0,d=this.height;h<d;h++){for(let p=0,E=this.width;p<E;p++)c.append(this.get(p,h)?t:i);c.append(a)}return c.toString()}clone(){return new Le(this.width,this.height,this.rowSize,this.bits.slice())}}class ue extends x{static getNotFoundInstance(){return new ue}}ue.kind="NotFoundException";class yt extends q{constructor(t){super(t),this.luminances=yt.EMPTY,this.buckets=new Int32Array(yt.LUMINANCE_BUCKETS)}getBlackRow(t,i){const a=this.getLuminanceSource(),c=a.getWidth();i==null||i.getSize()<c?i=new pe(c):i.clear(),this.initArrays(c);const h=a.getRow(t,this.luminances),d=this.buckets;for(let E=0;E<c;E++)d[(h[E]&255)>>yt.LUMINANCE_SHIFT]++;const p=yt.estimateBlackPoint(d);if(c<3)for(let E=0;E<c;E++)(h[E]&255)<p&&i.set(E);else{let E=h[0]&255,_=h[1]&255;for(let S=1;S<c-1;S++){const M=h[S+1]&255;(_*4-E-M)/2<p&&i.set(S),E=_,_=M}}return i}getBlackMatrix(){const t=this.getLuminanceSource(),i=t.getWidth(),a=t.getHeight(),c=new Le(i,a);this.initArrays(i);const h=this.buckets;for(let E=1;E<5;E++){const _=Math.floor(a*E/5),S=t.getRow(_,this.luminances),M=Math.floor(i*4/5);for(let L=Math.floor(i/5);L<M;L++){const H=S[L]&255;h[H>>yt.LUMINANCE_SHIFT]++}}const d=yt.estimateBlackPoint(h),p=t.getMatrix();for(let E=0;E<a;E++){const _=E*i;for(let S=0;S<i;S++)(p[_+S]&255)<d&&c.set(S,E)}return c}createBinarizer(t){return new yt(t)}initArrays(t){this.luminances.length<t&&(this.luminances=new Uint8ClampedArray(t));const i=this.buckets;for(let a=0;a<yt.LUMINANCE_BUCKETS;a++)i[a]=0}static estimateBlackPoint(t){const i=t.length;let a=0,c=0,h=0;for(let S=0;S<i;S++)t[S]>h&&(c=S,h=t[S]),t[S]>a&&(a=t[S]);let d=0,p=0;for(let S=0;S<i;S++){const M=S-c,L=t[S]*M*M;L>p&&(d=S,p=L)}if(c>d){const S=c;c=d,d=S}if(d-c<=i/16)throw new ue;let E=d-1,_=-1;for(let S=d-1;S>c;S--){const M=S-c,L=M*M*(d-S)*(a-t[S]);L>_&&(E=S,_=L)}return E<<yt.LUMINANCE_SHIFT}}yt.LUMINANCE_BITS=5,yt.LUMINANCE_SHIFT=8-yt.LUMINANCE_BITS,yt.LUMINANCE_BUCKETS=1<<yt.LUMINANCE_BITS,yt.EMPTY=Uint8ClampedArray.from([0]);class Fe extends yt{constructor(t){super(t),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const t=this.getLuminanceSource(),i=t.getWidth(),a=t.getHeight();if(i>=Fe.MINIMUM_DIMENSION&&a>=Fe.MINIMUM_DIMENSION){const c=t.getMatrix();let h=i>>Fe.BLOCK_SIZE_POWER;(i&Fe.BLOCK_SIZE_MASK)!==0&&h++;let d=a>>Fe.BLOCK_SIZE_POWER;(a&Fe.BLOCK_SIZE_MASK)!==0&&d++;const p=Fe.calculateBlackPoints(c,h,d,i,a),E=new Le(i,a);Fe.calculateThresholdForBlock(c,h,d,i,a,p,E),this.matrix=E}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(t){return new Fe(t)}static calculateThresholdForBlock(t,i,a,c,h,d,p){const E=h-Fe.BLOCK_SIZE,_=c-Fe.BLOCK_SIZE;for(let S=0;S<a;S++){let M=S<<Fe.BLOCK_SIZE_POWER;M>E&&(M=E);const L=Fe.cap(S,2,a-3);for(let H=0;H<i;H++){let K=H<<Fe.BLOCK_SIZE_POWER;K>_&&(K=_);const $=Fe.cap(H,2,i-3);let re=0;for(let Se=-2;Se<=2;Se++){const Re=d[L+Se];re+=Re[$-2]+Re[$-1]+Re[$]+Re[$+1]+Re[$+2]}const fe=re/25;Fe.thresholdBlock(t,K,M,fe,c,p)}}}static cap(t,i,a){return t<i?i:t>a?a:t}static thresholdBlock(t,i,a,c,h,d){for(let p=0,E=a*h+i;p<Fe.BLOCK_SIZE;p++,E+=h)for(let _=0;_<Fe.BLOCK_SIZE;_++)(t[E+_]&255)<=c&&d.set(i+_,a+p)}static calculateBlackPoints(t,i,a,c,h){const d=h-Fe.BLOCK_SIZE,p=c-Fe.BLOCK_SIZE,E=new Array(a);for(let _=0;_<a;_++){E[_]=new Int32Array(i);let S=_<<Fe.BLOCK_SIZE_POWER;S>d&&(S=d);for(let M=0;M<i;M++){let L=M<<Fe.BLOCK_SIZE_POWER;L>p&&(L=p);let H=0,K=255,$=0;for(let fe=0,Se=S*c+L;fe<Fe.BLOCK_SIZE;fe++,Se+=c){for(let Re=0;Re<Fe.BLOCK_SIZE;Re++){const Ce=t[Se+Re]&255;H+=Ce,Ce<K&&(K=Ce),Ce>$&&($=Ce)}if($-K>Fe.MIN_DYNAMIC_RANGE)for(fe++,Se+=c;fe<Fe.BLOCK_SIZE;fe++,Se+=c)for(let Re=0;Re<Fe.BLOCK_SIZE;Re++)H+=t[Se+Re]&255}let re=H>>Fe.BLOCK_SIZE_POWER*2;if($-K<=Fe.MIN_DYNAMIC_RANGE&&(re=K/2,_>0&&M>0)){const fe=(E[_-1][M]+2*E[_][M-1]+E[_-1][M-1])/4;K<fe&&(re=fe)}E[_][M]=re}}return E}}Fe.BLOCK_SIZE_POWER=3,Fe.BLOCK_SIZE=1<<Fe.BLOCK_SIZE_POWER,Fe.BLOCK_SIZE_MASK=Fe.BLOCK_SIZE-1,Fe.MINIMUM_DIMENSION=Fe.BLOCK_SIZE*5,Fe.MIN_DYNAMIC_RANGE=24;class be{constructor(t,i){this.width=t,this.height=i}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(t,i,a,c){throw new G("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new G("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new G("This luminance source does not support rotation by 45 degrees.")}toString(){const t=new Uint8ClampedArray(this.width);let i=new U;for(let a=0;a<this.height;a++){const c=this.getRow(a,t);for(let h=0;h<this.width;h++){const d=c[h]&255;let p;d<64?p="#":d<128?p="+":d<192?p=".":p=" ",i.append(p)}i.append(`
`)}return i.toString()}}class Ye extends be{constructor(t){super(t.getWidth(),t.getHeight()),this.delegate=t}getRow(t,i){const a=this.delegate.getRow(t,i),c=this.getWidth();for(let h=0;h<c;h++)a[h]=255-(a[h]&255);return a}getMatrix(){const t=this.delegate.getMatrix(),i=this.getWidth()*this.getHeight(),a=new Uint8ClampedArray(i);for(let c=0;c<i;c++)a[c]=255-(t[c]&255);return a}isCropSupported(){return this.delegate.isCropSupported()}crop(t,i,a,c){return new Ye(this.delegate.crop(t,i,a,c))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new Ye(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new Ye(this.delegate.rotateCounterClockwise45())}}class ke extends be{constructor(t){super(t.width,t.height),this.canvas=t,this.tempCanvasElement=null,this.buffer=ke.makeBufferFromCanvasImageData(t)}static makeBufferFromCanvasImageData(t){const i=t.getContext("2d").getImageData(0,0,t.width,t.height);return ke.toGrayscaleBuffer(i.data,t.width,t.height)}static toGrayscaleBuffer(t,i,a){const c=new Uint8ClampedArray(i*a);for(let h=0,d=0,p=t.length;h<p;h+=4,d++){let E;if(t[h+3]===0)E=255;else{const S=t[h],M=t[h+1],L=t[h+2];E=306*S+601*M+117*L+512>>10}c[d]=E}return c}getRow(t,i){if(t<0||t>=this.getHeight())throw new D("Requested row is outside the image: "+t);const a=this.getWidth(),c=t*a;return i===null?i=this.buffer.slice(c,c+a):(i.length<a&&(i=new Uint8ClampedArray(a)),i.set(this.buffer.slice(c,c+a))),i}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(t,i,a,c){return super.crop(t,i,a,c),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const t=this.canvas.ownerDocument.createElement("canvas");t.width=this.canvas.width,t.height=this.canvas.height,this.tempCanvasElement=t}return this.tempCanvasElement}rotate(t){const i=this.getTempCanvasElement(),a=i.getContext("2d"),c=t*ke.DEGREE_TO_RADIANS,h=this.canvas.width,d=this.canvas.height,p=Math.ceil(Math.abs(Math.cos(c))*h+Math.abs(Math.sin(c))*d),E=Math.ceil(Math.abs(Math.sin(c))*h+Math.abs(Math.cos(c))*d);return i.width=p,i.height=E,a.translate(p/2,E/2),a.rotate(c),a.drawImage(this.canvas,h/-2,d/-2),this.buffer=ke.makeBufferFromCanvasImageData(i),this}invert(){return new Ye(this)}}ke.DEGREE_TO_RADIANS=Math.PI/180;class ne{constructor(t,i,a){this.deviceId=t,this.label=i,this.kind="videoinput",this.groupId=a||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var ye=(globalThis||Gu||self||window||void 0)&&(globalThis||Gu||self||window||void 0).__awaiter||function(b,t,i,a){function c(h){return h instanceof i?h:new i(function(d){d(h)})}return new(i||(i=Promise))(function(h,d){function p(S){try{_(a.next(S))}catch(M){d(M)}}function E(S){try{_(a.throw(S))}catch(M){d(M)}}function _(S){S.done?h(S.value):c(S.value).then(p,E)}_((a=a.apply(b,t||[])).next())})};class ze{constructor(t,i=500,a){this.reader=t,this.timeBetweenScansMillis=i,this._hints=a,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(t){this._timeBetweenDecodingAttempts=t<0?0:t}set hints(t){this._hints=t||null}get hints(){return this._hints}listVideoInputDevices(){return ye(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const t=yield navigator.mediaDevices.enumerateDevices(),i=[];for(const a of t){const c=a.kind==="video"?"videoinput":a.kind;if(c!=="videoinput")continue;const h=a.deviceId||a.id,d=a.label||`Video device ${i.length+1}`,p=a.groupId,E={deviceId:h,label:d,kind:c,groupId:p};i.push(E)}return i})}getVideoInputDevices(){return ye(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(i=>new ne(i.deviceId,i.label))})}findDeviceById(t){return ye(this,void 0,void 0,function*(){const i=yield this.listVideoInputDevices();return i?i.find(a=>a.deviceId===t):null})}decodeFromInputVideoDevice(t,i){return ye(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(t,i)})}decodeOnceFromVideoDevice(t,i){return ye(this,void 0,void 0,function*(){this.reset();let a;t?a={deviceId:{exact:t}}:a={facingMode:"environment"};const c={video:a};return yield this.decodeOnceFromConstraints(c,i)})}decodeOnceFromConstraints(t,i){return ye(this,void 0,void 0,function*(){const a=yield navigator.mediaDevices.getUserMedia(t);return yield this.decodeOnceFromStream(a,i)})}decodeOnceFromStream(t,i){return ye(this,void 0,void 0,function*(){this.reset();const a=yield this.attachStreamToVideo(t,i);return yield this.decodeOnce(a)})}decodeFromInputVideoDeviceContinuously(t,i,a){return ye(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(t,i,a)})}decodeFromVideoDevice(t,i,a){return ye(this,void 0,void 0,function*(){let c;t?c={deviceId:{exact:t}}:c={facingMode:"environment"};const h={video:c};return yield this.decodeFromConstraints(h,i,a)})}decodeFromConstraints(t,i,a){return ye(this,void 0,void 0,function*(){const c=yield navigator.mediaDevices.getUserMedia(t);return yield this.decodeFromStream(c,i,a)})}decodeFromStream(t,i,a){return ye(this,void 0,void 0,function*(){this.reset();const c=yield this.attachStreamToVideo(t,i);return yield this.decodeContinuously(c,a)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(t,i){return ye(this,void 0,void 0,function*(){const a=this.prepareVideoElement(i);return this.addVideoSource(a,t),this.videoElement=a,this.stream=t,yield this.playVideoOnLoadAsync(a),a})}playVideoOnLoadAsync(t){return new Promise((i,a)=>this.playVideoOnLoad(t,()=>i()))}playVideoOnLoad(t,i){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(t),t.addEventListener("ended",this.videoEndedListener),t.addEventListener("canplay",this.videoCanPlayListener),t.addEventListener("playing",i),this.tryPlayVideo(t)}isVideoPlaying(t){return t.currentTime>0&&!t.paused&&!t.ended&&t.readyState>2}tryPlayVideo(t){return ye(this,void 0,void 0,function*(){if(this.isVideoPlaying(t)){console.warn("Trying to play video that is already playing.");return}try{yield t.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(t,i){const a=document.getElementById(t);if(!a)throw new R(`element with id '${t}' not found`);if(a.nodeName.toLowerCase()!==i.toLowerCase())throw new R(`element with id '${t}' must be an ${i} element`);return a}decodeFromImage(t,i){if(!t&&!i)throw new R("either imageElement with a src set or an url must be provided");return i&&!t?this.decodeFromImageUrl(i):this.decodeFromImageElement(t)}decodeFromVideo(t,i){if(!t&&!i)throw new R("Either an element with a src set or an URL must be provided");return i&&!t?this.decodeFromVideoUrl(i):this.decodeFromVideoElement(t)}decodeFromVideoContinuously(t,i,a){if(t===void 0&&i===void 0)throw new R("Either an element with a src set or an URL must be provided");return i&&!t?this.decodeFromVideoUrlContinuously(i,a):this.decodeFromVideoElementContinuously(t,a)}decodeFromImageElement(t){if(!t)throw new R("An image element must be provided.");this.reset();const i=this.prepareImageElement(t);this.imageElement=i;let a;return this.isImageLoaded(i)?a=this.decodeOnce(i,!1,!0):a=this._decodeOnLoadImage(i),a}decodeFromVideoElement(t){const i=this._decodeFromVideoElementSetup(t);return this._decodeOnLoadVideo(i)}decodeFromVideoElementContinuously(t,i){const a=this._decodeFromVideoElementSetup(t);return this._decodeOnLoadVideoContinuously(a,i)}_decodeFromVideoElementSetup(t){if(!t)throw new R("A video element must be provided.");this.reset();const i=this.prepareVideoElement(t);return this.videoElement=i,i}decodeFromImageUrl(t){if(!t)throw new R("An URL must be provided.");this.reset();const i=this.prepareImageElement();this.imageElement=i;const a=this._decodeOnLoadImage(i);return i.src=t,a}decodeFromVideoUrl(t){if(!t)throw new R("An URL must be provided.");this.reset();const i=this.prepareVideoElement(),a=this.decodeFromVideoElement(i);return i.src=t,a}decodeFromVideoUrlContinuously(t,i){if(!t)throw new R("An URL must be provided.");this.reset();const a=this.prepareVideoElement(),c=this.decodeFromVideoElementContinuously(a,i);return a.src=t,c}_decodeOnLoadImage(t){return new Promise((i,a)=>{this.imageLoadedListener=()=>this.decodeOnce(t,!1,!0).then(i,a),t.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(t){return ye(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(t),yield this.decodeOnce(t)})}_decodeOnLoadVideoContinuously(t,i){return ye(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(t),this.decodeContinuously(t,i)})}isImageLoaded(t){return!(!t.complete||t.naturalWidth===0)}prepareImageElement(t){let i;return typeof t>"u"&&(i=document.createElement("img"),i.width=200,i.height=200),typeof t=="string"&&(i=this.getMediaElement(t,"img")),t instanceof HTMLImageElement&&(i=t),i}prepareVideoElement(t){let i;return!t&&typeof document<"u"&&(i=document.createElement("video"),i.width=200,i.height=200),typeof t=="string"&&(i=this.getMediaElement(t,"video")),t instanceof HTMLVideoElement&&(i=t),i.setAttribute("autoplay","true"),i.setAttribute("muted","true"),i.setAttribute("playsinline","true"),i}decodeOnce(t,i=!0,a=!0){this._stopAsyncDecode=!1;const c=(h,d)=>{if(this._stopAsyncDecode){d(new ue("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const p=this.decode(t);h(p)}catch(p){const E=i&&p instanceof ue,S=(p instanceof j||p instanceof F)&&a;if(E||S)return setTimeout(c,this._timeBetweenDecodingAttempts,h,d);d(p)}};return new Promise((h,d)=>c(h,d))}decodeContinuously(t,i){this._stopContinuousDecode=!1;const a=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const c=this.decode(t);i(c,null),setTimeout(a,this.timeBetweenScansMillis)}catch(c){i(null,c);const h=c instanceof j||c instanceof F,d=c instanceof ue;(h||d)&&setTimeout(a,this._timeBetweenDecodingAttempts)}};a()}decode(t){const i=this.createBinaryBitmap(t);return this.decodeBitmap(i)}_isHTMLVideoElement(t){return t.videoWidth!==0}drawFrameOnCanvas(t,i,a){i||(i={sx:0,sy:0,sWidth:t.videoWidth,sHeight:t.videoHeight,dx:0,dy:0,dWidth:t.videoWidth,dHeight:t.videoHeight}),a||(a=this.captureCanvasContext),a.drawImage(t,i.sx,i.sy,i.sWidth,i.sHeight,i.dx,i.dy,i.dWidth,i.dHeight)}drawImageOnCanvas(t,i,a=this.captureCanvasContext){i||(i={sx:0,sy:0,sWidth:t.naturalWidth,sHeight:t.naturalHeight,dx:0,dy:0,dWidth:t.naturalWidth,dHeight:t.naturalHeight}),a||(a=this.captureCanvasContext),a.drawImage(t,i.sx,i.sy,i.sWidth,i.sHeight,i.dx,i.dy,i.dWidth,i.dHeight)}createBinaryBitmap(t){this.getCaptureCanvasContext(t),this._isHTMLVideoElement(t)?this.drawFrameOnCanvas(t):this.drawImageOnCanvas(t);const i=this.getCaptureCanvas(t),a=new ke(i),c=new Fe(a);return new k(c)}getCaptureCanvasContext(t){if(!this.captureCanvasContext){const a=this.getCaptureCanvas(t).getContext("2d");this.captureCanvasContext=a}return this.captureCanvasContext}getCaptureCanvas(t){if(!this.captureCanvas){const i=this.createCaptureCanvas(t);this.captureCanvas=i}return this.captureCanvas}decodeBitmap(t){return this.reader.decode(t,this._hints)}createCaptureCanvas(t){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const i=document.createElement("canvas");let a,c;return typeof t<"u"&&(t instanceof HTMLVideoElement?(a=t.videoWidth,c=t.videoHeight):t instanceof HTMLImageElement&&(a=t.naturalWidth||t.width,c=t.naturalHeight||t.height)),i.style.width=a+"px",i.style.height=c+"px",i.width=a,i.height=c,i}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(t=>t.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(t,i){try{t.srcObject=i}catch{t.src=URL.createObjectURL(i)}}cleanVideoSource(t){try{t.srcObject=null}catch{t.src=""}this.videoElement.removeAttribute("src")}}class $e{constructor(t,i,a=i==null?0:8*i.length,c,h,d=Q.currentTimeMillis()){this.text=t,this.rawBytes=i,this.numBits=a,this.resultPoints=c,this.format=h,this.timestamp=d,this.text=t,this.rawBytes=i,a==null?this.numBits=i==null?0:8*i.length:this.numBits=a,this.resultPoints=c,this.format=h,this.resultMetadata=null,d==null?this.timestamp=Q.currentTimeMillis():this.timestamp=d}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(t,i){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(t,i)}putAllMetadata(t){t!==null&&(this.resultMetadata===null?this.resultMetadata=t:this.resultMetadata=new Map(t))}addResultPoints(t){const i=this.resultPoints;if(i===null)this.resultPoints=t;else if(t!==null&&t.length>0){const a=new Array(i.length+t.length);Q.arraycopy(i,0,a,0,i.length),Q.arraycopy(t,0,a,i.length,t.length),this.resultPoints=a}}getTimestamp(){return this.timestamp}toString(){return this.text}}var ct;(function(b){b[b.AZTEC=0]="AZTEC",b[b.CODABAR=1]="CODABAR",b[b.CODE_39=2]="CODE_39",b[b.CODE_93=3]="CODE_93",b[b.CODE_128=4]="CODE_128",b[b.DATA_MATRIX=5]="DATA_MATRIX",b[b.EAN_8=6]="EAN_8",b[b.EAN_13=7]="EAN_13",b[b.ITF=8]="ITF",b[b.MAXICODE=9]="MAXICODE",b[b.PDF_417=10]="PDF_417",b[b.QR_CODE=11]="QR_CODE",b[b.RSS_14=12]="RSS_14",b[b.RSS_EXPANDED=13]="RSS_EXPANDED",b[b.UPC_A=14]="UPC_A",b[b.UPC_E=15]="UPC_E",b[b.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(ct||(ct={}));var Ne=ct,ft;(function(b){b[b.OTHER=0]="OTHER",b[b.ORIENTATION=1]="ORIENTATION",b[b.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",b[b.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",b[b.ISSUE_NUMBER=4]="ISSUE_NUMBER",b[b.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",b[b.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",b[b.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",b[b.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",b[b.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",b[b.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(ft||(ft={}));var Qe=ft;class _t{constructor(t,i,a,c,h=-1,d=-1){this.rawBytes=t,this.text=i,this.byteSegments=a,this.ecLevel=c,this.structuredAppendSequenceNumber=h,this.structuredAppendParity=d,this.numBits=t==null?0:8*t.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(t){this.numBits=t}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(t){this.errorsCorrected=t}getErasures(){return this.erasures}setErasures(t){this.erasures=t}getOther(){return this.other}setOther(t){this.other=t}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class Kt{exp(t){return this.expTable[t]}log(t){if(t===0)throw new D;return this.logTable[t]}static addOrSubtract(t,i){return t^i}}class gn{constructor(t,i){if(i.length===0)throw new D;this.field=t;const a=i.length;if(a>1&&i[0]===0){let c=1;for(;c<a&&i[c]===0;)c++;c===a?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(a-c),Q.arraycopy(i,c,this.coefficients,0,this.coefficients.length))}else this.coefficients=i}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(t){return this.coefficients[this.coefficients.length-1-t]}evaluateAt(t){if(t===0)return this.getCoefficient(0);const i=this.coefficients;let a;if(t===1){a=0;for(let d=0,p=i.length;d!==p;d++){const E=i[d];a=Kt.addOrSubtract(a,E)}return a}a=i[0];const c=i.length,h=this.field;for(let d=1;d<c;d++)a=Kt.addOrSubtract(h.multiply(t,a),i[d]);return a}addOrSubtract(t){if(!this.field.equals(t.field))throw new D("GenericGFPolys do not have same GenericGF field");if(this.isZero())return t;if(t.isZero())return this;let i=this.coefficients,a=t.coefficients;if(i.length>a.length){const d=i;i=a,a=d}let c=new Int32Array(a.length);const h=a.length-i.length;Q.arraycopy(a,0,c,0,h);for(let d=h;d<a.length;d++)c[d]=Kt.addOrSubtract(i[d-h],a[d]);return new gn(this.field,c)}multiply(t){if(!this.field.equals(t.field))throw new D("GenericGFPolys do not have same GenericGF field");if(this.isZero()||t.isZero())return this.field.getZero();const i=this.coefficients,a=i.length,c=t.coefficients,h=c.length,d=new Int32Array(a+h-1),p=this.field;for(let E=0;E<a;E++){const _=i[E];for(let S=0;S<h;S++)d[E+S]=Kt.addOrSubtract(d[E+S],p.multiply(_,c[S]))}return new gn(p,d)}multiplyScalar(t){if(t===0)return this.field.getZero();if(t===1)return this;const i=this.coefficients.length,a=this.field,c=new Int32Array(i),h=this.coefficients;for(let d=0;d<i;d++)c[d]=a.multiply(h[d],t);return new gn(a,c)}multiplyByMonomial(t,i){if(t<0)throw new D;if(i===0)return this.field.getZero();const a=this.coefficients,c=a.length,h=new Int32Array(c+t),d=this.field;for(let p=0;p<c;p++)h[p]=d.multiply(a[p],i);return new gn(d,h)}divide(t){if(!this.field.equals(t.field))throw new D("GenericGFPolys do not have same GenericGF field");if(t.isZero())throw new D("Divide by 0");const i=this.field;let a=i.getZero(),c=this;const h=t.getCoefficient(t.getDegree()),d=i.inverse(h);for(;c.getDegree()>=t.getDegree()&&!c.isZero();){const p=c.getDegree()-t.getDegree(),E=i.multiply(c.getCoefficient(c.getDegree()),d),_=t.multiplyByMonomial(p,E),S=i.buildMonomial(p,E);a=a.addOrSubtract(S),c=c.addOrSubtract(_)}return[a,c]}toString(){let t="";for(let i=this.getDegree();i>=0;i--){let a=this.getCoefficient(i);if(a!==0){if(a<0?(t+=" - ",a=-a):t.length>0&&(t+=" + "),i===0||a!==1){const c=this.field.log(a);c===0?t+="1":c===1?t+="a":(t+="a^",t+=c)}i!==0&&(i===1?t+="x":(t+="x^",t+=i))}}return t}}class Mi extends x{}Mi.kind="ArithmeticException";class wt extends Kt{constructor(t,i,a){super(),this.primitive=t,this.size=i,this.generatorBase=a;const c=new Int32Array(i);let h=1;for(let p=0;p<i;p++)c[p]=h,h*=2,h>=i&&(h^=t,h&=i-1);this.expTable=c;const d=new Int32Array(i);for(let p=0;p<i-1;p++)d[c[p]]=p;this.logTable=d,this.zero=new gn(this,Int32Array.from([0])),this.one=new gn(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(t,i){if(t<0)throw new D;if(i===0)return this.zero;const a=new Int32Array(t+1);return a[0]=i,new gn(this,a)}inverse(t){if(t===0)throw new Mi;return this.expTable[this.size-this.logTable[t]-1]}multiply(t,i){return t===0||i===0?0:this.expTable[(this.logTable[t]+this.logTable[i])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+te.toHexString(this.primitive)+","+this.size+")"}equals(t){return t===this}}wt.AZTEC_DATA_12=new wt(4201,4096,1),wt.AZTEC_DATA_10=new wt(1033,1024,1),wt.AZTEC_DATA_6=new wt(67,64,1),wt.AZTEC_PARAM=new wt(19,16,1),wt.QR_CODE_FIELD_256=new wt(285,256,0),wt.DATA_MATRIX_FIELD_256=new wt(301,256,1),wt.AZTEC_DATA_8=wt.DATA_MATRIX_FIELD_256,wt.MAXICODE_FIELD_64=wt.AZTEC_DATA_6;class Wr extends x{}Wr.kind="ReedSolomonException";class ur extends x{}ur.kind="IllegalStateException";class Oi{constructor(t){this.field=t}decode(t,i){const a=this.field,c=new gn(a,t),h=new Int32Array(i);let d=!0;for(let H=0;H<i;H++){const K=c.evaluateAt(a.exp(H+a.getGeneratorBase()));h[h.length-1-H]=K,K!==0&&(d=!1)}if(d)return;const p=new gn(a,h),E=this.runEuclideanAlgorithm(a.buildMonomial(i,1),p,i),_=E[0],S=E[1],M=this.findErrorLocations(_),L=this.findErrorMagnitudes(S,M);for(let H=0;H<M.length;H++){const K=t.length-1-a.log(M[H]);if(K<0)throw new Wr("Bad error location");t[K]=wt.addOrSubtract(t[K],L[H])}}runEuclideanAlgorithm(t,i,a){if(t.getDegree()<i.getDegree()){const H=t;t=i,i=H}const c=this.field;let h=t,d=i,p=c.getZero(),E=c.getOne();for(;d.getDegree()>=(a/2|0);){let H=h,K=p;if(h=d,p=E,h.isZero())throw new Wr("r_{i-1} was zero");d=H;let $=c.getZero();const re=h.getCoefficient(h.getDegree()),fe=c.inverse(re);for(;d.getDegree()>=h.getDegree()&&!d.isZero();){const Se=d.getDegree()-h.getDegree(),Re=c.multiply(d.getCoefficient(d.getDegree()),fe);$=$.addOrSubtract(c.buildMonomial(Se,Re)),d=d.addOrSubtract(h.multiplyByMonomial(Se,Re))}if(E=$.multiply(p).addOrSubtract(K),d.getDegree()>=h.getDegree())throw new ur("Division algorithm failed to reduce polynomial?")}const _=E.getCoefficient(0);if(_===0)throw new Wr("sigmaTilde(0) was zero");const S=c.inverse(_),M=E.multiplyScalar(S),L=d.multiplyScalar(S);return[M,L]}findErrorLocations(t){const i=t.getDegree();if(i===1)return Int32Array.from([t.getCoefficient(1)]);const a=new Int32Array(i);let c=0;const h=this.field;for(let d=1;d<h.getSize()&&c<i;d++)t.evaluateAt(d)===0&&(a[c]=h.inverse(d),c++);if(c!==i)throw new Wr("Error locator degree does not match number of roots");return a}findErrorMagnitudes(t,i){const a=i.length,c=new Int32Array(a),h=this.field;for(let d=0;d<a;d++){const p=h.inverse(i[d]);let E=1;for(let _=0;_<a;_++)if(d!==_){const S=h.multiply(i[_],p),M=(S&1)===0?S|1:S&-2;E=h.multiply(E,M)}c[d]=h.multiply(t.evaluateAt(p),h.inverse(E)),h.getGeneratorBase()!==0&&(c[d]=h.multiply(c[d],p))}return c}}var An;(function(b){b[b.UPPER=0]="UPPER",b[b.LOWER=1]="LOWER",b[b.MIXED=2]="MIXED",b[b.DIGIT=3]="DIGIT",b[b.PUNCT=4]="PUNCT",b[b.BINARY=5]="BINARY"})(An||(An={}));class Ut{decode(t){this.ddata=t;let i=t.getBits(),a=this.extractBits(i),c=this.correctBits(a),h=Ut.convertBoolArrayToByteArray(c),d=Ut.getEncodedData(c),p=new _t(h,d,null,null);return p.setNumBits(c.length),p}static highLevelDecode(t){return this.getEncodedData(t)}static getEncodedData(t){let i=t.length,a=An.UPPER,c=An.UPPER,h="",d=0;for(;d<i;)if(c===An.BINARY){if(i-d<5)break;let p=Ut.readCode(t,d,5);if(d+=5,p===0){if(i-d<11)break;p=Ut.readCode(t,d,11)+31,d+=11}for(let E=0;E<p;E++){if(i-d<8){d=i;break}const _=Ut.readCode(t,d,8);h+=W.castAsNonUtf8Char(_),d+=8}c=a}else{let p=c===An.DIGIT?4:5;if(i-d<p)break;let E=Ut.readCode(t,d,p);d+=p;let _=Ut.getCharacter(c,E);_.startsWith("CTRL_")?(a=c,c=Ut.getTable(_.charAt(5)),_.charAt(6)==="L"&&(a=c)):(h+=_,c=a)}return h}static getTable(t){switch(t){case"L":return An.LOWER;case"P":return An.PUNCT;case"M":return An.MIXED;case"D":return An.DIGIT;case"B":return An.BINARY;case"U":default:return An.UPPER}}static getCharacter(t,i){switch(t){case An.UPPER:return Ut.UPPER_TABLE[i];case An.LOWER:return Ut.LOWER_TABLE[i];case An.MIXED:return Ut.MIXED_TABLE[i];case An.PUNCT:return Ut.PUNCT_TABLE[i];case An.DIGIT:return Ut.DIGIT_TABLE[i];default:throw new ur("Bad table")}}correctBits(t){let i,a;this.ddata.getNbLayers()<=2?(a=6,i=wt.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(a=8,i=wt.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(a=10,i=wt.AZTEC_DATA_10):(a=12,i=wt.AZTEC_DATA_12);let c=this.ddata.getNbDatablocks(),h=t.length/a;if(h<c)throw new F;let d=t.length%a,p=new Int32Array(h);for(let L=0;L<h;L++,d+=a)p[L]=Ut.readCode(t,d,a);try{new Oi(i).decode(p,h-c)}catch(L){throw new F(L)}let E=(1<<a)-1,_=0;for(let L=0;L<c;L++){let H=p[L];if(H===0||H===E)throw new F;(H===1||H===E-1)&&_++}let S=new Array(c*a-_),M=0;for(let L=0;L<c;L++){let H=p[L];if(H===1||H===E-1)S.fill(H>1,M,M+a-1),M+=a-1;else for(let K=a-1;K>=0;--K)S[M++]=(H&1<<K)!==0}return S}extractBits(t){let i=this.ddata.isCompact(),a=this.ddata.getNbLayers(),c=(i?11:14)+a*4,h=new Int32Array(c),d=new Array(this.totalBitsInLayer(a,i));if(i)for(let p=0;p<h.length;p++)h[p]=p;else{let p=c+1+2*te.truncDivision(te.truncDivision(c,2)-1,15),E=c/2,_=te.truncDivision(p,2);for(let S=0;S<E;S++){let M=S+te.truncDivision(S,15);h[E-S-1]=_-M-1,h[E+S]=_+M+1}}for(let p=0,E=0;p<a;p++){let _=(a-p)*4+(i?9:12),S=p*2,M=c-1-S;for(let L=0;L<_;L++){let H=L*2;for(let K=0;K<2;K++)d[E+H+K]=t.get(h[S+K],h[S+L]),d[E+2*_+H+K]=t.get(h[S+L],h[M-K]),d[E+4*_+H+K]=t.get(h[M-K],h[M-L]),d[E+6*_+H+K]=t.get(h[M-L],h[S+K])}E+=_*8}return d}static readCode(t,i,a){let c=0;for(let h=i;h<i+a;h++)c<<=1,t[h]&&(c|=1);return c}static readByte(t,i){let a=t.length-i;return a>=8?Ut.readCode(t,i,8):Ut.readCode(t,i,a)<<8-a}static convertBoolArrayToByteArray(t){let i=new Uint8Array((t.length+7)/8);for(let a=0;a<i.length;a++)i[a]=Ut.readByte(t,8*a);return i}totalBitsInLayer(t,i){return((i?88:112)+16*t)*t}}Ut.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],Ut.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],Ut.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],Ut.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],Ut.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class Et{constructor(){}static round(t){return t===NaN?0:t<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:t>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:t+(t<0?-.5:.5)|0}static distance(t,i,a,c){const h=t-a,d=i-c;return Math.sqrt(h*h+d*d)}static sum(t){let i=0;for(let a=0,c=t.length;a!==c;a++){const h=t[a];i+=h}return i}}class Gr{static floatToIntBits(t){return t}}Gr.MAX_VALUE=Number.MAX_SAFE_INTEGER;class Ve{constructor(t,i){this.x=t,this.y=i}getX(){return this.x}getY(){return this.y}equals(t){if(t instanceof Ve){const i=t;return this.x===i.x&&this.y===i.y}return!1}hashCode(){return 31*Gr.floatToIntBits(this.x)+Gr.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(t){const i=this.distance(t[0],t[1]),a=this.distance(t[1],t[2]),c=this.distance(t[0],t[2]);let h,d,p;if(a>=i&&a>=c?(d=t[0],h=t[1],p=t[2]):c>=a&&c>=i?(d=t[1],h=t[0],p=t[2]):(d=t[2],h=t[0],p=t[1]),this.crossProductZ(h,d,p)<0){const E=h;h=p,p=E}t[0]=h,t[1]=d,t[2]=p}static distance(t,i){return Et.distance(t.x,t.y,i.x,i.y)}static crossProductZ(t,i,a){const c=i.x,h=i.y;return(a.x-c)*(t.y-h)-(a.y-h)*(t.x-c)}}class Xi{constructor(t,i){this.bits=t,this.points=i}getBits(){return this.bits}getPoints(){return this.points}}class ys extends Xi{constructor(t,i,a,c,h){super(t,i),this.compact=a,this.nbDatablocks=c,this.nbLayers=h}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class Ar{constructor(t,i,a,c){this.image=t,this.height=t.getHeight(),this.width=t.getWidth(),i==null&&(i=Ar.INIT_SIZE),a==null&&(a=t.getWidth()/2|0),c==null&&(c=t.getHeight()/2|0);const h=i/2|0;if(this.leftInit=a-h,this.rightInit=a+h,this.upInit=c-h,this.downInit=c+h,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new ue}detect(){let t=this.leftInit,i=this.rightInit,a=this.upInit,c=this.downInit,h=!1,d=!0,p=!1,E=!1,_=!1,S=!1,M=!1;const L=this.width,H=this.height;for(;d;){d=!1;let K=!0;for(;(K||!E)&&i<L;)K=this.containsBlackPoint(a,c,i,!1),K?(i++,d=!0,E=!0):E||i++;if(i>=L){h=!0;break}let $=!0;for(;($||!_)&&c<H;)$=this.containsBlackPoint(t,i,c,!0),$?(c++,d=!0,_=!0):_||c++;if(c>=H){h=!0;break}let re=!0;for(;(re||!S)&&t>=0;)re=this.containsBlackPoint(a,c,t,!1),re?(t--,d=!0,S=!0):S||t--;if(t<0){h=!0;break}let fe=!0;for(;(fe||!M)&&a>=0;)fe=this.containsBlackPoint(t,i,a,!0),fe?(a--,d=!0,M=!0):M||a--;if(a<0){h=!0;break}d&&(p=!0)}if(!h&&p){const K=i-t;let $=null;for(let Re=1;$===null&&Re<K;Re++)$=this.getBlackPointOnSegment(t,c-Re,t+Re,c);if($==null)throw new ue;let re=null;for(let Re=1;re===null&&Re<K;Re++)re=this.getBlackPointOnSegment(t,a+Re,t+Re,a);if(re==null)throw new ue;let fe=null;for(let Re=1;fe===null&&Re<K;Re++)fe=this.getBlackPointOnSegment(i,a+Re,i-Re,a);if(fe==null)throw new ue;let Se=null;for(let Re=1;Se===null&&Re<K;Re++)Se=this.getBlackPointOnSegment(i,c-Re,i-Re,c);if(Se==null)throw new ue;return this.centerEdges(Se,$,fe,re)}else throw new ue}getBlackPointOnSegment(t,i,a,c){const h=Et.round(Et.distance(t,i,a,c)),d=(a-t)/h,p=(c-i)/h,E=this.image;for(let _=0;_<h;_++){const S=Et.round(t+_*d),M=Et.round(i+_*p);if(E.get(S,M))return new Ve(S,M)}return null}centerEdges(t,i,a,c){const h=t.getX(),d=t.getY(),p=i.getX(),E=i.getY(),_=a.getX(),S=a.getY(),M=c.getX(),L=c.getY(),H=Ar.CORR;return h<this.width/2?[new Ve(M-H,L+H),new Ve(p+H,E+H),new Ve(_-H,S-H),new Ve(h+H,d-H)]:[new Ve(M+H,L+H),new Ve(p+H,E-H),new Ve(_-H,S+H),new Ve(h-H,d-H)]}containsBlackPoint(t,i,a,c){const h=this.image;if(c){for(let d=t;d<=i;d++)if(h.get(d,a))return!0}else for(let d=t;d<=i;d++)if(h.get(a,d))return!0;return!1}}Ar.INIT_SIZE=10,Ar.CORR=1;class ws{static checkAndNudgePoints(t,i){const a=t.getWidth(),c=t.getHeight();let h=!0;for(let d=0;d<i.length&&h;d+=2){const p=Math.floor(i[d]),E=Math.floor(i[d+1]);if(p<-1||p>a||E<-1||E>c)throw new ue;h=!1,p===-1?(i[d]=0,h=!0):p===a&&(i[d]=a-1,h=!0),E===-1?(i[d+1]=0,h=!0):E===c&&(i[d+1]=c-1,h=!0)}h=!0;for(let d=i.length-2;d>=0&&h;d-=2){const p=Math.floor(i[d]),E=Math.floor(i[d+1]);if(p<-1||p>a||E<-1||E>c)throw new ue;h=!1,p===-1?(i[d]=0,h=!0):p===a&&(i[d]=a-1,h=!0),E===-1?(i[d+1]=0,h=!0):E===c&&(i[d+1]=c-1,h=!0)}}}class zt{constructor(t,i,a,c,h,d,p,E,_){this.a11=t,this.a21=i,this.a31=a,this.a12=c,this.a22=h,this.a32=d,this.a13=p,this.a23=E,this.a33=_}static quadrilateralToQuadrilateral(t,i,a,c,h,d,p,E,_,S,M,L,H,K,$,re){const fe=zt.quadrilateralToSquare(t,i,a,c,h,d,p,E);return zt.squareToQuadrilateral(_,S,M,L,H,K,$,re).times(fe)}transformPoints(t){const i=t.length,a=this.a11,c=this.a12,h=this.a13,d=this.a21,p=this.a22,E=this.a23,_=this.a31,S=this.a32,M=this.a33;for(let L=0;L<i;L+=2){const H=t[L],K=t[L+1],$=h*H+E*K+M;t[L]=(a*H+d*K+_)/$,t[L+1]=(c*H+p*K+S)/$}}transformPointsWithValues(t,i){const a=this.a11,c=this.a12,h=this.a13,d=this.a21,p=this.a22,E=this.a23,_=this.a31,S=this.a32,M=this.a33,L=t.length;for(let H=0;H<L;H++){const K=t[H],$=i[H],re=h*K+E*$+M;t[H]=(a*K+d*$+_)/re,i[H]=(c*K+p*$+S)/re}}static squareToQuadrilateral(t,i,a,c,h,d,p,E){const _=t-a+h-p,S=i-c+d-E;if(_===0&&S===0)return new zt(a-t,h-a,t,c-i,d-c,i,0,0,1);{const M=a-h,L=p-h,H=c-d,K=E-d,$=M*K-L*H,re=(_*K-L*S)/$,fe=(M*S-_*H)/$;return new zt(a-t+re*a,p-t+fe*p,t,c-i+re*c,E-i+fe*E,i,re,fe,1)}}static quadrilateralToSquare(t,i,a,c,h,d,p,E){return zt.squareToQuadrilateral(t,i,a,c,h,d,p,E).buildAdjoint()}buildAdjoint(){return new zt(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(t){return new zt(this.a11*t.a11+this.a21*t.a12+this.a31*t.a13,this.a11*t.a21+this.a21*t.a22+this.a31*t.a23,this.a11*t.a31+this.a21*t.a32+this.a31*t.a33,this.a12*t.a11+this.a22*t.a12+this.a32*t.a13,this.a12*t.a21+this.a22*t.a22+this.a32*t.a23,this.a12*t.a31+this.a22*t.a32+this.a32*t.a33,this.a13*t.a11+this.a23*t.a12+this.a33*t.a13,this.a13*t.a21+this.a23*t.a22+this.a33*t.a23,this.a13*t.a31+this.a23*t.a32+this.a33*t.a33)}}class Sn extends ws{sampleGrid(t,i,a,c,h,d,p,E,_,S,M,L,H,K,$,re,fe,Se,Re){const Ce=zt.quadrilateralToQuadrilateral(c,h,d,p,E,_,S,M,L,H,K,$,re,fe,Se,Re);return this.sampleGridWithTransform(t,i,a,Ce)}sampleGridWithTransform(t,i,a,c){if(i<=0||a<=0)throw new ue;const h=new Le(i,a),d=new Float32Array(2*i);for(let p=0;p<a;p++){const E=d.length,_=p+.5;for(let S=0;S<E;S+=2)d[S]=S/2+.5,d[S+1]=_;c.transformPoints(d),ws.checkAndNudgePoints(t,d);try{for(let S=0;S<E;S+=2)t.get(Math.floor(d[S]),Math.floor(d[S+1]))&&h.set(S/2,p)}catch{throw new ue}}return h}}class er{static setGridSampler(t){er.gridSampler=t}static getInstance(){return er.gridSampler}}er.gridSampler=new Sn;class Ln{constructor(t,i){this.x=t,this.y=i}toResultPoint(){return new Ve(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class Pi{constructor(t){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=t}detect(){return this.detectMirror(!1)}detectMirror(t){let i=this.getMatrixCenter(),a=this.getBullsEyeCorners(i);if(t){let d=a[0];a[0]=a[2],a[2]=d}this.extractParameters(a);let c=this.sampleGrid(this.image,a[this.shift%4],a[(this.shift+1)%4],a[(this.shift+2)%4],a[(this.shift+3)%4]),h=this.getMatrixCornerPoints(a);return new ys(c,h,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(t){if(!this.isValidPoint(t[0])||!this.isValidPoint(t[1])||!this.isValidPoint(t[2])||!this.isValidPoint(t[3]))throw new ue;let i=2*this.nbCenterLayers,a=new Int32Array([this.sampleLine(t[0],t[1],i),this.sampleLine(t[1],t[2],i),this.sampleLine(t[2],t[3],i),this.sampleLine(t[3],t[0],i)]);this.shift=this.getRotation(a,i);let c=0;for(let d=0;d<4;d++){let p=a[(this.shift+d)%4];this.compact?(c<<=7,c+=p>>1&127):(c<<=10,c+=(p>>2&992)+(p>>1&31))}let h=this.getCorrectedParameterData(c,this.compact);this.compact?(this.nbLayers=(h>>6)+1,this.nbDataBlocks=(h&63)+1):(this.nbLayers=(h>>11)+1,this.nbDataBlocks=(h&2047)+1)}getRotation(t,i){let a=0;t.forEach((c,h,d)=>{let p=(c>>i-2<<1)+(c&1);a=(a<<3)+p}),a=((a&1)<<11)+(a>>1);for(let c=0;c<4;c++)if(te.bitCount(a^this.EXPECTED_CORNER_BITS[c])<=2)return c;throw new ue}getCorrectedParameterData(t,i){let a,c;i?(a=7,c=2):(a=10,c=4);let h=a-c,d=new Int32Array(a);for(let E=a-1;E>=0;--E)d[E]=t&15,t>>=4;try{new Oi(wt.AZTEC_PARAM).decode(d,h)}catch{throw new ue}let p=0;for(let E=0;E<c;E++)p=(p<<4)+d[E];return p}getBullsEyeCorners(t){let i=t,a=t,c=t,h=t,d=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let M=this.getFirstDifferent(i,d,1,-1),L=this.getFirstDifferent(a,d,1,1),H=this.getFirstDifferent(c,d,-1,1),K=this.getFirstDifferent(h,d,-1,-1);if(this.nbCenterLayers>2){let $=this.distancePoint(K,M)*this.nbCenterLayers/(this.distancePoint(h,i)*(this.nbCenterLayers+2));if($<.75||$>1.25||!this.isWhiteOrBlackRectangle(M,L,H,K))break}i=M,a=L,c=H,h=K,d=!d}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new ue;this.compact=this.nbCenterLayers===5;let p=new Ve(i.getX()+.5,i.getY()-.5),E=new Ve(a.getX()+.5,a.getY()+.5),_=new Ve(c.getX()-.5,c.getY()+.5),S=new Ve(h.getX()-.5,h.getY()-.5);return this.expandSquare([p,E,_,S],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let t,i,a,c;try{let p=new Ar(this.image).detect();t=p[0],i=p[1],a=p[2],c=p[3]}catch{let E=this.image.getWidth()/2,_=this.image.getHeight()/2;t=this.getFirstDifferent(new Ln(E+7,_-7),!1,1,-1).toResultPoint(),i=this.getFirstDifferent(new Ln(E+7,_+7),!1,1,1).toResultPoint(),a=this.getFirstDifferent(new Ln(E-7,_+7),!1,-1,1).toResultPoint(),c=this.getFirstDifferent(new Ln(E-7,_-7),!1,-1,-1).toResultPoint()}let h=Et.round((t.getX()+c.getX()+i.getX()+a.getX())/4),d=Et.round((t.getY()+c.getY()+i.getY()+a.getY())/4);try{let p=new Ar(this.image,15,h,d).detect();t=p[0],i=p[1],a=p[2],c=p[3]}catch{t=this.getFirstDifferent(new Ln(h+7,d-7),!1,1,-1).toResultPoint(),i=this.getFirstDifferent(new Ln(h+7,d+7),!1,1,1).toResultPoint(),a=this.getFirstDifferent(new Ln(h-7,d+7),!1,-1,1).toResultPoint(),c=this.getFirstDifferent(new Ln(h-7,d-7),!1,-1,-1).toResultPoint()}return h=Et.round((t.getX()+c.getX()+i.getX()+a.getX())/4),d=Et.round((t.getY()+c.getY()+i.getY()+a.getY())/4),new Ln(h,d)}getMatrixCornerPoints(t){return this.expandSquare(t,2*this.nbCenterLayers,this.getDimension())}sampleGrid(t,i,a,c,h){let d=er.getInstance(),p=this.getDimension(),E=p/2-this.nbCenterLayers,_=p/2+this.nbCenterLayers;return d.sampleGrid(t,p,p,E,E,_,E,_,_,E,_,i.getX(),i.getY(),a.getX(),a.getY(),c.getX(),c.getY(),h.getX(),h.getY())}sampleLine(t,i,a){let c=0,h=this.distanceResultPoint(t,i),d=h/a,p=t.getX(),E=t.getY(),_=d*(i.getX()-t.getX())/h,S=d*(i.getY()-t.getY())/h;for(let M=0;M<a;M++)this.image.get(Et.round(p+M*_),Et.round(E+M*S))&&(c|=1<<a-M-1);return c}isWhiteOrBlackRectangle(t,i,a,c){let h=3;t=new Ln(t.getX()-h,t.getY()+h),i=new Ln(i.getX()-h,i.getY()-h),a=new Ln(a.getX()+h,a.getY()-h),c=new Ln(c.getX()+h,c.getY()+h);let d=this.getColor(c,t);if(d===0)return!1;let p=this.getColor(t,i);return p!==d||(p=this.getColor(i,a),p!==d)?!1:(p=this.getColor(a,c),p===d)}getColor(t,i){let a=this.distancePoint(t,i),c=(i.getX()-t.getX())/a,h=(i.getY()-t.getY())/a,d=0,p=t.getX(),E=t.getY(),_=this.image.get(t.getX(),t.getY()),S=Math.ceil(a);for(let L=0;L<S;L++)p+=c,E+=h,this.image.get(Et.round(p),Et.round(E))!==_&&d++;let M=d/a;return M>.1&&M<.9?0:M<=.1===_?1:-1}getFirstDifferent(t,i,a,c){let h=t.getX()+a,d=t.getY()+c;for(;this.isValid(h,d)&&this.image.get(h,d)===i;)h+=a,d+=c;for(h-=a,d-=c;this.isValid(h,d)&&this.image.get(h,d)===i;)h+=a;for(h-=a;this.isValid(h,d)&&this.image.get(h,d)===i;)d+=c;return d-=c,new Ln(h,d)}expandSquare(t,i,a){let c=a/(2*i),h=t[0].getX()-t[2].getX(),d=t[0].getY()-t[2].getY(),p=(t[0].getX()+t[2].getX())/2,E=(t[0].getY()+t[2].getY())/2,_=new Ve(p+c*h,E+c*d),S=new Ve(p-c*h,E-c*d);h=t[1].getX()-t[3].getX(),d=t[1].getY()-t[3].getY(),p=(t[1].getX()+t[3].getX())/2,E=(t[1].getY()+t[3].getY())/2;let M=new Ve(p+c*h,E+c*d),L=new Ve(p-c*h,E-c*d);return[_,M,S,L]}isValid(t,i){return t>=0&&t<this.image.getWidth()&&i>0&&i<this.image.getHeight()}isValidPoint(t){let i=Et.round(t.getX()),a=Et.round(t.getY());return this.isValid(i,a)}distancePoint(t,i){return Et.distance(t.getX(),t.getY(),i.getX(),i.getY())}distanceResultPoint(t,i){return Et.distance(t.getX(),t.getY(),i.getX(),i.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(te.truncDivision(this.nbLayers-4,8)+1)+15}}class xi{decode(t,i=null){let a=null,c=new Pi(t.getBlackMatrix()),h=null,d=null;try{let S=c.detectMirror(!1);h=S.getPoints(),this.reportFoundResultPoints(i,h),d=new Ut().decode(S)}catch(S){a=S}if(d==null)try{let S=c.detectMirror(!0);h=S.getPoints(),this.reportFoundResultPoints(i,h),d=new Ut().decode(S)}catch(S){throw a??S}let p=new $e(d.getText(),d.getRawBytes(),d.getNumBits(),h,Ne.AZTEC,Q.currentTimeMillis()),E=d.getByteSegments();E!=null&&p.putMetadata(Qe.BYTE_SEGMENTS,E);let _=d.getECLevel();return _!=null&&p.putMetadata(Qe.ERROR_CORRECTION_LEVEL,_),p}reportFoundResultPoints(t,i){if(t!=null){let a=t.get(we.NEED_RESULT_POINT_CALLBACK);a!=null&&i.forEach((c,h,d)=>{a.foundPossibleResultPoint(c)})}}reset(){}}class Es extends ze{constructor(t=500){super(new xi,t)}}class rn{decode(t,i){try{return this.doDecode(t,i)}catch{if(i&&i.get(we.TRY_HARDER)===!0&&t.isRotateSupported()){const h=t.rotateCounterClockwise(),d=this.doDecode(h,i),p=d.getResultMetadata();let E=270;p!==null&&p.get(Qe.ORIENTATION)===!0&&(E=E+p.get(Qe.ORIENTATION)%360),d.putMetadata(Qe.ORIENTATION,E);const _=d.getResultPoints();if(_!==null){const S=h.getHeight();for(let M=0;M<_.length;M++)_[M]=new Ve(S-_[M].getY()-1,_[M].getX())}return d}else throw new ue}}reset(){}doDecode(t,i){const a=t.getWidth(),c=t.getHeight();let h=new pe(a);const d=i&&i.get(we.TRY_HARDER)===!0,p=Math.max(1,c>>(d?8:5));let E;d?E=c:E=15;const _=Math.trunc(c/2);for(let S=0;S<E;S++){const M=Math.trunc((S+1)/2),L=(S&1)===0,H=_+p*(L?M:-M);if(H<0||H>=c)break;try{h=t.getBlackRow(H,h)}catch{continue}for(let K=0;K<2;K++){if(K===1&&(h.reverse(),i&&i.get(we.NEED_RESULT_POINT_CALLBACK)===!0)){const $=new Map;i.forEach((re,fe)=>$.set(fe,re)),$.delete(we.NEED_RESULT_POINT_CALLBACK),i=$}try{const $=this.decodeRow(H,h,i);if(K===1){$.putMetadata(Qe.ORIENTATION,180);const re=$.getResultPoints();re!==null&&(re[0]=new Ve(a-re[0].getX()-1,re[0].getY()),re[1]=new Ve(a-re[1].getX()-1,re[1].getY()))}return $}catch{}}}throw new ue}static recordPattern(t,i,a){const c=a.length;for(let _=0;_<c;_++)a[_]=0;const h=t.getSize();if(i>=h)throw new ue;let d=!t.get(i),p=0,E=i;for(;E<h;){if(t.get(E)!==d)a[p]++;else{if(++p===c)break;a[p]=1,d=!d}E++}if(!(p===c||p===c-1&&E===h))throw new ue}static recordPatternInReverse(t,i,a){let c=a.length,h=t.get(i);for(;i>0&&c>=0;)t.get(--i)!==h&&(c--,h=!h);if(c>=0)throw new ue;rn.recordPattern(t,i+1,a)}static patternMatchVariance(t,i,a){const c=t.length;let h=0,d=0;for(let _=0;_<c;_++)h+=t[_],d+=i[_];if(h<d)return Number.POSITIVE_INFINITY;const p=h/d;a*=p;let E=0;for(let _=0;_<c;_++){const S=t[_],M=i[_]*p,L=S>M?S-M:M-S;if(L>a)return Number.POSITIVE_INFINITY;E+=L}return E/h}}class Oe extends rn{static findStartPattern(t){const i=t.getSize(),a=t.getNextSet(0);let c=0,h=Int32Array.from([0,0,0,0,0,0]),d=a,p=!1;const E=6;for(let _=a;_<i;_++)if(t.get(_)!==p)h[c]++;else{if(c===E-1){let S=Oe.MAX_AVG_VARIANCE,M=-1;for(let L=Oe.CODE_START_A;L<=Oe.CODE_START_C;L++){const H=rn.patternMatchVariance(h,Oe.CODE_PATTERNS[L],Oe.MAX_INDIVIDUAL_VARIANCE);H<S&&(S=H,M=L)}if(M>=0&&t.isRange(Math.max(0,d-(_-d)/2),d,!1))return Int32Array.from([d,_,M]);d+=h[0]+h[1],h=h.slice(2,h.length-1),h[c-1]=0,h[c]=0,c--}else c++;h[c]=1,p=!p}throw new ue}static decodeCode(t,i,a){rn.recordPattern(t,a,i);let c=Oe.MAX_AVG_VARIANCE,h=-1;for(let d=0;d<Oe.CODE_PATTERNS.length;d++){const p=Oe.CODE_PATTERNS[d],E=this.patternMatchVariance(i,p,Oe.MAX_INDIVIDUAL_VARIANCE);E<c&&(c=E,h=d)}if(h>=0)return h;throw new ue}decodeRow(t,i,a){const c=a&&a.get(we.ASSUME_GS1)===!0,h=Oe.findStartPattern(i),d=h[2];let p=0;const E=new Uint8Array(20);E[p++]=d;let _;switch(d){case Oe.CODE_START_A:_=Oe.CODE_CODE_A;break;case Oe.CODE_START_B:_=Oe.CODE_CODE_B;break;case Oe.CODE_START_C:_=Oe.CODE_CODE_C;break;default:throw new F}let S=!1,M=!1,L="",H=h[0],K=h[1];const $=Int32Array.from([0,0,0,0,0,0]);let re=0,fe=0,Se=d,Re=0,Ce=!0,Ct=!1,ht=!1;for(;!S;){const Vi=M;switch(M=!1,re=fe,fe=Oe.decodeCode(i,$,K),E[p++]=fe,fe!==Oe.CODE_STOP&&(Ce=!0),fe!==Oe.CODE_STOP&&(Re++,Se+=Re*fe),H=K,K+=$.reduce((eo,il)=>eo+il,0),fe){case Oe.CODE_START_A:case Oe.CODE_START_B:case Oe.CODE_START_C:throw new F}switch(_){case Oe.CODE_CODE_A:if(fe<64)ht===Ct?L+=String.fromCharCode(32+fe):L+=String.fromCharCode(32+fe+128),ht=!1;else if(fe<96)ht===Ct?L+=String.fromCharCode(fe-64):L+=String.fromCharCode(fe+64),ht=!1;else switch(fe!==Oe.CODE_STOP&&(Ce=!1),fe){case Oe.CODE_FNC_1:c&&(L.length===0?L+="]C1":L+="");break;case Oe.CODE_FNC_2:case Oe.CODE_FNC_3:break;case Oe.CODE_FNC_4_A:!Ct&&ht?(Ct=!0,ht=!1):Ct&&ht?(Ct=!1,ht=!1):ht=!0;break;case Oe.CODE_SHIFT:M=!0,_=Oe.CODE_CODE_B;break;case Oe.CODE_CODE_B:_=Oe.CODE_CODE_B;break;case Oe.CODE_CODE_C:_=Oe.CODE_CODE_C;break;case Oe.CODE_STOP:S=!0;break}break;case Oe.CODE_CODE_B:if(fe<96)ht===Ct?L+=String.fromCharCode(32+fe):L+=String.fromCharCode(32+fe+128),ht=!1;else switch(fe!==Oe.CODE_STOP&&(Ce=!1),fe){case Oe.CODE_FNC_1:c&&(L.length===0?L+="]C1":L+="");break;case Oe.CODE_FNC_2:case Oe.CODE_FNC_3:break;case Oe.CODE_FNC_4_B:!Ct&&ht?(Ct=!0,ht=!1):Ct&&ht?(Ct=!1,ht=!1):ht=!0;break;case Oe.CODE_SHIFT:M=!0,_=Oe.CODE_CODE_A;break;case Oe.CODE_CODE_A:_=Oe.CODE_CODE_A;break;case Oe.CODE_CODE_C:_=Oe.CODE_CODE_C;break;case Oe.CODE_STOP:S=!0;break}break;case Oe.CODE_CODE_C:if(fe<100)fe<10&&(L+="0"),L+=fe;else switch(fe!==Oe.CODE_STOP&&(Ce=!1),fe){case Oe.CODE_FNC_1:c&&(L.length===0?L+="]C1":L+="");break;case Oe.CODE_CODE_A:_=Oe.CODE_CODE_A;break;case Oe.CODE_CODE_B:_=Oe.CODE_CODE_B;break;case Oe.CODE_STOP:S=!0;break}break}Vi&&(_=_===Oe.CODE_CODE_A?Oe.CODE_CODE_B:Oe.CODE_CODE_A)}const Nr=K-H;if(K=i.getNextUnset(K),!i.isRange(K,Math.min(i.getSize(),K+(K-H)/2),!1))throw new ue;if(Se-=Re*re,Se%103!==re)throw new j;const fi=L.length;if(fi===0)throw new ue;fi>0&&Ce&&(_===Oe.CODE_CODE_C?L=L.substring(0,fi-2):L=L.substring(0,fi-1));const Vn=(h[1]+h[0])/2,Wt=H+Nr/2,_n=E.length,pr=new Uint8Array(_n);for(let Vi=0;Vi<_n;Vi++)pr[Vi]=E[Vi];const Rs=[new Ve(Vn,t),new Ve(Wt,t)];return new $e(L,pr,0,Rs,Ne.CODE_128,new Date().getTime())}}Oe.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],Oe.MAX_AVG_VARIANCE=.25,Oe.MAX_INDIVIDUAL_VARIANCE=.7,Oe.CODE_SHIFT=98,Oe.CODE_CODE_C=99,Oe.CODE_CODE_B=100,Oe.CODE_CODE_A=101,Oe.CODE_FNC_1=102,Oe.CODE_FNC_2=97,Oe.CODE_FNC_3=96,Oe.CODE_FNC_4_A=101,Oe.CODE_FNC_4_B=100,Oe.CODE_START_A=103,Oe.CODE_START_B=104,Oe.CODE_START_C=105,Oe.CODE_STOP=106;class an extends rn{constructor(t=!1,i=!1){super(),this.usingCheckDigit=t,this.extendedMode=i,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(t,i,a){let c=this.counters;c.fill(0),this.decodeRowResult="";let h=an.findAsteriskPattern(i,c),d=i.getNextSet(h[1]),p=i.getSize(),E,_;do{an.recordPattern(i,d,c);let $=an.toNarrowWidePattern(c);if($<0)throw new ue;E=an.patternToChar($),this.decodeRowResult+=E,_=d;for(let re of c)d+=re;d=i.getNextSet(d)}while(E!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let S=0;for(let $ of c)S+=$;let M=d-_-S;if(d!==p&&M*2<S)throw new ue;if(this.usingCheckDigit){let $=this.decodeRowResult.length-1,re=0;for(let fe=0;fe<$;fe++)re+=an.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(fe));if(this.decodeRowResult.charAt($)!==an.ALPHABET_STRING.charAt(re%43))throw new j;this.decodeRowResult=this.decodeRowResult.substring(0,$)}if(this.decodeRowResult.length===0)throw new ue;let L;this.extendedMode?L=an.decodeExtended(this.decodeRowResult):L=this.decodeRowResult;let H=(h[1]+h[0])/2,K=_+S/2;return new $e(L,null,0,[new Ve(H,t),new Ve(K,t)],Ne.CODE_39,new Date().getTime())}static findAsteriskPattern(t,i){let a=t.getSize(),c=t.getNextSet(0),h=0,d=c,p=!1,E=i.length;for(let _=c;_<a;_++)if(t.get(_)!==p)i[h]++;else{if(h===E-1){if(this.toNarrowWidePattern(i)===an.ASTERISK_ENCODING&&t.isRange(Math.max(0,d-Math.floor((_-d)/2)),d,!1))return[d,_];d+=i[0]+i[1],i.copyWithin(0,2,2+h-1),i[h-1]=0,i[h]=0,h--}else h++;i[h]=1,p=!p}throw new ue}static toNarrowWidePattern(t){let i=t.length,a=0,c;do{let h=2147483647;for(let E of t)E<h&&E>a&&(h=E);a=h,c=0;let d=0,p=0;for(let E=0;E<i;E++){let _=t[E];_>a&&(p|=1<<i-1-E,c++,d+=_)}if(c===3){for(let E=0;E<i&&c>0;E++){let _=t[E];if(_>a&&(c--,_*2>=d))return-1}return p}}while(c>3);return-1}static patternToChar(t){for(let i=0;i<an.CHARACTER_ENCODINGS.length;i++)if(an.CHARACTER_ENCODINGS[i]===t)return an.ALPHABET_STRING.charAt(i);if(t===an.ASTERISK_ENCODING)return"*";throw new ue}static decodeExtended(t){let i=t.length,a="";for(let c=0;c<i;c++){let h=t.charAt(c);if(h==="+"||h==="$"||h==="%"||h==="/"){let d=t.charAt(c+1),p="\0";switch(h){case"+":if(d>="A"&&d<="Z")p=String.fromCharCode(d.charCodeAt(0)+32);else throw new F;break;case"$":if(d>="A"&&d<="Z")p=String.fromCharCode(d.charCodeAt(0)-64);else throw new F;break;case"%":if(d>="A"&&d<="E")p=String.fromCharCode(d.charCodeAt(0)-38);else if(d>="F"&&d<="J")p=String.fromCharCode(d.charCodeAt(0)-11);else if(d>="K"&&d<="O")p=String.fromCharCode(d.charCodeAt(0)+16);else if(d>="P"&&d<="T")p=String.fromCharCode(d.charCodeAt(0)+43);else if(d==="U")p="\0";else if(d==="V")p="@";else if(d==="W")p="`";else if(d==="X"||d==="Y"||d==="Z")p="";else throw new F;break;case"/":if(d>="A"&&d<="O")p=String.fromCharCode(d.charCodeAt(0)-32);else if(d==="Z")p=":";else throw new F;break}a+=p,c++}else a+=h}return a}}an.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",an.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],an.ASTERISK_ENCODING=148;class Lt extends rn{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(t,i,a){let c=this.decodeStart(i),h=this.decodeEnd(i),d=new U;Lt.decodeMiddle(i,c[1],h[0],d);let p=d.toString(),E=null;a!=null&&(E=a.get(we.ALLOWED_LENGTHS)),E==null&&(E=Lt.DEFAULT_ALLOWED_LENGTHS);let _=p.length,S=!1,M=0;for(let K of E){if(_===K){S=!0;break}K>M&&(M=K)}if(!S&&_>M&&(S=!0),!S)throw new F;const L=[new Ve(c[1],t),new Ve(h[0],t)];return new $e(p,null,0,L,Ne.ITF,new Date().getTime())}static decodeMiddle(t,i,a,c){let h=new Int32Array(10),d=new Int32Array(5),p=new Int32Array(5);for(h.fill(0),d.fill(0),p.fill(0);i<a;){rn.recordPattern(t,i,h);for(let _=0;_<5;_++){let S=2*_;d[_]=h[S],p[_]=h[S+1]}let E=Lt.decodeDigit(d);c.append(E.toString()),E=this.decodeDigit(p),c.append(E.toString()),h.forEach(function(_){i+=_})}}decodeStart(t){let i=Lt.skipWhiteSpace(t),a=Lt.findGuardPattern(t,i,Lt.START_PATTERN);return this.narrowLineWidth=(a[1]-a[0])/4,this.validateQuietZone(t,a[0]),a}validateQuietZone(t,i){let a=this.narrowLineWidth*10;a=a<i?a:i;for(let c=i-1;a>0&&c>=0&&!t.get(c);c--)a--;if(a!==0)throw new ue}static skipWhiteSpace(t){const i=t.getSize(),a=t.getNextSet(0);if(a===i)throw new ue;return a}decodeEnd(t){t.reverse();try{let i=Lt.skipWhiteSpace(t),a;try{a=Lt.findGuardPattern(t,i,Lt.END_PATTERN_REVERSED[0])}catch(h){h instanceof ue&&(a=Lt.findGuardPattern(t,i,Lt.END_PATTERN_REVERSED[1]))}this.validateQuietZone(t,a[0]);let c=a[0];return a[0]=t.getSize()-a[1],a[1]=t.getSize()-c,a}finally{t.reverse()}}static findGuardPattern(t,i,a){let c=a.length,h=new Int32Array(c),d=t.getSize(),p=!1,E=0,_=i;h.fill(0);for(let S=i;S<d;S++)if(t.get(S)!==p)h[E]++;else{if(E===c-1){if(rn.patternMatchVariance(h,a,Lt.MAX_INDIVIDUAL_VARIANCE)<Lt.MAX_AVG_VARIANCE)return[_,S];_+=h[0]+h[1],Q.arraycopy(h,2,h,0,E-1),h[E-1]=0,h[E]=0,E--}else E++;h[E]=1,p=!p}throw new ue}static decodeDigit(t){let i=Lt.MAX_AVG_VARIANCE,a=-1,c=Lt.PATTERNS.length;for(let h=0;h<c;h++){let d=Lt.PATTERNS[h],p=rn.patternMatchVariance(t,d,Lt.MAX_INDIVIDUAL_VARIANCE);p<i?(i=p,a=h):p===i&&(a=-1)}if(a>=0)return a%10;throw new ue}}Lt.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],Lt.MAX_AVG_VARIANCE=.38,Lt.MAX_INDIVIDUAL_VARIANCE=.5,Lt.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],Lt.START_PATTERN=Int32Array.from([1,1,1,1]),Lt.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class Zt extends rn{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(t){let i=!1,a,c=0,h=Int32Array.from([0,0,0]);for(;!i;){h=Int32Array.from([0,0,0]),a=Zt.findGuardPattern(t,c,!1,this.START_END_PATTERN,h);let d=a[0];c=a[1];let p=d-(c-d);p>=0&&(i=t.isRange(p,d,!1))}return a}static checkChecksum(t){return Zt.checkStandardUPCEANChecksum(t)}static checkStandardUPCEANChecksum(t){let i=t.length;if(i===0)return!1;let a=parseInt(t.charAt(i-1),10);return Zt.getStandardUPCEANChecksum(t.substring(0,i-1))===a}static getStandardUPCEANChecksum(t){let i=t.length,a=0;for(let c=i-1;c>=0;c-=2){let h=t.charAt(c).charCodeAt(0)-48;if(h<0||h>9)throw new F;a+=h}a*=3;for(let c=i-2;c>=0;c-=2){let h=t.charAt(c).charCodeAt(0)-48;if(h<0||h>9)throw new F;a+=h}return(1e3-a)%10}static decodeEnd(t,i){return Zt.findGuardPattern(t,i,!1,Zt.START_END_PATTERN,new Int32Array(Zt.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(t,i,a,c){return this.findGuardPattern(t,i,a,c,new Int32Array(c.length))}static findGuardPattern(t,i,a,c,h){let d=t.getSize();i=a?t.getNextUnset(i):t.getNextSet(i);let p=0,E=i,_=c.length,S=a;for(let M=i;M<d;M++)if(t.get(M)!==S)h[p]++;else{if(p===_-1){if(rn.patternMatchVariance(h,c,Zt.MAX_INDIVIDUAL_VARIANCE)<Zt.MAX_AVG_VARIANCE)return Int32Array.from([E,M]);E+=h[0]+h[1];let L=h.slice(2,h.length-1);for(let H=0;H<p-1;H++)h[H]=L[H];h[p-1]=0,h[p]=0,p--}else p++;h[p]=1,S=!S}throw new ue}static decodeDigit(t,i,a,c){this.recordPattern(t,a,i);let h=this.MAX_AVG_VARIANCE,d=-1,p=c.length;for(let E=0;E<p;E++){let _=c[E],S=rn.patternMatchVariance(i,_,Zt.MAX_INDIVIDUAL_VARIANCE);S<h&&(h=S,d=E)}if(d>=0)return d;throw new ue}}Zt.MAX_AVG_VARIANCE=.48,Zt.MAX_INDIVIDUAL_VARIANCE=.7,Zt.START_END_PATTERN=Int32Array.from([1,1,1]),Zt.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),Zt.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Zt.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class si{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(t,i,a){let c=this.decodeRowStringBuffer,h=this.decodeMiddle(i,a,c),d=c.toString(),p=si.parseExtensionString(d),E=[new Ve((a[0]+a[1])/2,t),new Ve(h,t)],_=new $e(d,null,0,E,Ne.UPC_EAN_EXTENSION,new Date().getTime());return p!=null&&_.putAllMetadata(p),_}decodeMiddle(t,i,a){let c=this.decodeMiddleCounters;c[0]=0,c[1]=0,c[2]=0,c[3]=0;let h=t.getSize(),d=i[1],p=0;for(let _=0;_<5&&d<h;_++){let S=Zt.decodeDigit(t,c,d,Zt.L_AND_G_PATTERNS);a+=String.fromCharCode(48+S%10);for(let M of c)d+=M;S>=10&&(p|=1<<4-_),_!==4&&(d=t.getNextSet(d),d=t.getNextUnset(d))}if(a.length!==5)throw new ue;let E=this.determineCheckDigit(p);if(si.extensionChecksum(a.toString())!==E)throw new ue;return d}static extensionChecksum(t){let i=t.length,a=0;for(let c=i-2;c>=0;c-=2)a+=t.charAt(c).charCodeAt(0)-48;a*=3;for(let c=i-1;c>=0;c-=2)a+=t.charAt(c).charCodeAt(0)-48;return a*=3,a%10}determineCheckDigit(t){for(let i=0;i<10;i++)if(t===this.CHECK_DIGIT_ENCODINGS[i])return i;throw new ue}static parseExtensionString(t){if(t.length!==5)return null;let i=si.parseExtension5String(t);return i==null?null:new Map([[Qe.SUGGESTED_PRICE,i]])}static parseExtension5String(t){let i;switch(t.charAt(0)){case"0":i="";break;case"5":i="$";break;case"9":switch(t){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}i="";break;default:i="";break}let a=parseInt(t.substring(1)),c=(a/100).toString(),h=a%100,d=h<10?"0"+h:h.toString();return i+c+"."+d}}class qi{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(t,i,a){let c=this.decodeRowStringBuffer,h=this.decodeMiddle(i,a,c),d=c.toString(),p=qi.parseExtensionString(d),E=[new Ve((a[0]+a[1])/2,t),new Ve(h,t)],_=new $e(d,null,0,E,Ne.UPC_EAN_EXTENSION,new Date().getTime());return p!=null&&_.putAllMetadata(p),_}decodeMiddle(t,i,a){let c=this.decodeMiddleCounters;c[0]=0,c[1]=0,c[2]=0,c[3]=0;let h=t.getSize(),d=i[1],p=0;for(let E=0;E<2&&d<h;E++){let _=Zt.decodeDigit(t,c,d,Zt.L_AND_G_PATTERNS);a+=String.fromCharCode(48+_%10);for(let S of c)d+=S;_>=10&&(p|=1<<1-E),E!==1&&(d=t.getNextSet(d),d=t.getNextUnset(d))}if(a.length!==2)throw new ue;if(parseInt(a.toString())%4!==p)throw new ue;return d}static parseExtensionString(t){return t.length!==2?null:new Map([[Qe.ISSUE_NUMBER,parseInt(t)]])}}class xs{static decodeRow(t,i,a){let c=Zt.findGuardPattern(i,a,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new si().decodeRow(t,i,c)}catch{return new qi().decodeRow(t,i,c)}}}xs.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class pt extends Zt{constructor(){super(),this.decodeRowStringBuffer="",pt.L_AND_G_PATTERNS=pt.L_PATTERNS.map(t=>Int32Array.from(t));for(let t=10;t<20;t++){let i=pt.L_PATTERNS[t-10],a=new Int32Array(i.length);for(let c=0;c<i.length;c++)a[c]=i[i.length-c-1];pt.L_AND_G_PATTERNS[t]=a}}decodeRow(t,i,a){let c=pt.findStartGuardPattern(i),h=a==null?null:a.get(we.NEED_RESULT_POINT_CALLBACK);if(h!=null){const Ce=new Ve((c[0]+c[1])/2,t);h.foundPossibleResultPoint(Ce)}let d=this.decodeMiddle(i,c,this.decodeRowStringBuffer),p=d.rowOffset,E=d.resultString;if(h!=null){const Ce=new Ve(p,t);h.foundPossibleResultPoint(Ce)}let _=this.decodeEnd(i,p);if(h!=null){const Ce=new Ve((_[0]+_[1])/2,t);h.foundPossibleResultPoint(Ce)}let S=_[1],M=S+(S-_[0]);if(M>=i.getSize()||!i.isRange(S,M,!1))throw new ue;let L=E.toString();if(L.length<8)throw new F;if(!pt.checkChecksum(L))throw new j;let H=(c[1]+c[0])/2,K=(_[1]+_[0])/2,$=this.getBarcodeFormat(),re=[new Ve(H,t),new Ve(K,t)],fe=new $e(L,null,0,re,$,new Date().getTime()),Se=0;try{let Ce=xs.decodeRow(t,i,_[1]);fe.putMetadata(Qe.UPC_EAN_EXTENSION,Ce.getText()),fe.putAllMetadata(Ce.getResultMetadata()),fe.addResultPoints(Ce.getResultPoints()),Se=Ce.getText().length}catch{}let Re=a==null?null:a.get(we.ALLOWED_EAN_EXTENSIONS);if(Re!=null){let Ce=!1;for(let Ct in Re)if(Se.toString()===Ct){Ce=!0;break}if(!Ce)throw new ue}return fe}decodeEnd(t,i){return pt.findGuardPattern(t,i,!1,pt.START_END_PATTERN,new Int32Array(pt.START_END_PATTERN.length).fill(0))}static checkChecksum(t){return pt.checkStandardUPCEANChecksum(t)}static checkStandardUPCEANChecksum(t){let i=t.length;if(i===0)return!1;let a=parseInt(t.charAt(i-1),10);return pt.getStandardUPCEANChecksum(t.substring(0,i-1))===a}static getStandardUPCEANChecksum(t){let i=t.length,a=0;for(let c=i-1;c>=0;c-=2){let h=t.charAt(c).charCodeAt(0)-48;if(h<0||h>9)throw new F;a+=h}a*=3;for(let c=i-2;c>=0;c-=2){let h=t.charAt(c).charCodeAt(0)-48;if(h<0||h>9)throw new F;a+=h}return(1e3-a)%10}}class tr extends pt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(t,i,a){let c=this.decodeMiddleCounters;c[0]=0,c[1]=0,c[2]=0,c[3]=0;let h=t.getSize(),d=i[1],p=0;for(let _=0;_<6&&d<h;_++){let S=pt.decodeDigit(t,c,d,pt.L_AND_G_PATTERNS);a+=String.fromCharCode(48+S%10);for(let M of c)d+=M;S>=10&&(p|=1<<5-_)}a=tr.determineFirstDigit(a,p),d=pt.findGuardPattern(t,d,!0,pt.MIDDLE_PATTERN,new Int32Array(pt.MIDDLE_PATTERN.length).fill(0))[1];for(let _=0;_<6&&d<h;_++){let S=pt.decodeDigit(t,c,d,pt.L_PATTERNS);a+=String.fromCharCode(48+S);for(let M of c)d+=M}return{rowOffset:d,resultString:a}}getBarcodeFormat(){return Ne.EAN_13}static determineFirstDigit(t,i){for(let a=0;a<10;a++)if(i===this.FIRST_DIGIT_ENCODINGS[a])return t=String.fromCharCode(48+a)+t,t;throw new ue}}tr.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class As extends pt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(t,i,a){const c=this.decodeMiddleCounters;c[0]=0,c[1]=0,c[2]=0,c[3]=0;let h=t.getSize(),d=i[1];for(let E=0;E<4&&d<h;E++){let _=pt.decodeDigit(t,c,d,pt.L_PATTERNS);a+=String.fromCharCode(48+_);for(let S of c)d+=S}d=pt.findGuardPattern(t,d,!0,pt.MIDDLE_PATTERN,new Int32Array(pt.MIDDLE_PATTERN.length).fill(0))[1];for(let E=0;E<4&&d<h;E++){let _=pt.decodeDigit(t,c,d,pt.L_PATTERNS);a+=String.fromCharCode(48+_);for(let S of c)d+=S}return{rowOffset:d,resultString:a}}getBarcodeFormat(){return Ne.EAN_8}}class oi extends pt{constructor(){super(...arguments),this.ean13Reader=new tr}getBarcodeFormat(){return Ne.UPC_A}decode(t,i){return this.maybeReturnResult(this.ean13Reader.decode(t))}decodeRow(t,i,a){return this.maybeReturnResult(this.ean13Reader.decodeRow(t,i,a))}decodeMiddle(t,i,a){return this.ean13Reader.decodeMiddle(t,i,a)}maybeReturnResult(t){let i=t.getText();if(i.charAt(0)==="0"){let a=new $e(i.substring(1),null,null,t.getResultPoints(),Ne.UPC_A);return t.getResultMetadata()!=null&&a.putAllMetadata(t.getResultMetadata()),a}else throw new ue}reset(){this.ean13Reader.reset()}}class cr extends pt{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(t,i,a){const c=this.decodeMiddleCounters.map(_=>_);c[0]=0,c[1]=0,c[2]=0,c[3]=0;const h=t.getSize();let d=i[1],p=0;for(let _=0;_<6&&d<h;_++){const S=cr.decodeDigit(t,c,d,cr.L_AND_G_PATTERNS);a+=String.fromCharCode(48+S%10);for(let M of c)d+=M;S>=10&&(p|=1<<5-_)}let E=cr.determineNumSysAndCheckDigit(a,p);return{rowOffset:d,resultString:E}}decodeEnd(t,i){return cr.findGuardPatternWithoutCounters(t,i,!0,cr.MIDDLE_END_PATTERN)}checkChecksum(t){return pt.checkChecksum(cr.convertUPCEtoUPCA(t))}static determineNumSysAndCheckDigit(t,i){for(let a=0;a<=1;a++)for(let c=0;c<10;c++)if(i===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[a][c]){let h=String.fromCharCode(48+a),d=String.fromCharCode(48+c);return h+t+d}throw ue.getNotFoundInstance()}getBarcodeFormat(){return Ne.UPC_E}static convertUPCEtoUPCA(t){const i=t.slice(1,7).split("").map(h=>h.charCodeAt(0)),a=new U;a.append(t.charAt(0));let c=i[5];switch(c){case 0:case 1:case 2:a.appendChars(i,0,2),a.append(c),a.append("0000"),a.appendChars(i,2,3);break;case 3:a.appendChars(i,0,3),a.append("00000"),a.appendChars(i,3,2);break;case 4:a.appendChars(i,0,4),a.append("00000"),a.append(i[4]);break;default:a.appendChars(i,0,5),a.append("0000"),a.append(c);break}return t.length>=8&&a.append(t.charAt(7)),a.toString()}}cr.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),cr.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class Li extends rn{constructor(t){super();let i=t==null?null:t.get(we.POSSIBLE_FORMATS),a=[];o(i)?(a.push(new tr),a.push(new oi),a.push(new As),a.push(new cr)):(i.indexOf(Ne.EAN_13)>-1&&a.push(new tr),i.indexOf(Ne.UPC_A)>-1&&a.push(new oi),i.indexOf(Ne.EAN_8)>-1&&a.push(new As),i.indexOf(Ne.UPC_E)>-1&&a.push(new cr)),this.readers=a}decodeRow(t,i,a){for(let c of this.readers)try{const h=c.decodeRow(t,i,a),d=h.getBarcodeFormat()===Ne.EAN_13&&h.getText().charAt(0)==="0",p=a==null?null:a.get(we.POSSIBLE_FORMATS),E=p==null||p.includes(Ne.UPC_A);if(d&&E){const _=h.getRawBytes(),S=new $e(h.getText().substring(1),_,_?_.length:null,h.getResultPoints(),Ne.UPC_A);return S.putAllMetadata(h.getResultMetadata()),S}return h}catch{}throw new ue}reset(){for(let t of this.readers)t.reset()}}class Rn extends rn{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(t,i){for(let a=0;a<i.length;a++)if(rn.patternMatchVariance(t,i[a],Rn.MAX_INDIVIDUAL_VARIANCE)<Rn.MAX_AVG_VARIANCE)return a;throw new ue}static count(t){return Et.sum(new Int32Array(t))}static increment(t,i){let a=0,c=i[0];for(let h=1;h<t.length;h++)i[h]>c&&(c=i[h],a=h);t[a]++}static decrement(t,i){let a=0,c=i[0];for(let h=1;h<t.length;h++)i[h]<c&&(c=i[h],a=h);t[a]--}static isFinderPattern(t){let i=t[0]+t[1],a=i+t[2]+t[3],c=i/a;if(c>=Rn.MIN_FINDER_PATTERN_RATIO&&c<=Rn.MAX_FINDER_PATTERN_RATIO){let h=Number.MAX_SAFE_INTEGER,d=Number.MIN_SAFE_INTEGER;for(let p of t)p>d&&(d=p),p<h&&(h=p);return d<10*h}return!1}}Rn.MAX_AVG_VARIANCE=.2,Rn.MAX_INDIVIDUAL_VARIANCE=.45,Rn.MIN_FINDER_PATTERN_RATIO=9.5/12,Rn.MAX_FINDER_PATTERN_RATIO=12.5/14;class _r{constructor(t,i){this.value=t,this.checksumPortion=i}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(t){if(!(t instanceof _r))return!1;const i=t;return this.value===i.value&&this.checksumPortion===i.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class Qi{constructor(t,i,a,c,h){this.value=t,this.startEnd=i,this.value=t,this.startEnd=i,this.resultPoints=new Array,this.resultPoints.push(new Ve(a,h)),this.resultPoints.push(new Ve(c,h))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(t){if(!(t instanceof Qi))return!1;const i=t;return this.value===i.value}hashCode(){return this.value}}class Bt{constructor(){}static getRSSvalue(t,i,a){let c=0;for(let E of t)c+=E;let h=0,d=0,p=t.length;for(let E=0;E<p-1;E++){let _;for(_=1,d|=1<<E;_<t[E];_++,d&=~(1<<E)){let S=Bt.combins(c-_-1,p-E-2);if(a&&d===0&&c-_-(p-E-1)>=p-E-1&&(S-=Bt.combins(c-_-(p-E),p-E-2)),p-E-1>1){let M=0;for(let L=c-_-(p-E-2);L>i;L--)M+=Bt.combins(c-_-L-1,p-E-3);S-=M*(p-1-E)}else c-_>i&&S--;h+=S}c-=_}return h}static combins(t,i){let a,c;t-i>i?(c=i,a=t-i):(c=t-i,a=i);let h=1,d=1;for(let p=t;p>a;p--)h*=p,d<=c&&(h/=d,d++);for(;d<=c;)h/=d,d++;return h}}class Ws{static buildBitArray(t){let i=t.length*2-1;t[t.length-1].getRightChar()==null&&(i-=1);let a=12*i,c=new pe(a),h=0,p=t[0].getRightChar().getValue();for(let E=11;E>=0;--E)(p&1<<E)!=0&&c.set(h),h++;for(let E=1;E<t.length;++E){let _=t[E],S=_.getLeftChar().getValue();for(let M=11;M>=0;--M)(S&1<<M)!=0&&c.set(h),h++;if(_.getRightChar()!=null){let M=_.getRightChar().getValue();for(let L=11;L>=0;--L)(M&1<<L)!=0&&c.set(h),h++}}return c}}class Wn{constructor(t,i){i?this.decodedInformation=null:(this.finished=t,this.decodedInformation=i)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class ki{constructor(t){this.newPosition=t}getNewPosition(){return this.newPosition}}class Nn extends ki{constructor(t,i){super(t),this.value=i}getValue(){return this.value}isFNC1(){return this.value===Nn.FNC1}}Nn.FNC1="$";class Yr extends ki{constructor(t,i,a){super(t),a?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=i}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class pn extends ki{constructor(t,i,a){if(super(t),i<0||i>10||a<0||a>10)throw new F;this.firstDigit=i,this.secondDigit=a}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===pn.FNC1}isSecondDigitFNC1(){return this.secondDigit===pn.FNC1}isAnyFNC1(){return this.firstDigit===pn.FNC1||this.secondDigit===pn.FNC1}}pn.FNC1=10;class Be{constructor(){}static parseFieldsInGeneralPurpose(t){if(!t)return null;if(t.length<2)throw new ue;let i=t.substring(0,2);for(let h of Be.TWO_DIGIT_DATA_LENGTH)if(h[0]===i)return h[1]===Be.VARIABLE_LENGTH?Be.processVariableAI(2,h[2],t):Be.processFixedAI(2,h[1],t);if(t.length<3)throw new ue;let a=t.substring(0,3);for(let h of Be.THREE_DIGIT_DATA_LENGTH)if(h[0]===a)return h[1]===Be.VARIABLE_LENGTH?Be.processVariableAI(3,h[2],t):Be.processFixedAI(3,h[1],t);for(let h of Be.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(h[0]===a)return h[1]===Be.VARIABLE_LENGTH?Be.processVariableAI(4,h[2],t):Be.processFixedAI(4,h[1],t);if(t.length<4)throw new ue;let c=t.substring(0,4);for(let h of Be.FOUR_DIGIT_DATA_LENGTH)if(h[0]===c)return h[1]===Be.VARIABLE_LENGTH?Be.processVariableAI(4,h[2],t):Be.processFixedAI(4,h[1],t);throw new ue}static processFixedAI(t,i,a){if(a.length<t)throw new ue;let c=a.substring(0,t);if(a.length<t+i)throw new ue;let h=a.substring(t,t+i),d=a.substring(t+i),p="("+c+")"+h,E=Be.parseFieldsInGeneralPurpose(d);return E==null?p:p+E}static processVariableAI(t,i,a){let c=a.substring(0,t),h;a.length<t+i?h=a.length:h=t+i;let d=a.substring(t,h),p=a.substring(h),E="("+c+")"+d,_=Be.parseFieldsInGeneralPurpose(p);return _==null?E:E+_}}Be.VARIABLE_LENGTH=[],Be.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",Be.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",Be.VARIABLE_LENGTH,20],["22",Be.VARIABLE_LENGTH,29],["30",Be.VARIABLE_LENGTH,8],["37",Be.VARIABLE_LENGTH,8],["90",Be.VARIABLE_LENGTH,30],["91",Be.VARIABLE_LENGTH,30],["92",Be.VARIABLE_LENGTH,30],["93",Be.VARIABLE_LENGTH,30],["94",Be.VARIABLE_LENGTH,30],["95",Be.VARIABLE_LENGTH,30],["96",Be.VARIABLE_LENGTH,30],["97",Be.VARIABLE_LENGTH,3],["98",Be.VARIABLE_LENGTH,30],["99",Be.VARIABLE_LENGTH,30]],Be.THREE_DIGIT_DATA_LENGTH=[["240",Be.VARIABLE_LENGTH,30],["241",Be.VARIABLE_LENGTH,30],["242",Be.VARIABLE_LENGTH,6],["250",Be.VARIABLE_LENGTH,30],["251",Be.VARIABLE_LENGTH,30],["253",Be.VARIABLE_LENGTH,17],["254",Be.VARIABLE_LENGTH,20],["400",Be.VARIABLE_LENGTH,30],["401",Be.VARIABLE_LENGTH,30],["402",17],["403",Be.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",Be.VARIABLE_LENGTH,20],["421",Be.VARIABLE_LENGTH,15],["422",3],["423",Be.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],Be.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",Be.VARIABLE_LENGTH,15],["391",Be.VARIABLE_LENGTH,18],["392",Be.VARIABLE_LENGTH,15],["393",Be.VARIABLE_LENGTH,18],["703",Be.VARIABLE_LENGTH,30]],Be.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",Be.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",Be.VARIABLE_LENGTH,20],["8003",Be.VARIABLE_LENGTH,30],["8004",Be.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",Be.VARIABLE_LENGTH,30],["8008",Be.VARIABLE_LENGTH,12],["8018",18],["8020",Be.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",Be.VARIABLE_LENGTH,70],["8200",Be.VARIABLE_LENGTH,70]];class Ki{constructor(t){this.buffer=new U,this.information=t}decodeAllCodes(t,i){let a=i,c=null;do{let h=this.decodeGeneralPurposeField(a,c),d=Be.parseFieldsInGeneralPurpose(h.getNewString());if(d!=null&&t.append(d),h.isRemaining()?c=""+h.getRemainingValue():c=null,a===h.getNewPosition())break;a=h.getNewPosition()}while(!0);return t.toString()}isStillNumeric(t){if(t+7>this.information.getSize())return t+4<=this.information.getSize();for(let i=t;i<t+3;++i)if(this.information.get(i))return!0;return this.information.get(t+3)}decodeNumeric(t){if(t+7>this.information.getSize()){let h=this.extractNumericValueFromBitArray(t,4);return h===0?new pn(this.information.getSize(),pn.FNC1,pn.FNC1):new pn(this.information.getSize(),h-1,pn.FNC1)}let i=this.extractNumericValueFromBitArray(t,7),a=(i-8)/11,c=(i-8)%11;return new pn(t+7,a,c)}extractNumericValueFromBitArray(t,i){return Ki.extractNumericValueFromBitArray(this.information,t,i)}static extractNumericValueFromBitArray(t,i,a){let c=0;for(let h=0;h<a;++h)t.get(i+h)&&(c|=1<<a-h-1);return c}decodeGeneralPurposeField(t,i){this.buffer.setLengthToZero(),i!=null&&this.buffer.append(i),this.current.setPosition(t);let a=this.parseBlocks();return a!=null&&a.isRemaining()?new Yr(this.current.getPosition(),this.buffer.toString(),a.getRemainingValue()):new Yr(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let t,i;do{let a=this.current.getPosition();if(this.current.isAlpha()?(i=this.parseAlphaBlock(),t=i.isFinished()):this.current.isIsoIec646()?(i=this.parseIsoIec646Block(),t=i.isFinished()):(i=this.parseNumericBlock(),t=i.isFinished()),!(a!==this.current.getPosition())&&!t)break}while(!t);return i.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let t=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(t.getNewPosition()),t.isFirstDigitFNC1()){let i;return t.isSecondDigitFNC1()?i=new Yr(this.current.getPosition(),this.buffer.toString()):i=new Yr(this.current.getPosition(),this.buffer.toString(),t.getSecondDigit()),new Wn(!0,i)}if(this.buffer.append(t.getFirstDigit()),t.isSecondDigitFNC1()){let i=new Yr(this.current.getPosition(),this.buffer.toString());return new Wn(!0,i)}this.buffer.append(t.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Wn(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let t=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(t.getNewPosition()),t.isFNC1()){let i=new Yr(this.current.getPosition(),this.buffer.toString());return new Wn(!0,i)}this.buffer.append(t.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Wn(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let t=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(t.getNewPosition()),t.isFNC1()){let i=new Yr(this.current.getPosition(),this.buffer.toString());return new Wn(!0,i)}this.buffer.append(t.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Wn(!1)}isStillIsoIec646(t){if(t+5>this.information.getSize())return!1;let i=this.extractNumericValueFromBitArray(t,5);if(i>=5&&i<16)return!0;if(t+7>this.information.getSize())return!1;let a=this.extractNumericValueFromBitArray(t,7);if(a>=64&&a<116)return!0;if(t+8>this.information.getSize())return!1;let c=this.extractNumericValueFromBitArray(t,8);return c>=232&&c<253}decodeIsoIec646(t){let i=this.extractNumericValueFromBitArray(t,5);if(i===15)return new Nn(t+5,Nn.FNC1);if(i>=5&&i<15)return new Nn(t+5,"0"+(i-5));let a=this.extractNumericValueFromBitArray(t,7);if(a>=64&&a<90)return new Nn(t+7,""+(a+1));if(a>=90&&a<116)return new Nn(t+7,""+(a+7));let c=this.extractNumericValueFromBitArray(t,8),h;switch(c){case 232:h="!";break;case 233:h='"';break;case 234:h="%";break;case 235:h="&";break;case 236:h="'";break;case 237:h="(";break;case 238:h=")";break;case 239:h="*";break;case 240:h="+";break;case 241:h=",";break;case 242:h="-";break;case 243:h=".";break;case 244:h="/";break;case 245:h=":";break;case 246:h=";";break;case 247:h="<";break;case 248:h="=";break;case 249:h=">";break;case 250:h="?";break;case 251:h="_";break;case 252:h=" ";break;default:throw new F}return new Nn(t+8,h)}isStillAlpha(t){if(t+5>this.information.getSize())return!1;let i=this.extractNumericValueFromBitArray(t,5);if(i>=5&&i<16)return!0;if(t+6>this.information.getSize())return!1;let a=this.extractNumericValueFromBitArray(t,6);return a>=16&&a<63}decodeAlphanumeric(t){let i=this.extractNumericValueFromBitArray(t,5);if(i===15)return new Nn(t+5,Nn.FNC1);if(i>=5&&i<15)return new Nn(t+5,"0"+(i-5));let a=this.extractNumericValueFromBitArray(t,6);if(a>=32&&a<58)return new Nn(t+6,""+(a+33));let c;switch(a){case 58:c="*";break;case 59:c=",";break;case 60:c="-";break;case 61:c=".";break;case 62:c="/";break;default:throw new ur("Decoding invalid alphanumeric value: "+a)}return new Nn(t+6,c)}isAlphaTo646ToAlphaLatch(t){if(t+1>this.information.getSize())return!1;for(let i=0;i<5&&i+t<this.information.getSize();++i)if(i===2){if(!this.information.get(t+2))return!1}else if(this.information.get(t+i))return!1;return!0}isAlphaOr646ToNumericLatch(t){if(t+3>this.information.getSize())return!1;for(let i=t;i<t+3;++i)if(this.information.get(i))return!1;return!0}isNumericToAlphaNumericLatch(t){if(t+1>this.information.getSize())return!1;for(let i=0;i<4&&i+t<this.information.getSize();++i)if(this.information.get(t+i))return!1;return!0}}class Zi{constructor(t){this.information=t,this.generalDecoder=new Ki(t)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class Gn extends Zi{constructor(t){super(t)}encodeCompressedGtin(t,i){t.append("(01)");let a=t.length();t.append("9"),this.encodeCompressedGtinWithoutAI(t,i,a)}encodeCompressedGtinWithoutAI(t,i,a){for(let c=0;c<4;++c){let h=this.getGeneralDecoder().extractNumericValueFromBitArray(i+10*c,10);h/100===0&&t.append("0"),h/10===0&&t.append("0"),t.append(h)}Gn.appendCheckDigit(t,a)}static appendCheckDigit(t,i){let a=0;for(let c=0;c<13;c++){let h=t.charAt(c+i).charCodeAt(0)-48;a+=(c&1)===0?3*h:h}a=10-a%10,a===10&&(a=0),t.append(a)}}Gn.GTIN_SIZE=40;class nr extends Gn{constructor(t){super(t)}parseInformation(){let t=new U;t.append("(01)");let i=t.length(),a=this.getGeneralDecoder().extractNumericValueFromBitArray(nr.HEADER_SIZE,4);return t.append(a),this.encodeCompressedGtinWithoutAI(t,nr.HEADER_SIZE+4,i),this.getGeneralDecoder().decodeAllCodes(t,nr.HEADER_SIZE+44)}}nr.HEADER_SIZE=4;class Ai extends Zi{constructor(t){super(t)}parseInformation(){let t=new U;return this.getGeneralDecoder().decodeAllCodes(t,Ai.HEADER_SIZE)}}Ai.HEADER_SIZE=5;class Cr extends Gn{constructor(t){super(t)}encodeCompressedWeight(t,i,a){let c=this.getGeneralDecoder().extractNumericValueFromBitArray(i,a);this.addWeightCode(t,c);let h=this.checkWeight(c),d=1e5;for(let p=0;p<5;++p)h/d===0&&t.append("0"),d/=10;t.append(h)}}class Br extends Cr{constructor(t){super(t)}parseInformation(){if(this.getInformation().getSize()!=Br.HEADER_SIZE+Cr.GTIN_SIZE+Br.WEIGHT_SIZE)throw new ue;let t=new U;return this.encodeCompressedGtin(t,Br.HEADER_SIZE),this.encodeCompressedWeight(t,Br.HEADER_SIZE+Cr.GTIN_SIZE,Br.WEIGHT_SIZE),t.toString()}}Br.HEADER_SIZE=5,Br.WEIGHT_SIZE=15;class Po extends Br{constructor(t){super(t)}addWeightCode(t,i){t.append("(3103)")}checkWeight(t){return t}}class Gs extends Br{constructor(t){super(t)}addWeightCode(t,i){i<1e4?t.append("(3202)"):t.append("(3203)")}checkWeight(t){return t<1e4?t:t-1e4}}class hr extends Gn{constructor(t){super(t)}parseInformation(){if(this.getInformation().getSize()<hr.HEADER_SIZE+Gn.GTIN_SIZE)throw new ue;let t=new U;this.encodeCompressedGtin(t,hr.HEADER_SIZE);let i=this.getGeneralDecoder().extractNumericValueFromBitArray(hr.HEADER_SIZE+Gn.GTIN_SIZE,hr.LAST_DIGIT_SIZE);t.append("(392"),t.append(i),t.append(")");let a=this.getGeneralDecoder().decodeGeneralPurposeField(hr.HEADER_SIZE+Gn.GTIN_SIZE+hr.LAST_DIGIT_SIZE,null);return t.append(a.getNewString()),t.toString()}}hr.HEADER_SIZE=8,hr.LAST_DIGIT_SIZE=2;class kn extends Gn{constructor(t){super(t)}parseInformation(){if(this.getInformation().getSize()<kn.HEADER_SIZE+Gn.GTIN_SIZE)throw new ue;let t=new U;this.encodeCompressedGtin(t,kn.HEADER_SIZE);let i=this.getGeneralDecoder().extractNumericValueFromBitArray(kn.HEADER_SIZE+Gn.GTIN_SIZE,kn.LAST_DIGIT_SIZE);t.append("(393"),t.append(i),t.append(")");let a=this.getGeneralDecoder().extractNumericValueFromBitArray(kn.HEADER_SIZE+Gn.GTIN_SIZE+kn.LAST_DIGIT_SIZE,kn.FIRST_THREE_DIGITS_SIZE);a/100==0&&t.append("0"),a/10==0&&t.append("0"),t.append(a);let c=this.getGeneralDecoder().decodeGeneralPurposeField(kn.HEADER_SIZE+Gn.GTIN_SIZE+kn.LAST_DIGIT_SIZE+kn.FIRST_THREE_DIGITS_SIZE,null);return t.append(c.getNewString()),t.toString()}}kn.HEADER_SIZE=8,kn.LAST_DIGIT_SIZE=2,kn.FIRST_THREE_DIGITS_SIZE=10;class Xt extends Cr{constructor(t,i,a){super(t),this.dateCode=a,this.firstAIdigits=i}parseInformation(){if(this.getInformation().getSize()!=Xt.HEADER_SIZE+Xt.GTIN_SIZE+Xt.WEIGHT_SIZE+Xt.DATE_SIZE)throw new ue;let t=new U;return this.encodeCompressedGtin(t,Xt.HEADER_SIZE),this.encodeCompressedWeight(t,Xt.HEADER_SIZE+Xt.GTIN_SIZE,Xt.WEIGHT_SIZE),this.encodeCompressedDate(t,Xt.HEADER_SIZE+Xt.GTIN_SIZE+Xt.WEIGHT_SIZE),t.toString()}encodeCompressedDate(t,i){let a=this.getGeneralDecoder().extractNumericValueFromBitArray(i,Xt.DATE_SIZE);if(a==38400)return;t.append("("),t.append(this.dateCode),t.append(")");let c=a%32;a/=32;let h=a%12+1;a/=12;let d=a;d/10==0&&t.append("0"),t.append(d),h/10==0&&t.append("0"),t.append(h),c/10==0&&t.append("0"),t.append(c)}addWeightCode(t,i){t.append("("),t.append(this.firstAIdigits),t.append(i/1e5),t.append(")")}checkWeight(t){return t%1e5}}Xt.HEADER_SIZE=8,Xt.WEIGHT_SIZE=20,Xt.DATE_SIZE=16;function ua(b){try{if(b.get(1))return new nr(b);if(!b.get(2))return new Ai(b);switch(Ki.extractNumericValueFromBitArray(b,1,4)){case 4:return new Po(b);case 5:return new Gs(b)}switch(Ki.extractNumericValueFromBitArray(b,1,5)){case 12:return new hr(b);case 13:return new kn(b)}switch(Ki.extractNumericValueFromBitArray(b,1,7)){case 56:return new Xt(b,"310","11");case 57:return new Xt(b,"320","11");case 58:return new Xt(b,"310","13");case 59:return new Xt(b,"320","13");case 60:return new Xt(b,"310","15");case 61:return new Xt(b,"320","15");case 62:return new Xt(b,"310","17");case 63:return new Xt(b,"320","17")}}catch(t){throw console.log(t),new ur("unknown decoder: "+b)}}class Dt{constructor(t,i,a,c){this.leftchar=t,this.rightchar=i,this.finderpattern=a,this.maybeLast=c}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(t,i){return t instanceof Dt?Dt.equalsOrNull(t.leftchar,i.leftchar)&&Dt.equalsOrNull(t.rightchar,i.rightchar)&&Dt.equalsOrNull(t.finderpattern,i.finderpattern):!1}static equalsOrNull(t,i){return t===null?i===null:Dt.equals(t,i)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class Ys{constructor(t,i,a){this.pairs=t,this.rowNumber=i,this.wasReversed=a}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(t){return this.checkEqualitity(this,t)}toString(){return"{ "+this.pairs+" }"}equals(t,i){return t instanceof Ys?this.checkEqualitity(t,i)&&t.wasReversed===i.wasReversed:!1}checkEqualitity(t,i){if(!t||!i)return;let a;return t.forEach((c,h)=>{i.forEach(d=>{c.getLeftChar().getValue()===d.getLeftChar().getValue()&&c.getRightChar().getValue()===d.getRightChar().getValue()&&c.getFinderPatter().getValue()===d.getFinderPatter().getValue()&&(a=!0)})}),a}}class xe extends Rn{constructor(t){super(...arguments),this.pairs=new Array(xe.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=t===!0}decodeRow(t,i,a){this.pairs.length=0,this.startFromEven=!1;try{return xe.constructResult(this.decodeRow2pairs(t,i))}catch(c){this.verbose&&console.log(c)}return this.pairs.length=0,this.startFromEven=!0,xe.constructResult(this.decodeRow2pairs(t,i))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(t,i){let a=!1;for(;!a;)try{this.pairs.push(this.retrieveNextPair(i,this.pairs,t))}catch(h){if(h instanceof ue){if(!this.pairs.length)throw new ue;a=!0}}if(this.checkChecksum())return this.pairs;let c;if(this.rows.length?c=!0:c=!1,this.storeRow(t,!1),c){let h=this.checkRowsBoolean(!1);if(h!=null||(h=this.checkRowsBoolean(!0),h!=null))return h}throw new ue}checkRowsBoolean(t){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,t&&(this.rows=this.rows.reverse());let i=null;try{i=this.checkRows(new Array,0)}catch(a){this.verbose&&console.log(a)}return t&&(this.rows=this.rows.reverse()),i}checkRows(t,i){for(let a=i;a<this.rows.length;a++){let c=this.rows[a];this.pairs.length=0;for(let d of t)this.pairs.push(d.getPairs());if(this.pairs.push(c.getPairs()),!xe.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let h=new Array(t);h.push(c);try{return this.checkRows(h,a+1)}catch(d){this.verbose&&console.log(d)}}throw new ue}static isValidSequence(t){for(let i of xe.FINDER_PATTERN_SEQUENCES){if(t.length>i.length)continue;let a=!0;for(let c=0;c<t.length;c++)if(t[c].getFinderPattern().getValue()!=i[c]){a=!1;break}if(a)return!0}return!1}storeRow(t,i){let a=0,c=!1,h=!1;for(;a<this.rows.length;){let d=this.rows[a];if(d.getRowNumber()>t){h=d.isEquivalent(this.pairs);break}c=d.isEquivalent(this.pairs),a++}h||c||xe.isPartialRow(this.pairs,this.rows)||(this.rows.push(a,new Ys(this.pairs,t,i)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(t,i){for(let a of i)if(a.getPairs().length!==t.length){for(let c of a.getPairs())for(let h of t)if(Dt.equals(c,h))break}}static isPartialRow(t,i){for(let a of i){let c=!0;for(let h of t){let d=!1;for(let p of a.getPairs())if(h.equals(p)){d=!0;break}if(!d){c=!1;break}}if(c)return!0}return!1}getRows(){return this.rows}static constructResult(t){let i=Ws.buildBitArray(t),c=ua(i).parseInformation(),h=t[0].getFinderPattern().getResultPoints(),d=t[t.length-1].getFinderPattern().getResultPoints(),p=[h[0],h[1],d[0],d[1]];return new $e(c,null,null,p,Ne.RSS_EXPANDED,null)}checkChecksum(){let t=this.pairs.get(0),i=t.getLeftChar(),a=t.getRightChar();if(a==null)return!1;let c=a.getChecksumPortion(),h=2;for(let p=1;p<this.pairs.size();++p){let E=this.pairs.get(p);c+=E.getLeftChar().getChecksumPortion(),h++;let _=E.getRightChar();_!=null&&(c+=_.getChecksumPortion(),h++)}return c%=211,211*(h-4)+c==i.getValue()}static getNextSecondBar(t,i){let a;return t.get(i)?(a=t.getNextUnset(i),a=t.getNextSet(a)):(a=t.getNextSet(i),a=t.getNextUnset(a)),a}retrieveNextPair(t,i,a){let c=i.length%2==0;this.startFromEven&&(c=!c);let h,d=!0,p=-1;do this.findNextPair(t,i,p),h=this.parseFoundFinderPattern(t,a,c),h==null?p=xe.getNextSecondBar(t,this.startEnd[0]):d=!1;while(d);let E=this.decodeDataCharacter(t,h,c,!0);if(!this.isEmptyPair(i)&&i[i.length-1].mustBeLast())throw new ue;let _;try{_=this.decodeDataCharacter(t,h,c,!1)}catch(S){_=null,this.verbose&&console.log(S)}return new Dt(E,_,h,!0)}isEmptyPair(t){return t.length===0}findNextPair(t,i,a){let c=this.getDecodeFinderCounters();c[0]=0,c[1]=0,c[2]=0,c[3]=0;let h=t.getSize(),d;a>=0?d=a:this.isEmptyPair(i)?d=0:d=i[i.length-1].getFinderPattern().getStartEnd()[1];let p=i.length%2!=0;this.startFromEven&&(p=!p);let E=!1;for(;d<h&&(E=!t.get(d),!!E);)d++;let _=0,S=d;for(let M=d;M<h;M++)if(t.get(M)!=E)c[_]++;else{if(_==3){if(p&&xe.reverseCounters(c),xe.isFinderPattern(c)){this.startEnd[0]=S,this.startEnd[1]=M;return}p&&xe.reverseCounters(c),S+=c[0]+c[1],c[0]=c[2],c[1]=c[3],c[2]=0,c[3]=0,_--}else _++;c[_]=1,E=!E}throw new ue}static reverseCounters(t){let i=t.length;for(let a=0;a<i/2;++a){let c=t[a];t[a]=t[i-a-1],t[i-a-1]=c}}parseFoundFinderPattern(t,i,a){let c,h,d;if(a){let _=this.startEnd[0]-1;for(;_>=0&&!t.get(_);)_--;_++,c=this.startEnd[0]-_,h=_,d=this.startEnd[1]}else h=this.startEnd[0],d=t.getNextUnset(this.startEnd[1]+1),c=d-this.startEnd[1];let p=this.getDecodeFinderCounters();Q.arraycopy(p,0,p,1,p.length-1),p[0]=c;let E;try{E=this.parseFinderValue(p,xe.FINDER_PATTERNS)}catch{return null}return new Qi(E,[h,d],h,d,i)}decodeDataCharacter(t,i,a,c){let h=this.getDataCharacterCounters();for(let Wt=0;Wt<h.length;Wt++)h[Wt]=0;if(c)xe.recordPatternInReverse(t,i.getStartEnd()[0],h);else{xe.recordPattern(t,i.getStartEnd()[1],h);for(let Wt=0,_n=h.length-1;Wt<_n;Wt++,_n--){let pr=h[Wt];h[Wt]=h[_n],h[_n]=pr}}let d=17,p=Et.sum(new Int32Array(h))/d,E=(i.getStartEnd()[1]-i.getStartEnd()[0])/15;if(Math.abs(p-E)/E>.3)throw new ue;let _=this.getOddCounts(),S=this.getEvenCounts(),M=this.getOddRoundingErrors(),L=this.getEvenRoundingErrors();for(let Wt=0;Wt<h.length;Wt++){let _n=1*h[Wt]/p,pr=_n+.5;if(pr<1){if(_n<.3)throw new ue;pr=1}else if(pr>8){if(_n>8.7)throw new ue;pr=8}let Rs=Wt/2;(Wt&1)==0?(_[Rs]=pr,M[Rs]=_n-pr):(S[Rs]=pr,L[Rs]=_n-pr)}this.adjustOddEvenCounts(d);let H=4*i.getValue()+(a?0:2)+(c?0:1)-1,K=0,$=0;for(let Wt=_.length-1;Wt>=0;Wt--){if(xe.isNotA1left(i,a,c)){let _n=xe.WEIGHTS[H][2*Wt];$+=_[Wt]*_n}K+=_[Wt]}let re=0;for(let Wt=S.length-1;Wt>=0;Wt--)if(xe.isNotA1left(i,a,c)){let _n=xe.WEIGHTS[H][2*Wt+1];re+=S[Wt]*_n}let fe=$+re;if((K&1)!=0||K>13||K<4)throw new ue;let Se=(13-K)/2,Re=xe.SYMBOL_WIDEST[Se],Ce=9-Re,Ct=Bt.getRSSvalue(_,Re,!0),ht=Bt.getRSSvalue(S,Ce,!1),Nr=xe.EVEN_TOTAL_SUBSET[Se],fi=xe.GSUM[Se],Vn=Ct*Nr+ht+fi;return new _r(Vn,fe)}static isNotA1left(t,i,a){return!(t.getValue()==0&&i&&a)}adjustOddEvenCounts(t){let i=Et.sum(new Int32Array(this.getOddCounts())),a=Et.sum(new Int32Array(this.getEvenCounts())),c=!1,h=!1;i>13?h=!0:i<4&&(c=!0);let d=!1,p=!1;a>13?p=!0:a<4&&(d=!0);let E=i+a-t,_=(i&1)==1,S=(a&1)==0;if(E==1)if(_){if(S)throw new ue;h=!0}else{if(!S)throw new ue;p=!0}else if(E==-1)if(_){if(S)throw new ue;c=!0}else{if(!S)throw new ue;d=!0}else if(E==0){if(_){if(!S)throw new ue;i<a?(c=!0,p=!0):(h=!0,d=!0)}else if(S)throw new ue}else throw new ue;if(c){if(h)throw new ue;xe.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(h&&xe.decrement(this.getOddCounts(),this.getOddRoundingErrors()),d){if(p)throw new ue;xe.increment(this.getEvenCounts(),this.getOddRoundingErrors())}p&&xe.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}xe.SYMBOL_WIDEST=[7,5,4,3,1],xe.EVEN_TOTAL_SUBSET=[4,20,52,104,204],xe.GSUM=[0,348,1388,2948,3988],xe.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],xe.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],xe.FINDER_PAT_A=0,xe.FINDER_PAT_B=1,xe.FINDER_PAT_C=2,xe.FINDER_PAT_D=3,xe.FINDER_PAT_E=4,xe.FINDER_PAT_F=5,xe.FINDER_PATTERN_SEQUENCES=[[xe.FINDER_PAT_A,xe.FINDER_PAT_A],[xe.FINDER_PAT_A,xe.FINDER_PAT_B,xe.FINDER_PAT_B],[xe.FINDER_PAT_A,xe.FINDER_PAT_C,xe.FINDER_PAT_B,xe.FINDER_PAT_D],[xe.FINDER_PAT_A,xe.FINDER_PAT_E,xe.FINDER_PAT_B,xe.FINDER_PAT_D,xe.FINDER_PAT_C],[xe.FINDER_PAT_A,xe.FINDER_PAT_E,xe.FINDER_PAT_B,xe.FINDER_PAT_D,xe.FINDER_PAT_D,xe.FINDER_PAT_F],[xe.FINDER_PAT_A,xe.FINDER_PAT_E,xe.FINDER_PAT_B,xe.FINDER_PAT_D,xe.FINDER_PAT_E,xe.FINDER_PAT_F,xe.FINDER_PAT_F],[xe.FINDER_PAT_A,xe.FINDER_PAT_A,xe.FINDER_PAT_B,xe.FINDER_PAT_B,xe.FINDER_PAT_C,xe.FINDER_PAT_C,xe.FINDER_PAT_D,xe.FINDER_PAT_D],[xe.FINDER_PAT_A,xe.FINDER_PAT_A,xe.FINDER_PAT_B,xe.FINDER_PAT_B,xe.FINDER_PAT_C,xe.FINDER_PAT_C,xe.FINDER_PAT_D,xe.FINDER_PAT_E,xe.FINDER_PAT_E],[xe.FINDER_PAT_A,xe.FINDER_PAT_A,xe.FINDER_PAT_B,xe.FINDER_PAT_B,xe.FINDER_PAT_C,xe.FINDER_PAT_C,xe.FINDER_PAT_D,xe.FINDER_PAT_E,xe.FINDER_PAT_F,xe.FINDER_PAT_F],[xe.FINDER_PAT_A,xe.FINDER_PAT_A,xe.FINDER_PAT_B,xe.FINDER_PAT_B,xe.FINDER_PAT_C,xe.FINDER_PAT_D,xe.FINDER_PAT_D,xe.FINDER_PAT_E,xe.FINDER_PAT_E,xe.FINDER_PAT_F,xe.FINDER_PAT_F]],xe.MAX_PAIRS=11;class $i extends _r{constructor(t,i,a){super(t,i),this.count=0,this.finderPattern=a}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class bt extends Rn{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(t,i,a){const c=this.decodePair(i,!1,t,a);bt.addOrTally(this.possibleLeftPairs,c),i.reverse();let h=this.decodePair(i,!0,t,a);bt.addOrTally(this.possibleRightPairs,h),i.reverse();for(let d of this.possibleLeftPairs)if(d.getCount()>1){for(let p of this.possibleRightPairs)if(p.getCount()>1&&bt.checkChecksum(d,p))return bt.constructResult(d,p)}throw new ue}static addOrTally(t,i){if(i==null)return;let a=!1;for(let c of t)if(c.getValue()===i.getValue()){c.incrementCount(),a=!0;break}a||t.push(i)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(t,i){let a=4537077*t.getValue()+i.getValue(),c=new String(a).toString(),h=new U;for(let _=13-c.length;_>0;_--)h.append("0");h.append(c);let d=0;for(let _=0;_<13;_++){let S=h.charAt(_).charCodeAt(0)-48;d+=(_&1)===0?3*S:S}d=10-d%10,d===10&&(d=0),h.append(d.toString());let p=t.getFinderPattern().getResultPoints(),E=i.getFinderPattern().getResultPoints();return new $e(h.toString(),null,0,[p[0],p[1],E[0],E[1]],Ne.RSS_14,new Date().getTime())}static checkChecksum(t,i){let a=(t.getChecksumPortion()+16*i.getChecksumPortion())%79,c=9*t.getFinderPattern().getValue()+i.getFinderPattern().getValue();return c>72&&c--,c>8&&c--,a===c}decodePair(t,i,a,c){try{let h=this.findFinderPattern(t,i),d=this.parseFoundFinderPattern(t,a,i,h),p=c==null?null:c.get(we.NEED_RESULT_POINT_CALLBACK);if(p!=null){let S=(h[0]+h[1])/2;i&&(S=t.getSize()-1-S),p.foundPossibleResultPoint(new Ve(S,a))}let E=this.decodeDataCharacter(t,d,!0),_=this.decodeDataCharacter(t,d,!1);return new $i(1597*E.getValue()+_.getValue(),E.getChecksumPortion()+4*_.getChecksumPortion(),d)}catch{return null}}decodeDataCharacter(t,i,a){let c=this.getDataCharacterCounters();for(let re=0;re<c.length;re++)c[re]=0;if(a)rn.recordPatternInReverse(t,i.getStartEnd()[0],c);else{rn.recordPattern(t,i.getStartEnd()[1]+1,c);for(let re=0,fe=c.length-1;re<fe;re++,fe--){let Se=c[re];c[re]=c[fe],c[fe]=Se}}let h=a?16:15,d=Et.sum(new Int32Array(c))/h,p=this.getOddCounts(),E=this.getEvenCounts(),_=this.getOddRoundingErrors(),S=this.getEvenRoundingErrors();for(let re=0;re<c.length;re++){let fe=c[re]/d,Se=Math.floor(fe+.5);Se<1?Se=1:Se>8&&(Se=8);let Re=Math.floor(re/2);(re&1)===0?(p[Re]=Se,_[Re]=fe-Se):(E[Re]=Se,S[Re]=fe-Se)}this.adjustOddEvenCounts(a,h);let M=0,L=0;for(let re=p.length-1;re>=0;re--)L*=9,L+=p[re],M+=p[re];let H=0,K=0;for(let re=E.length-1;re>=0;re--)H*=9,H+=E[re],K+=E[re];let $=L+3*H;if(a){if((M&1)!==0||M>12||M<4)throw new ue;let re=(12-M)/2,fe=bt.OUTSIDE_ODD_WIDEST[re],Se=9-fe,Re=Bt.getRSSvalue(p,fe,!1),Ce=Bt.getRSSvalue(E,Se,!0),Ct=bt.OUTSIDE_EVEN_TOTAL_SUBSET[re],ht=bt.OUTSIDE_GSUM[re];return new _r(Re*Ct+Ce+ht,$)}else{if((K&1)!==0||K>10||K<4)throw new ue;let re=(10-K)/2,fe=bt.INSIDE_ODD_WIDEST[re],Se=9-fe,Re=Bt.getRSSvalue(p,fe,!0),Ce=Bt.getRSSvalue(E,Se,!1),Ct=bt.INSIDE_ODD_TOTAL_SUBSET[re],ht=bt.INSIDE_GSUM[re];return new _r(Ce*Ct+Re+ht,$)}}findFinderPattern(t,i){let a=this.getDecodeFinderCounters();a[0]=0,a[1]=0,a[2]=0,a[3]=0;let c=t.getSize(),h=!1,d=0;for(;d<c&&(h=!t.get(d),i!==h);)d++;let p=0,E=d;for(let _=d;_<c;_++)if(t.get(_)!==h)a[p]++;else{if(p===3){if(Rn.isFinderPattern(a))return[E,_];E+=a[0]+a[1],a[0]=a[2],a[1]=a[3],a[2]=0,a[3]=0,p--}else p++;a[p]=1,h=!h}throw new ue}parseFoundFinderPattern(t,i,a,c){let h=t.get(c[0]),d=c[0]-1;for(;d>=0&&h!==t.get(d);)d--;d++;const p=c[0]-d,E=this.getDecodeFinderCounters(),_=new Int32Array(E.length);Q.arraycopy(E,0,_,1,E.length-1),_[0]=p;const S=this.parseFinderValue(_,bt.FINDER_PATTERNS);let M=d,L=c[1];return a&&(M=t.getSize()-1-M,L=t.getSize()-1-L),new Qi(S,[d,c[1]],M,L,i)}adjustOddEvenCounts(t,i){let a=Et.sum(new Int32Array(this.getOddCounts())),c=Et.sum(new Int32Array(this.getEvenCounts())),h=!1,d=!1,p=!1,E=!1;t?(a>12?d=!0:a<4&&(h=!0),c>12?E=!0:c<4&&(p=!0)):(a>11?d=!0:a<5&&(h=!0),c>10?E=!0:c<4&&(p=!0));let _=a+c-i,S=(a&1)===(t?1:0),M=(c&1)===1;if(_===1)if(S){if(M)throw new ue;d=!0}else{if(!M)throw new ue;E=!0}else if(_===-1)if(S){if(M)throw new ue;h=!0}else{if(!M)throw new ue;p=!0}else if(_===0){if(S){if(!M)throw new ue;a<c?(h=!0,E=!0):(d=!0,p=!0)}else if(M)throw new ue}else throw new ue;if(h){if(d)throw new ue;Rn.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(d&&Rn.decrement(this.getOddCounts(),this.getOddRoundingErrors()),p){if(E)throw new ue;Rn.increment(this.getEvenCounts(),this.getOddRoundingErrors())}E&&Rn.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}bt.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],bt.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],bt.OUTSIDE_GSUM=[0,161,961,2015,2715],bt.INSIDE_GSUM=[0,336,1036,1516],bt.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],bt.INSIDE_ODD_WIDEST=[2,4,6,8],bt.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class _i extends rn{constructor(t,i){super(),this.readers=[],this.verbose=i===!0;const a=t?t.get(we.POSSIBLE_FORMATS):null,c=t&&t.get(we.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;a?((a.includes(Ne.EAN_13)||a.includes(Ne.UPC_A)||a.includes(Ne.EAN_8)||a.includes(Ne.UPC_E))&&this.readers.push(new Li(t)),a.includes(Ne.CODE_39)&&this.readers.push(new an(c)),a.includes(Ne.CODE_128)&&this.readers.push(new Oe),a.includes(Ne.ITF)&&this.readers.push(new Lt),a.includes(Ne.RSS_14)&&this.readers.push(new bt),a.includes(Ne.RSS_EXPANDED)&&this.readers.push(new xe(this.verbose))):(this.readers.push(new Li(t)),this.readers.push(new an),this.readers.push(new Li(t)),this.readers.push(new Oe),this.readers.push(new Lt),this.readers.push(new bt),this.readers.push(new xe(this.verbose)))}decodeRow(t,i,a){for(let c=0;c<this.readers.length;c++)try{return this.readers[c].decodeRow(t,i,a)}catch{}throw new ue}reset(){this.readers.forEach(t=>t.reset())}}class ca extends ze{constructor(t=500,i){super(new _i(i),t,i)}}class It{constructor(t,i,a){this.ecCodewords=t,this.ecBlocks=[i],a&&this.ecBlocks.push(a)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class dt{constructor(t,i){this.count=t,this.dataCodewords=i}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class xt{constructor(t,i,a,c,h,d){this.versionNumber=t,this.symbolSizeRows=i,this.symbolSizeColumns=a,this.dataRegionSizeRows=c,this.dataRegionSizeColumns=h,this.ecBlocks=d;let p=0;const E=d.getECCodewords(),_=d.getECBlocks();for(let S of _)p+=S.getCount()*(S.getDataCodewords()+E);this.totalCodewords=p}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(t,i){if((t&1)!==0||(i&1)!==0)throw new F;for(let a of xt.VERSIONS)if(a.symbolSizeRows===t&&a.symbolSizeColumns===i)return a;throw new F}toString(){return""+this.versionNumber}static buildVersions(){return[new xt(1,10,10,8,8,new It(5,new dt(1,3))),new xt(2,12,12,10,10,new It(7,new dt(1,5))),new xt(3,14,14,12,12,new It(10,new dt(1,8))),new xt(4,16,16,14,14,new It(12,new dt(1,12))),new xt(5,18,18,16,16,new It(14,new dt(1,18))),new xt(6,20,20,18,18,new It(18,new dt(1,22))),new xt(7,22,22,20,20,new It(20,new dt(1,30))),new xt(8,24,24,22,22,new It(24,new dt(1,36))),new xt(9,26,26,24,24,new It(28,new dt(1,44))),new xt(10,32,32,14,14,new It(36,new dt(1,62))),new xt(11,36,36,16,16,new It(42,new dt(1,86))),new xt(12,40,40,18,18,new It(48,new dt(1,114))),new xt(13,44,44,20,20,new It(56,new dt(1,144))),new xt(14,48,48,22,22,new It(68,new dt(1,174))),new xt(15,52,52,24,24,new It(42,new dt(2,102))),new xt(16,64,64,14,14,new It(56,new dt(2,140))),new xt(17,72,72,16,16,new It(36,new dt(4,92))),new xt(18,80,80,18,18,new It(48,new dt(4,114))),new xt(19,88,88,20,20,new It(56,new dt(4,144))),new xt(20,96,96,22,22,new It(68,new dt(4,174))),new xt(21,104,104,24,24,new It(56,new dt(6,136))),new xt(22,120,120,18,18,new It(68,new dt(6,175))),new xt(23,132,132,20,20,new It(62,new dt(8,163))),new xt(24,144,144,22,22,new It(62,new dt(8,156),new dt(2,155))),new xt(25,8,18,6,16,new It(7,new dt(1,5))),new xt(26,8,32,6,14,new It(11,new dt(1,10))),new xt(27,12,26,10,24,new It(14,new dt(1,16))),new xt(28,12,36,10,16,new It(18,new dt(1,22))),new xt(29,16,36,14,16,new It(24,new dt(1,32))),new xt(30,16,48,14,22,new It(28,new dt(1,49)))]}}xt.VERSIONS=xt.buildVersions();class Yn{constructor(t){const i=t.getHeight();if(i<8||i>144||(i&1)!==0)throw new F;this.version=Yn.readVersion(t),this.mappingBitMatrix=this.extractDataRegion(t),this.readMappingMatrix=new Le(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(t){const i=t.getHeight(),a=t.getWidth();return xt.getVersionForDimensions(i,a)}readCodewords(){const t=new Int8Array(this.version.getTotalCodewords());let i=0,a=4,c=0;const h=this.mappingBitMatrix.getHeight(),d=this.mappingBitMatrix.getWidth();let p=!1,E=!1,_=!1,S=!1;do if(a===h&&c===0&&!p)t[i++]=this.readCorner1(h,d)&255,a-=2,c+=2,p=!0;else if(a===h-2&&c===0&&(d&3)!==0&&!E)t[i++]=this.readCorner2(h,d)&255,a-=2,c+=2,E=!0;else if(a===h+4&&c===2&&(d&7)===0&&!_)t[i++]=this.readCorner3(h,d)&255,a-=2,c+=2,_=!0;else if(a===h-2&&c===0&&(d&7)===4&&!S)t[i++]=this.readCorner4(h,d)&255,a-=2,c+=2,S=!0;else{do a<h&&c>=0&&!this.readMappingMatrix.get(c,a)&&(t[i++]=this.readUtah(a,c,h,d)&255),a-=2,c+=2;while(a>=0&&c<d);a+=1,c+=3;do a>=0&&c<d&&!this.readMappingMatrix.get(c,a)&&(t[i++]=this.readUtah(a,c,h,d)&255),a+=2,c-=2;while(a<h&&c>=0);a+=3,c+=1}while(a<h||c<d);if(i!==this.version.getTotalCodewords())throw new F;return t}readModule(t,i,a,c){return t<0&&(t+=a,i+=4-(a+4&7)),i<0&&(i+=c,t+=4-(c+4&7)),this.readMappingMatrix.set(i,t),this.mappingBitMatrix.get(i,t)}readUtah(t,i,a,c){let h=0;return this.readModule(t-2,i-2,a,c)&&(h|=1),h<<=1,this.readModule(t-2,i-1,a,c)&&(h|=1),h<<=1,this.readModule(t-1,i-2,a,c)&&(h|=1),h<<=1,this.readModule(t-1,i-1,a,c)&&(h|=1),h<<=1,this.readModule(t-1,i,a,c)&&(h|=1),h<<=1,this.readModule(t,i-2,a,c)&&(h|=1),h<<=1,this.readModule(t,i-1,a,c)&&(h|=1),h<<=1,this.readModule(t,i,a,c)&&(h|=1),h}readCorner1(t,i){let a=0;return this.readModule(t-1,0,t,i)&&(a|=1),a<<=1,this.readModule(t-1,1,t,i)&&(a|=1),a<<=1,this.readModule(t-1,2,t,i)&&(a|=1),a<<=1,this.readModule(0,i-2,t,i)&&(a|=1),a<<=1,this.readModule(0,i-1,t,i)&&(a|=1),a<<=1,this.readModule(1,i-1,t,i)&&(a|=1),a<<=1,this.readModule(2,i-1,t,i)&&(a|=1),a<<=1,this.readModule(3,i-1,t,i)&&(a|=1),a}readCorner2(t,i){let a=0;return this.readModule(t-3,0,t,i)&&(a|=1),a<<=1,this.readModule(t-2,0,t,i)&&(a|=1),a<<=1,this.readModule(t-1,0,t,i)&&(a|=1),a<<=1,this.readModule(0,i-4,t,i)&&(a|=1),a<<=1,this.readModule(0,i-3,t,i)&&(a|=1),a<<=1,this.readModule(0,i-2,t,i)&&(a|=1),a<<=1,this.readModule(0,i-1,t,i)&&(a|=1),a<<=1,this.readModule(1,i-1,t,i)&&(a|=1),a}readCorner3(t,i){let a=0;return this.readModule(t-1,0,t,i)&&(a|=1),a<<=1,this.readModule(t-1,i-1,t,i)&&(a|=1),a<<=1,this.readModule(0,i-3,t,i)&&(a|=1),a<<=1,this.readModule(0,i-2,t,i)&&(a|=1),a<<=1,this.readModule(0,i-1,t,i)&&(a|=1),a<<=1,this.readModule(1,i-3,t,i)&&(a|=1),a<<=1,this.readModule(1,i-2,t,i)&&(a|=1),a<<=1,this.readModule(1,i-1,t,i)&&(a|=1),a}readCorner4(t,i){let a=0;return this.readModule(t-3,0,t,i)&&(a|=1),a<<=1,this.readModule(t-2,0,t,i)&&(a|=1),a<<=1,this.readModule(t-1,0,t,i)&&(a|=1),a<<=1,this.readModule(0,i-2,t,i)&&(a|=1),a<<=1,this.readModule(0,i-1,t,i)&&(a|=1),a<<=1,this.readModule(1,i-1,t,i)&&(a|=1),a<<=1,this.readModule(2,i-1,t,i)&&(a|=1),a<<=1,this.readModule(3,i-1,t,i)&&(a|=1),a}extractDataRegion(t){const i=this.version.getSymbolSizeRows(),a=this.version.getSymbolSizeColumns();if(t.getHeight()!==i)throw new D("Dimension of bitMatrix must match the version size");const c=this.version.getDataRegionSizeRows(),h=this.version.getDataRegionSizeColumns(),d=i/c|0,p=a/h|0,E=d*c,_=p*h,S=new Le(_,E);for(let M=0;M<d;++M){const L=M*c;for(let H=0;H<p;++H){const K=H*h;for(let $=0;$<c;++$){const re=M*(c+2)+1+$,fe=L+$;for(let Se=0;Se<h;++Se){const Re=H*(h+2)+1+Se;if(t.get(Re,re)){const Ce=K+Se;S.set(Ce,fe)}}}}}return S}}class _s{constructor(t,i){this.numDataCodewords=t,this.codewords=i}static getDataBlocks(t,i){const a=i.getECBlocks();let c=0;const h=a.getECBlocks();for(let $ of h)c+=$.getCount();const d=new Array(c);let p=0;for(let $ of h)for(let re=0;re<$.getCount();re++){const fe=$.getDataCodewords(),Se=a.getECCodewords()+fe;d[p++]=new _s(fe,new Uint8Array(Se))}const _=d[0].codewords.length-a.getECCodewords(),S=_-1;let M=0;for(let $=0;$<S;$++)for(let re=0;re<p;re++)d[re].codewords[$]=t[M++];const L=i.getVersionNumber()===24,H=L?8:p;for(let $=0;$<H;$++)d[$].codewords[_-1]=t[M++];const K=d[0].codewords.length;for(let $=_;$<K;$++)for(let re=0;re<p;re++){const fe=L?(re+8)%p:re,Se=L&&fe>7?$-1:$;d[fe].codewords[Se]=t[M++]}if(M!==t.length)throw new D;return d}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class Xs{constructor(t){this.bytes=t,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(t){if(t<1||t>32||t>this.available())throw new D(""+t);let i=0,a=this.bitOffset,c=this.byteOffset;const h=this.bytes;if(a>0){const d=8-a,p=t<d?t:d,E=d-p,_=255>>8-p<<E;i=(h[c]&_)>>E,t-=p,a+=p,a===8&&(a=0,c++)}if(t>0){for(;t>=8;)i=i<<8|h[c]&255,c++,t-=8;if(t>0){const d=8-t,p=255>>d<<d;i=i<<t|(h[c]&p)>>d,a+=t}}return this.bitOffset=a,this.byteOffset=c,i}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var mn;(function(b){b[b.PAD_ENCODE=0]="PAD_ENCODE",b[b.ASCII_ENCODE=1]="ASCII_ENCODE",b[b.C40_ENCODE=2]="C40_ENCODE",b[b.TEXT_ENCODE=3]="TEXT_ENCODE",b[b.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",b[b.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",b[b.BASE256_ENCODE=6]="BASE256_ENCODE"})(mn||(mn={}));class Fr{static decode(t){const i=new Xs(t),a=new U,c=new U,h=new Array;let d=mn.ASCII_ENCODE;do if(d===mn.ASCII_ENCODE)d=this.decodeAsciiSegment(i,a,c);else{switch(d){case mn.C40_ENCODE:this.decodeC40Segment(i,a);break;case mn.TEXT_ENCODE:this.decodeTextSegment(i,a);break;case mn.ANSIX12_ENCODE:this.decodeAnsiX12Segment(i,a);break;case mn.EDIFACT_ENCODE:this.decodeEdifactSegment(i,a);break;case mn.BASE256_ENCODE:this.decodeBase256Segment(i,a,h);break;default:throw new F}d=mn.ASCII_ENCODE}while(d!==mn.PAD_ENCODE&&i.available()>0);return c.length()>0&&a.append(c.toString()),new _t(t,a.toString(),h.length===0?null:h,null)}static decodeAsciiSegment(t,i,a){let c=!1;do{let h=t.readBits(8);if(h===0)throw new F;if(h<=128)return c&&(h+=128),i.append(String.fromCharCode(h-1)),mn.ASCII_ENCODE;if(h===129)return mn.PAD_ENCODE;if(h<=229){const d=h-130;d<10&&i.append("0"),i.append(""+d)}else switch(h){case 230:return mn.C40_ENCODE;case 231:return mn.BASE256_ENCODE;case 232:i.append("");break;case 233:case 234:break;case 235:c=!0;break;case 236:i.append("[)>05"),a.insert(0,"");break;case 237:i.append("[)>06"),a.insert(0,"");break;case 238:return mn.ANSIX12_ENCODE;case 239:return mn.TEXT_ENCODE;case 240:return mn.EDIFACT_ENCODE;case 241:break;default:if(h!==254||t.available()!==0)throw new F;break}}while(t.available()>0);return mn.ASCII_ENCODE}static decodeC40Segment(t,i){let a=!1;const c=[];let h=0;do{if(t.available()===8)return;const d=t.readBits(8);if(d===254)return;this.parseTwoBytes(d,t.readBits(8),c);for(let p=0;p<3;p++){const E=c[p];switch(h){case 0:if(E<3)h=E+1;else if(E<this.C40_BASIC_SET_CHARS.length){const _=this.C40_BASIC_SET_CHARS[E];a?(i.append(String.fromCharCode(_.charCodeAt(0)+128)),a=!1):i.append(_)}else throw new F;break;case 1:a?(i.append(String.fromCharCode(E+128)),a=!1):i.append(String.fromCharCode(E)),h=0;break;case 2:if(E<this.C40_SHIFT2_SET_CHARS.length){const _=this.C40_SHIFT2_SET_CHARS[E];a?(i.append(String.fromCharCode(_.charCodeAt(0)+128)),a=!1):i.append(_)}else switch(E){case 27:i.append("");break;case 30:a=!0;break;default:throw new F}h=0;break;case 3:a?(i.append(String.fromCharCode(E+224)),a=!1):i.append(String.fromCharCode(E+96)),h=0;break;default:throw new F}}}while(t.available()>0)}static decodeTextSegment(t,i){let a=!1,c=[],h=0;do{if(t.available()===8)return;const d=t.readBits(8);if(d===254)return;this.parseTwoBytes(d,t.readBits(8),c);for(let p=0;p<3;p++){const E=c[p];switch(h){case 0:if(E<3)h=E+1;else if(E<this.TEXT_BASIC_SET_CHARS.length){const _=this.TEXT_BASIC_SET_CHARS[E];a?(i.append(String.fromCharCode(_.charCodeAt(0)+128)),a=!1):i.append(_)}else throw new F;break;case 1:a?(i.append(String.fromCharCode(E+128)),a=!1):i.append(String.fromCharCode(E)),h=0;break;case 2:if(E<this.TEXT_SHIFT2_SET_CHARS.length){const _=this.TEXT_SHIFT2_SET_CHARS[E];a?(i.append(String.fromCharCode(_.charCodeAt(0)+128)),a=!1):i.append(_)}else switch(E){case 27:i.append("");break;case 30:a=!0;break;default:throw new F}h=0;break;case 3:if(E<this.TEXT_SHIFT3_SET_CHARS.length){const _=this.TEXT_SHIFT3_SET_CHARS[E];a?(i.append(String.fromCharCode(_.charCodeAt(0)+128)),a=!1):i.append(_),h=0}else throw new F;break;default:throw new F}}}while(t.available()>0)}static decodeAnsiX12Segment(t,i){const a=[];do{if(t.available()===8)return;const c=t.readBits(8);if(c===254)return;this.parseTwoBytes(c,t.readBits(8),a);for(let h=0;h<3;h++){const d=a[h];switch(d){case 0:i.append("\r");break;case 1:i.append("*");break;case 2:i.append(">");break;case 3:i.append(" ");break;default:if(d<14)i.append(String.fromCharCode(d+44));else if(d<40)i.append(String.fromCharCode(d+51));else throw new F;break}}}while(t.available()>0)}static parseTwoBytes(t,i,a){let c=(t<<8)+i-1,h=Math.floor(c/1600);a[0]=h,c-=h*1600,h=Math.floor(c/40),a[1]=h,a[2]=c-h*40}static decodeEdifactSegment(t,i){do{if(t.available()<=16)return;for(let a=0;a<4;a++){let c=t.readBits(6);if(c===31){const h=8-t.getBitOffset();h!==8&&t.readBits(h);return}(c&32)===0&&(c|=64),i.append(String.fromCharCode(c))}}while(t.available()>0)}static decodeBase256Segment(t,i,a){let c=1+t.getByteOffset();const h=this.unrandomize255State(t.readBits(8),c++);let d;if(h===0?d=t.available()/8|0:h<250?d=h:d=250*(h-249)+this.unrandomize255State(t.readBits(8),c++),d<0)throw new F;const p=new Uint8Array(d);for(let E=0;E<d;E++){if(t.available()<8)throw new F;p[E]=this.unrandomize255State(t.readBits(8),c++)}a.push(p);try{i.append(Y.decode(p,W.ISO88591))}catch(E){throw new ur("Platform does not support required encoding: "+E.message)}}static unrandomize255State(t,i){const a=149*i%255+1,c=t-a;return c>=0?c:c+256}}Fr.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],Fr.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],Fr.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],Fr.TEXT_SHIFT2_SET_CHARS=Fr.C40_SHIFT2_SET_CHARS,Fr.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class qs{constructor(){this.rsDecoder=new Oi(wt.DATA_MATRIX_FIELD_256)}decode(t){const i=new Yn(t),a=i.getVersion(),c=i.readCodewords(),h=_s.getDataBlocks(c,a);let d=0;for(let _ of h)d+=_.getNumDataCodewords();const p=new Uint8Array(d),E=h.length;for(let _=0;_<E;_++){const S=h[_],M=S.getCodewords(),L=S.getNumDataCodewords();this.correctErrors(M,L);for(let H=0;H<L;H++)p[H*E+_]=M[H]}return Fr.decode(p)}correctErrors(t,i){const a=new Int32Array(t);try{this.rsDecoder.decode(a,t.length-i)}catch{throw new j}for(let c=0;c<i;c++)t[c]=a[c]}}class Gt{constructor(t){this.image=t,this.rectangleDetector=new Ar(this.image)}detect(){const t=this.rectangleDetector.detect();let i=this.detectSolid1(t);if(i=this.detectSolid2(i),i[3]=this.correctTopRight(i),!i[3])throw new ue;i=this.shiftToModuleCenter(i);const a=i[0],c=i[1],h=i[2],d=i[3];let p=this.transitionsBetween(a,d)+1,E=this.transitionsBetween(h,d)+1;(p&1)===1&&(p+=1),(E&1)===1&&(E+=1),4*p<7*E&&4*E<7*p&&(p=E=Math.max(p,E));let _=Gt.sampleGrid(this.image,a,c,h,d,p,E);return new Xi(_,[a,c,h,d])}static shiftPoint(t,i,a){let c=(i.getX()-t.getX())/(a+1),h=(i.getY()-t.getY())/(a+1);return new Ve(t.getX()+c,t.getY()+h)}static moveAway(t,i,a){let c=t.getX(),h=t.getY();return c<i?c-=1:c+=1,h<a?h-=1:h+=1,new Ve(c,h)}detectSolid1(t){let i=t[0],a=t[1],c=t[3],h=t[2],d=this.transitionsBetween(i,a),p=this.transitionsBetween(a,c),E=this.transitionsBetween(c,h),_=this.transitionsBetween(h,i),S=d,M=[h,i,a,c];return S>p&&(S=p,M[0]=i,M[1]=a,M[2]=c,M[3]=h),S>E&&(S=E,M[0]=a,M[1]=c,M[2]=h,M[3]=i),S>_&&(M[0]=c,M[1]=h,M[2]=i,M[3]=a),M}detectSolid2(t){let i=t[0],a=t[1],c=t[2],h=t[3],d=this.transitionsBetween(i,h),p=Gt.shiftPoint(a,c,(d+1)*4),E=Gt.shiftPoint(c,a,(d+1)*4),_=this.transitionsBetween(p,i),S=this.transitionsBetween(E,h);return _<S?(t[0]=i,t[1]=a,t[2]=c,t[3]=h):(t[0]=a,t[1]=c,t[2]=h,t[3]=i),t}correctTopRight(t){let i=t[0],a=t[1],c=t[2],h=t[3],d=this.transitionsBetween(i,h),p=this.transitionsBetween(a,h),E=Gt.shiftPoint(i,a,(p+1)*4),_=Gt.shiftPoint(c,a,(d+1)*4);d=this.transitionsBetween(E,h),p=this.transitionsBetween(_,h);let S=new Ve(h.getX()+(c.getX()-a.getX())/(d+1),h.getY()+(c.getY()-a.getY())/(d+1)),M=new Ve(h.getX()+(i.getX()-a.getX())/(p+1),h.getY()+(i.getY()-a.getY())/(p+1));if(!this.isValid(S))return this.isValid(M)?M:null;if(!this.isValid(M))return S;let L=this.transitionsBetween(E,S)+this.transitionsBetween(_,S),H=this.transitionsBetween(E,M)+this.transitionsBetween(_,M);return L>H?S:M}shiftToModuleCenter(t){let i=t[0],a=t[1],c=t[2],h=t[3],d=this.transitionsBetween(i,h)+1,p=this.transitionsBetween(c,h)+1,E=Gt.shiftPoint(i,a,p*4),_=Gt.shiftPoint(c,a,d*4);d=this.transitionsBetween(E,h)+1,p=this.transitionsBetween(_,h)+1,(d&1)===1&&(d+=1),(p&1)===1&&(p+=1);let S=(i.getX()+a.getX()+c.getX()+h.getX())/4,M=(i.getY()+a.getY()+c.getY()+h.getY())/4;i=Gt.moveAway(i,S,M),a=Gt.moveAway(a,S,M),c=Gt.moveAway(c,S,M),h=Gt.moveAway(h,S,M);let L,H;return E=Gt.shiftPoint(i,a,p*4),E=Gt.shiftPoint(E,h,d*4),L=Gt.shiftPoint(a,i,p*4),L=Gt.shiftPoint(L,c,d*4),_=Gt.shiftPoint(c,h,p*4),_=Gt.shiftPoint(_,a,d*4),H=Gt.shiftPoint(h,c,p*4),H=Gt.shiftPoint(H,i,d*4),[E,L,_,H]}isValid(t){return t.getX()>=0&&t.getX()<this.image.getWidth()&&t.getY()>0&&t.getY()<this.image.getHeight()}static sampleGrid(t,i,a,c,h,d,p){return er.getInstance().sampleGrid(t,d,p,.5,.5,d-.5,.5,d-.5,p-.5,.5,p-.5,i.getX(),i.getY(),h.getX(),h.getY(),c.getX(),c.getY(),a.getX(),a.getY())}transitionsBetween(t,i){let a=Math.trunc(t.getX()),c=Math.trunc(t.getY()),h=Math.trunc(i.getX()),d=Math.trunc(i.getY()),p=Math.abs(d-c)>Math.abs(h-a);if(p){let $=a;a=c,c=$,$=h,h=d,d=$}let E=Math.abs(h-a),_=Math.abs(d-c),S=-E/2,M=c<d?1:-1,L=a<h?1:-1,H=0,K=this.image.get(p?c:a,p?a:c);for(let $=a,re=c;$!==h;$+=L){let fe=this.image.get(p?re:$,p?$:re);if(fe!==K&&(H++,K=fe),S+=_,S>0){if(re===d)break;re+=M,S-=E}}return H}}class vr{constructor(){this.decoder=new qs}decode(t,i=null){let a,c;if(i!=null&&i.has(we.PURE_BARCODE)){const _=vr.extractPureBits(t.getBlackMatrix());a=this.decoder.decode(_),c=vr.NO_POINTS}else{const _=new Gt(t.getBlackMatrix()).detect();a=this.decoder.decode(_.getBits()),c=_.getPoints()}const h=a.getRawBytes(),d=new $e(a.getText(),h,8*h.length,c,Ne.DATA_MATRIX,Q.currentTimeMillis()),p=a.getByteSegments();p!=null&&d.putMetadata(Qe.BYTE_SEGMENTS,p);const E=a.getECLevel();return E!=null&&d.putMetadata(Qe.ERROR_CORRECTION_LEVEL,E),d}reset(){}static extractPureBits(t){const i=t.getTopLeftOnBit(),a=t.getBottomRightOnBit();if(i==null||a==null)throw new ue;const c=this.moduleSize(i,t);let h=i[1];const d=a[1];let p=i[0];const _=(a[0]-p+1)/c,S=(d-h+1)/c;if(_<=0||S<=0)throw new ue;const M=c/2;h+=M,p+=M;const L=new Le(_,S);for(let H=0;H<S;H++){const K=h+H*c;for(let $=0;$<_;$++)t.get(p+$*c,K)&&L.set($,H)}return L}static moduleSize(t,i){const a=i.getWidth();let c=t[0];const h=t[1];for(;c<a&&i.get(c,h);)c++;if(c===a)throw new ue;const d=c-t[0];if(d===0)throw new ue;return d}}vr.NO_POINTS=[];class tl extends ze{constructor(t=500){super(new vr,t)}}var Ir;(function(b){b[b.L=0]="L",b[b.M=1]="M",b[b.Q=2]="Q",b[b.H=3]="H"})(Ir||(Ir={}));class At{constructor(t,i,a){this.value=t,this.stringValue=i,this.bits=a,At.FOR_BITS.set(a,this),At.FOR_VALUE.set(t,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(t){switch(t){case"L":return At.L;case"M":return At.M;case"Q":return At.Q;case"H":return At.H;default:throw new R(t+"not available")}}toString(){return this.stringValue}equals(t){if(!(t instanceof At))return!1;const i=t;return this.value===i.value}static forBits(t){if(t<0||t>=At.FOR_BITS.size)throw new D;return At.FOR_BITS.get(t)}}At.FOR_BITS=new Map,At.FOR_VALUE=new Map,At.L=new At(Ir.L,"L",1),At.M=new At(Ir.M,"M",0),At.Q=new At(Ir.Q,"Q",3),At.H=new At(Ir.H,"H",2);class yn{constructor(t){this.errorCorrectionLevel=At.forBits(t>>3&3),this.dataMask=t&7}static numBitsDiffering(t,i){return te.bitCount(t^i)}static decodeFormatInformation(t,i){const a=yn.doDecodeFormatInformation(t,i);return a!==null?a:yn.doDecodeFormatInformation(t^yn.FORMAT_INFO_MASK_QR,i^yn.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(t,i){let a=Number.MAX_SAFE_INTEGER,c=0;for(const h of yn.FORMAT_INFO_DECODE_LOOKUP){const d=h[0];if(d===t||d===i)return new yn(h[1]);let p=yn.numBitsDiffering(t,d);p<a&&(c=h[1],a=p),t!==i&&(p=yn.numBitsDiffering(i,d),p<a&&(c=h[1],a=p))}return a<=3?new yn(c):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(t){if(!(t instanceof yn))return!1;const i=t;return this.errorCorrectionLevel===i.errorCorrectionLevel&&this.dataMask===i.dataMask}}yn.FORMAT_INFO_MASK_QR=21522,yn.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class se{constructor(t,...i){this.ecCodewordsPerBlock=t,this.ecBlocks=i}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let t=0;const i=this.ecBlocks;for(const a of i)t+=a.getCount();return t}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class z{constructor(t,i){this.count=t,this.dataCodewords=i}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Pe{constructor(t,i,...a){this.versionNumber=t,this.alignmentPatternCenters=i,this.ecBlocks=a;let c=0;const h=a[0].getECCodewordsPerBlock(),d=a[0].getECBlocks();for(const p of d)c+=p.getCount()*(p.getDataCodewords()+h);this.totalCodewords=c}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(t){return this.ecBlocks[t.getValue()]}static getProvisionalVersionForDimension(t){if(t%4!==1)throw new F;try{return this.getVersionForNumber((t-17)/4)}catch{throw new F}}static getVersionForNumber(t){if(t<1||t>40)throw new D;return Pe.VERSIONS[t-1]}static decodeVersionInformation(t){let i=Number.MAX_SAFE_INTEGER,a=0;for(let c=0;c<Pe.VERSION_DECODE_INFO.length;c++){const h=Pe.VERSION_DECODE_INFO[c];if(h===t)return Pe.getVersionForNumber(c+7);const d=yn.numBitsDiffering(t,h);d<i&&(a=c+7,i=d)}return i<=3?Pe.getVersionForNumber(a):null}buildFunctionPattern(){const t=this.getDimensionForVersion(),i=new Le(t);i.setRegion(0,0,9,9),i.setRegion(t-8,0,8,9),i.setRegion(0,t-8,9,8);const a=this.alignmentPatternCenters.length;for(let c=0;c<a;c++){const h=this.alignmentPatternCenters[c]-2;for(let d=0;d<a;d++)c===0&&(d===0||d===a-1)||c===a-1&&d===0||i.setRegion(this.alignmentPatternCenters[d]-2,h,5,5)}return i.setRegion(6,9,1,t-17),i.setRegion(9,6,t-17,1),this.versionNumber>6&&(i.setRegion(t-11,0,3,6),i.setRegion(0,t-11,6,3)),i}toString(){return""+this.versionNumber}}Pe.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),Pe.VERSIONS=[new Pe(1,new Int32Array(0),new se(7,new z(1,19)),new se(10,new z(1,16)),new se(13,new z(1,13)),new se(17,new z(1,9))),new Pe(2,Int32Array.from([6,18]),new se(10,new z(1,34)),new se(16,new z(1,28)),new se(22,new z(1,22)),new se(28,new z(1,16))),new Pe(3,Int32Array.from([6,22]),new se(15,new z(1,55)),new se(26,new z(1,44)),new se(18,new z(2,17)),new se(22,new z(2,13))),new Pe(4,Int32Array.from([6,26]),new se(20,new z(1,80)),new se(18,new z(2,32)),new se(26,new z(2,24)),new se(16,new z(4,9))),new Pe(5,Int32Array.from([6,30]),new se(26,new z(1,108)),new se(24,new z(2,43)),new se(18,new z(2,15),new z(2,16)),new se(22,new z(2,11),new z(2,12))),new Pe(6,Int32Array.from([6,34]),new se(18,new z(2,68)),new se(16,new z(4,27)),new se(24,new z(4,19)),new se(28,new z(4,15))),new Pe(7,Int32Array.from([6,22,38]),new se(20,new z(2,78)),new se(18,new z(4,31)),new se(18,new z(2,14),new z(4,15)),new se(26,new z(4,13),new z(1,14))),new Pe(8,Int32Array.from([6,24,42]),new se(24,new z(2,97)),new se(22,new z(2,38),new z(2,39)),new se(22,new z(4,18),new z(2,19)),new se(26,new z(4,14),new z(2,15))),new Pe(9,Int32Array.from([6,26,46]),new se(30,new z(2,116)),new se(22,new z(3,36),new z(2,37)),new se(20,new z(4,16),new z(4,17)),new se(24,new z(4,12),new z(4,13))),new Pe(10,Int32Array.from([6,28,50]),new se(18,new z(2,68),new z(2,69)),new se(26,new z(4,43),new z(1,44)),new se(24,new z(6,19),new z(2,20)),new se(28,new z(6,15),new z(2,16))),new Pe(11,Int32Array.from([6,30,54]),new se(20,new z(4,81)),new se(30,new z(1,50),new z(4,51)),new se(28,new z(4,22),new z(4,23)),new se(24,new z(3,12),new z(8,13))),new Pe(12,Int32Array.from([6,32,58]),new se(24,new z(2,92),new z(2,93)),new se(22,new z(6,36),new z(2,37)),new se(26,new z(4,20),new z(6,21)),new se(28,new z(7,14),new z(4,15))),new Pe(13,Int32Array.from([6,34,62]),new se(26,new z(4,107)),new se(22,new z(8,37),new z(1,38)),new se(24,new z(8,20),new z(4,21)),new se(22,new z(12,11),new z(4,12))),new Pe(14,Int32Array.from([6,26,46,66]),new se(30,new z(3,115),new z(1,116)),new se(24,new z(4,40),new z(5,41)),new se(20,new z(11,16),new z(5,17)),new se(24,new z(11,12),new z(5,13))),new Pe(15,Int32Array.from([6,26,48,70]),new se(22,new z(5,87),new z(1,88)),new se(24,new z(5,41),new z(5,42)),new se(30,new z(5,24),new z(7,25)),new se(24,new z(11,12),new z(7,13))),new Pe(16,Int32Array.from([6,26,50,74]),new se(24,new z(5,98),new z(1,99)),new se(28,new z(7,45),new z(3,46)),new se(24,new z(15,19),new z(2,20)),new se(30,new z(3,15),new z(13,16))),new Pe(17,Int32Array.from([6,30,54,78]),new se(28,new z(1,107),new z(5,108)),new se(28,new z(10,46),new z(1,47)),new se(28,new z(1,22),new z(15,23)),new se(28,new z(2,14),new z(17,15))),new Pe(18,Int32Array.from([6,30,56,82]),new se(30,new z(5,120),new z(1,121)),new se(26,new z(9,43),new z(4,44)),new se(28,new z(17,22),new z(1,23)),new se(28,new z(2,14),new z(19,15))),new Pe(19,Int32Array.from([6,30,58,86]),new se(28,new z(3,113),new z(4,114)),new se(26,new z(3,44),new z(11,45)),new se(26,new z(17,21),new z(4,22)),new se(26,new z(9,13),new z(16,14))),new Pe(20,Int32Array.from([6,34,62,90]),new se(28,new z(3,107),new z(5,108)),new se(26,new z(3,41),new z(13,42)),new se(30,new z(15,24),new z(5,25)),new se(28,new z(15,15),new z(10,16))),new Pe(21,Int32Array.from([6,28,50,72,94]),new se(28,new z(4,116),new z(4,117)),new se(26,new z(17,42)),new se(28,new z(17,22),new z(6,23)),new se(30,new z(19,16),new z(6,17))),new Pe(22,Int32Array.from([6,26,50,74,98]),new se(28,new z(2,111),new z(7,112)),new se(28,new z(17,46)),new se(30,new z(7,24),new z(16,25)),new se(24,new z(34,13))),new Pe(23,Int32Array.from([6,30,54,78,102]),new se(30,new z(4,121),new z(5,122)),new se(28,new z(4,47),new z(14,48)),new se(30,new z(11,24),new z(14,25)),new se(30,new z(16,15),new z(14,16))),new Pe(24,Int32Array.from([6,28,54,80,106]),new se(30,new z(6,117),new z(4,118)),new se(28,new z(6,45),new z(14,46)),new se(30,new z(11,24),new z(16,25)),new se(30,new z(30,16),new z(2,17))),new Pe(25,Int32Array.from([6,32,58,84,110]),new se(26,new z(8,106),new z(4,107)),new se(28,new z(8,47),new z(13,48)),new se(30,new z(7,24),new z(22,25)),new se(30,new z(22,15),new z(13,16))),new Pe(26,Int32Array.from([6,30,58,86,114]),new se(28,new z(10,114),new z(2,115)),new se(28,new z(19,46),new z(4,47)),new se(28,new z(28,22),new z(6,23)),new se(30,new z(33,16),new z(4,17))),new Pe(27,Int32Array.from([6,34,62,90,118]),new se(30,new z(8,122),new z(4,123)),new se(28,new z(22,45),new z(3,46)),new se(30,new z(8,23),new z(26,24)),new se(30,new z(12,15),new z(28,16))),new Pe(28,Int32Array.from([6,26,50,74,98,122]),new se(30,new z(3,117),new z(10,118)),new se(28,new z(3,45),new z(23,46)),new se(30,new z(4,24),new z(31,25)),new se(30,new z(11,15),new z(31,16))),new Pe(29,Int32Array.from([6,30,54,78,102,126]),new se(30,new z(7,116),new z(7,117)),new se(28,new z(21,45),new z(7,46)),new se(30,new z(1,23),new z(37,24)),new se(30,new z(19,15),new z(26,16))),new Pe(30,Int32Array.from([6,26,52,78,104,130]),new se(30,new z(5,115),new z(10,116)),new se(28,new z(19,47),new z(10,48)),new se(30,new z(15,24),new z(25,25)),new se(30,new z(23,15),new z(25,16))),new Pe(31,Int32Array.from([6,30,56,82,108,134]),new se(30,new z(13,115),new z(3,116)),new se(28,new z(2,46),new z(29,47)),new se(30,new z(42,24),new z(1,25)),new se(30,new z(23,15),new z(28,16))),new Pe(32,Int32Array.from([6,34,60,86,112,138]),new se(30,new z(17,115)),new se(28,new z(10,46),new z(23,47)),new se(30,new z(10,24),new z(35,25)),new se(30,new z(19,15),new z(35,16))),new Pe(33,Int32Array.from([6,30,58,86,114,142]),new se(30,new z(17,115),new z(1,116)),new se(28,new z(14,46),new z(21,47)),new se(30,new z(29,24),new z(19,25)),new se(30,new z(11,15),new z(46,16))),new Pe(34,Int32Array.from([6,34,62,90,118,146]),new se(30,new z(13,115),new z(6,116)),new se(28,new z(14,46),new z(23,47)),new se(30,new z(44,24),new z(7,25)),new se(30,new z(59,16),new z(1,17))),new Pe(35,Int32Array.from([6,30,54,78,102,126,150]),new se(30,new z(12,121),new z(7,122)),new se(28,new z(12,47),new z(26,48)),new se(30,new z(39,24),new z(14,25)),new se(30,new z(22,15),new z(41,16))),new Pe(36,Int32Array.from([6,24,50,76,102,128,154]),new se(30,new z(6,121),new z(14,122)),new se(28,new z(6,47),new z(34,48)),new se(30,new z(46,24),new z(10,25)),new se(30,new z(2,15),new z(64,16))),new Pe(37,Int32Array.from([6,28,54,80,106,132,158]),new se(30,new z(17,122),new z(4,123)),new se(28,new z(29,46),new z(14,47)),new se(30,new z(49,24),new z(10,25)),new se(30,new z(24,15),new z(46,16))),new Pe(38,Int32Array.from([6,32,58,84,110,136,162]),new se(30,new z(4,122),new z(18,123)),new se(28,new z(13,46),new z(32,47)),new se(30,new z(48,24),new z(14,25)),new se(30,new z(42,15),new z(32,16))),new Pe(39,Int32Array.from([6,26,54,82,110,138,166]),new se(30,new z(20,117),new z(4,118)),new se(28,new z(40,47),new z(7,48)),new se(30,new z(43,24),new z(22,25)),new se(30,new z(10,15),new z(67,16))),new Pe(40,Int32Array.from([6,30,58,86,114,142,170]),new se(30,new z(19,118),new z(6,119)),new se(28,new z(18,47),new z(31,48)),new se(30,new z(34,24),new z(34,25)),new se(30,new z(20,15),new z(61,16)))];var Jt;(function(b){b[b.DATA_MASK_000=0]="DATA_MASK_000",b[b.DATA_MASK_001=1]="DATA_MASK_001",b[b.DATA_MASK_010=2]="DATA_MASK_010",b[b.DATA_MASK_011=3]="DATA_MASK_011",b[b.DATA_MASK_100=4]="DATA_MASK_100",b[b.DATA_MASK_101=5]="DATA_MASK_101",b[b.DATA_MASK_110=6]="DATA_MASK_110",b[b.DATA_MASK_111=7]="DATA_MASK_111"})(Jt||(Jt={}));class at{constructor(t,i){this.value=t,this.isMasked=i}unmaskBitMatrix(t,i){for(let a=0;a<i;a++)for(let c=0;c<i;c++)this.isMasked(a,c)&&t.flip(c,a)}}at.values=new Map([[Jt.DATA_MASK_000,new at(Jt.DATA_MASK_000,(b,t)=>(b+t&1)===0)],[Jt.DATA_MASK_001,new at(Jt.DATA_MASK_001,(b,t)=>(b&1)===0)],[Jt.DATA_MASK_010,new at(Jt.DATA_MASK_010,(b,t)=>t%3===0)],[Jt.DATA_MASK_011,new at(Jt.DATA_MASK_011,(b,t)=>(b+t)%3===0)],[Jt.DATA_MASK_100,new at(Jt.DATA_MASK_100,(b,t)=>(Math.floor(b/2)+Math.floor(t/3)&1)===0)],[Jt.DATA_MASK_101,new at(Jt.DATA_MASK_101,(b,t)=>b*t%6===0)],[Jt.DATA_MASK_110,new at(Jt.DATA_MASK_110,(b,t)=>b*t%6<3)],[Jt.DATA_MASK_111,new at(Jt.DATA_MASK_111,(b,t)=>(b+t+b*t%3&1)===0)]]);class Ji{constructor(t){const i=t.getHeight();if(i<21||(i&3)!==1)throw new F;this.bitMatrix=t}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let t=0;for(let h=0;h<6;h++)t=this.copyBit(h,8,t);t=this.copyBit(7,8,t),t=this.copyBit(8,8,t),t=this.copyBit(8,7,t);for(let h=5;h>=0;h--)t=this.copyBit(8,h,t);const i=this.bitMatrix.getHeight();let a=0;const c=i-7;for(let h=i-1;h>=c;h--)a=this.copyBit(8,h,a);for(let h=i-8;h<i;h++)a=this.copyBit(h,8,a);if(this.parsedFormatInfo=yn.decodeFormatInformation(t,a),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new F}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const t=this.bitMatrix.getHeight(),i=Math.floor((t-17)/4);if(i<=6)return Pe.getVersionForNumber(i);let a=0;const c=t-11;for(let d=5;d>=0;d--)for(let p=t-9;p>=c;p--)a=this.copyBit(p,d,a);let h=Pe.decodeVersionInformation(a);if(h!==null&&h.getDimensionForVersion()===t)return this.parsedVersion=h,h;a=0;for(let d=5;d>=0;d--)for(let p=t-9;p>=c;p--)a=this.copyBit(d,p,a);if(h=Pe.decodeVersionInformation(a),h!==null&&h.getDimensionForVersion()===t)return this.parsedVersion=h,h;throw new F}copyBit(t,i,a){return(this.isMirror?this.bitMatrix.get(i,t):this.bitMatrix.get(t,i))?a<<1|1:a<<1}readCodewords(){const t=this.readFormatInformation(),i=this.readVersion(),a=at.values.get(t.getDataMask()),c=this.bitMatrix.getHeight();a.unmaskBitMatrix(this.bitMatrix,c);const h=i.buildFunctionPattern();let d=!0;const p=new Uint8Array(i.getTotalCodewords());let E=0,_=0,S=0;for(let M=c-1;M>0;M-=2){M===6&&M--;for(let L=0;L<c;L++){const H=d?c-1-L:L;for(let K=0;K<2;K++)h.get(M-K,H)||(S++,_<<=1,this.bitMatrix.get(M-K,H)&&(_|=1),S===8&&(p[E++]=_,S=0,_=0))}d=!d}if(E!==i.getTotalCodewords())throw new F;return p}remask(){if(this.parsedFormatInfo===null)return;const t=at.values[this.parsedFormatInfo.getDataMask()],i=this.bitMatrix.getHeight();t.unmaskBitMatrix(this.bitMatrix,i)}setMirror(t){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=t}mirror(){const t=this.bitMatrix;for(let i=0,a=t.getWidth();i<a;i++)for(let c=i+1,h=t.getHeight();c<h;c++)t.get(i,c)!==t.get(c,i)&&(t.flip(c,i),t.flip(i,c))}}class Qs{constructor(t,i){this.numDataCodewords=t,this.codewords=i}static getDataBlocks(t,i,a){if(t.length!==i.getTotalCodewords())throw new D;const c=i.getECBlocksForLevel(a);let h=0;const d=c.getECBlocks();for(const K of d)h+=K.getCount();const p=new Array(h);let E=0;for(const K of d)for(let $=0;$<K.getCount();$++){const re=K.getDataCodewords(),fe=c.getECCodewordsPerBlock()+re;p[E++]=new Qs(re,new Uint8Array(fe))}const _=p[0].codewords.length;let S=p.length-1;for(;S>=0&&p[S].codewords.length!==_;)S--;S++;const M=_-c.getECCodewordsPerBlock();let L=0;for(let K=0;K<M;K++)for(let $=0;$<E;$++)p[$].codewords[K]=t[L++];for(let K=S;K<E;K++)p[K].codewords[M]=t[L++];const H=p[0].codewords.length;for(let K=M;K<H;K++)for(let $=0;$<E;$++){const re=$<S?K:K+1;p[$].codewords[re]=t[L++]}return p}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var Xn;(function(b){b[b.TERMINATOR=0]="TERMINATOR",b[b.NUMERIC=1]="NUMERIC",b[b.ALPHANUMERIC=2]="ALPHANUMERIC",b[b.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",b[b.BYTE=4]="BYTE",b[b.ECI=5]="ECI",b[b.KANJI=6]="KANJI",b[b.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",b[b.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",b[b.HANZI=9]="HANZI"})(Xn||(Xn={}));class Ze{constructor(t,i,a,c){this.value=t,this.stringValue=i,this.characterCountBitsForVersions=a,this.bits=c,Ze.FOR_BITS.set(c,this),Ze.FOR_VALUE.set(t,this)}static forBits(t){const i=Ze.FOR_BITS.get(t);if(i===void 0)throw new D;return i}getCharacterCountBits(t){const i=t.getVersionNumber();let a;return i<=9?a=0:i<=26?a=1:a=2,this.characterCountBitsForVersions[a]}getValue(){return this.value}getBits(){return this.bits}equals(t){if(!(t instanceof Ze))return!1;const i=t;return this.value===i.value}toString(){return this.stringValue}}Ze.FOR_BITS=new Map,Ze.FOR_VALUE=new Map,Ze.TERMINATOR=new Ze(Xn.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),Ze.NUMERIC=new Ze(Xn.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),Ze.ALPHANUMERIC=new Ze(Xn.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),Ze.STRUCTURED_APPEND=new Ze(Xn.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),Ze.BYTE=new Ze(Xn.BYTE,"BYTE",Int32Array.from([8,16,16]),4),Ze.ECI=new Ze(Xn.ECI,"ECI",Int32Array.from([0,0,0]),7),Ze.KANJI=new Ze(Xn.KANJI,"KANJI",Int32Array.from([8,10,12]),8),Ze.FNC1_FIRST_POSITION=new Ze(Xn.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),Ze.FNC1_SECOND_POSITION=new Ze(Xn.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),Ze.HANZI=new Ze(Xn.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class $t{static decode(t,i,a,c){const h=new Xs(t);let d=new U;const p=new Array;let E=-1,_=-1;try{let S=null,M=!1,L;do{if(h.available()<4)L=Ze.TERMINATOR;else{const H=h.readBits(4);L=Ze.forBits(H)}switch(L){case Ze.TERMINATOR:break;case Ze.FNC1_FIRST_POSITION:case Ze.FNC1_SECOND_POSITION:M=!0;break;case Ze.STRUCTURED_APPEND:if(h.available()<16)throw new F;E=h.readBits(8),_=h.readBits(8);break;case Ze.ECI:const H=$t.parseECIValue(h);if(S=P.getCharacterSetECIByValue(H),S===null)throw new F;break;case Ze.HANZI:const K=h.readBits(4),$=h.readBits(L.getCharacterCountBits(i));K===$t.GB2312_SUBSET&&$t.decodeHanziSegment(h,d,$);break;default:const re=h.readBits(L.getCharacterCountBits(i));switch(L){case Ze.NUMERIC:$t.decodeNumericSegment(h,d,re);break;case Ze.ALPHANUMERIC:$t.decodeAlphanumericSegment(h,d,re,M);break;case Ze.BYTE:$t.decodeByteSegment(h,d,re,S,p,c);break;case Ze.KANJI:$t.decodeKanjiSegment(h,d,re);break;default:throw new F}break}}while(L!==Ze.TERMINATOR)}catch{throw new F}return new _t(t,d.toString(),p.length===0?null:p,a===null?null:a.toString(),E,_)}static decodeHanziSegment(t,i,a){if(a*13>t.available())throw new F;const c=new Uint8Array(2*a);let h=0;for(;a>0;){const d=t.readBits(13);let p=d/96<<8&4294967295|d%96;p<959?p+=41377:p+=42657,c[h]=p>>8&255,c[h+1]=p&255,h+=2,a--}try{i.append(Y.decode(c,W.GB2312))}catch(d){throw new F(d)}}static decodeKanjiSegment(t,i,a){if(a*13>t.available())throw new F;const c=new Uint8Array(2*a);let h=0;for(;a>0;){const d=t.readBits(13);let p=d/192<<8&4294967295|d%192;p<7936?p+=33088:p+=49472,c[h]=p>>8,c[h+1]=p,h+=2,a--}try{i.append(Y.decode(c,W.SHIFT_JIS))}catch(d){throw new F(d)}}static decodeByteSegment(t,i,a,c,h,d){if(8*a>t.available())throw new F;const p=new Uint8Array(a);for(let _=0;_<a;_++)p[_]=t.readBits(8);let E;c===null?E=W.guessEncoding(p,d):E=c.getName();try{i.append(Y.decode(p,E))}catch(_){throw new F(_)}h.push(p)}static toAlphaNumericChar(t){if(t>=$t.ALPHANUMERIC_CHARS.length)throw new F;return $t.ALPHANUMERIC_CHARS[t]}static decodeAlphanumericSegment(t,i,a,c){const h=i.length();for(;a>1;){if(t.available()<11)throw new F;const d=t.readBits(11);i.append($t.toAlphaNumericChar(Math.floor(d/45))),i.append($t.toAlphaNumericChar(d%45)),a-=2}if(a===1){if(t.available()<6)throw new F;i.append($t.toAlphaNumericChar(t.readBits(6)))}if(c)for(let d=h;d<i.length();d++)i.charAt(d)==="%"&&(d<i.length()-1&&i.charAt(d+1)==="%"?i.deleteCharAt(d+1):i.setCharAt(d,""))}static decodeNumericSegment(t,i,a){for(;a>=3;){if(t.available()<10)throw new F;const c=t.readBits(10);if(c>=1e3)throw new F;i.append($t.toAlphaNumericChar(Math.floor(c/100))),i.append($t.toAlphaNumericChar(Math.floor(c/10)%10)),i.append($t.toAlphaNumericChar(c%10)),a-=3}if(a===2){if(t.available()<7)throw new F;const c=t.readBits(7);if(c>=100)throw new F;i.append($t.toAlphaNumericChar(Math.floor(c/10))),i.append($t.toAlphaNumericChar(c%10))}else if(a===1){if(t.available()<4)throw new F;const c=t.readBits(4);if(c>=10)throw new F;i.append($t.toAlphaNumericChar(c))}}static parseECIValue(t){const i=t.readBits(8);if((i&128)===0)return i&127;if((i&192)===128){const a=t.readBits(8);return(i&63)<<8&4294967295|a}if((i&224)===192){const a=t.readBits(16);return(i&31)<<16&4294967295|a}throw new F}}$t.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",$t.GB2312_SUBSET=1;class Lo{constructor(t){this.mirrored=t}isMirrored(){return this.mirrored}applyMirroredCorrection(t){if(!this.mirrored||t===null||t.length<3)return;const i=t[0];t[0]=t[2],t[2]=i}}class ko{constructor(){this.rsDecoder=new Oi(wt.QR_CODE_FIELD_256)}decodeBooleanArray(t,i){return this.decodeBitMatrix(Le.parseFromBooleanArray(t),i)}decodeBitMatrix(t,i){const a=new Ji(t);let c=null;try{return this.decodeBitMatrixParser(a,i)}catch(h){c=h}try{a.remask(),a.setMirror(!0),a.readVersion(),a.readFormatInformation(),a.mirror();const h=this.decodeBitMatrixParser(a,i);return h.setOther(new Lo(!0)),h}catch(h){throw c!==null?c:h}}decodeBitMatrixParser(t,i){const a=t.readVersion(),c=t.readFormatInformation().getErrorCorrectionLevel(),h=t.readCodewords(),d=Qs.getDataBlocks(h,a,c);let p=0;for(const S of d)p+=S.getNumDataCodewords();const E=new Uint8Array(p);let _=0;for(const S of d){const M=S.getCodewords(),L=S.getNumDataCodewords();this.correctErrors(M,L);for(let H=0;H<L;H++)E[_++]=M[H]}return $t.decode(E,a,c,i)}correctErrors(t,i){const a=new Int32Array(t);try{this.rsDecoder.decode(a,t.length-i)}catch{throw new j}for(let c=0;c<i;c++)t[c]=a[c]}}class Xr extends Ve{constructor(t,i,a){super(t,i),this.estimatedModuleSize=a}aboutEquals(t,i,a){if(Math.abs(i-this.getY())<=t&&Math.abs(a-this.getX())<=t){const c=Math.abs(t-this.estimatedModuleSize);return c<=1||c<=this.estimatedModuleSize}return!1}combineEstimate(t,i,a){const c=(this.getX()+i)/2,h=(this.getY()+t)/2,d=(this.estimatedModuleSize+a)/2;return new Xr(c,h,d)}}class Dn{constructor(t,i,a,c,h,d,p){this.image=t,this.startX=i,this.startY=a,this.width=c,this.height=h,this.moduleSize=d,this.resultPointCallback=p,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const t=this.startX,i=this.height,a=this.width,c=t+a,h=this.startY+i/2,d=new Int32Array(3),p=this.image;for(let E=0;E<i;E++){const _=h+((E&1)===0?Math.floor((E+1)/2):-Math.floor((E+1)/2));d[0]=0,d[1]=0,d[2]=0;let S=t;for(;S<c&&!p.get(S,_);)S++;let M=0;for(;S<c;){if(p.get(S,_))if(M===1)d[1]++;else if(M===2){if(this.foundPatternCross(d)){const L=this.handlePossibleCenter(d,_,S);if(L!==null)return L}d[0]=d[2],d[1]=1,d[2]=0,M=1}else d[++M]++;else M===1&&M++,d[M]++;S++}if(this.foundPatternCross(d)){const L=this.handlePossibleCenter(d,_,c);if(L!==null)return L}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new ue}static centerFromEnd(t,i){return i-t[2]-t[1]/2}foundPatternCross(t){const i=this.moduleSize,a=i/2;for(let c=0;c<3;c++)if(Math.abs(i-t[c])>=a)return!1;return!0}crossCheckVertical(t,i,a,c){const h=this.image,d=h.getHeight(),p=this.crossCheckStateCount;p[0]=0,p[1]=0,p[2]=0;let E=t;for(;E>=0&&h.get(i,E)&&p[1]<=a;)p[1]++,E--;if(E<0||p[1]>a)return NaN;for(;E>=0&&!h.get(i,E)&&p[0]<=a;)p[0]++,E--;if(p[0]>a)return NaN;for(E=t+1;E<d&&h.get(i,E)&&p[1]<=a;)p[1]++,E++;if(E===d||p[1]>a)return NaN;for(;E<d&&!h.get(i,E)&&p[2]<=a;)p[2]++,E++;if(p[2]>a)return NaN;const _=p[0]+p[1]+p[2];return 5*Math.abs(_-c)>=2*c?NaN:this.foundPatternCross(p)?Dn.centerFromEnd(p,E):NaN}handlePossibleCenter(t,i,a){const c=t[0]+t[1]+t[2],h=Dn.centerFromEnd(t,a),d=this.crossCheckVertical(i,h,2*t[1],c);if(!isNaN(d)){const p=(t[0]+t[1]+t[2])/3;for(const _ of this.possibleCenters)if(_.aboutEquals(p,d,h))return _.combineEstimate(d,h,p);const E=new Xr(h,d,p);this.possibleCenters.push(E),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(E)}return null}}class Vr extends Ve{constructor(t,i,a,c){super(t,i),this.estimatedModuleSize=a,this.count=c,c===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(t,i,a){if(Math.abs(i-this.getY())<=t&&Math.abs(a-this.getX())<=t){const c=Math.abs(t-this.estimatedModuleSize);return c<=1||c<=this.estimatedModuleSize}return!1}combineEstimate(t,i,a){const c=this.count+1,h=(this.count*this.getX()+i)/c,d=(this.count*this.getY()+t)/c,p=(this.count*this.estimatedModuleSize+a)/c;return new Vr(h,d,p,c)}}class ai{constructor(t){this.bottomLeft=t[0],this.topLeft=t[1],this.topRight=t[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class en{constructor(t,i){this.image=t,this.resultPointCallback=i,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=i}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(t){const i=t!=null&&t.get(we.TRY_HARDER)!==void 0,a=t!=null&&t.get(we.PURE_BARCODE)!==void 0,c=this.image,h=c.getHeight(),d=c.getWidth();let p=Math.floor(3*h/(4*en.MAX_MODULES));(p<en.MIN_SKIP||i)&&(p=en.MIN_SKIP);let E=!1;const _=new Int32Array(5);for(let M=p-1;M<h&&!E;M+=p){_[0]=0,_[1]=0,_[2]=0,_[3]=0,_[4]=0;let L=0;for(let H=0;H<d;H++)if(c.get(H,M))(L&1)===1&&L++,_[L]++;else if((L&1)===0)if(L===4)if(en.foundPatternCross(_)){if(this.handlePossibleCenter(_,M,H,a)===!0)if(p=2,this.hasSkipped===!0)E=this.haveMultiplyConfirmedCenters();else{const $=this.findRowSkip();$>_[2]&&(M+=$-_[2]-p,H=d-1)}else{_[0]=_[2],_[1]=_[3],_[2]=_[4],_[3]=1,_[4]=0,L=3;continue}L=0,_[0]=0,_[1]=0,_[2]=0,_[3]=0,_[4]=0}else _[0]=_[2],_[1]=_[3],_[2]=_[4],_[3]=1,_[4]=0,L=3;else _[++L]++;else _[L]++;en.foundPatternCross(_)&&this.handlePossibleCenter(_,M,d,a)===!0&&(p=_[0],this.hasSkipped&&(E=this.haveMultiplyConfirmedCenters()))}const S=this.selectBestPatterns();return Ve.orderBestPatterns(S),new ai(S)}static centerFromEnd(t,i){return i-t[4]-t[3]-t[2]/2}static foundPatternCross(t){let i=0;for(let h=0;h<5;h++){const d=t[h];if(d===0)return!1;i+=d}if(i<7)return!1;const a=i/7,c=a/2;return Math.abs(a-t[0])<c&&Math.abs(a-t[1])<c&&Math.abs(3*a-t[2])<3*c&&Math.abs(a-t[3])<c&&Math.abs(a-t[4])<c}getCrossCheckStateCount(){const t=this.crossCheckStateCount;return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t}crossCheckDiagonal(t,i,a,c){const h=this.getCrossCheckStateCount();let d=0;const p=this.image;for(;t>=d&&i>=d&&p.get(i-d,t-d);)h[2]++,d++;if(t<d||i<d)return!1;for(;t>=d&&i>=d&&!p.get(i-d,t-d)&&h[1]<=a;)h[1]++,d++;if(t<d||i<d||h[1]>a)return!1;for(;t>=d&&i>=d&&p.get(i-d,t-d)&&h[0]<=a;)h[0]++,d++;if(h[0]>a)return!1;const E=p.getHeight(),_=p.getWidth();for(d=1;t+d<E&&i+d<_&&p.get(i+d,t+d);)h[2]++,d++;if(t+d>=E||i+d>=_)return!1;for(;t+d<E&&i+d<_&&!p.get(i+d,t+d)&&h[3]<a;)h[3]++,d++;if(t+d>=E||i+d>=_||h[3]>=a)return!1;for(;t+d<E&&i+d<_&&p.get(i+d,t+d)&&h[4]<a;)h[4]++,d++;if(h[4]>=a)return!1;const S=h[0]+h[1]+h[2]+h[3]+h[4];return Math.abs(S-c)<2*c&&en.foundPatternCross(h)}crossCheckVertical(t,i,a,c){const h=this.image,d=h.getHeight(),p=this.getCrossCheckStateCount();let E=t;for(;E>=0&&h.get(i,E);)p[2]++,E--;if(E<0)return NaN;for(;E>=0&&!h.get(i,E)&&p[1]<=a;)p[1]++,E--;if(E<0||p[1]>a)return NaN;for(;E>=0&&h.get(i,E)&&p[0]<=a;)p[0]++,E--;if(p[0]>a)return NaN;for(E=t+1;E<d&&h.get(i,E);)p[2]++,E++;if(E===d)return NaN;for(;E<d&&!h.get(i,E)&&p[3]<a;)p[3]++,E++;if(E===d||p[3]>=a)return NaN;for(;E<d&&h.get(i,E)&&p[4]<a;)p[4]++,E++;if(p[4]>=a)return NaN;const _=p[0]+p[1]+p[2]+p[3]+p[4];return 5*Math.abs(_-c)>=2*c?NaN:en.foundPatternCross(p)?en.centerFromEnd(p,E):NaN}crossCheckHorizontal(t,i,a,c){const h=this.image,d=h.getWidth(),p=this.getCrossCheckStateCount();let E=t;for(;E>=0&&h.get(E,i);)p[2]++,E--;if(E<0)return NaN;for(;E>=0&&!h.get(E,i)&&p[1]<=a;)p[1]++,E--;if(E<0||p[1]>a)return NaN;for(;E>=0&&h.get(E,i)&&p[0]<=a;)p[0]++,E--;if(p[0]>a)return NaN;for(E=t+1;E<d&&h.get(E,i);)p[2]++,E++;if(E===d)return NaN;for(;E<d&&!h.get(E,i)&&p[3]<a;)p[3]++,E++;if(E===d||p[3]>=a)return NaN;for(;E<d&&h.get(E,i)&&p[4]<a;)p[4]++,E++;if(p[4]>=a)return NaN;const _=p[0]+p[1]+p[2]+p[3]+p[4];return 5*Math.abs(_-c)>=c?NaN:en.foundPatternCross(p)?en.centerFromEnd(p,E):NaN}handlePossibleCenter(t,i,a,c){const h=t[0]+t[1]+t[2]+t[3]+t[4];let d=en.centerFromEnd(t,a),p=this.crossCheckVertical(i,Math.floor(d),t[2],h);if(!isNaN(p)&&(d=this.crossCheckHorizontal(Math.floor(d),Math.floor(p),t[2],h),!isNaN(d)&&(!c||this.crossCheckDiagonal(Math.floor(p),Math.floor(d),t[2],h)))){const E=h/7;let _=!1;const S=this.possibleCenters;for(let M=0,L=S.length;M<L;M++){const H=S[M];if(H.aboutEquals(E,p,d)){S[M]=H.combineEstimate(p,d,E),_=!0;break}}if(!_){const M=new Vr(d,p,E);S.push(M),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(M)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let i=null;for(const a of this.possibleCenters)if(a.getCount()>=en.CENTER_QUORUM)if(i==null)i=a;else return this.hasSkipped=!0,Math.floor((Math.abs(i.getX()-a.getX())-Math.abs(i.getY()-a.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let t=0,i=0;const a=this.possibleCenters.length;for(const d of this.possibleCenters)d.getCount()>=en.CENTER_QUORUM&&(t++,i+=d.getEstimatedModuleSize());if(t<3)return!1;const c=i/a;let h=0;for(const d of this.possibleCenters)h+=Math.abs(d.getEstimatedModuleSize()-c);return h<=.05*i}selectBestPatterns(){const t=this.possibleCenters.length;if(t<3)throw new ue;const i=this.possibleCenters;let a;if(t>3){let c=0,h=0;for(const E of this.possibleCenters){const _=E.getEstimatedModuleSize();c+=_,h+=_*_}a=c/t;let d=Math.sqrt(h/t-a*a);i.sort((E,_)=>{const S=Math.abs(_.getEstimatedModuleSize()-a),M=Math.abs(E.getEstimatedModuleSize()-a);return S<M?-1:S>M?1:0});const p=Math.max(.2*a,d);for(let E=0;E<i.length&&i.length>3;E++){const _=i[E];Math.abs(_.getEstimatedModuleSize()-a)>p&&(i.splice(E,1),E--)}}if(i.length>3){let c=0;for(const h of i)c+=h.getEstimatedModuleSize();a=c/i.length,i.sort((h,d)=>{if(d.getCount()===h.getCount()){const p=Math.abs(d.getEstimatedModuleSize()-a),E=Math.abs(h.getEstimatedModuleSize()-a);return p<E?1:p>E?-1:0}else return d.getCount()-h.getCount()}),i.splice(3)}return[i[0],i[1],i[2]]}}en.CENTER_QUORUM=2,en.MIN_SKIP=3,en.MAX_MODULES=57;class rr{constructor(t){this.image=t}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(t){this.resultPointCallback=t==null?null:t.get(we.NEED_RESULT_POINT_CALLBACK);const a=new en(this.image,this.resultPointCallback).find(t);return this.processFinderPatternInfo(a)}processFinderPatternInfo(t){const i=t.getTopLeft(),a=t.getTopRight(),c=t.getBottomLeft(),h=this.calculateModuleSize(i,a,c);if(h<1)throw new ue("No pattern found in proccess finder.");const d=rr.computeDimension(i,a,c,h),p=Pe.getProvisionalVersionForDimension(d),E=p.getDimensionForVersion()-7;let _=null;if(p.getAlignmentPatternCenters().length>0){const H=a.getX()-i.getX()+c.getX(),K=a.getY()-i.getY()+c.getY(),$=1-3/E,re=Math.floor(i.getX()+$*(H-i.getX())),fe=Math.floor(i.getY()+$*(K-i.getY()));for(let Se=4;Se<=16;Se<<=1)try{_=this.findAlignmentInRegion(h,re,fe,Se);break}catch(Re){if(!(Re instanceof ue))throw Re}}const S=rr.createTransform(i,a,c,_,d),M=rr.sampleGrid(this.image,S,d);let L;return _===null?L=[c,i,a]:L=[c,i,a,_],new Xi(M,L)}static createTransform(t,i,a,c,h){const d=h-3.5;let p,E,_,S;return c!==null?(p=c.getX(),E=c.getY(),_=d-3,S=_):(p=i.getX()-t.getX()+a.getX(),E=i.getY()-t.getY()+a.getY(),_=d,S=d),zt.quadrilateralToQuadrilateral(3.5,3.5,d,3.5,_,S,3.5,d,t.getX(),t.getY(),i.getX(),i.getY(),p,E,a.getX(),a.getY())}static sampleGrid(t,i,a){return er.getInstance().sampleGridWithTransform(t,a,a,i)}static computeDimension(t,i,a,c){const h=Et.round(Ve.distance(t,i)/c),d=Et.round(Ve.distance(t,a)/c);let p=Math.floor((h+d)/2)+7;switch(p&3){case 0:p++;break;case 2:p--;break;case 3:throw new ue("Dimensions could be not found.")}return p}calculateModuleSize(t,i,a){return(this.calculateModuleSizeOneWay(t,i)+this.calculateModuleSizeOneWay(t,a))/2}calculateModuleSizeOneWay(t,i){const a=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(t.getX()),Math.floor(t.getY()),Math.floor(i.getX()),Math.floor(i.getY())),c=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(i.getX()),Math.floor(i.getY()),Math.floor(t.getX()),Math.floor(t.getY()));return isNaN(a)?c/7:isNaN(c)?a/7:(a+c)/14}sizeOfBlackWhiteBlackRunBothWays(t,i,a,c){let h=this.sizeOfBlackWhiteBlackRun(t,i,a,c),d=1,p=t-(a-t);p<0?(d=t/(t-p),p=0):p>=this.image.getWidth()&&(d=(this.image.getWidth()-1-t)/(p-t),p=this.image.getWidth()-1);let E=Math.floor(i-(c-i)*d);return d=1,E<0?(d=i/(i-E),E=0):E>=this.image.getHeight()&&(d=(this.image.getHeight()-1-i)/(E-i),E=this.image.getHeight()-1),p=Math.floor(t+(p-t)*d),h+=this.sizeOfBlackWhiteBlackRun(t,i,p,E),h-1}sizeOfBlackWhiteBlackRun(t,i,a,c){const h=Math.abs(c-i)>Math.abs(a-t);if(h){let H=t;t=i,i=H,H=a,a=c,c=H}const d=Math.abs(a-t),p=Math.abs(c-i);let E=-d/2;const _=t<a?1:-1,S=i<c?1:-1;let M=0;const L=a+_;for(let H=t,K=i;H!==L;H+=_){const $=h?K:H,re=h?H:K;if(M===1===this.image.get($,re)){if(M===2)return Et.distance(H,K,t,i);M++}if(E+=p,E>0){if(K===c)break;K+=S,E-=d}}return M===2?Et.distance(a+_,c,t,i):NaN}findAlignmentInRegion(t,i,a,c){const h=Math.floor(c*t),d=Math.max(0,i-h),p=Math.min(this.image.getWidth()-1,i+h);if(p-d<t*3)throw new ue("Alignment top exceeds estimated module size.");const E=Math.max(0,a-h),_=Math.min(this.image.getHeight()-1,a+h);if(_-E<t*3)throw new ue("Alignment bottom exceeds estimated module size.");return new Dn(this.image,d,E,p-d,_-E,t,this.resultPointCallback).find()}}class qn{constructor(){this.decoder=new ko}getDecoder(){return this.decoder}decode(t,i){let a,c;if(i!=null&&i.get(we.PURE_BARCODE)!==void 0){const E=qn.extractPureBits(t.getBlackMatrix());a=this.decoder.decodeBitMatrix(E,i),c=qn.NO_POINTS}else{const E=new rr(t.getBlackMatrix()).detect(i);a=this.decoder.decodeBitMatrix(E.getBits(),i),c=E.getPoints()}a.getOther()instanceof Lo&&a.getOther().applyMirroredCorrection(c);const h=new $e(a.getText(),a.getRawBytes(),void 0,c,Ne.QR_CODE,void 0),d=a.getByteSegments();d!==null&&h.putMetadata(Qe.BYTE_SEGMENTS,d);const p=a.getECLevel();return p!==null&&h.putMetadata(Qe.ERROR_CORRECTION_LEVEL,p),a.hasStructuredAppend()&&(h.putMetadata(Qe.STRUCTURED_APPEND_SEQUENCE,a.getStructuredAppendSequenceNumber()),h.putMetadata(Qe.STRUCTURED_APPEND_PARITY,a.getStructuredAppendParity())),h}reset(){}static extractPureBits(t){const i=t.getTopLeftOnBit(),a=t.getBottomRightOnBit();if(i===null||a===null)throw new ue;const c=this.moduleSize(i,t);let h=i[1],d=a[1],p=i[0],E=a[0];if(p>=E||h>=d)throw new ue;if(d-h!==E-p&&(E=p+(d-h),E>=t.getWidth()))throw new ue;const _=Math.round((E-p+1)/c),S=Math.round((d-h+1)/c);if(_<=0||S<=0)throw new ue;if(S!==_)throw new ue;const M=Math.floor(c/2);h+=M,p+=M;const L=p+Math.floor((_-1)*c)-E;if(L>0){if(L>M)throw new ue;p-=L}const H=h+Math.floor((S-1)*c)-d;if(H>0){if(H>M)throw new ue;h-=H}const K=new Le(_,S);for(let $=0;$<S;$++){const re=h+Math.floor($*c);for(let fe=0;fe<_;fe++)t.get(p+Math.floor(fe*c),re)&&K.set(fe,$)}return K}static moduleSize(t,i){const a=i.getHeight(),c=i.getWidth();let h=t[0],d=t[1],p=!0,E=0;for(;h<c&&d<a;){if(p!==i.get(h,d)){if(++E===5)break;p=!p}h++,d++}if(h===c||d===a)throw new ue;return(h-t[0])/7}}qn.NO_POINTS=new Array;class nt{PDF417Common(){}static getBitCountSum(t){return Et.sum(t)}static toIntArray(t){if(t==null||!t.length)return nt.EMPTY_INT_ARRAY;const i=new Int32Array(t.length);let a=0;for(const c of t)i[a++]=c;return i}static getCodeword(t){const i=he.binarySearch(nt.SYMBOL_TABLE,t&262143);return i<0?-1:(nt.CODEWORD_TABLE[i]-1)%nt.NUMBER_OF_CODEWORDS}}nt.NUMBER_OF_CODEWORDS=929,nt.MAX_CODEWORDS_IN_BARCODE=nt.NUMBER_OF_CODEWORDS-1,nt.MIN_ROWS_IN_BARCODE=3,nt.MAX_ROWS_IN_BARCODE=90,nt.MODULES_IN_CODEWORD=17,nt.MODULES_IN_STOP_PATTERN=18,nt.BARS_IN_MODULE=8,nt.EMPTY_INT_ARRAY=new Int32Array([]),nt.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),nt.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class ha{constructor(t,i){this.bits=t,this.points=i}getBits(){return this.bits}getPoints(){return this.points}}class et{static detectMultiple(t,i,a){let c=t.getBlackMatrix(),h=et.detect(a,c);return h.length||(c=c.clone(),c.rotate180(),h=et.detect(a,c)),new ha(c,h)}static detect(t,i){const a=new Array;let c=0,h=0,d=!1;for(;c<i.getHeight();){const p=et.findVertices(i,c,h);if(p[0]==null&&p[3]==null){if(!d)break;d=!1,h=0;for(const E of a)E[1]!=null&&(c=Math.trunc(Math.max(c,E[1].getY()))),E[3]!=null&&(c=Math.max(c,Math.trunc(E[3].getY())));c+=et.ROW_STEP;continue}if(d=!0,a.push(p),!t)break;p[2]!=null?(h=Math.trunc(p[2].getX()),c=Math.trunc(p[2].getY())):(h=Math.trunc(p[4].getX()),c=Math.trunc(p[4].getY()))}return a}static findVertices(t,i,a){const c=t.getHeight(),h=t.getWidth(),d=new Array(8);return et.copyToResult(d,et.findRowsWithPattern(t,c,h,i,a,et.START_PATTERN),et.INDEXES_START_PATTERN),d[4]!=null&&(a=Math.trunc(d[4].getX()),i=Math.trunc(d[4].getY())),et.copyToResult(d,et.findRowsWithPattern(t,c,h,i,a,et.STOP_PATTERN),et.INDEXES_STOP_PATTERN),d}static copyToResult(t,i,a){for(let c=0;c<a.length;c++)t[a[c]]=i[c]}static findRowsWithPattern(t,i,a,c,h,d){const p=new Array(4);let E=!1;const _=new Int32Array(d.length);for(;c<i;c+=et.ROW_STEP){let M=et.findGuardPattern(t,h,c,a,!1,d,_);if(M!=null){for(;c>0;){const L=et.findGuardPattern(t,h,--c,a,!1,d,_);if(L!=null)M=L;else{c++;break}}p[0]=new Ve(M[0],c),p[1]=new Ve(M[1],c),E=!0;break}}let S=c+1;if(E){let M=0,L=Int32Array.from([Math.trunc(p[0].getX()),Math.trunc(p[1].getX())]);for(;S<i;S++){const H=et.findGuardPattern(t,L[0],S,a,!1,d,_);if(H!=null&&Math.abs(L[0]-H[0])<et.MAX_PATTERN_DRIFT&&Math.abs(L[1]-H[1])<et.MAX_PATTERN_DRIFT)L=H,M=0;else{if(M>et.SKIPPED_ROW_COUNT_MAX)break;M++}}S-=M+1,p[2]=new Ve(L[0],S),p[3]=new Ve(L[1],S)}return S-c<et.BARCODE_MIN_HEIGHT&&he.fill(p,null),p}static findGuardPattern(t,i,a,c,h,d,p){he.fillWithin(p,0,p.length,0);let E=i,_=0;for(;t.get(E,a)&&E>0&&_++<et.MAX_PIXEL_DRIFT;)E--;let S=E,M=0,L=d.length;for(let H=h;S<c;S++)if(t.get(S,a)!==H)p[M]++;else{if(M===L-1){if(et.patternMatchVariance(p,d,et.MAX_INDIVIDUAL_VARIANCE)<et.MAX_AVG_VARIANCE)return new Int32Array([E,S]);E+=p[0]+p[1],Q.arraycopy(p,2,p,0,M-1),p[M-1]=0,p[M]=0,M--}else M++;p[M]=1,H=!H}return M===L-1&&et.patternMatchVariance(p,d,et.MAX_INDIVIDUAL_VARIANCE)<et.MAX_AVG_VARIANCE?new Int32Array([E,S-1]):null}static patternMatchVariance(t,i,a){let c=t.length,h=0,d=0;for(let _=0;_<c;_++)h+=t[_],d+=i[_];if(h<d)return 1/0;let p=h/d;a*=p;let E=0;for(let _=0;_<c;_++){let S=t[_],M=i[_]*p,L=S>M?S-M:M-S;if(L>a)return 1/0;E+=L}return E/h}}et.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),et.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),et.MAX_AVG_VARIANCE=.42,et.MAX_INDIVIDUAL_VARIANCE=.8,et.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),et.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),et.MAX_PIXEL_DRIFT=3,et.MAX_PATTERN_DRIFT=5,et.SKIPPED_ROW_COUNT_MAX=25,et.ROW_STEP=5,et.BARCODE_MIN_HEIGHT=10;class Bn{constructor(t,i){if(i.length===0)throw new D;this.field=t;let a=i.length;if(a>1&&i[0]===0){let c=1;for(;c<a&&i[c]===0;)c++;c===a?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(a-c),Q.arraycopy(i,c,this.coefficients,0,this.coefficients.length))}else this.coefficients=i}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(t){return this.coefficients[this.coefficients.length-1-t]}evaluateAt(t){if(t===0)return this.getCoefficient(0);if(t===1){let c=0;for(let h of this.coefficients)c=this.field.add(c,h);return c}let i=this.coefficients[0],a=this.coefficients.length;for(let c=1;c<a;c++)i=this.field.add(this.field.multiply(t,i),this.coefficients[c]);return i}add(t){if(!this.field.equals(t.field))throw new D("ModulusPolys do not have same ModulusGF field");if(this.isZero())return t;if(t.isZero())return this;let i=this.coefficients,a=t.coefficients;if(i.length>a.length){let d=i;i=a,a=d}let c=new Int32Array(a.length),h=a.length-i.length;Q.arraycopy(a,0,c,0,h);for(let d=h;d<a.length;d++)c[d]=this.field.add(i[d-h],a[d]);return new Bn(this.field,c)}subtract(t){if(!this.field.equals(t.field))throw new D("ModulusPolys do not have same ModulusGF field");return t.isZero()?this:this.add(t.negative())}multiply(t){return t instanceof Bn?this.multiplyOther(t):this.multiplyScalar(t)}multiplyOther(t){if(!this.field.equals(t.field))throw new D("ModulusPolys do not have same ModulusGF field");if(this.isZero()||t.isZero())return new Bn(this.field,new Int32Array([0]));let i=this.coefficients,a=i.length,c=t.coefficients,h=c.length,d=new Int32Array(a+h-1);for(let p=0;p<a;p++){let E=i[p];for(let _=0;_<h;_++)d[p+_]=this.field.add(d[p+_],this.field.multiply(E,c[_]))}return new Bn(this.field,d)}negative(){let t=this.coefficients.length,i=new Int32Array(t);for(let a=0;a<t;a++)i[a]=this.field.subtract(0,this.coefficients[a]);return new Bn(this.field,i)}multiplyScalar(t){if(t===0)return new Bn(this.field,new Int32Array([0]));if(t===1)return this;let i=this.coefficients.length,a=new Int32Array(i);for(let c=0;c<i;c++)a[c]=this.field.multiply(this.coefficients[c],t);return new Bn(this.field,a)}multiplyByMonomial(t,i){if(t<0)throw new D;if(i===0)return new Bn(this.field,new Int32Array([0]));let a=this.coefficients.length,c=new Int32Array(a+t);for(let h=0;h<a;h++)c[h]=this.field.multiply(this.coefficients[h],i);return new Bn(this.field,c)}toString(){let t=new U;for(let i=this.getDegree();i>=0;i--){let a=this.getCoefficient(i);a!==0&&(a<0?(t.append(" - "),a=-a):t.length()>0&&t.append(" + "),(i===0||a!==1)&&t.append(a),i!==0&&(i===1?t.append("x"):(t.append("x^"),t.append(i))))}return t.toString()}}class fa{add(t,i){return(t+i)%this.modulus}subtract(t,i){return(this.modulus+t-i)%this.modulus}exp(t){return this.expTable[t]}log(t){if(t===0)throw new D;return this.logTable[t]}inverse(t){if(t===0)throw new Mi;return this.expTable[this.modulus-this.logTable[t]-1]}multiply(t,i){return t===0||i===0?0:this.expTable[(this.logTable[t]+this.logTable[i])%(this.modulus-1)]}getSize(){return this.modulus}equals(t){return t===this}}class li extends fa{constructor(t,i){super(),this.modulus=t,this.expTable=new Int32Array(t),this.logTable=new Int32Array(t);let a=1;for(let c=0;c<t;c++)this.expTable[c]=a,a=a*i%t;for(let c=0;c<t-1;c++)this.logTable[this.expTable[c]]=c;this.zero=new Bn(this,new Int32Array([0])),this.one=new Bn(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(t,i){if(t<0)throw new D;if(i===0)return this.zero;let a=new Int32Array(t+1);return a[0]=i,new Bn(this,a)}}li.PDF417_GF=new li(nt.NUMBER_OF_CODEWORDS,3);class es{constructor(){this.field=li.PDF417_GF}decode(t,i,a){let c=new Bn(this.field,t),h=new Int32Array(i),d=!1;for(let K=i;K>0;K--){let $=c.evaluateAt(this.field.exp(K));h[i-K]=$,$!==0&&(d=!0)}if(!d)return 0;let p=this.field.getOne();if(a!=null)for(const K of a){let $=this.field.exp(t.length-1-K),re=new Bn(this.field,new Int32Array([this.field.subtract(0,$),1]));p=p.multiply(re)}let E=new Bn(this.field,h),_=this.runEuclideanAlgorithm(this.field.buildMonomial(i,1),E,i),S=_[0],M=_[1],L=this.findErrorLocations(S),H=this.findErrorMagnitudes(M,S,L);for(let K=0;K<L.length;K++){let $=t.length-1-this.field.log(L[K]);if($<0)throw j.getChecksumInstance();t[$]=this.field.subtract(t[$],H[K])}return L.length}runEuclideanAlgorithm(t,i,a){if(t.getDegree()<i.getDegree()){let L=t;t=i,i=L}let c=t,h=i,d=this.field.getZero(),p=this.field.getOne();for(;h.getDegree()>=Math.round(a/2);){let L=c,H=d;if(c=h,d=p,c.isZero())throw j.getChecksumInstance();h=L;let K=this.field.getZero(),$=c.getCoefficient(c.getDegree()),re=this.field.inverse($);for(;h.getDegree()>=c.getDegree()&&!h.isZero();){let fe=h.getDegree()-c.getDegree(),Se=this.field.multiply(h.getCoefficient(h.getDegree()),re);K=K.add(this.field.buildMonomial(fe,Se)),h=h.subtract(c.multiplyByMonomial(fe,Se))}p=K.multiply(d).subtract(H).negative()}let E=p.getCoefficient(0);if(E===0)throw j.getChecksumInstance();let _=this.field.inverse(E),S=p.multiply(_),M=h.multiply(_);return[S,M]}findErrorLocations(t){let i=t.getDegree(),a=new Int32Array(i),c=0;for(let h=1;h<this.field.getSize()&&c<i;h++)t.evaluateAt(h)===0&&(a[c]=this.field.inverse(h),c++);if(c!==i)throw j.getChecksumInstance();return a}findErrorMagnitudes(t,i,a){let c=i.getDegree(),h=new Int32Array(c);for(let _=1;_<=c;_++)h[c-_]=this.field.multiply(_,i.getCoefficient(_));let d=new Bn(this.field,h),p=a.length,E=new Int32Array(p);for(let _=0;_<p;_++){let S=this.field.inverse(a[_]),M=this.field.subtract(0,t.evaluateAt(S)),L=this.field.inverse(d.evaluateAt(S));E[_]=this.field.multiply(M,L)}return E}}class Ci{constructor(t,i,a,c,h){t instanceof Ci?this.constructor_2(t):this.constructor_1(t,i,a,c,h)}constructor_1(t,i,a,c,h){const d=i==null||a==null,p=c==null||h==null;if(d&&p)throw new ue;d?(i=new Ve(0,c.getY()),a=new Ve(0,h.getY())):p&&(c=new Ve(t.getWidth()-1,i.getY()),h=new Ve(t.getWidth()-1,a.getY())),this.image=t,this.topLeft=i,this.bottomLeft=a,this.topRight=c,this.bottomRight=h,this.minX=Math.trunc(Math.min(i.getX(),a.getX())),this.maxX=Math.trunc(Math.max(c.getX(),h.getX())),this.minY=Math.trunc(Math.min(i.getY(),c.getY())),this.maxY=Math.trunc(Math.max(a.getY(),h.getY()))}constructor_2(t){this.image=t.image,this.topLeft=t.getTopLeft(),this.bottomLeft=t.getBottomLeft(),this.topRight=t.getTopRight(),this.bottomRight=t.getBottomRight(),this.minX=t.getMinX(),this.maxX=t.getMaxX(),this.minY=t.getMinY(),this.maxY=t.getMaxY()}static merge(t,i){return t==null?i:i==null?t:new Ci(t.image,t.topLeft,t.bottomLeft,i.topRight,i.bottomRight)}addMissingRows(t,i,a){let c=this.topLeft,h=this.bottomLeft,d=this.topRight,p=this.bottomRight;if(t>0){let E=a?this.topLeft:this.topRight,_=Math.trunc(E.getY()-t);_<0&&(_=0);let S=new Ve(E.getX(),_);a?c=S:d=S}if(i>0){let E=a?this.bottomLeft:this.bottomRight,_=Math.trunc(E.getY()+i);_>=this.image.getHeight()&&(_=this.image.getHeight()-1);let S=new Ve(E.getX(),_);a?h=S:p=S}return new Ci(this.image,c,h,d,p)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class ui{constructor(t,i,a,c){this.columnCount=t,this.errorCorrectionLevel=c,this.rowCountUpperPart=i,this.rowCountLowerPart=a,this.rowCount=i+a}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class fr{constructor(){this.buffer=""}static form(t,i){let a=-1;function c(d,p,E,_,S,M){if(d==="%%")return"%";if(i[++a]===void 0)return;d=_?parseInt(_.substr(1)):void 0;let L=S?parseInt(S.substr(1)):void 0,H;switch(M){case"s":H=i[a];break;case"c":H=i[a][0];break;case"f":H=parseFloat(i[a]).toFixed(d);break;case"p":H=parseFloat(i[a]).toPrecision(d);break;case"e":H=parseFloat(i[a]).toExponential(d);break;case"x":H=parseInt(i[a]).toString(L||16);break;case"d":H=parseFloat(parseInt(i[a],L||10).toPrecision(d)).toFixed(0);break}H=typeof H=="object"?JSON.stringify(H):(+H).toString(L);let K=parseInt(E),$=E&&E[0]+""=="0"?"0":" ";for(;H.length<K;)H=p!==void 0?H+$:$+H;return H}let h=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return t.replace(h,c)}format(t,...i){this.buffer+=fr.form(t,i)}toString(){return this.buffer}}class Ur{constructor(t){this.boundingBox=new Ci(t),this.codewords=new Array(t.getMaxY()-t.getMinY()+1)}getCodewordNearby(t){let i=this.getCodeword(t);if(i!=null)return i;for(let a=1;a<Ur.MAX_NEARBY_DISTANCE;a++){let c=this.imageRowToCodewordIndex(t)-a;if(c>=0&&(i=this.codewords[c],i!=null)||(c=this.imageRowToCodewordIndex(t)+a,c<this.codewords.length&&(i=this.codewords[c],i!=null)))return i}return null}imageRowToCodewordIndex(t){return t-this.boundingBox.getMinY()}setCodeword(t,i){this.codewords[this.imageRowToCodewordIndex(t)]=i}getCodeword(t){return this.codewords[this.imageRowToCodewordIndex(t)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const t=new fr;let i=0;for(const a of this.codewords){if(a==null){t.format("%3d:    |   %n",i++);continue}t.format("%3d: %3d|%3d%n",i++,a.getRowNumber(),a.getValue())}return t.toString()}}Ur.MAX_NEARBY_DISTANCE=5;class qr{constructor(){this.values=new Map}setValue(t){t=Math.trunc(t);let i=this.values.get(t);i==null&&(i=0),i++,this.values.set(t,i)}getValue(){let t=-1,i=new Array;for(const[a,c]of this.values.entries()){const h={getKey:()=>a,getValue:()=>c};h.getValue()>t?(t=h.getValue(),i=[],i.push(h.getKey())):h.getValue()===t&&i.push(h.getKey())}return nt.toIntArray(i)}getConfidence(t){return this.values.get(t)}}class tn extends Ur{constructor(t,i){super(t),this._isLeft=i}setRowNumbers(){for(let t of this.getCodewords())t!=null&&t.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(t){let i=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(i,t);let a=this.getBoundingBox(),c=this._isLeft?a.getTopLeft():a.getTopRight(),h=this._isLeft?a.getBottomLeft():a.getBottomRight(),d=this.imageRowToCodewordIndex(Math.trunc(c.getY())),p=this.imageRowToCodewordIndex(Math.trunc(h.getY())),E=-1,_=1,S=0;for(let M=d;M<p;M++){if(i[M]==null)continue;let L=i[M],H=L.getRowNumber()-E;if(H===0)S++;else if(H===1)_=Math.max(_,S),S=1,E=L.getRowNumber();else if(H<0||L.getRowNumber()>=t.getRowCount()||H>M)i[M]=null;else{let K;_>2?K=(_-2)*H:K=H;let $=K>=M;for(let re=1;re<=K&&!$;re++)$=i[M-re]!=null;$?i[M]=null:(E=L.getRowNumber(),S=1)}}}getRowHeights(){let t=this.getBarcodeMetadata();if(t==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(t);let i=new Int32Array(t.getRowCount());for(let a of this.getCodewords())if(a!=null){let c=a.getRowNumber();if(c>=i.length)continue;i[c]++}return i}adjustIncompleteIndicatorColumnRowNumbers(t){let i=this.getBoundingBox(),a=this._isLeft?i.getTopLeft():i.getTopRight(),c=this._isLeft?i.getBottomLeft():i.getBottomRight(),h=this.imageRowToCodewordIndex(Math.trunc(a.getY())),d=this.imageRowToCodewordIndex(Math.trunc(c.getY())),p=this.getCodewords(),E=-1;for(let _=h;_<d;_++){if(p[_]==null)continue;let S=p[_];S.setRowNumberAsRowIndicatorColumn();let M=S.getRowNumber()-E;M===0||(M===1?E=S.getRowNumber():S.getRowNumber()>=t.getRowCount()?p[_]=null:E=S.getRowNumber())}}getBarcodeMetadata(){let t=this.getCodewords(),i=new qr,a=new qr,c=new qr,h=new qr;for(let p of t){if(p==null)continue;p.setRowNumberAsRowIndicatorColumn();let E=p.getValue()%30,_=p.getRowNumber();switch(this._isLeft||(_+=2),_%3){case 0:a.setValue(E*3+1);break;case 1:h.setValue(E/3),c.setValue(E%3);break;case 2:i.setValue(E+1);break}}if(i.getValue().length===0||a.getValue().length===0||c.getValue().length===0||h.getValue().length===0||i.getValue()[0]<1||a.getValue()[0]+c.getValue()[0]<nt.MIN_ROWS_IN_BARCODE||a.getValue()[0]+c.getValue()[0]>nt.MAX_ROWS_IN_BARCODE)return null;let d=new ui(i.getValue()[0],a.getValue()[0],c.getValue()[0],h.getValue()[0]);return this.removeIncorrectCodewords(t,d),d}removeIncorrectCodewords(t,i){for(let a=0;a<t.length;a++){let c=t[a];if(t[a]==null)continue;let h=c.getValue()%30,d=c.getRowNumber();if(d>i.getRowCount()){t[a]=null;continue}switch(this._isLeft||(d+=2),d%3){case 0:h*3+1!==i.getRowCountUpperPart()&&(t[a]=null);break;case 1:(Math.trunc(h/3)!==i.getErrorCorrectionLevel()||h%3!==i.getRowCountLowerPart())&&(t[a]=null);break;case 2:h+1!==i.getColumnCount()&&(t[a]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class Cs{constructor(t,i){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=t,this.barcodeColumnCount=t.getColumnCount(),this.boundingBox=i,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let t=nt.MAX_CODEWORDS_IN_BARCODE,i;do i=t,t=this.adjustRowNumbersAndGetCount();while(t>0&&t<i);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(t){t!=null&&t.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let t=this.adjustRowNumbersByRow();if(t===0)return 0;for(let i=1;i<this.barcodeColumnCount+1;i++){let a=this.detectionResultColumns[i].getCodewords();for(let c=0;c<a.length;c++)a[c]!=null&&(a[c].hasValidRowNumber()||this.adjustRowNumbers(i,c,a))}return t}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let t=this.detectionResultColumns[0].getCodewords(),i=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let a=0;a<t.length;a++)if(t[a]!=null&&i[a]!=null&&t[a].getRowNumber()===i[a].getRowNumber())for(let c=1;c<=this.barcodeColumnCount;c++){let h=this.detectionResultColumns[c].getCodewords()[a];h!=null&&(h.setRowNumber(t[a].getRowNumber()),h.hasValidRowNumber()||(this.detectionResultColumns[c].getCodewords()[a]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let t=0,i=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let a=0;a<i.length;a++){if(i[a]==null)continue;let c=i[a].getRowNumber(),h=0;for(let d=this.barcodeColumnCount+1;d>0&&h<this.ADJUST_ROW_NUMBER_SKIP;d--){let p=this.detectionResultColumns[d].getCodewords()[a];p!=null&&(h=Cs.adjustRowNumberIfValid(c,h,p),p.hasValidRowNumber()||t++)}}return t}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let t=0,i=this.detectionResultColumns[0].getCodewords();for(let a=0;a<i.length;a++){if(i[a]==null)continue;let c=i[a].getRowNumber(),h=0;for(let d=1;d<this.barcodeColumnCount+1&&h<this.ADJUST_ROW_NUMBER_SKIP;d++){let p=this.detectionResultColumns[d].getCodewords()[a];p!=null&&(h=Cs.adjustRowNumberIfValid(c,h,p),p.hasValidRowNumber()||t++)}}return t}static adjustRowNumberIfValid(t,i,a){return a==null||a.hasValidRowNumber()||(a.isValidRowNumber(t)?(a.setRowNumber(t),i=0):++i),i}adjustRowNumbers(t,i,a){if(!this.detectionResultColumns[t-1])return;let c=a[i],h=this.detectionResultColumns[t-1].getCodewords(),d=h;this.detectionResultColumns[t+1]!=null&&(d=this.detectionResultColumns[t+1].getCodewords());let p=new Array(14);p[2]=h[i],p[3]=d[i],i>0&&(p[0]=a[i-1],p[4]=h[i-1],p[5]=d[i-1]),i>1&&(p[8]=a[i-2],p[10]=h[i-2],p[11]=d[i-2]),i<a.length-1&&(p[1]=a[i+1],p[6]=h[i+1],p[7]=d[i+1]),i<a.length-2&&(p[9]=a[i+2],p[12]=h[i+2],p[13]=d[i+2]);for(let E of p)if(Cs.adjustRowNumber(c,E))return}static adjustRowNumber(t,i){return i==null?!1:i.hasValidRowNumber()&&i.getBucket()===t.getBucket()?(t.setRowNumber(i.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(t){this.boundingBox=t}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(t,i){this.detectionResultColumns[t]=i}getDetectionResultColumn(t){return this.detectionResultColumns[t]}toString(){let t=this.detectionResultColumns[0];t==null&&(t=this.detectionResultColumns[this.barcodeColumnCount+1]);let i=new fr;for(let a=0;a<t.getCodewords().length;a++){i.format("CW %3d:",a);for(let c=0;c<this.barcodeColumnCount+2;c++){if(this.detectionResultColumns[c]==null){i.format("    |   ");continue}let h=this.detectionResultColumns[c].getCodewords()[a];if(h==null){i.format("    |   ");continue}i.format(" %3d|%3d",h.getRowNumber(),h.getValue())}i.format("%n")}return i.toString()}}class Bi{constructor(t,i,a,c){this.rowNumber=Bi.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(t),this.endX=Math.trunc(i),this.bucket=Math.trunc(a),this.value=Math.trunc(c)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(t){return t!==Bi.BARCODE_ROW_UNKNOWN&&this.bucket===t%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(t){this.rowNumber=t}toString(){return this.rowNumber+"|"+this.value}}Bi.BARCODE_ROW_UNKNOWN=-1;class bn{static initialize(){for(let t=0;t<nt.SYMBOL_TABLE.length;t++){let i=nt.SYMBOL_TABLE[t],a=i&1;for(let c=0;c<nt.BARS_IN_MODULE;c++){let h=0;for(;(i&1)===a;)h+=1,i>>=1;a=i&1,bn.RATIOS_TABLE[t]||(bn.RATIOS_TABLE[t]=new Array(nt.BARS_IN_MODULE)),bn.RATIOS_TABLE[t][nt.BARS_IN_MODULE-c-1]=Math.fround(h/nt.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(t){let i=bn.getDecodedCodewordValue(bn.sampleBitCounts(t));return i!==-1?i:bn.getClosestDecodedValue(t)}static sampleBitCounts(t){let i=Et.sum(t),a=new Int32Array(nt.BARS_IN_MODULE),c=0,h=0;for(let d=0;d<nt.MODULES_IN_CODEWORD;d++){let p=i/(2*nt.MODULES_IN_CODEWORD)+d*i/nt.MODULES_IN_CODEWORD;h+t[c]<=p&&(h+=t[c],c++),a[c]++}return a}static getDecodedCodewordValue(t){let i=bn.getBitValue(t);return nt.getCodeword(i)===-1?-1:i}static getBitValue(t){let i=0;for(let a=0;a<t.length;a++)for(let c=0;c<t[a];c++)i=i<<1|(a%2===0?1:0);return Math.trunc(i)}static getClosestDecodedValue(t){let i=Et.sum(t),a=new Array(nt.BARS_IN_MODULE);if(i>1)for(let d=0;d<a.length;d++)a[d]=Math.fround(t[d]/i);let c=Gr.MAX_VALUE,h=-1;this.bSymbolTableReady||bn.initialize();for(let d=0;d<bn.RATIOS_TABLE.length;d++){let p=0,E=bn.RATIOS_TABLE[d];for(let _=0;_<nt.BARS_IN_MODULE;_++){let S=Math.fround(E[_]-a[_]);if(p+=Math.fround(S*S),p>=c)break}p<c&&(c=p,h=nt.SYMBOL_TABLE[d])}return h}}bn.bSymbolTableReady=!1,bn.RATIOS_TABLE=new Array(nt.SYMBOL_TABLE.length).map(b=>new Array(nt.BARS_IN_MODULE));class vs{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(t){this.segmentIndex=t}getFileId(){return this.fileId}setFileId(t){this.fileId=t}getOptionalData(){return this.optionalData}setOptionalData(t){this.optionalData=t}isLastSegment(){return this.lastSegment}setLastSegment(t){this.lastSegment=t}getSegmentCount(){return this.segmentCount}setSegmentCount(t){this.segmentCount=t}getSender(){return this.sender||null}setSender(t){this.sender=t}getAddressee(){return this.addressee||null}setAddressee(t){this.addressee=t}getFileName(){return this.fileName}setFileName(t){this.fileName=t}getFileSize(){return this.fileSize}setFileSize(t){this.fileSize=t}getChecksum(){return this.checksum}setChecksum(t){this.checksum=t}getTimestamp(){return this.timestamp}setTimestamp(t){this.timestamp=t}}class Ks{static parseLong(t,i=void 0){return parseInt(t,i)}}class Tr extends x{}Tr.kind="NullPointerException";class Zs{writeBytes(t){this.writeBytesOffset(t,0,t.length)}writeBytesOffset(t,i,a){if(t==null)throw new Tr;if(i<0||i>t.length||a<0||i+a>t.length||i+a<0)throw new J;if(a===0)return;for(let c=0;c<a;c++)this.write(t[i+c])}flush(){}close(){}}class Sr extends x{}class Bo extends Zs{constructor(t=32){if(super(),this.count=0,t<0)throw new D("Negative initial size: "+t);this.buf=new Uint8Array(t)}ensureCapacity(t){t-this.buf.length>0&&this.grow(t)}grow(t){let a=this.buf.length<<1;if(a-t<0&&(a=t),a<0){if(t<0)throw new Sr;a=te.MAX_VALUE}this.buf=he.copyOfUint8Array(this.buf,a)}write(t){this.ensureCapacity(this.count+1),this.buf[this.count]=t,this.count+=1}writeBytesOffset(t,i,a){if(i<0||i>t.length||a<0||i+a-t.length>0)throw new J;this.ensureCapacity(this.count+a),Q.arraycopy(t,i,this.buf,this.count,a),this.count+=a}writeTo(t){t.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return he.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(t){return t?typeof t=="string"?this.toString_string(t):this.toString_number(t):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(t){return new String(this.buf).toString()}toString_number(t){return new String(this.buf).toString()}close(){}}var Mt;(function(b){b[b.ALPHA=0]="ALPHA",b[b.LOWER=1]="LOWER",b[b.MIXED=2]="MIXED",b[b.PUNCT=3]="PUNCT",b[b.ALPHA_SHIFT=4]="ALPHA_SHIFT",b[b.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(Mt||(Mt={}));function ci(){if(typeof window<"u")return window.BigInt||null;if(typeof Gu<"u")return Gu.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let ts;function sn(b){if(typeof ts>"u"&&(ts=ci()),ts===null)throw new Error("BigInt is not supported!");return ts(b)}function hi(){let b=[];b[0]=sn(1);let t=sn(900);b[1]=t;for(let i=2;i<16;i++)b[i]=b[i-1]*t;return b}class ce{static decode(t,i){let a=new U(""),c=P.ISO8859_1;a.enableDecoding(c);let h=1,d=t[h++],p=new vs;for(;h<t[0];){switch(d){case ce.TEXT_COMPACTION_MODE_LATCH:h=ce.textCompaction(t,h,a);break;case ce.BYTE_COMPACTION_MODE_LATCH:case ce.BYTE_COMPACTION_MODE_LATCH_6:h=ce.byteCompaction(d,t,c,h,a);break;case ce.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(t[h++]);break;case ce.NUMERIC_COMPACTION_MODE_LATCH:h=ce.numericCompaction(t,h,a);break;case ce.ECI_CHARSET:P.getCharacterSetECIByValue(t[h++]);break;case ce.ECI_GENERAL_PURPOSE:h+=2;break;case ce.ECI_USER_DEFINED:h++;break;case ce.BEGIN_MACRO_PDF417_CONTROL_BLOCK:h=ce.decodeMacroBlock(t,h,p);break;case ce.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ce.MACRO_PDF417_TERMINATOR:throw new F;default:h--,h=ce.textCompaction(t,h,a);break}if(h<t.length)d=t[h++];else throw F.getFormatInstance()}if(a.length()===0)throw F.getFormatInstance();let E=new _t(null,a.toString(),null,i);return E.setOther(p),E}static decodeMacroBlock(t,i,a){if(i+ce.NUMBER_OF_SEQUENCE_CODEWORDS>t[0])throw F.getFormatInstance();let c=new Int32Array(ce.NUMBER_OF_SEQUENCE_CODEWORDS);for(let p=0;p<ce.NUMBER_OF_SEQUENCE_CODEWORDS;p++,i++)c[p]=t[i];a.setSegmentIndex(te.parseInt(ce.decodeBase900toBase10(c,ce.NUMBER_OF_SEQUENCE_CODEWORDS)));let h=new U;i=ce.textCompaction(t,i,h),a.setFileId(h.toString());let d=-1;for(t[i]===ce.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(d=i+1);i<t[0];)switch(t[i]){case ce.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(i++,t[i]){case ce.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let p=new U;i=ce.textCompaction(t,i+1,p),a.setFileName(p.toString());break;case ce.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let E=new U;i=ce.textCompaction(t,i+1,E),a.setSender(E.toString());break;case ce.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let _=new U;i=ce.textCompaction(t,i+1,_),a.setAddressee(_.toString());break;case ce.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let S=new U;i=ce.numericCompaction(t,i+1,S),a.setSegmentCount(te.parseInt(S.toString()));break;case ce.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let M=new U;i=ce.numericCompaction(t,i+1,M),a.setTimestamp(Ks.parseLong(M.toString()));break;case ce.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let L=new U;i=ce.numericCompaction(t,i+1,L),a.setChecksum(te.parseInt(L.toString()));break;case ce.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let H=new U;i=ce.numericCompaction(t,i+1,H),a.setFileSize(Ks.parseLong(H.toString()));break;default:throw F.getFormatInstance()}break;case ce.MACRO_PDF417_TERMINATOR:i++,a.setLastSegment(!0);break;default:throw F.getFormatInstance()}if(d!==-1){let p=i-d;a.isLastSegment()&&p--,a.setOptionalData(he.copyOfRange(t,d,d+p))}return i}static textCompaction(t,i,a){let c=new Int32Array((t[0]-i)*2),h=new Int32Array((t[0]-i)*2),d=0,p=!1;for(;i<t[0]&&!p;){let E=t[i++];if(E<ce.TEXT_COMPACTION_MODE_LATCH)c[d]=E/30,c[d+1]=E%30,d+=2;else switch(E){case ce.TEXT_COMPACTION_MODE_LATCH:c[d++]=ce.TEXT_COMPACTION_MODE_LATCH;break;case ce.BYTE_COMPACTION_MODE_LATCH:case ce.BYTE_COMPACTION_MODE_LATCH_6:case ce.NUMERIC_COMPACTION_MODE_LATCH:case ce.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ce.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ce.MACRO_PDF417_TERMINATOR:i--,p=!0;break;case ce.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c[d]=ce.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,E=t[i++],h[d]=E,d++;break}}return ce.decodeTextCompaction(c,h,d,a),i}static decodeTextCompaction(t,i,a,c){let h=Mt.ALPHA,d=Mt.ALPHA,p=0;for(;p<a;){let E=t[p],_="";switch(h){case Mt.ALPHA:if(E<26)_=String.fromCharCode(65+E);else switch(E){case 26:_=" ";break;case ce.LL:h=Mt.LOWER;break;case ce.ML:h=Mt.MIXED;break;case ce.PS:d=h,h=Mt.PUNCT_SHIFT;break;case ce.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(i[p]);break;case ce.TEXT_COMPACTION_MODE_LATCH:h=Mt.ALPHA;break}break;case Mt.LOWER:if(E<26)_=String.fromCharCode(97+E);else switch(E){case 26:_=" ";break;case ce.AS:d=h,h=Mt.ALPHA_SHIFT;break;case ce.ML:h=Mt.MIXED;break;case ce.PS:d=h,h=Mt.PUNCT_SHIFT;break;case ce.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(i[p]);break;case ce.TEXT_COMPACTION_MODE_LATCH:h=Mt.ALPHA;break}break;case Mt.MIXED:if(E<ce.PL)_=ce.MIXED_CHARS[E];else switch(E){case ce.PL:h=Mt.PUNCT;break;case 26:_=" ";break;case ce.LL:h=Mt.LOWER;break;case ce.AL:h=Mt.ALPHA;break;case ce.PS:d=h,h=Mt.PUNCT_SHIFT;break;case ce.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(i[p]);break;case ce.TEXT_COMPACTION_MODE_LATCH:h=Mt.ALPHA;break}break;case Mt.PUNCT:if(E<ce.PAL)_=ce.PUNCT_CHARS[E];else switch(E){case ce.PAL:h=Mt.ALPHA;break;case ce.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(i[p]);break;case ce.TEXT_COMPACTION_MODE_LATCH:h=Mt.ALPHA;break}break;case Mt.ALPHA_SHIFT:if(h=d,E<26)_=String.fromCharCode(65+E);else switch(E){case 26:_=" ";break;case ce.TEXT_COMPACTION_MODE_LATCH:h=Mt.ALPHA;break}break;case Mt.PUNCT_SHIFT:if(h=d,E<ce.PAL)_=ce.PUNCT_CHARS[E];else switch(E){case ce.PAL:h=Mt.ALPHA;break;case ce.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(i[p]);break;case ce.TEXT_COMPACTION_MODE_LATCH:h=Mt.ALPHA;break}break}_!==""&&c.append(_),p++}}static byteCompaction(t,i,a,c,h){let d=new Bo,p=0,E=0,_=!1;switch(t){case ce.BYTE_COMPACTION_MODE_LATCH:let S=new Int32Array(6),M=i[c++];for(;c<i[0]&&!_;)switch(S[p++]=M,E=900*E+M,M=i[c++],M){case ce.TEXT_COMPACTION_MODE_LATCH:case ce.BYTE_COMPACTION_MODE_LATCH:case ce.NUMERIC_COMPACTION_MODE_LATCH:case ce.BYTE_COMPACTION_MODE_LATCH_6:case ce.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ce.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ce.MACRO_PDF417_TERMINATOR:c--,_=!0;break;default:if(p%5===0&&p>0){for(let L=0;L<6;++L)d.write(Number(sn(E)>>sn(8*(5-L))));E=0,p=0}break}c===i[0]&&M<ce.TEXT_COMPACTION_MODE_LATCH&&(S[p++]=M);for(let L=0;L<p;L++)d.write(S[L]);break;case ce.BYTE_COMPACTION_MODE_LATCH_6:for(;c<i[0]&&!_;){let L=i[c++];if(L<ce.TEXT_COMPACTION_MODE_LATCH)p++,E=900*E+L;else switch(L){case ce.TEXT_COMPACTION_MODE_LATCH:case ce.BYTE_COMPACTION_MODE_LATCH:case ce.NUMERIC_COMPACTION_MODE_LATCH:case ce.BYTE_COMPACTION_MODE_LATCH_6:case ce.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ce.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ce.MACRO_PDF417_TERMINATOR:c--,_=!0;break}if(p%5===0&&p>0){for(let H=0;H<6;++H)d.write(Number(sn(E)>>sn(8*(5-H))));E=0,p=0}}break}return h.append(Y.decode(d.toByteArray(),a)),c}static numericCompaction(t,i,a){let c=0,h=!1,d=new Int32Array(ce.MAX_NUMERIC_CODEWORDS);for(;i<t[0]&&!h;){let p=t[i++];if(i===t[0]&&(h=!0),p<ce.TEXT_COMPACTION_MODE_LATCH)d[c]=p,c++;else switch(p){case ce.TEXT_COMPACTION_MODE_LATCH:case ce.BYTE_COMPACTION_MODE_LATCH:case ce.BYTE_COMPACTION_MODE_LATCH_6:case ce.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ce.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ce.MACRO_PDF417_TERMINATOR:i--,h=!0;break}(c%ce.MAX_NUMERIC_CODEWORDS===0||p===ce.NUMERIC_COMPACTION_MODE_LATCH||h)&&c>0&&(a.append(ce.decodeBase900toBase10(d,c)),c=0)}return i}static decodeBase900toBase10(t,i){let a=sn(0);for(let h=0;h<i;h++)a+=ce.EXP900[i-h-1]*sn(t[h]);let c=a.toString();if(c.charAt(0)!=="1")throw new F;return c.substring(1)}}ce.TEXT_COMPACTION_MODE_LATCH=900,ce.BYTE_COMPACTION_MODE_LATCH=901,ce.NUMERIC_COMPACTION_MODE_LATCH=902,ce.BYTE_COMPACTION_MODE_LATCH_6=924,ce.ECI_USER_DEFINED=925,ce.ECI_GENERAL_PURPOSE=926,ce.ECI_CHARSET=927,ce.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,ce.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,ce.MACRO_PDF417_TERMINATOR=922,ce.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,ce.MAX_NUMERIC_CODEWORDS=15,ce.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,ce.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,ce.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,ce.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,ce.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,ce.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,ce.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,ce.PL=25,ce.LL=27,ce.AS=27,ce.ML=28,ce.AL=28,ce.PS=29,ce.PAL=29,ce.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,ce.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",ce.EXP900=ci()?hi():[],ce.NUMBER_OF_SEQUENCE_CODEWORDS=2;class ot{constructor(){}static decode(t,i,a,c,h,d,p){let E=new Ci(t,i,a,c,h),_=null,S=null,M;for(let K=!0;;K=!1){if(i!=null&&(_=ot.getRowIndicatorColumn(t,E,i,!0,d,p)),c!=null&&(S=ot.getRowIndicatorColumn(t,E,c,!1,d,p)),M=ot.merge(_,S),M==null)throw ue.getNotFoundInstance();let $=M.getBoundingBox();if(K&&$!=null&&($.getMinY()<E.getMinY()||$.getMaxY()>E.getMaxY()))E=$;else break}M.setBoundingBox(E);let L=M.getBarcodeColumnCount()+1;M.setDetectionResultColumn(0,_),M.setDetectionResultColumn(L,S);let H=_!=null;for(let K=1;K<=L;K++){let $=H?K:L-K;if(M.getDetectionResultColumn($)!==void 0)continue;let re;$===0||$===L?re=new tn(E,$===0):re=new Ur(E),M.setDetectionResultColumn($,re);let fe=-1,Se=fe;for(let Re=E.getMinY();Re<=E.getMaxY();Re++){if(fe=ot.getStartColumn(M,$,Re,H),fe<0||fe>E.getMaxX()){if(Se===-1)continue;fe=Se}let Ce=ot.detectCodeword(t,E.getMinX(),E.getMaxX(),H,fe,Re,d,p);Ce!=null&&(re.setCodeword(Re,Ce),Se=fe,d=Math.min(d,Ce.getWidth()),p=Math.max(p,Ce.getWidth()))}}return ot.createDecoderResult(M)}static merge(t,i){if(t==null&&i==null)return null;let a=ot.getBarcodeMetadata(t,i);if(a==null)return null;let c=Ci.merge(ot.adjustBoundingBox(t),ot.adjustBoundingBox(i));return new Cs(a,c)}static adjustBoundingBox(t){if(t==null)return null;let i=t.getRowHeights();if(i==null)return null;let a=ot.getMax(i),c=0;for(let p of i)if(c+=a-p,p>0)break;let h=t.getCodewords();for(let p=0;c>0&&h[p]==null;p++)c--;let d=0;for(let p=i.length-1;p>=0&&(d+=a-i[p],!(i[p]>0));p--);for(let p=h.length-1;d>0&&h[p]==null;p--)d--;return t.getBoundingBox().addMissingRows(c,d,t.isLeft())}static getMax(t){let i=-1;for(let a of t)i=Math.max(i,a);return i}static getBarcodeMetadata(t,i){let a;if(t==null||(a=t.getBarcodeMetadata())==null)return i==null?null:i.getBarcodeMetadata();let c;return i==null||(c=i.getBarcodeMetadata())==null?a:a.getColumnCount()!==c.getColumnCount()&&a.getErrorCorrectionLevel()!==c.getErrorCorrectionLevel()&&a.getRowCount()!==c.getRowCount()?null:a}static getRowIndicatorColumn(t,i,a,c,h,d){let p=new tn(i,c);for(let E=0;E<2;E++){let _=E===0?1:-1,S=Math.trunc(Math.trunc(a.getX()));for(let M=Math.trunc(Math.trunc(a.getY()));M<=i.getMaxY()&&M>=i.getMinY();M+=_){let L=ot.detectCodeword(t,0,t.getWidth(),c,S,M,h,d);L!=null&&(p.setCodeword(M,L),c?S=L.getStartX():S=L.getEndX())}}return p}static adjustCodewordCount(t,i){let a=i[0][1],c=a.getValue(),h=t.getBarcodeColumnCount()*t.getBarcodeRowCount()-ot.getNumberOfECCodeWords(t.getBarcodeECLevel());if(c.length===0){if(h<1||h>nt.MAX_CODEWORDS_IN_BARCODE)throw ue.getNotFoundInstance();a.setValue(h)}else c[0]!==h&&a.setValue(h)}static createDecoderResult(t){let i=ot.createBarcodeMatrix(t);ot.adjustCodewordCount(t,i);let a=new Array,c=new Int32Array(t.getBarcodeRowCount()*t.getBarcodeColumnCount()),h=[],d=new Array;for(let E=0;E<t.getBarcodeRowCount();E++)for(let _=0;_<t.getBarcodeColumnCount();_++){let S=i[E][_+1].getValue(),M=E*t.getBarcodeColumnCount()+_;S.length===0?a.push(M):S.length===1?c[M]=S[0]:(d.push(M),h.push(S))}let p=new Array(h.length);for(let E=0;E<p.length;E++)p[E]=h[E];return ot.createDecoderResultFromAmbiguousValues(t.getBarcodeECLevel(),c,nt.toIntArray(a),nt.toIntArray(d),p)}static createDecoderResultFromAmbiguousValues(t,i,a,c,h){let d=new Int32Array(c.length),p=100;for(;p-- >0;){for(let E=0;E<d.length;E++)i[c[E]]=h[E][d[E]];try{return ot.decodeCodewords(i,t,a)}catch(E){if(!(E instanceof j))throw E}if(d.length===0)throw j.getChecksumInstance();for(let E=0;E<d.length;E++)if(d[E]<h[E].length-1){d[E]++;break}else if(d[E]=0,E===d.length-1)throw j.getChecksumInstance()}throw j.getChecksumInstance()}static createBarcodeMatrix(t){let i=Array.from({length:t.getBarcodeRowCount()},()=>new Array(t.getBarcodeColumnCount()+2));for(let c=0;c<i.length;c++)for(let h=0;h<i[c].length;h++)i[c][h]=new qr;let a=0;for(let c of t.getDetectionResultColumns()){if(c!=null){for(let h of c.getCodewords())if(h!=null){let d=h.getRowNumber();if(d>=0){if(d>=i.length)continue;i[d][a].setValue(h.getValue())}}}a++}return i}static isValidBarcodeColumn(t,i){return i>=0&&i<=t.getBarcodeColumnCount()+1}static getStartColumn(t,i,a,c){let h=c?1:-1,d=null;if(ot.isValidBarcodeColumn(t,i-h)&&(d=t.getDetectionResultColumn(i-h).getCodeword(a)),d!=null)return c?d.getEndX():d.getStartX();if(d=t.getDetectionResultColumn(i).getCodewordNearby(a),d!=null)return c?d.getStartX():d.getEndX();if(ot.isValidBarcodeColumn(t,i-h)&&(d=t.getDetectionResultColumn(i-h).getCodewordNearby(a)),d!=null)return c?d.getEndX():d.getStartX();let p=0;for(;ot.isValidBarcodeColumn(t,i-h);){i-=h;for(let E of t.getDetectionResultColumn(i).getCodewords())if(E!=null)return(c?E.getEndX():E.getStartX())+h*p*(E.getEndX()-E.getStartX());p++}return c?t.getBoundingBox().getMinX():t.getBoundingBox().getMaxX()}static detectCodeword(t,i,a,c,h,d,p,E){h=ot.adjustCodewordStartColumn(t,i,a,c,h,d);let _=ot.getModuleBitCount(t,i,a,c,h,d);if(_==null)return null;let S,M=Et.sum(_);if(c)S=h+M;else{for(let K=0;K<_.length/2;K++){let $=_[K];_[K]=_[_.length-1-K],_[_.length-1-K]=$}S=h,h=S-M}if(!ot.checkCodewordSkew(M,p,E))return null;let L=bn.getDecodedValue(_),H=nt.getCodeword(L);return H===-1?null:new Bi(h,S,ot.getCodewordBucketNumber(L),H)}static getModuleBitCount(t,i,a,c,h,d){let p=h,E=new Int32Array(8),_=0,S=c?1:-1,M=c;for(;(c?p<a:p>=i)&&_<E.length;)t.get(p,d)===M?(E[_]++,p+=S):(_++,M=!M);return _===E.length||p===(c?a:i)&&_===E.length-1?E:null}static getNumberOfECCodeWords(t){return 2<<t}static adjustCodewordStartColumn(t,i,a,c,h,d){let p=h,E=c?-1:1;for(let _=0;_<2;_++){for(;(c?p>=i:p<a)&&c===t.get(p,d);){if(Math.abs(h-p)>ot.CODEWORD_SKEW_SIZE)return h;p+=E}E=-E,c=!c}return p}static checkCodewordSkew(t,i,a){return i-ot.CODEWORD_SKEW_SIZE<=t&&t<=a+ot.CODEWORD_SKEW_SIZE}static decodeCodewords(t,i,a){if(t.length===0)throw F.getFormatInstance();let c=1<<i+1,h=ot.correctErrors(t,a,c);ot.verifyCodewordCount(t,c);let d=ce.decode(t,""+i);return d.setErrorsCorrected(h),d.setErasures(a.length),d}static correctErrors(t,i,a){if(i!=null&&i.length>a/2+ot.MAX_ERRORS||a<0||a>ot.MAX_EC_CODEWORDS)throw j.getChecksumInstance();return ot.errorCorrection.decode(t,a,i)}static verifyCodewordCount(t,i){if(t.length<4)throw F.getFormatInstance();let a=t[0];if(a>t.length)throw F.getFormatInstance();if(a===0)if(i<t.length)t[0]=t.length-i;else throw F.getFormatInstance()}static getBitCountForCodeword(t){let i=new Int32Array(8),a=0,c=i.length-1;for(;!((t&1)!==a&&(a=t&1,c--,c<0));)i[c]++,t>>=1;return i}static getCodewordBucketNumber(t){return t instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(t):this.getCodewordBucketNumber_number(t)}static getCodewordBucketNumber_number(t){return ot.getCodewordBucketNumber(ot.getBitCountForCodeword(t))}static getCodewordBucketNumber_Int32Array(t){return(t[0]-t[2]+t[4]-t[6]+9)%9}static toString(t){let i=new fr;for(let a=0;a<t.length;a++){i.format("Row %2d: ",a);for(let c=0;c<t[a].length;c++){let h=t[a][c];h.getValue().length===0?i.format("        ",null):i.format("%4d(%2d)",h.getValue()[0],h.getConfidence(h.getValue()[0]))}i.format("%n")}return i.toString()}}ot.CODEWORD_SKEW_SIZE=2,ot.MAX_ERRORS=3,ot.MAX_EC_CODEWORDS=512,ot.errorCorrection=new es;class Fn{decode(t,i=null){let a=Fn.decode(t,i,!1);if(a==null||a.length===0||a[0]==null)throw ue.getNotFoundInstance();return a[0]}decodeMultiple(t,i=null){try{return Fn.decode(t,i,!0)}catch(a){throw a instanceof F||a instanceof j?ue.getNotFoundInstance():a}}static decode(t,i,a){const c=new Array,h=et.detectMultiple(t,i,a);for(const d of h.getPoints()){const p=ot.decode(h.getBits(),d[4],d[5],d[6],d[7],Fn.getMinCodewordWidth(d),Fn.getMaxCodewordWidth(d)),E=new $e(p.getText(),p.getRawBytes(),void 0,d,Ne.PDF_417);E.putMetadata(Qe.ERROR_CORRECTION_LEVEL,p.getECLevel());const _=p.getOther();_!=null&&E.putMetadata(Qe.PDF417_EXTRA_METADATA,_),c.push(E)}return c.map(d=>d)}static getMaxWidth(t,i){return t==null||i==null?0:Math.trunc(Math.abs(t.getX()-i.getX()))}static getMinWidth(t,i){return t==null||i==null?te.MAX_VALUE:Math.trunc(Math.abs(t.getX()-i.getX()))}static getMaxCodewordWidth(t){return Math.floor(Math.max(Math.max(Fn.getMaxWidth(t[0],t[4]),Fn.getMaxWidth(t[6],t[2])*nt.MODULES_IN_CODEWORD/nt.MODULES_IN_STOP_PATTERN),Math.max(Fn.getMaxWidth(t[1],t[5]),Fn.getMaxWidth(t[7],t[3])*nt.MODULES_IN_CODEWORD/nt.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(t){return Math.floor(Math.min(Math.min(Fn.getMinWidth(t[0],t[4]),Fn.getMinWidth(t[6],t[2])*nt.MODULES_IN_CODEWORD/nt.MODULES_IN_STOP_PATTERN),Math.min(Fn.getMinWidth(t[1],t[5]),Fn.getMinWidth(t[7],t[3])*nt.MODULES_IN_CODEWORD/nt.MODULES_IN_STOP_PATTERN)))}reset(){}}class Fi extends x{}Fi.kind="ReaderException";class vi{constructor(t,i){this.verbose=t===!0,i&&this.setHints(i)}decode(t,i){return i&&this.setHints(i),this.decodeInternal(t)}decodeWithState(t){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(t)}setHints(t){this.hints=t;const i=!o(t)&&t.get(we.TRY_HARDER)===!0,a=o(t)?null:t.get(we.POSSIBLE_FORMATS),c=new Array;if(!o(a)){const h=a.some(d=>d===Ne.UPC_A||d===Ne.UPC_E||d===Ne.EAN_13||d===Ne.EAN_8||d===Ne.CODABAR||d===Ne.CODE_39||d===Ne.CODE_93||d===Ne.CODE_128||d===Ne.ITF||d===Ne.RSS_14||d===Ne.RSS_EXPANDED);h&&!i&&c.push(new _i(t,this.verbose)),a.includes(Ne.QR_CODE)&&c.push(new qn),a.includes(Ne.DATA_MATRIX)&&c.push(new vr),a.includes(Ne.AZTEC)&&c.push(new xi),a.includes(Ne.PDF_417)&&c.push(new Fn),h&&i&&c.push(new _i(t,this.verbose))}c.length===0&&(i||c.push(new _i(t,this.verbose)),c.push(new qn),c.push(new vr),c.push(new xi),c.push(new Fn),i&&c.push(new _i(t,this.verbose))),this.readers=c}reset(){if(this.readers!==null)for(const t of this.readers)t.reset()}decodeInternal(t){if(this.readers===null)throw new Fi("No readers where selected, nothing can be read.");for(const i of this.readers)try{return i.decode(t,this.hints)}catch(a){if(a instanceof Fi)continue}throw new ue("No MultiFormat Readers were able to detect the code.")}}class ns extends ze{constructor(t=null,i=500){const a=new vi;a.setHints(t),super(a,i)}decodeBitmap(t){return this.reader.decodeWithState(t)}}class Is extends ze{constructor(t=500){super(new Fn,t)}}class $s extends ze{constructor(t=500){super(new qn,t)}}var Ts;(function(b){b[b.ERROR_CORRECTION=0]="ERROR_CORRECTION",b[b.CHARACTER_SET=1]="CHARACTER_SET",b[b.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",b[b.MIN_SIZE=3]="MIN_SIZE",b[b.MAX_SIZE=4]="MAX_SIZE",b[b.MARGIN=5]="MARGIN",b[b.PDF417_COMPACT=6]="PDF417_COMPACT",b[b.PDF417_COMPACTION=7]="PDF417_COMPACTION",b[b.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",b[b.AZTEC_LAYERS=9]="AZTEC_LAYERS",b[b.QR_VERSION=10]="QR_VERSION"})(Ts||(Ts={}));var wn=Ts;class rs{constructor(t){this.field=t,this.cachedGenerators=[],this.cachedGenerators.push(new gn(t,Int32Array.from([1])))}buildGenerator(t){const i=this.cachedGenerators;if(t>=i.length){let a=i[i.length-1];const c=this.field;for(let h=i.length;h<=t;h++){const d=a.multiply(new gn(c,Int32Array.from([1,c.exp(h-1+c.getGeneratorBase())])));i.push(d),a=d}}return i[t]}encode(t,i){if(i===0)throw new D("No error correction bytes");const a=t.length-i;if(a<=0)throw new D("No data bytes provided");const c=this.buildGenerator(i),h=new Int32Array(a);Q.arraycopy(t,0,h,0,a);let d=new gn(this.field,h);d=d.multiplyByMonomial(i,1);const E=d.divide(c)[1].getCoefficients(),_=i-E.length;for(let S=0;S<_;S++)t[a+S]=0;Q.arraycopy(E,0,t,a+_,E.length)}}class qt{constructor(){}static applyMaskPenaltyRule1(t){return qt.applyMaskPenaltyRule1Internal(t,!0)+qt.applyMaskPenaltyRule1Internal(t,!1)}static applyMaskPenaltyRule2(t){let i=0;const a=t.getArray(),c=t.getWidth(),h=t.getHeight();for(let d=0;d<h-1;d++){const p=a[d];for(let E=0;E<c-1;E++){const _=p[E];_===p[E+1]&&_===a[d+1][E]&&_===a[d+1][E+1]&&i++}}return qt.N2*i}static applyMaskPenaltyRule3(t){let i=0;const a=t.getArray(),c=t.getWidth(),h=t.getHeight();for(let d=0;d<h;d++)for(let p=0;p<c;p++){const E=a[d];p+6<c&&E[p]===1&&E[p+1]===0&&E[p+2]===1&&E[p+3]===1&&E[p+4]===1&&E[p+5]===0&&E[p+6]===1&&(qt.isWhiteHorizontal(E,p-4,p)||qt.isWhiteHorizontal(E,p+7,p+11))&&i++,d+6<h&&a[d][p]===1&&a[d+1][p]===0&&a[d+2][p]===1&&a[d+3][p]===1&&a[d+4][p]===1&&a[d+5][p]===0&&a[d+6][p]===1&&(qt.isWhiteVertical(a,p,d-4,d)||qt.isWhiteVertical(a,p,d+7,d+11))&&i++}return i*qt.N3}static isWhiteHorizontal(t,i,a){i=Math.max(i,0),a=Math.min(a,t.length);for(let c=i;c<a;c++)if(t[c]===1)return!1;return!0}static isWhiteVertical(t,i,a,c){a=Math.max(a,0),c=Math.min(c,t.length);for(let h=a;h<c;h++)if(t[h][i]===1)return!1;return!0}static applyMaskPenaltyRule4(t){let i=0;const a=t.getArray(),c=t.getWidth(),h=t.getHeight();for(let E=0;E<h;E++){const _=a[E];for(let S=0;S<c;S++)_[S]===1&&i++}const d=t.getHeight()*t.getWidth();return Math.floor(Math.abs(i*2-d)*10/d)*qt.N4}static getDataMaskBit(t,i,a){let c,h;switch(t){case 0:c=a+i&1;break;case 1:c=a&1;break;case 2:c=i%3;break;case 3:c=(a+i)%3;break;case 4:c=Math.floor(a/2)+Math.floor(i/3)&1;break;case 5:h=a*i,c=(h&1)+h%3;break;case 6:h=a*i,c=(h&1)+h%3&1;break;case 7:h=a*i,c=h%3+(a+i&1)&1;break;default:throw new D("Invalid mask pattern: "+t)}return c===0}static applyMaskPenaltyRule1Internal(t,i){let a=0;const c=i?t.getHeight():t.getWidth(),h=i?t.getWidth():t.getHeight(),d=t.getArray();for(let p=0;p<c;p++){let E=0,_=-1;for(let S=0;S<h;S++){const M=i?d[p][S]:d[S][p];M===_?E++:(E>=5&&(a+=qt.N1+(E-5)),E=1,_=M)}E>=5&&(a+=qt.N1+(E-5))}return a}}qt.N1=3,qt.N2=3,qt.N3=40,qt.N4=10;class Ss{constructor(t,i){this.width=t,this.height=i;const a=new Array(i);for(let c=0;c!==i;c++)a[c]=new Uint8Array(t);this.bytes=a}getHeight(){return this.height}getWidth(){return this.width}get(t,i){return this.bytes[i][t]}getArray(){return this.bytes}setNumber(t,i,a){this.bytes[i][t]=a}setBoolean(t,i,a){this.bytes[i][t]=a?1:0}clear(t){for(const i of this.bytes)he.fill(i,t)}equals(t){if(!(t instanceof Ss))return!1;const i=t;if(this.width!==i.width||this.height!==i.height)return!1;for(let a=0,c=this.height;a<c;++a){const h=this.bytes[a],d=i.bytes[a];for(let p=0,E=this.width;p<E;++p)if(h[p]!==d[p])return!1}return!0}toString(){const t=new U;for(let i=0,a=this.height;i<a;++i){const c=this.bytes[i];for(let h=0,d=this.width;h<d;++h)switch(c[h]){case 0:t.append(" 0");break;case 1:t.append(" 1");break;default:t.append("  ");break}t.append(`
`)}return t.toString()}}class dr{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const t=new U;return t.append(`<<
`),t.append(" mode: "),t.append(this.mode?this.mode.toString():"null"),t.append(`
 ecLevel: `),t.append(this.ecLevel?this.ecLevel.toString():"null"),t.append(`
 version: `),t.append(this.version?this.version.toString():"null"),t.append(`
 maskPattern: `),t.append(this.maskPattern.toString()),this.matrix?(t.append(`
 matrix:
`),t.append(this.matrix.toString())):t.append(`
 matrix: null
`),t.append(`>>
`),t.toString()}setMode(t){this.mode=t}setECLevel(t){this.ecLevel=t}setVersion(t){this.version=t}setMaskPattern(t){this.maskPattern=t}setMatrix(t){this.matrix=t}static isValidMaskPattern(t){return t>=0&&t<dr.NUM_MASK_PATTERNS}}dr.NUM_MASK_PATTERNS=8;class Ft extends x{}Ft.kind="WriterException";class Je{constructor(){}static clearMatrix(t){t.clear(255)}static buildMatrix(t,i,a,c,h){Je.clearMatrix(h),Je.embedBasicPatterns(a,h),Je.embedTypeInfo(i,c,h),Je.maybeEmbedVersionInfo(a,h),Je.embedDataBits(t,c,h)}static embedBasicPatterns(t,i){Je.embedPositionDetectionPatternsAndSeparators(i),Je.embedDarkDotAtLeftBottomCorner(i),Je.maybeEmbedPositionAdjustmentPatterns(t,i),Je.embedTimingPatterns(i)}static embedTypeInfo(t,i,a){const c=new pe;Je.makeTypeInfoBits(t,i,c);for(let h=0,d=c.getSize();h<d;++h){const p=c.get(c.getSize()-1-h),E=Je.TYPE_INFO_COORDINATES[h],_=E[0],S=E[1];if(a.setBoolean(_,S,p),h<8){const M=a.getWidth()-h-1;a.setBoolean(M,8,p)}else{const L=a.getHeight()-7+(h-8);a.setBoolean(8,L,p)}}}static maybeEmbedVersionInfo(t,i){if(t.getVersionNumber()<7)return;const a=new pe;Je.makeVersionInfoBits(t,a);let c=6*3-1;for(let h=0;h<6;++h)for(let d=0;d<3;++d){const p=a.get(c);c--,i.setBoolean(h,i.getHeight()-11+d,p),i.setBoolean(i.getHeight()-11+d,h,p)}}static embedDataBits(t,i,a){let c=0,h=-1,d=a.getWidth()-1,p=a.getHeight()-1;for(;d>0;){for(d===6&&(d-=1);p>=0&&p<a.getHeight();){for(let E=0;E<2;++E){const _=d-E;if(!Je.isEmpty(a.get(_,p)))continue;let S;c<t.getSize()?(S=t.get(c),++c):S=!1,i!==255&&qt.getDataMaskBit(i,_,p)&&(S=!S),a.setBoolean(_,p,S)}p+=h}h=-h,p+=h,d-=2}if(c!==t.getSize())throw new Ft("Not all bits consumed: "+c+"/"+t.getSize())}static findMSBSet(t){return 32-te.numberOfLeadingZeros(t)}static calculateBCHCode(t,i){if(i===0)throw new D("0 polynomial");const a=Je.findMSBSet(i);for(t<<=a-1;Je.findMSBSet(t)>=a;)t^=i<<Je.findMSBSet(t)-a;return t}static makeTypeInfoBits(t,i,a){if(!dr.isValidMaskPattern(i))throw new Ft("Invalid mask pattern");const c=t.getBits()<<3|i;a.appendBits(c,5);const h=Je.calculateBCHCode(c,Je.TYPE_INFO_POLY);a.appendBits(h,10);const d=new pe;if(d.appendBits(Je.TYPE_INFO_MASK_PATTERN,15),a.xor(d),a.getSize()!==15)throw new Ft("should not happen but we got: "+a.getSize())}static makeVersionInfoBits(t,i){i.appendBits(t.getVersionNumber(),6);const a=Je.calculateBCHCode(t.getVersionNumber(),Je.VERSION_INFO_POLY);if(i.appendBits(a,12),i.getSize()!==18)throw new Ft("should not happen but we got: "+i.getSize())}static isEmpty(t){return t===255}static embedTimingPatterns(t){for(let i=8;i<t.getWidth()-8;++i){const a=(i+1)%2;Je.isEmpty(t.get(i,6))&&t.setNumber(i,6,a),Je.isEmpty(t.get(6,i))&&t.setNumber(6,i,a)}}static embedDarkDotAtLeftBottomCorner(t){if(t.get(8,t.getHeight()-8)===0)throw new Ft;t.setNumber(8,t.getHeight()-8,1)}static embedHorizontalSeparationPattern(t,i,a){for(let c=0;c<8;++c){if(!Je.isEmpty(a.get(t+c,i)))throw new Ft;a.setNumber(t+c,i,0)}}static embedVerticalSeparationPattern(t,i,a){for(let c=0;c<7;++c){if(!Je.isEmpty(a.get(t,i+c)))throw new Ft;a.setNumber(t,i+c,0)}}static embedPositionAdjustmentPattern(t,i,a){for(let c=0;c<5;++c){const h=Je.POSITION_ADJUSTMENT_PATTERN[c];for(let d=0;d<5;++d)a.setNumber(t+d,i+c,h[d])}}static embedPositionDetectionPattern(t,i,a){for(let c=0;c<7;++c){const h=Je.POSITION_DETECTION_PATTERN[c];for(let d=0;d<7;++d)a.setNumber(t+d,i+c,h[d])}}static embedPositionDetectionPatternsAndSeparators(t){const i=Je.POSITION_DETECTION_PATTERN[0].length;Je.embedPositionDetectionPattern(0,0,t),Je.embedPositionDetectionPattern(t.getWidth()-i,0,t),Je.embedPositionDetectionPattern(0,t.getWidth()-i,t);const a=8;Je.embedHorizontalSeparationPattern(0,a-1,t),Je.embedHorizontalSeparationPattern(t.getWidth()-a,a-1,t),Je.embedHorizontalSeparationPattern(0,t.getWidth()-a,t);const c=7;Je.embedVerticalSeparationPattern(c,0,t),Je.embedVerticalSeparationPattern(t.getHeight()-c-1,0,t),Je.embedVerticalSeparationPattern(c,t.getHeight()-c,t)}static maybeEmbedPositionAdjustmentPatterns(t,i){if(t.getVersionNumber()<2)return;const a=t.getVersionNumber()-1,c=Je.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[a];for(let h=0,d=c.length;h!==d;h++){const p=c[h];if(p>=0)for(let E=0;E!==d;E++){const _=c[E];_>=0&&Je.isEmpty(i.get(_,p))&&Je.embedPositionAdjustmentPattern(_-2,p-2,i)}}}}Je.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),Je.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),Je.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),Je.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),Je.VERSION_INFO_POLY=7973,Je.TYPE_INFO_POLY=1335,Je.TYPE_INFO_MASK_PATTERN=21522;class da{constructor(t,i){this.dataBytes=t,this.errorCorrectionBytes=i}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class jt{constructor(){}static calculateMaskPenalty(t){return qt.applyMaskPenaltyRule1(t)+qt.applyMaskPenaltyRule2(t)+qt.applyMaskPenaltyRule3(t)+qt.applyMaskPenaltyRule4(t)}static encode(t,i,a=null){let c=jt.DEFAULT_BYTE_MODE_ENCODING;const h=a!==null&&a.get(wn.CHARACTER_SET)!==void 0;h&&(c=a.get(wn.CHARACTER_SET).toString());const d=this.chooseMode(t,c),p=new pe;if(d===Ze.BYTE&&(h||jt.DEFAULT_BYTE_MODE_ENCODING!==c)){const Re=P.getCharacterSetECIByName(c);Re!==void 0&&this.appendECI(Re,p)}this.appendModeInfo(d,p);const E=new pe;this.appendBytes(t,d,E,c);let _;if(a!==null&&a.get(wn.QR_VERSION)!==void 0){const Re=Number.parseInt(a.get(wn.QR_VERSION).toString(),10);_=Pe.getVersionForNumber(Re);const Ce=this.calculateBitsNeeded(d,p,E,_);if(!this.willFit(Ce,_,i))throw new Ft("Data too big for requested version")}else _=this.recommendVersion(i,d,p,E);const S=new pe;S.appendBitArray(p);const M=d===Ze.BYTE?E.getSizeInBytes():t.length;this.appendLengthInfo(M,_,d,S),S.appendBitArray(E);const L=_.getECBlocksForLevel(i),H=_.getTotalCodewords()-L.getTotalECCodewords();this.terminateBits(H,S);const K=this.interleaveWithECBytes(S,_.getTotalCodewords(),H,L.getNumBlocks()),$=new dr;$.setECLevel(i),$.setMode(d),$.setVersion(_);const re=_.getDimensionForVersion(),fe=new Ss(re,re),Se=this.chooseMaskPattern(K,i,_,fe);return $.setMaskPattern(Se),Je.buildMatrix(K,i,_,Se,fe),$.setMatrix(fe),$}static recommendVersion(t,i,a,c){const h=this.calculateBitsNeeded(i,a,c,Pe.getVersionForNumber(1)),d=this.chooseVersion(h,t),p=this.calculateBitsNeeded(i,a,c,d);return this.chooseVersion(p,t)}static calculateBitsNeeded(t,i,a,c){return i.getSize()+t.getCharacterCountBits(c)+a.getSize()}static getAlphanumericCode(t){return t<jt.ALPHANUMERIC_TABLE.length?jt.ALPHANUMERIC_TABLE[t]:-1}static chooseMode(t,i=null){if(P.SJIS.getName()===i&&this.isOnlyDoubleByteKanji(t))return Ze.KANJI;let a=!1,c=!1;for(let h=0,d=t.length;h<d;++h){const p=t.charAt(h);if(jt.isDigit(p))a=!0;else if(this.getAlphanumericCode(p.charCodeAt(0))!==-1)c=!0;else return Ze.BYTE}return c?Ze.ALPHANUMERIC:a?Ze.NUMERIC:Ze.BYTE}static isOnlyDoubleByteKanji(t){let i;try{i=Y.encode(t,P.SJIS)}catch{return!1}const a=i.length;if(a%2!==0)return!1;for(let c=0;c<a;c+=2){const h=i[c]&255;if((h<129||h>159)&&(h<224||h>235))return!1}return!0}static chooseMaskPattern(t,i,a,c){let h=Number.MAX_SAFE_INTEGER,d=-1;for(let p=0;p<dr.NUM_MASK_PATTERNS;p++){Je.buildMatrix(t,i,a,p,c);let E=this.calculateMaskPenalty(c);E<h&&(h=E,d=p)}return d}static chooseVersion(t,i){for(let a=1;a<=40;a++){const c=Pe.getVersionForNumber(a);if(jt.willFit(t,c,i))return c}throw new Ft("Data too big")}static willFit(t,i,a){const c=i.getTotalCodewords(),d=i.getECBlocksForLevel(a).getTotalECCodewords(),p=c-d,E=(t+7)/8;return p>=E}static terminateBits(t,i){const a=t*8;if(i.getSize()>a)throw new Ft("data bits cannot fit in the QR Code"+i.getSize()+" > "+a);for(let d=0;d<4&&i.getSize()<a;++d)i.appendBit(!1);const c=i.getSize()&7;if(c>0)for(let d=c;d<8;d++)i.appendBit(!1);const h=t-i.getSizeInBytes();for(let d=0;d<h;++d)i.appendBits((d&1)===0?236:17,8);if(i.getSize()!==a)throw new Ft("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(t,i,a,c,h,d){if(c>=a)throw new Ft("Block ID too large");const p=t%a,E=a-p,_=Math.floor(t/a),S=_+1,M=Math.floor(i/a),L=M+1,H=_-M,K=S-L;if(H!==K)throw new Ft("EC bytes mismatch");if(a!==E+p)throw new Ft("RS blocks mismatch");if(t!==(M+H)*E+(L+K)*p)throw new Ft("Total bytes mismatch");c<E?(h[0]=M,d[0]=H):(h[0]=L,d[0]=K)}static interleaveWithECBytes(t,i,a,c){if(t.getSizeInBytes()!==a)throw new Ft("Number of bits and data bytes does not match");let h=0,d=0,p=0;const E=new Array;for(let S=0;S<c;++S){const M=new Int32Array(1),L=new Int32Array(1);jt.getNumDataBytesAndNumECBytesForBlockID(i,a,c,S,M,L);const H=M[0],K=new Uint8Array(H);t.toBytes(8*h,K,0,H);const $=jt.generateECBytes(K,L[0]);E.push(new da(K,$)),d=Math.max(d,H),p=Math.max(p,$.length),h+=M[0]}if(a!==h)throw new Ft("Data bytes does not match offset");const _=new pe;for(let S=0;S<d;++S)for(const M of E){const L=M.getDataBytes();S<L.length&&_.appendBits(L[S],8)}for(let S=0;S<p;++S)for(const M of E){const L=M.getErrorCorrectionBytes();S<L.length&&_.appendBits(L[S],8)}if(i!==_.getSizeInBytes())throw new Ft("Interleaving error: "+i+" and "+_.getSizeInBytes()+" differ.");return _}static generateECBytes(t,i){const a=t.length,c=new Int32Array(a+i);for(let d=0;d<a;d++)c[d]=t[d]&255;new rs(wt.QR_CODE_FIELD_256).encode(c,i);const h=new Uint8Array(i);for(let d=0;d<i;d++)h[d]=c[a+d];return h}static appendModeInfo(t,i){i.appendBits(t.getBits(),4)}static appendLengthInfo(t,i,a,c){const h=a.getCharacterCountBits(i);if(t>=1<<h)throw new Ft(t+" is bigger than "+((1<<h)-1));c.appendBits(t,h)}static appendBytes(t,i,a,c){switch(i){case Ze.NUMERIC:jt.appendNumericBytes(t,a);break;case Ze.ALPHANUMERIC:jt.appendAlphanumericBytes(t,a);break;case Ze.BYTE:jt.append8BitBytes(t,a,c);break;case Ze.KANJI:jt.appendKanjiBytes(t,a);break;default:throw new Ft("Invalid mode: "+i)}}static getDigit(t){return t.charCodeAt(0)-48}static isDigit(t){const i=jt.getDigit(t);return i>=0&&i<=9}static appendNumericBytes(t,i){const a=t.length;let c=0;for(;c<a;){const h=jt.getDigit(t.charAt(c));if(c+2<a){const d=jt.getDigit(t.charAt(c+1)),p=jt.getDigit(t.charAt(c+2));i.appendBits(h*100+d*10+p,10),c+=3}else if(c+1<a){const d=jt.getDigit(t.charAt(c+1));i.appendBits(h*10+d,7),c+=2}else i.appendBits(h,4),c++}}static appendAlphanumericBytes(t,i){const a=t.length;let c=0;for(;c<a;){const h=jt.getAlphanumericCode(t.charCodeAt(c));if(h===-1)throw new Ft;if(c+1<a){const d=jt.getAlphanumericCode(t.charCodeAt(c+1));if(d===-1)throw new Ft;i.appendBits(h*45+d,11),c+=2}else i.appendBits(h,6),c++}}static append8BitBytes(t,i,a){let c;try{c=Y.encode(t,a)}catch(h){throw new Ft(h)}for(let h=0,d=c.length;h!==d;h++){const p=c[h];i.appendBits(p,8)}}static appendKanjiBytes(t,i){let a;try{a=Y.encode(t,P.SJIS)}catch(h){throw new Ft(h)}const c=a.length;for(let h=0;h<c;h+=2){const d=a[h]&255,p=a[h+1]&255,E=d<<8&4294967295|p;let _=-1;if(E>=33088&&E<=40956?_=E-33088:E>=57408&&E<=60351&&(_=E-49472),_===-1)throw new Ft("Invalid byte sequence");const S=(_>>8)*192+(_&255);i.appendBits(S,13)}}static appendECI(t,i){i.appendBits(Ze.ECI.getBits(),4),i.appendBits(t.getValue(),8)}}jt.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),jt.DEFAULT_BYTE_MODE_ENCODING=P.UTF8.getName();class Qr{write(t,i,a,c=null){if(t.length===0)throw new D("Found empty contents");if(i<0||a<0)throw new D("Requested dimensions are too small: "+i+"x"+a);let h=At.L,d=Qr.QUIET_ZONE_SIZE;c!==null&&(c.get(wn.ERROR_CORRECTION)!==void 0&&(h=At.fromString(c.get(wn.ERROR_CORRECTION).toString())),c.get(wn.MARGIN)!==void 0&&(d=Number.parseInt(c.get(wn.MARGIN).toString(),10)));const p=jt.encode(t,h,c);return this.renderResult(p,i,a,d)}writeToDom(t,i,a,c,h=null){typeof t=="string"&&(t=document.querySelector(t));const d=this.write(i,a,c,h);t&&t.appendChild(d)}renderResult(t,i,a,c){const h=t.getMatrix();if(h===null)throw new ur;const d=h.getWidth(),p=h.getHeight(),E=d+c*2,_=p+c*2,S=Math.max(i,E),M=Math.max(a,_),L=Math.min(Math.floor(S/E),Math.floor(M/_)),H=Math.floor((S-d*L)/2),K=Math.floor((M-p*L)/2),$=this.createSVGElement(S,M);for(let re=0,fe=K;re<p;re++,fe+=L)for(let Se=0,Re=H;Se<d;Se++,Re+=L)if(h.get(Se,re)===1){const Ce=this.createSvgRectElement(Re,fe,L,L);$.appendChild(Ce)}return $}createSVGElement(t,i){const a=document.createElementNS(Qr.SVG_NS,"svg");return a.setAttributeNS(null,"height",t.toString()),a.setAttributeNS(null,"width",i.toString()),a}createSvgRectElement(t,i,a,c){const h=document.createElementNS(Qr.SVG_NS,"rect");return h.setAttributeNS(null,"x",t.toString()),h.setAttributeNS(null,"y",i.toString()),h.setAttributeNS(null,"height",a.toString()),h.setAttributeNS(null,"width",c.toString()),h.setAttributeNS(null,"fill","#000000"),h}}Qr.QUIET_ZONE_SIZE=4,Qr.SVG_NS="http://www.w3.org/2000/svg";class Mn{encode(t,i,a,c,h){if(t.length===0)throw new D("Found empty contents");if(i!==Ne.QR_CODE)throw new D("Can only encode QR_CODE, but got "+i);if(a<0||c<0)throw new D(`Requested dimensions are too small: ${a}x${c}`);let d=At.L,p=Mn.QUIET_ZONE_SIZE;h!==null&&(h.get(wn.ERROR_CORRECTION)!==void 0&&(d=At.fromString(h.get(wn.ERROR_CORRECTION).toString())),h.get(wn.MARGIN)!==void 0&&(p=Number.parseInt(h.get(wn.MARGIN).toString(),10)));const E=jt.encode(t,d,h);return Mn.renderResult(E,a,c,p)}static renderResult(t,i,a,c){const h=t.getMatrix();if(h===null)throw new ur;const d=h.getWidth(),p=h.getHeight(),E=d+c*2,_=p+c*2,S=Math.max(i,E),M=Math.max(a,_),L=Math.min(Math.floor(S/E),Math.floor(M/_)),H=Math.floor((S-d*L)/2),K=Math.floor((M-p*L)/2),$=new Le(S,M);for(let re=0,fe=K;re<p;re++,fe+=L)for(let Se=0,Re=H;Se<d;Se++,Re+=L)h.get(Se,re)===1&&$.setRegion(Re,fe,L,L);return $}}Mn.QUIET_ZONE_SIZE=4;class ga{encode(t,i,a,c,h){let d;switch(i){case Ne.QR_CODE:d=new Mn;break;default:throw new D("No encoder available for format "+i)}return d.encode(t,i,a,c,h)}}class zr extends be{constructor(t,i,a,c,h,d,p,E){if(super(d,p),this.yuvData=t,this.dataWidth=i,this.dataHeight=a,this.left=c,this.top=h,c+d>i||h+p>a)throw new D("Crop rectangle does not fit within image data.");E&&this.reverseHorizontal(d,p)}getRow(t,i){if(t<0||t>=this.getHeight())throw new D("Requested row is outside the image: "+t);const a=this.getWidth();(i==null||i.length<a)&&(i=new Uint8ClampedArray(a));const c=(t+this.top)*this.dataWidth+this.left;return Q.arraycopy(this.yuvData,c,i,0,a),i}getMatrix(){const t=this.getWidth(),i=this.getHeight();if(t===this.dataWidth&&i===this.dataHeight)return this.yuvData;const a=t*i,c=new Uint8ClampedArray(a);let h=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return Q.arraycopy(this.yuvData,h,c,0,a),c;for(let d=0;d<i;d++){const p=d*t;Q.arraycopy(this.yuvData,h,c,p,t),h+=this.dataWidth}return c}isCropSupported(){return!0}crop(t,i,a,c){return new zr(this.yuvData,this.dataWidth,this.dataHeight,this.left+t,this.top+i,a,c,!1)}renderThumbnail(){const t=this.getWidth()/zr.THUMBNAIL_SCALE_FACTOR,i=this.getHeight()/zr.THUMBNAIL_SCALE_FACTOR,a=new Int32Array(t*i),c=this.yuvData;let h=this.top*this.dataWidth+this.left;for(let d=0;d<i;d++){const p=d*t;for(let E=0;E<t;E++){const _=c[h+E*zr.THUMBNAIL_SCALE_FACTOR]&255;a[p+E]=4278190080|_*65793}h+=this.dataWidth*zr.THUMBNAIL_SCALE_FACTOR}return a}getThumbnailWidth(){return this.getWidth()/zr.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/zr.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(t,i){const a=this.yuvData;for(let c=0,h=this.top*this.dataWidth+this.left;c<i;c++,h+=this.dataWidth){const d=h+t/2;for(let p=h,E=h+t-1;p<d;p++,E--){const _=a[p];a[p]=a[E],a[E]=_}}}invert(){return new Ye(this)}}zr.THUMBNAIL_SCALE_FACTOR=2;class Kr extends be{constructor(t,i,a,c,h,d,p){if(super(i,a),this.dataWidth=c,this.dataHeight=h,this.left=d,this.top=p,t.BYTES_PER_ELEMENT===4){const E=i*a,_=new Uint8ClampedArray(E);for(let S=0;S<E;S++){const M=t[S],L=M>>16&255,H=M>>7&510,K=M&255;_[S]=(L+H+K)/4&255}this.luminances=_}else this.luminances=t;if(c===void 0&&(this.dataWidth=i),h===void 0&&(this.dataHeight=a),d===void 0&&(this.left=0),p===void 0&&(this.top=0),this.left+i>this.dataWidth||this.top+a>this.dataHeight)throw new D("Crop rectangle does not fit within image data.")}getRow(t,i){if(t<0||t>=this.getHeight())throw new D("Requested row is outside the image: "+t);const a=this.getWidth();(i==null||i.length<a)&&(i=new Uint8ClampedArray(a));const c=(t+this.top)*this.dataWidth+this.left;return Q.arraycopy(this.luminances,c,i,0,a),i}getMatrix(){const t=this.getWidth(),i=this.getHeight();if(t===this.dataWidth&&i===this.dataHeight)return this.luminances;const a=t*i,c=new Uint8ClampedArray(a);let h=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return Q.arraycopy(this.luminances,h,c,0,a),c;for(let d=0;d<i;d++){const p=d*t;Q.arraycopy(this.luminances,h,c,p,t),h+=this.dataWidth}return c}isCropSupported(){return!0}crop(t,i,a,c){return new Kr(this.luminances,a,c,this.dataWidth,this.dataHeight,this.left+t,this.top+i)}invert(){return new Ye(this)}}class m extends P{static forName(t){return this.getCharacterSetECIByName(t)}}class I{}I.ISO_8859_1=P.ISO8859_1;class N{isCompact(){return this.compact}setCompact(t){this.compact=t}getSize(){return this.size}setSize(t){this.size=t}getLayers(){return this.layers}setLayers(t){this.layers=t}getCodeWords(){return this.codeWords}setCodeWords(t){this.codeWords=t}getMatrix(){return this.matrix}setMatrix(t){this.matrix=t}}class V{static singletonList(t){return[t]}static min(t,i){return t.sort(i)[0]}}class oe{constructor(t){this.previous=t}getPrevious(){return this.previous}}class ge extends oe{constructor(t,i,a){super(t),this.value=i,this.bitCount=a}appendTo(t,i){t.appendBits(this.value,this.bitCount)}add(t,i){return new ge(this,t,i)}addBinaryShift(t,i){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new ge(this,t,i)}toString(){let t=this.value&(1<<this.bitCount)-1;return t|=1<<this.bitCount,"<"+te.toBinaryString(t|1<<this.bitCount).substring(1)+">"}}class Me extends ge{constructor(t,i,a){super(t,0,0),this.binaryShiftStart=i,this.binaryShiftByteCount=a}appendTo(t,i){for(let a=0;a<this.binaryShiftByteCount;a++)(a===0||a===31&&this.binaryShiftByteCount<=62)&&(t.appendBits(31,5),this.binaryShiftByteCount>62?t.appendBits(this.binaryShiftByteCount-31,16):a===0?t.appendBits(Math.min(this.binaryShiftByteCount,31),5):t.appendBits(this.binaryShiftByteCount-31,5)),t.appendBits(i[this.binaryShiftStart+a],8)}addBinaryShift(t,i){return new Me(this,t,i)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function Ht(b,t,i){return new Me(b,t,i)}function ln(b,t,i){return new ge(b,t,i)}const St=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],nn=0,un=1,cn=2,Rr=3,ir=4,Js=new ge(null,0,0),pa=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function eu(b){for(let t of b)he.fill(t,-1);return b[nn][ir]=0,b[un][ir]=0,b[un][nn]=28,b[Rr][ir]=0,b[cn][ir]=0,b[cn][nn]=15,b}const nl=eu(he.createInt32Array(6,6));class gr{constructor(t,i,a,c){this.token=t,this.mode=i,this.binaryShiftByteCount=a,this.bitCount=c}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(t,i){let a=this.bitCount,c=this.token;if(t!==this.mode){let d=pa[this.mode][t];c=ln(c,d&65535,d>>16),a+=d>>16}let h=t===cn?4:5;return c=ln(c,i,h),new gr(c,t,0,a+h)}shiftAndAppend(t,i){let a=this.token,c=this.mode===cn?4:5;return a=ln(a,nl[this.mode][t],c),a=ln(a,i,5),new gr(a,this.mode,0,this.bitCount+c+5)}addBinaryShiftChar(t){let i=this.token,a=this.mode,c=this.bitCount;if(this.mode===ir||this.mode===cn){let p=pa[a][nn];i=ln(i,p&65535,p>>16),c+=p>>16,a=nn}let h=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,d=new gr(i,a,this.binaryShiftByteCount+1,c+h);return d.binaryShiftByteCount===2078&&(d=d.endBinaryShift(t+1)),d}endBinaryShift(t){if(this.binaryShiftByteCount===0)return this;let i=this.token;return i=Ht(i,t-this.binaryShiftByteCount,this.binaryShiftByteCount),new gr(i,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(t){let i=this.bitCount+(pa[this.mode][t.mode]>>16);return this.binaryShiftByteCount<t.binaryShiftByteCount?i+=gr.calculateBinaryShiftCost(t)-gr.calculateBinaryShiftCost(this):this.binaryShiftByteCount>t.binaryShiftByteCount&&t.binaryShiftByteCount>0&&(i+=10),i<=t.bitCount}toBitArray(t){let i=[];for(let c=this.endBinaryShift(t.length).token;c!==null;c=c.getPrevious())i.unshift(c);let a=new pe;for(const c of i)c.appendTo(a,t);return a}toString(){return W.format("%s bits=%d bytes=%d",St[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(t){return t.binaryShiftByteCount>62?21:t.binaryShiftByteCount>31?20:t.binaryShiftByteCount>0?10:0}}gr.INITIAL_STATE=new gr(Js,nn,0,0);function Kc(b){const t=W.getCharCode(" "),i=W.getCharCode("."),a=W.getCharCode(",");b[nn][t]=1;const c=W.getCharCode("Z"),h=W.getCharCode("A");for(let L=h;L<=c;L++)b[nn][L]=L-h+2;b[un][t]=1;const d=W.getCharCode("z"),p=W.getCharCode("a");for(let L=p;L<=d;L++)b[un][L]=L-p+2;b[cn][t]=1;const E=W.getCharCode("9"),_=W.getCharCode("0");for(let L=_;L<=E;L++)b[cn][L]=L-_+2;b[cn][a]=12,b[cn][i]=13;const S=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let L=0;L<S.length;L++)b[Rr][W.getCharCode(S[L])]=L;const M=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let L=0;L<M.length;L++)W.getCharCode(M[L])>0&&(b[ir][W.getCharCode(M[L])]=L);return b}const rl=Kc(he.createInt32Array(5,256));class Fo{constructor(t){this.text=t}encode(){const t=W.getCharCode(" "),i=W.getCharCode(`
`);let a=V.singletonList(gr.INITIAL_STATE);for(let h=0;h<this.text.length;h++){let d,p=h+1<this.text.length?this.text[h+1]:0;switch(this.text[h]){case W.getCharCode("\r"):d=p===i?2:0;break;case W.getCharCode("."):d=p===t?3:0;break;case W.getCharCode(","):d=p===t?4:0;break;case W.getCharCode(":"):d=p===t?5:0;break;default:d=0}d>0?(a=Fo.updateStateListForPair(a,h,d),h++):a=this.updateStateListForChar(a,h)}return V.min(a,(h,d)=>h.getBitCount()-d.getBitCount()).toBitArray(this.text)}updateStateListForChar(t,i){const a=[];for(let c of t)this.updateStateForChar(c,i,a);return Fo.simplifyStates(a)}updateStateForChar(t,i,a){let c=this.text[i]&255,h=rl[t.getMode()][c]>0,d=null;for(let p=0;p<=ir;p++){let E=rl[p][c];if(E>0){if(d==null&&(d=t.endBinaryShift(i)),!h||p===t.getMode()||p===cn){const _=d.latchAndAppend(p,E);a.push(_)}if(!h&&nl[t.getMode()][p]>=0){const _=d.shiftAndAppend(p,E);a.push(_)}}}if(t.getBinaryShiftByteCount()>0||rl[t.getMode()][c]===0){let p=t.addBinaryShiftChar(i);a.push(p)}}static updateStateListForPair(t,i,a){const c=[];for(let h of t)this.updateStateForPair(h,i,a,c);return this.simplifyStates(c)}static updateStateForPair(t,i,a,c){let h=t.endBinaryShift(i);if(c.push(h.latchAndAppend(ir,a)),t.getMode()!==ir&&c.push(h.shiftAndAppend(ir,a)),a===3||a===4){let d=h.latchAndAppend(cn,16-a).latchAndAppend(cn,1);c.push(d)}if(t.getBinaryShiftByteCount()>0){let d=t.addBinaryShiftChar(i).addBinaryShiftChar(i+1);c.push(d)}}static simplifyStates(t){let i=[];for(const a of t){let c=!0;for(const h of i){if(h.isBetterThanOrEqualTo(a)){c=!1;break}a.isBetterThanOrEqualTo(h)&&(i=i.filter(d=>d!==h))}c&&i.push(a)}return i}}class Rt{constructor(){}static encodeBytes(t){return Rt.encode(t,Rt.DEFAULT_EC_PERCENT,Rt.DEFAULT_AZTEC_LAYERS)}static encode(t,i,a){let c=new Fo(t).encode(),h=te.truncDivision(c.getSize()*i,100)+11,d=c.getSize()+h,p,E,_,S,M;if(a!==Rt.DEFAULT_AZTEC_LAYERS){if(p=a<0,E=Math.abs(a),E>(p?Rt.MAX_NB_BITS_COMPACT:Rt.MAX_NB_BITS))throw new D(W.format("Illegal value %s for layers",a));_=Rt.totalBitsInLayer(E,p),S=Rt.WORD_SIZE[E];let Ce=_-_%S;if(M=Rt.stuffBits(c,S),M.getSize()+h>Ce)throw new D("Data to large for user specified layer");if(p&&M.getSize()>S*64)throw new D("Data to large for user specified layer")}else{S=0,M=null;for(let Ce=0;;Ce++){if(Ce>Rt.MAX_NB_BITS)throw new D("Data too large for an Aztec code");if(p=Ce<=3,E=p?Ce+1:Ce,_=Rt.totalBitsInLayer(E,p),d>_)continue;(M==null||S!==Rt.WORD_SIZE[E])&&(S=Rt.WORD_SIZE[E],M=Rt.stuffBits(c,S));let Ct=_-_%S;if(!(p&&M.getSize()>S*64)&&M.getSize()+h<=Ct)break}}let L=Rt.generateCheckWords(M,_,S),H=M.getSize()/S,K=Rt.generateModeMessage(p,E,H),$=(p?11:14)+E*4,re=new Int32Array($),fe;if(p){fe=$;for(let Ce=0;Ce<re.length;Ce++)re[Ce]=Ce}else{fe=$+1+2*te.truncDivision(te.truncDivision($,2)-1,15);let Ce=te.truncDivision($,2),Ct=te.truncDivision(fe,2);for(let ht=0;ht<Ce;ht++){let Nr=ht+te.truncDivision(ht,15);re[Ce-ht-1]=Ct-Nr-1,re[Ce+ht]=Ct+Nr+1}}let Se=new Le(fe);for(let Ce=0,Ct=0;Ce<E;Ce++){let ht=(E-Ce)*4+(p?9:12);for(let Nr=0;Nr<ht;Nr++){let fi=Nr*2;for(let Vn=0;Vn<2;Vn++)L.get(Ct+fi+Vn)&&Se.set(re[Ce*2+Vn],re[Ce*2+Nr]),L.get(Ct+ht*2+fi+Vn)&&Se.set(re[Ce*2+Nr],re[$-1-Ce*2-Vn]),L.get(Ct+ht*4+fi+Vn)&&Se.set(re[$-1-Ce*2-Vn],re[$-1-Ce*2-Nr]),L.get(Ct+ht*6+fi+Vn)&&Se.set(re[$-1-Ce*2-Nr],re[Ce*2+Vn])}Ct+=ht*8}if(Rt.drawModeMessage(Se,p,fe,K),p)Rt.drawBullsEye(Se,te.truncDivision(fe,2),5);else{Rt.drawBullsEye(Se,te.truncDivision(fe,2),7);for(let Ce=0,Ct=0;Ce<te.truncDivision($,2)-1;Ce+=15,Ct+=16)for(let ht=te.truncDivision(fe,2)&1;ht<fe;ht+=2)Se.set(te.truncDivision(fe,2)-Ct,ht),Se.set(te.truncDivision(fe,2)+Ct,ht),Se.set(ht,te.truncDivision(fe,2)-Ct),Se.set(ht,te.truncDivision(fe,2)+Ct)}let Re=new N;return Re.setCompact(p),Re.setSize(fe),Re.setLayers(E),Re.setCodeWords(H),Re.setMatrix(Se),Re}static drawBullsEye(t,i,a){for(let c=0;c<a;c+=2)for(let h=i-c;h<=i+c;h++)t.set(h,i-c),t.set(h,i+c),t.set(i-c,h),t.set(i+c,h);t.set(i-a,i-a),t.set(i-a+1,i-a),t.set(i-a,i-a+1),t.set(i+a,i-a),t.set(i+a,i-a+1),t.set(i+a,i+a-1)}static generateModeMessage(t,i,a){let c=new pe;return t?(c.appendBits(i-1,2),c.appendBits(a-1,6),c=Rt.generateCheckWords(c,28,4)):(c.appendBits(i-1,5),c.appendBits(a-1,11),c=Rt.generateCheckWords(c,40,4)),c}static drawModeMessage(t,i,a,c){let h=te.truncDivision(a,2);if(i)for(let d=0;d<7;d++){let p=h-3+d;c.get(d)&&t.set(p,h-5),c.get(d+7)&&t.set(h+5,p),c.get(20-d)&&t.set(p,h+5),c.get(27-d)&&t.set(h-5,p)}else for(let d=0;d<10;d++){let p=h-5+d+te.truncDivision(d,5);c.get(d)&&t.set(p,h-7),c.get(d+10)&&t.set(h+7,p),c.get(29-d)&&t.set(p,h+7),c.get(39-d)&&t.set(h-7,p)}}static generateCheckWords(t,i,a){let c=t.getSize()/a,h=new rs(Rt.getGF(a)),d=te.truncDivision(i,a),p=Rt.bitsToWords(t,a,d);h.encode(p,d-c);let E=i%a,_=new pe;_.appendBits(0,E);for(const S of Array.from(p))_.appendBits(S,a);return _}static bitsToWords(t,i,a){let c=new Int32Array(a),h,d;for(h=0,d=t.getSize()/i;h<d;h++){let p=0;for(let E=0;E<i;E++)p|=t.get(h*i+E)?1<<i-E-1:0;c[h]=p}return c}static getGF(t){switch(t){case 4:return wt.AZTEC_PARAM;case 6:return wt.AZTEC_DATA_6;case 8:return wt.AZTEC_DATA_8;case 10:return wt.AZTEC_DATA_10;case 12:return wt.AZTEC_DATA_12;default:throw new D("Unsupported word size "+t)}}static stuffBits(t,i){let a=new pe,c=t.getSize(),h=(1<<i)-2;for(let d=0;d<c;d+=i){let p=0;for(let E=0;E<i;E++)(d+E>=c||t.get(d+E))&&(p|=1<<i-1-E);(p&h)===h?(a.appendBits(p&h,i),d--):(p&h)===0?(a.appendBits(p|1,i),d--):a.appendBits(p,i)}return a}static totalBitsInLayer(t,i){return((i?88:112)+16*t)*t}}Rt.DEFAULT_EC_PERCENT=33,Rt.DEFAULT_AZTEC_LAYERS=0,Rt.MAX_NB_BITS=32,Rt.MAX_NB_BITS_COMPACT=4,Rt.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class Vo{encode(t,i,a,c){return this.encodeWithHints(t,i,a,c,null)}encodeWithHints(t,i,a,c,h){let d=I.ISO_8859_1,p=Rt.DEFAULT_EC_PERCENT,E=Rt.DEFAULT_AZTEC_LAYERS;return h!=null&&(h.has(wn.CHARACTER_SET)&&(d=m.forName(h.get(wn.CHARACTER_SET).toString())),h.has(wn.ERROR_CORRECTION)&&(p=te.parseInt(h.get(wn.ERROR_CORRECTION).toString())),h.has(wn.AZTEC_LAYERS)&&(E=te.parseInt(h.get(wn.AZTEC_LAYERS).toString()))),Vo.encodeLayers(t,i,a,c,d,p,E)}static encodeLayers(t,i,a,c,h,d,p){if(i!==Ne.AZTEC)throw new D("Can only encode AZTEC, but got "+i);let E=Rt.encode(W.getBytes(t,h),d,p);return Vo.renderResult(E,a,c)}static renderResult(t,i,a){let c=t.getMatrix();if(c==null)throw new ur;let h=c.getWidth(),d=c.getHeight(),p=Math.max(i,h),E=Math.max(a,d),_=Math.min(p/h,E/d),S=(p-h*_)/2,M=(E-d*_)/2,L=new Le(p,E);for(let H=0,K=M;H<d;H++,K+=_)for(let $=0,re=S;$<h;$++,re+=_)c.get($,H)&&L.setRegion(re,K,_,_);return L}}n.AbstractExpandedDecoder=Zi,n.ArgumentException=R,n.ArithmeticException=Mi,n.AztecCode=N,n.AztecCodeReader=xi,n.AztecCodeWriter=Vo,n.AztecDecoder=Ut,n.AztecDetector=Pi,n.AztecDetectorResult=ys,n.AztecEncoder=Rt,n.AztecHighLevelEncoder=Fo,n.AztecPoint=Ln,n.BarcodeFormat=Ne,n.Binarizer=q,n.BinaryBitmap=k,n.BitArray=pe,n.BitMatrix=Le,n.BitSource=Xs,n.BrowserAztecCodeReader=Es,n.BrowserBarcodeReader=ca,n.BrowserCodeReader=ze,n.BrowserDatamatrixCodeReader=tl,n.BrowserMultiFormatReader=ns,n.BrowserPDF417Reader=Is,n.BrowserQRCodeReader=$s,n.BrowserQRCodeSvgWriter=Qr,n.CharacterSetECI=P,n.ChecksumException=j,n.Code128Reader=Oe,n.Code39Reader=an,n.DataMatrixDecodedBitStreamParser=Fr,n.DataMatrixReader=vr,n.DecodeHintType=we,n.DecoderResult=_t,n.DefaultGridSampler=Sn,n.DetectorResult=Xi,n.EAN13Reader=tr,n.EncodeHintType=wn,n.Exception=x,n.FormatException=F,n.GenericGF=wt,n.GenericGFPoly=gn,n.GlobalHistogramBinarizer=yt,n.GridSampler=ws,n.GridSamplerInstance=er,n.HTMLCanvasElementLuminanceSource=ke,n.HybridBinarizer=Fe,n.ITFReader=Lt,n.IllegalArgumentException=D,n.IllegalStateException=ur,n.InvertedLuminanceSource=Ye,n.LuminanceSource=be,n.MathUtils=Et,n.MultiFormatOneDReader=_i,n.MultiFormatReader=vi,n.MultiFormatWriter=ga,n.NotFoundException=ue,n.OneDReader=rn,n.PDF417DecodedBitStreamParser=ce,n.PDF417DecoderErrorCorrection=es,n.PDF417Reader=Fn,n.PDF417ResultMetadata=vs,n.PerspectiveTransform=zt,n.PlanarYUVLuminanceSource=zr,n.QRCodeByteMatrix=Ss,n.QRCodeDataMask=at,n.QRCodeDecodedBitStreamParser=$t,n.QRCodeDecoderErrorCorrectionLevel=At,n.QRCodeDecoderFormatInformation=yn,n.QRCodeEncoder=jt,n.QRCodeEncoderQRCode=dr,n.QRCodeMaskUtil=qt,n.QRCodeMatrixUtil=Je,n.QRCodeMode=Ze,n.QRCodeReader=qn,n.QRCodeVersion=Pe,n.QRCodeWriter=Mn,n.RGBLuminanceSource=Kr,n.RSS14Reader=bt,n.RSSExpandedReader=xe,n.ReaderException=Fi,n.ReedSolomonDecoder=Oi,n.ReedSolomonEncoder=rs,n.ReedSolomonException=Wr,n.Result=$e,n.ResultMetadataType=Qe,n.ResultPoint=Ve,n.StringUtils=W,n.UnsupportedOperationException=G,n.VideoInputDevice=ne,n.WhiteRectangleDetector=Ar,n.WriterException=Ft,n.ZXingArrays=he,n.ZXingCharset=m,n.ZXingInteger=te,n.ZXingStandardCharsets=I,n.ZXingStringBuilder=U,n.ZXingStringEncoding=Y,n.ZXingSystem=Q,n.createAbstractExpandedDecoder=ua,Object.defineProperty(n,"__esModule",{value:!0})})}(bl,bl.exports)),bl.exports}var dn=II();const TI=dm(dn),SI=mw({__proto__:null,default:TI},[dn]);var nm=function(){function s(e,n,o){if(this.formatMap=new Map([[He.QR_CODE,dn.BarcodeFormat.QR_CODE],[He.AZTEC,dn.BarcodeFormat.AZTEC],[He.CODABAR,dn.BarcodeFormat.CODABAR],[He.CODE_39,dn.BarcodeFormat.CODE_39],[He.CODE_93,dn.BarcodeFormat.CODE_93],[He.CODE_128,dn.BarcodeFormat.CODE_128],[He.DATA_MATRIX,dn.BarcodeFormat.DATA_MATRIX],[He.MAXICODE,dn.BarcodeFormat.MAXICODE],[He.ITF,dn.BarcodeFormat.ITF],[He.EAN_13,dn.BarcodeFormat.EAN_13],[He.EAN_8,dn.BarcodeFormat.EAN_8],[He.PDF_417,dn.BarcodeFormat.PDF_417],[He.RSS_14,dn.BarcodeFormat.RSS_14],[He.RSS_EXPANDED,dn.BarcodeFormat.RSS_EXPANDED],[He.UPC_A,dn.BarcodeFormat.UPC_A],[He.UPC_E,dn.BarcodeFormat.UPC_E],[He.UPC_EAN_EXTENSION,dn.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!SI)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=n,this.logger=o;var u=this.createZXingFormats(e),f=new Map;f.set(dn.DecodeHintType.POSSIBLE_FORMATS,u),f.set(dn.DecodeHintType.TRY_HARDER,!1),this.hints=f}return s.prototype.decodeAsync=function(e){var n=this;return new Promise(function(o,u){try{o(n.decode(e))}catch(f){u(f)}})},s.prototype.decode=function(e){var n=new dn.MultiFormatReader(this.verbose,this.hints),o=new dn.HTMLCanvasElementLuminanceSource(e),u=new dn.BinaryBitmap(new dn.HybridBinarizer(o)),f=n.decode(u);return{text:f.text,format:wy.create(this.toHtml5QrcodeSupportedFormats(f.format)),debugData:this.createDebugData()}},s.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(n,o,u){e.set(n,o)}),e},s.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},s.prototype.createZXingFormats=function(e){for(var n=[],o=0,u=e;o<u.length;o++){var f=u[o];this.formatMap.has(f)?n.push(this.formatMap.get(f)):this.logger.logError("".concat(f," is not supported by")+"ZXingHtml5QrcodeShim")}return n},s.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},s}(),RI=function(s,e,n,o){function u(f){return f instanceof n?f:new n(function(y){y(f)})}return new(n||(n=Promise))(function(f,y){function A(R){try{x(o.next(R))}catch(D){y(D)}}function C(R){try{x(o.throw(R))}catch(D){y(D)}}function x(R){R.done?f(R.value):u(R.value).then(A,C)}x((o=o.apply(s,e||[])).next())})},NI=function(s,e){var n={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},o,u,f,y;return y={next:A(0),throw:A(1),return:A(2)},typeof Symbol=="function"&&(y[Symbol.iterator]=function(){return this}),y;function A(x){return function(R){return C([x,R])}}function C(x){if(o)throw new TypeError("Generator is already executing.");for(;y&&(y=0,x[0]&&(n=0)),n;)try{if(o=1,u&&(f=x[0]&2?u.return:x[0]?u.throw||((f=u.return)&&f.call(u),0):u.next)&&!(f=f.call(u,x[1])).done)return f;switch(u=0,f&&(x=[x[0]&2,f.value]),x[0]){case 0:case 1:f=x;break;case 4:return n.label++,{value:x[1],done:!1};case 5:n.label++,u=x[1],x=[0];continue;case 7:x=n.ops.pop(),n.trys.pop();continue;default:if(f=n.trys,!(f=f.length>0&&f[f.length-1])&&(x[0]===6||x[0]===2)){n=0;continue}if(x[0]===3&&(!f||x[1]>f[0]&&x[1]<f[3])){n.label=x[1];break}if(x[0]===6&&n.label<f[1]){n.label=f[1],f=x;break}if(f&&n.label<f[2]){n.label=f[2],n.ops.push(x);break}f[2]&&n.ops.pop(),n.trys.pop();continue}x=e.call(s,n)}catch(R){x=[6,R],u=0}finally{o=f=0}if(x[0]&5)throw x[1];return{value:x[0]?x[1]:void 0,done:!0}}},rm=function(){function s(e,n,o){if(this.formatMap=new Map([[He.QR_CODE,"qr_code"],[He.AZTEC,"aztec"],[He.CODABAR,"codabar"],[He.CODE_39,"code_39"],[He.CODE_93,"code_93"],[He.CODE_128,"code_128"],[He.DATA_MATRIX,"data_matrix"],[He.ITF,"itf"],[He.EAN_13,"ean_13"],[He.EAN_8,"ean_8"],[He.PDF_417,"pdf417"],[He.UPC_A,"upc_a"],[He.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!s.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=n,this.logger=o;var u=this.createBarcodeDetectorFormats(e);if(this.detector=new BarcodeDetector(u),!this.detector)throw"BarcodeDetector detector not supported"}return s.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var e=new BarcodeDetector({formats:["qr_code"]});return typeof e<"u"},s.prototype.decodeAsync=function(e){return RI(this,void 0,void 0,function(){var n,o;return NI(this,function(u){switch(u.label){case 0:return[4,this.detector.detect(e)];case 1:if(n=u.sent(),!n||n.length===0)throw"No barcode or QR code detected.";return o=this.selectLargestBarcode(n),[2,{text:o.rawValue,format:wy.create(this.toHtml5QrcodeSupportedFormats(o.format)),debugData:this.createDebugData()}]}})})},s.prototype.selectLargestBarcode=function(e){for(var n=null,o=0,u=0,f=e;u<f.length;u++){var y=f[u],A=y.boundingBox.width*y.boundingBox.height;A>o&&(o=A,n=y)}if(!n)throw"No largest barcode found";return n},s.prototype.createBarcodeDetectorFormats=function(e){for(var n=[],o=0,u=e;o<u.length;o++){var f=u[o];this.formatMap.has(f)?n.push(this.formatMap.get(f)):this.logger.warn("".concat(f," is not supported by")+"BarcodeDetectorDelegate")}return{formats:n}},s.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},s.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(n,o,u){e.set(n,o)}),e},s.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},s}(),im=function(s,e,n,o){function u(f){return f instanceof n?f:new n(function(y){y(f)})}return new(n||(n=Promise))(function(f,y){function A(R){try{x(o.next(R))}catch(D){y(D)}}function C(R){try{x(o.throw(R))}catch(D){y(D)}}function x(R){R.done?f(R.value):u(R.value).then(A,C)}x((o=o.apply(s,e||[])).next())})},sm=function(s,e){var n={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},o,u,f,y;return y={next:A(0),throw:A(1),return:A(2)},typeof Symbol=="function"&&(y[Symbol.iterator]=function(){return this}),y;function A(x){return function(R){return C([x,R])}}function C(x){if(o)throw new TypeError("Generator is already executing.");for(;y&&(y=0,x[0]&&(n=0)),n;)try{if(o=1,u&&(f=x[0]&2?u.return:x[0]?u.throw||((f=u.return)&&f.call(u),0):u.next)&&!(f=f.call(u,x[1])).done)return f;switch(u=0,f&&(x=[x[0]&2,f.value]),x[0]){case 0:case 1:f=x;break;case 4:return n.label++,{value:x[1],done:!1};case 5:n.label++,u=x[1],x=[0];continue;case 7:x=n.ops.pop(),n.trys.pop();continue;default:if(f=n.trys,!(f=f.length>0&&f[f.length-1])&&(x[0]===6||x[0]===2)){n=0;continue}if(x[0]===3&&(!f||x[1]>f[0]&&x[1]<f[3])){n.label=x[1];break}if(x[0]===6&&n.label<f[1]){n.label=f[1],f=x;break}if(f&&n.label<f[2]){n.label=f[2],n.ops.push(x);break}f[2]&&n.ops.pop(),n.trys.pop();continue}x=e.call(s,n)}catch(R){x=[6,R],u=0}finally{o=f=0}if(x[0]&5)throw x[1];return{value:x[0]?x[1]:void 0,done:!0}}},DI=function(){function s(e,n,o,u){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=o,n&&rm.isSupported()?(this.primaryDecoder=new rm(e,o,u),this.secondaryDecoder=new nm(e,o,u)):this.primaryDecoder=new nm(e,o,u)}return s.prototype.decodeAsync=function(e){return im(this,void 0,void 0,function(){var n;return sm(this,function(o){switch(o.label){case 0:n=performance.now(),o.label=1;case 1:return o.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(e)];case 2:return[2,o.sent()];case 3:return this.possiblyLogPerformance(n),[7];case 4:return[2]}})})},s.prototype.decodeRobustlyAsync=function(e){return im(this,void 0,void 0,function(){var n,o;return sm(this,function(u){switch(u.label){case 0:n=performance.now(),u.label=1;case 1:return u.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(e)];case 2:return[2,u.sent()];case 3:if(o=u.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(e)];throw o;case 4:return this.possiblyLogPerformance(n),[7];case 5:return[2]}})})},s.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},s.prototype.possiblyLogPerformance=function(e){if(this.verbose){var n=performance.now()-e;this.executionResults.push(n),this.executions++,this.possiblyFlushPerformanceReport()}},s.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var e=0,n=0,o=this.executionResults;n<o.length;n++){var u=o[n];e+=u}var f=e/this.executionResults.length;console.log("".concat(f," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},s}(),l1=function(){var s=function(e,n){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,u){o.__proto__=u}||function(o,u){for(var f in u)Object.prototype.hasOwnProperty.call(u,f)&&(o[f]=u[f])},s(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");s(e,n);function o(){this.constructor=e}e.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),Nc=function(s,e,n,o){function u(f){return f instanceof n?f:new n(function(y){y(f)})}return new(n||(n=Promise))(function(f,y){function A(R){try{x(o.next(R))}catch(D){y(D)}}function C(R){try{x(o.throw(R))}catch(D){y(D)}}function x(R){R.done?f(R.value):u(R.value).then(A,C)}x((o=o.apply(s,e||[])).next())})},Dc=function(s,e){var n={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},o,u,f,y;return y={next:A(0),throw:A(1),return:A(2)},typeof Symbol=="function"&&(y[Symbol.iterator]=function(){return this}),y;function A(x){return function(R){return C([x,R])}}function C(x){if(o)throw new TypeError("Generator is already executing.");for(;y&&(y=0,x[0]&&(n=0)),n;)try{if(o=1,u&&(f=x[0]&2?u.return:x[0]?u.throw||((f=u.return)&&f.call(u),0):u.next)&&!(f=f.call(u,x[1])).done)return f;switch(u=0,f&&(x=[x[0]&2,f.value]),x[0]){case 0:case 1:f=x;break;case 4:return n.label++,{value:x[1],done:!1};case 5:n.label++,u=x[1],x=[0];continue;case 7:x=n.ops.pop(),n.trys.pop();continue;default:if(f=n.trys,!(f=f.length>0&&f[f.length-1])&&(x[0]===6||x[0]===2)){n=0;continue}if(x[0]===3&&(!f||x[1]>f[0]&&x[1]<f[3])){n.label=x[1];break}if(x[0]===6&&n.label<f[1]){n.label=f[1],f=x;break}if(f&&n.label<f[2]){n.label=f[2],n.ops.push(x);break}f[2]&&n.ops.pop(),n.trys.pop();continue}x=e.call(s,n)}catch(R){x=[6,R],u=0}finally{o=f=0}if(x[0]&5)throw x[1];return{value:x[0]?x[1]:void 0,done:!0}}},_y=function(){function s(e,n){this.name=e,this.track=n}return s.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},s.prototype.apply=function(e){var n={};n[this.name]=e;var o={advanced:[n]};return this.track.applyConstraints(o)},s.prototype.value=function(){var e=this.track.getSettings();if(this.name in e){var n=e[this.name];return n}return null},s}(),bI=function(s){l1(e,s);function e(n,o){return s.call(this,n,o)||this}return e.prototype.min=function(){return this.getCapabilities().min},e.prototype.max=function(){return this.getCapabilities().max},e.prototype.step=function(){return this.getCapabilities().step},e.prototype.apply=function(n){var o={};o[this.name]=n;var u={advanced:[o]};return this.track.applyConstraints(u)},e.prototype.getCapabilities=function(){this.failIfNotSupported();var n=this.track.getCapabilities(),o=n[this.name];return{min:o.min,max:o.max,step:o.step}},e.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},e}(_y),MI=function(s){l1(e,s);function e(n){return s.call(this,"zoom",n)||this}return e}(bI),OI=function(s){l1(e,s);function e(n){return s.call(this,"torch",n)||this}return e}(_y),PI=function(){function s(e){this.track=e}return s.prototype.zoomFeature=function(){return new MI(this.track)},s.prototype.torchFeature=function(){return new OI(this.track)},s}(),LI=function(){function s(e,n,o){this.isClosed=!1,this.parentElement=e,this.mediaStream=n,this.callbacks=o,this.surface=this.createVideoElement(this.parentElement.clientWidth),e.append(this.surface)}return s.prototype.createVideoElement=function(e){var n=document.createElement("video");return n.style.width="".concat(e,"px"),n.style.display="block",n.muted=!0,n.setAttribute("muted","true"),n.playsInline=!0,n},s.prototype.setupSurface=function(){var e=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var n=function(){var o=e.surface.clientWidth,u=e.surface.clientHeight;e.callbacks.onRenderSurfaceReady(o,u),e.surface.removeEventListener("playing",n)};this.surface.addEventListener("playing",n),this.surface.srcObject=this.mediaStream,this.surface.play()},s.create=function(e,n,o,u){return Nc(this,void 0,void 0,function(){var f,y;return Dc(this,function(A){switch(A.label){case 0:return f=new s(e,n,u),o.aspectRatio?(y={aspectRatio:o.aspectRatio},[4,f.getFirstTrackOrFail().applyConstraints(y)]):[3,2];case 1:A.sent(),A.label=2;case 2:return f.setupSurface(),[2,f]}})})},s.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},s.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},s.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},s.prototype.resume=function(e){this.failIfClosed();var n=this,o=function(){setTimeout(e,200),n.surface.removeEventListener("playing",o)};this.surface.addEventListener("playing",o),this.surface.play()},s.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},s.prototype.getSurface=function(){return this.failIfClosed(),this.surface},s.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},s.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},s.prototype.applyVideoConstraints=function(e){return Nc(this,void 0,void 0,function(){return Dc(this,function(n){if("aspectRatio"in e)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(e)]})})},s.prototype.close=function(){if(this.isClosed)return Promise.resolve();var e=this;return new Promise(function(n,o){var u=e.mediaStream.getVideoTracks(),f=u.length,y=0;e.mediaStream.getVideoTracks().forEach(function(A){e.mediaStream.removeTrack(A),A.stop(),++y,y>=f&&(e.isClosed=!0,e.parentElement.removeChild(e.surface),n())})})},s.prototype.getCapabilities=function(){return new PI(this.getFirstTrackOrFail())},s}(),kI=function(){function s(e){this.mediaStream=e}return s.prototype.render=function(e,n,o){return Nc(this,void 0,void 0,function(){return Dc(this,function(u){return[2,LI.create(e,this.mediaStream,n,o)]})})},s.create=function(e){return Nc(this,void 0,void 0,function(){var n,o;return Dc(this,function(u){switch(u.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return n={audio:!1,video:e},[4,navigator.mediaDevices.getUserMedia(n)];case 1:return o=u.sent(),[2,new s(o)]}})})},s}(),om=function(s,e,n,o){function u(f){return f instanceof n?f:new n(function(y){y(f)})}return new(n||(n=Promise))(function(f,y){function A(R){try{x(o.next(R))}catch(D){y(D)}}function C(R){try{x(o.throw(R))}catch(D){y(D)}}function x(R){R.done?f(R.value):u(R.value).then(A,C)}x((o=o.apply(s,e||[])).next())})},am=function(s,e){var n={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},o,u,f,y;return y={next:A(0),throw:A(1),return:A(2)},typeof Symbol=="function"&&(y[Symbol.iterator]=function(){return this}),y;function A(x){return function(R){return C([x,R])}}function C(x){if(o)throw new TypeError("Generator is already executing.");for(;y&&(y=0,x[0]&&(n=0)),n;)try{if(o=1,u&&(f=x[0]&2?u.return:x[0]?u.throw||((f=u.return)&&f.call(u),0):u.next)&&!(f=f.call(u,x[1])).done)return f;switch(u=0,f&&(x=[x[0]&2,f.value]),x[0]){case 0:case 1:f=x;break;case 4:return n.label++,{value:x[1],done:!1};case 5:n.label++,u=x[1],x=[0];continue;case 7:x=n.ops.pop(),n.trys.pop();continue;default:if(f=n.trys,!(f=f.length>0&&f[f.length-1])&&(x[0]===6||x[0]===2)){n=0;continue}if(x[0]===3&&(!f||x[1]>f[0]&&x[1]<f[3])){n.label=x[1];break}if(x[0]===6&&n.label<f[1]){n.label=f[1],f=x;break}if(f&&n.label<f[2]){n.label=f[2],n.ops.push(x);break}f[2]&&n.ops.pop(),n.trys.pop();continue}x=e.call(s,n)}catch(R){x=[6,R],u=0}finally{o=f=0}if(x[0]&5)throw x[1];return{value:x[0]?x[1]:void 0,done:!0}}},BI=function(){function s(){}return s.failIfNotSupported=function(){return om(this,void 0,void 0,function(){return am(this,function(e){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new s]})})},s.prototype.create=function(e){return om(this,void 0,void 0,function(){return am(this,function(n){return[2,kI.create(e)]})})},s}(),FI=function(s,e,n,o){function u(f){return f instanceof n?f:new n(function(y){y(f)})}return new(n||(n=Promise))(function(f,y){function A(R){try{x(o.next(R))}catch(D){y(D)}}function C(R){try{x(o.throw(R))}catch(D){y(D)}}function x(R){R.done?f(R.value):u(R.value).then(A,C)}x((o=o.apply(s,e||[])).next())})},VI=function(s,e){var n={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},o,u,f,y;return y={next:A(0),throw:A(1),return:A(2)},typeof Symbol=="function"&&(y[Symbol.iterator]=function(){return this}),y;function A(x){return function(R){return C([x,R])}}function C(x){if(o)throw new TypeError("Generator is already executing.");for(;y&&(y=0,x[0]&&(n=0)),n;)try{if(o=1,u&&(f=x[0]&2?u.return:x[0]?u.throw||((f=u.return)&&f.call(u),0):u.next)&&!(f=f.call(u,x[1])).done)return f;switch(u=0,f&&(x=[x[0]&2,f.value]),x[0]){case 0:case 1:f=x;break;case 4:return n.label++,{value:x[1],done:!1};case 5:n.label++,u=x[1],x=[0];continue;case 7:x=n.ops.pop(),n.trys.pop();continue;default:if(f=n.trys,!(f=f.length>0&&f[f.length-1])&&(x[0]===6||x[0]===2)){n=0;continue}if(x[0]===3&&(!f||x[1]>f[0]&&x[1]<f[3])){n.label=x[1];break}if(x[0]===6&&n.label<f[1]){n.label=f[1],f=x;break}if(f&&n.label<f[2]){n.label=f[2],n.ops.push(x);break}f[2]&&n.ops.pop(),n.trys.pop();continue}x=e.call(s,n)}catch(R){x=[6,R],u=0}finally{o=f=0}if(x[0]&5)throw x[1];return{value:x[0]?x[1]:void 0,done:!0}}},UI=function(){function s(){}return s.retrieve=function(){if(navigator.mediaDevices)return s.getCamerasFromMediaDevices();var e=MediaStreamTrack;return MediaStreamTrack&&e.getSources?s.getCamerasFromMediaStreamTrack():s.rejectWithError()},s.rejectWithError=function(){var e=Fa.unableToQuerySupportedDevices();return s.isHttpsOrLocalhost()||(e=Fa.insecureContextCameraQueryError()),Promise.reject(e)},s.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var e=location.host.split(":")[0];return e==="127.0.0.1"||e==="localhost"},s.getCamerasFromMediaDevices=function(){return FI(this,void 0,void 0,function(){var e,n,o,u,f,y,A;return VI(this,function(C){switch(C.label){case 0:return e=function(x){for(var R=x.getVideoTracks(),D=0,k=R;D<k.length;D++){var j=k[D];j.enabled=!1,j.stop(),x.removeTrack(j)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return n=C.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(o=C.sent(),u=[],f=0,y=o;f<y.length;f++)A=y[f],A.kind==="videoinput"&&u.push({id:A.deviceId,label:A.label});return e(n),[2,u]}})})},s.getCamerasFromMediaStreamTrack=function(){return new Promise(function(e,n){var o=function(f){for(var y=[],A=0,C=f;A<C.length;A++){var x=C[A];x.kind==="video"&&y.push({id:x.id,label:x.label})}e(y)},u=MediaStreamTrack;u.getSources(o)})},s}(),Pn;(function(s){s[s.UNKNOWN=0]="UNKNOWN",s[s.NOT_STARTED=1]="NOT_STARTED",s[s.SCANNING=2]="SCANNING",s[s.PAUSED=3]="PAUSED"})(Pn||(Pn={}));var zI=function(){function s(){this.state=Pn.NOT_STARTED,this.onGoingTransactionNewState=Pn.UNKNOWN}return s.prototype.directTransition=function(e){this.failIfTransitionOngoing(),this.validateTransition(e),this.state=e},s.prototype.startTransition=function(e){return this.failIfTransitionOngoing(),this.validateTransition(e),this.onGoingTransactionNewState=e,this},s.prototype.execute=function(){if(this.onGoingTransactionNewState===Pn.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var e=this.onGoingTransactionNewState;this.onGoingTransactionNewState=Pn.UNKNOWN,this.directTransition(e)},s.prototype.cancel=function(){if(this.onGoingTransactionNewState===Pn.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=Pn.UNKNOWN},s.prototype.getState=function(){return this.state},s.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==Pn.UNKNOWN)throw"Cannot transition to a new state, already under transition"},s.prototype.validateTransition=function(e){switch(this.state){case Pn.UNKNOWN:throw"Transition from unknown is not allowed";case Pn.NOT_STARTED:this.failIfNewStateIs(e,[Pn.PAUSED]);break;case Pn.SCANNING:break;case Pn.PAUSED:break}},s.prototype.failIfNewStateIs=function(e,n){for(var o=0,u=n;o<u.length;o++){var f=u[o];if(e===f)throw"Cannot transition from ".concat(this.state," to ").concat(e)}},s}(),jI=function(){function s(e){this.stateManager=e}return s.prototype.startTransition=function(e){return this.stateManager.startTransition(e)},s.prototype.directTransition=function(e){this.stateManager.directTransition(e)},s.prototype.getState=function(){return this.stateManager.getState()},s.prototype.canScanFile=function(){return this.stateManager.getState()===Pn.NOT_STARTED},s.prototype.isScanning=function(){return this.stateManager.getState()!==Pn.NOT_STARTED},s.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===Pn.SCANNING},s.prototype.isPaused=function(){return this.stateManager.getState()===Pn.PAUSED},s}(),HI=function(){function s(){}return s.create=function(){return new jI(new zI)},s}(),WI=function(){var s=function(e,n){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,u){o.__proto__=u}||function(o,u){for(var f in u)Object.prototype.hasOwnProperty.call(u,f)&&(o[f]=u[f])},s(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");s(e,n);function o(){this.constructor=e}e.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),mi=function(s){WI(e,s);function e(){return s!==null&&s.apply(this,arguments)||this}return e.DEFAULT_WIDTH=300,e.DEFAULT_WIDTH_OFFSET=2,e.FILE_SCAN_MIN_HEIGHT=300,e.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,e.MIN_QR_BOX_SIZE=50,e.SHADED_LEFT=1,e.SHADED_RIGHT=2,e.SHADED_TOP=3,e.SHADED_BOTTOM=4,e.SHADED_REGION_ELEMENT_ID="qr-shaded-region",e.VERBOSE=!1,e.BORDER_SHADER_DEFAULT_COLOR="#ffffff",e.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",e}(Gi),GI=function(){function s(e,n){this.logger=n,this.fps=mi.SCAN_DEFAULT_FPS,e?(e.fps&&(this.fps=e.fps),this.disableFlip=e.disableFlip===!0,this.qrbox=e.qrbox,this.aspectRatio=e.aspectRatio,this.videoConstraints=e.videoConstraints):this.disableFlip=mi.DEFAULT_DISABLE_FLIP}return s.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?Ay.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},s.prototype.isShadedBoxEnabled=function(){return!us(this.qrbox)},s.create=function(e,n){return new s(e,n)},s}(),lm=function(){function s(e,n){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.elementId=e,this.verbose=!1;var o;typeof n=="boolean"?this.verbose=n===!0:n&&(o=n,this.verbose=o.verbose===!0,o.experimentalFeatures),this.logger=new xy(this.verbose),this.qrcode=new DI(this.getSupportedFormats(n),this.getUseBarCodeDetectorIfSupported(o),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=HI.create()}return s.prototype.start=function(e,n,o,u){var f=this;if(!e)throw"cameraIdOrConfig is required";if(!o||typeof o!="function")throw"qrCodeSuccessCallback is required and should be a function.";var y;u?y=u:y=this.verbose?this.logger.log:function(){};var A=GI.create(n,this.logger);this.clearElement();var C=!1;A.videoConstraints&&(A.isMediaStreamConstraintsValid()?C=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var x=C,R=document.getElementById(this.elementId);R.clientWidth?R.clientWidth:mi.DEFAULT_WIDTH,R.style.position="relative",this.shouldScan=!0,this.element=R;var D=this,k=this.stateManagerProxy.startTransition(Pn.SCANNING);return new Promise(function(j,q){var Q=x?A.videoConstraints:D.createVideoConstraints(e);if(!Q){k.cancel(),q("videoConstraints should be defined");return}var J={};(!x||A.aspectRatio)&&(J.aspectRatio=A.aspectRatio);var ie={onRenderSurfaceReady:function(he,te){D.setupUi(he,te,A),D.isScanning=!0,D.foreverScan(A,o,y)}};BI.failIfNotSupported().then(function(he){he.create(Q).then(function(te){return te.render(f.element,J,ie).then(function(pe){D.renderedCamera=pe,k.execute(),j(null)}).catch(function(pe){k.cancel(),q(pe)})}).catch(function(te){k.cancel(),q(Fa.errorGettingUserMedia(te))})}).catch(function(he){k.cancel(),q(Fa.cameraStreamingNotSupported())})})},s.prototype.pause=function(e){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(Pn.PAUSED),this.showPausedState(),(us(e)||e!==!0)&&(e=!1),e&&this.renderedCamera&&this.renderedCamera.pause()},s.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var e=this,n=function(){e.stateManagerProxy.directTransition(Pn.SCANNING),e.hidePausedState()};if(!this.renderedCamera.isPaused()){n();return}this.renderedCamera.resume(function(){n()})},s.prototype.getState=function(){return this.stateManagerProxy.getState()},s.prototype.stop=function(){var e=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var n=this.stateManagerProxy.startTransition(Pn.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var o=function(){if(e.element){var f=document.getElementById(mi.SHADED_REGION_ELEMENT_ID);f&&e.element.removeChild(f)}},u=this;return this.renderedCamera.close().then(function(){return u.renderedCamera=null,u.element&&(u.element.removeChild(u.canvasElement),u.canvasElement=null),o(),u.qrRegion&&(u.qrRegion=null),u.context&&(u.context=null),n.execute(),u.hidePausedState(),u.isScanning=!1,Promise.resolve()})},s.prototype.scanFile=function(e,n){return this.scanFileV2(e,n).then(function(o){return o.decodedText})},s.prototype.scanFileV2=function(e,n){var o=this;if(!e||!(e instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(us(n)&&(n=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(u,f){o.possiblyCloseLastScanImageFile(),o.clearElement(),o.lastScanImageFile=URL.createObjectURL(e);var y=new Image;y.onload=function(){var A=y.width,C=y.height,x=document.getElementById(o.elementId),R=x.clientWidth?x.clientWidth:mi.DEFAULT_WIDTH,D=Math.max(x.clientHeight?x.clientHeight:C,mi.FILE_SCAN_MIN_HEIGHT),k=o.computeCanvasDrawConfig(A,C,R,D);if(n){var j=o.createCanvasElement(R,D,"qr-canvas-visible");j.style.display="inline-block",x.appendChild(j);var q=j.getContext("2d");if(!q)throw"Unable to get 2d context from canvas";q.canvas.width=R,q.canvas.height=D,q.drawImage(y,0,0,A,C,k.x,k.y,k.width,k.height)}var Q=mi.FILE_SCAN_HIDDEN_CANVAS_PADDING,J=Math.max(y.width,k.width),ie=Math.max(y.height,k.height),he=J+2*Q,te=ie+2*Q,pe=o.createCanvasElement(he,te);x.appendChild(pe);var Ge=pe.getContext("2d");if(!Ge)throw"Unable to get 2d context from canvas";Ge.canvas.width=he,Ge.canvas.height=te,Ge.drawImage(y,0,0,A,C,Q,Q,J,ie);try{o.qrcode.decodeRobustlyAsync(pe).then(function(we){u(Jp.createFromQrcodeResult(we))}).catch(f)}catch(we){f("QR code parse error, error = ".concat(we))}},y.onerror=f,y.onabort=f,y.onstalled=f,y.onsuspend=f,y.src=URL.createObjectURL(e)})},s.prototype.clear=function(){this.clearElement()},s.getCameras=function(){return UI.retrieve()},s.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},s.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},s.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},s.prototype.applyVideoConstraints=function(e){if(e){if(!Ay.isMediaStreamConstraintsValid(e,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(e)},s.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},s.prototype.getSupportedFormats=function(e){var n=[He.QR_CODE,He.AZTEC,He.CODABAR,He.CODE_39,He.CODE_93,He.CODE_128,He.DATA_MATRIX,He.MAXICODE,He.ITF,He.EAN_13,He.EAN_8,He.PDF_417,He.RSS_14,He.RSS_EXPANDED,He.UPC_A,He.UPC_E,He.UPC_EAN_EXTENSION];if(!e||typeof e=="boolean"||!e.formatsToSupport)return n;if(!Array.isArray(e.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(e.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var o=[],u=0,f=e.formatsToSupport;u<f.length;u++){var y=f[u];_I(y)?o.push(y):this.logger.warn("Invalid format: ".concat(y," passed in config, ignoring."))}if(o.length===0)throw"None of formatsToSupport match supported values.";return o},s.prototype.getUseBarCodeDetectorIfSupported=function(e){if(us(e))return!0;if(!us(e.useBarCodeDetectorIfSupported))return e.useBarCodeDetectorIfSupported!==!1;if(us(e.experimentalFeatures))return!0;var n=e.experimentalFeatures;return us(n.useBarCodeDetectorIfSupported)?!0:n.useBarCodeDetectorIfSupported!==!1},s.prototype.validateQrboxSize=function(e,n,o){var u=this,f=o.qrbox;this.validateQrboxConfig(f);var y=this.toQrdimensions(e,n,f),A=function(x){if(x<mi.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(mi.MIN_QR_BOX_SIZE,"px.")},C=function(x){return x>e&&(u.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),x=e),x};A(y.width),A(y.height),y.width=C(y.width)},s.prototype.validateQrboxConfig=function(e){if(typeof e!="number"&&typeof e!="function"&&(e.width===void 0||e.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},s.prototype.toQrdimensions=function(e,n,o){if(typeof o=="number")return{width:o,height:o};if(typeof o=="function")try{return o(e,n)}catch(u){throw new Error("qrbox config was passed as a function but it failed with unknown error"+u)}return o},s.prototype.setupUi=function(e,n,o){o.isShadedBoxEnabled()&&this.validateQrboxSize(e,n,o);var u=us(o.qrbox)?{width:e,height:n}:o.qrbox;this.validateQrboxConfig(u);var f=this.toQrdimensions(e,n,u);f.height>n&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var y=o.isShadedBoxEnabled()&&f.height<=n,A={x:0,y:0,width:e,height:n},C=y?this.getShadedRegionBounds(e,n,f):A,x=this.createCanvasElement(C.width,C.height),R={willReadFrequently:!0},D=x.getContext("2d",R);D.canvas.width=C.width,D.canvas.height=C.height,this.element.append(x),y&&this.possiblyInsertShadingElement(this.element,e,n,f),this.createScannerPausedUiElement(this.element),this.qrRegion=C,this.context=D,this.canvasElement=x},s.prototype.createScannerPausedUiElement=function(e){var n=document.createElement("div");n.innerText=Fa.scannerPaused(),n.style.display="none",n.style.position="absolute",n.style.top="0px",n.style.zIndex="1",n.style.background="rgba(9, 9, 9, 0.46)",n.style.color="#FFECEC",n.style.textAlign="center",n.style.width="100%",e.appendChild(n),this.scannerPausedUiElement=n},s.prototype.scanContext=function(e,n){var o=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(u){return e(u.text,Jp.createFromQrcodeResult(u)),o.possiblyUpdateShaders(!0),!0}).catch(function(u){o.possiblyUpdateShaders(!1);var f=Fa.codeParseError(u);return n(f,Ey.createFrom(f)),!1})},s.prototype.foreverScan=function(e,n,o){var u=this;if(this.shouldScan&&this.renderedCamera){var f=this.renderedCamera.getSurface(),y=f.videoWidth/f.clientWidth,A=f.videoHeight/f.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var C=this.qrRegion.width*y,x=this.qrRegion.height*A,R=this.qrRegion.x*y,D=this.qrRegion.y*A;this.context.drawImage(f,R,D,C,x,0,0,this.qrRegion.width,this.qrRegion.height);var k=function(){u.foreverScanTimeout=setTimeout(function(){u.foreverScan(e,n,o)},u.getTimeoutFps(e.fps))};this.scanContext(n,o).then(function(j){!j&&e.disableFlip!==!0?(u.context.translate(u.context.canvas.width,0),u.context.scale(-1,1),u.scanContext(n,o).finally(function(){k()})):k()}).catch(function(j){u.logger.logError("Error happend while scanning context",j),k()})}},s.prototype.createVideoConstraints=function(e){if(typeof e=="string")return{deviceId:{exact:e}};if(typeof e=="object"){var n="facingMode",o="deviceId",u={user:!0,environment:!0},f="exact",y=function(q){if(q in u)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(q,"'")},A=Object.keys(e);if(A.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(A.length," keys");var C=Object.keys(e)[0];if(C!==n&&C!==o)throw"Only '".concat(n,"' and '").concat(o,"' ")+" are supported for 'cameraIdOrConfig'";if(C===n){var x=e.facingMode;if(typeof x=="string"){if(y(x))return{facingMode:x}}else if(typeof x=="object")if(f in x){if(y(x["".concat(f)]))return{facingMode:{exact:x["".concat(f)]}}}else throw"'facingMode' should be string or object with"+" ".concat(f," as key.");else{var R=typeof x;throw"Invalid type of 'facingMode' = ".concat(R)}}else{var D=e.deviceId;if(typeof D=="string")return{deviceId:D};if(typeof D=="object"){if(f in D)return{deviceId:{exact:D["".concat(f)]}};throw"'deviceId' should be string or object with"+" ".concat(f," as key.")}else{var k=typeof D;throw"Invalid type of 'deviceId' = ".concat(k)}}}var j=typeof e;throw"Invalid type of 'cameraIdOrConfig' = ".concat(j)},s.prototype.computeCanvasDrawConfig=function(e,n,o,u){if(e<=o&&n<=u){var f=(o-e)/2,y=(u-n)/2;return{x:f,y,width:e,height:n}}else{var A=e,C=n;return e>o&&(n=o/e*n,e=o),n>u&&(e=u/n*e,n=u),this.logger.log("Image downsampled from "+"".concat(A,"X").concat(C)+" to ".concat(e,"X").concat(n,".")),this.computeCanvasDrawConfig(e,n,o,u)}},s.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var e=document.getElementById(this.elementId);e&&(e.innerHTML="")},s.prototype.possiblyUpdateShaders=function(e){this.qrMatch!==e&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(n){n.style.backgroundColor=e?mi.BORDER_SHADER_MATCH_COLOR:mi.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=e)},s.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},s.prototype.createCanvasElement=function(e,n,o){var u=e,f=n,y=document.createElement("canvas");return y.style.width="".concat(u,"px"),y.style.height="".concat(f,"px"),y.style.display="none",y.id=us(o)?"qr-canvas":o,y},s.prototype.getShadedRegionBounds=function(e,n,o){if(o.width>e||o.height>n)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(e-o.width)/2,y:(n-o.height)/2,width:o.width,height:o.height}},s.prototype.possiblyInsertShadingElement=function(e,n,o,u){if(!(n-u.width<1||o-u.height<1)){var f=document.createElement("div");f.style.position="absolute";var y=(n-u.width)/2,A=(o-u.height)/2;if(f.style.borderLeft="".concat(y,"px solid rgba(0, 0, 0, 0.48)"),f.style.borderRight="".concat(y,"px solid rgba(0, 0, 0, 0.48)"),f.style.borderTop="".concat(A,"px solid rgba(0, 0, 0, 0.48)"),f.style.borderBottom="".concat(A,"px solid rgba(0, 0, 0, 0.48)"),f.style.boxSizing="border-box",f.style.top="0px",f.style.bottom="0px",f.style.left="0px",f.style.right="0px",f.id="".concat(mi.SHADED_REGION_ELEMENT_ID),n-u.width<11||o-u.height<11)this.hasBorderShaders=!1;else{var C=5,x=40;this.insertShaderBorders(f,x,C,-C,null,0,!0),this.insertShaderBorders(f,x,C,-C,null,0,!1),this.insertShaderBorders(f,x,C,null,-C,0,!0),this.insertShaderBorders(f,x,C,null,-C,0,!1),this.insertShaderBorders(f,C,x+C,-C,null,-C,!0),this.insertShaderBorders(f,C,x+C,null,-C,-C,!0),this.insertShaderBorders(f,C,x+C,-C,null,-C,!1),this.insertShaderBorders(f,C,x+C,null,-C,-C,!1),this.hasBorderShaders=!0}e.append(f)}},s.prototype.insertShaderBorders=function(e,n,o,u,f,y,A){var C=document.createElement("div");C.style.position="absolute",C.style.backgroundColor=mi.BORDER_SHADER_DEFAULT_COLOR,C.style.width="".concat(n,"px"),C.style.height="".concat(o,"px"),u!==null&&(C.style.top="".concat(u,"px")),f!==null&&(C.style.bottom="".concat(f,"px")),A?C.style.left="".concat(y,"px"):C.style.right="".concat(y,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(C),e.appendChild(C)},s.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},s.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},s.prototype.getTimeoutFps=function(e){return 1e3/e},s}(),u1="data:image/svg+xml;base64,",YI=u1+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNzEuNjQzIDM3MS42NDMiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDM3MS42NDMgMzcxLjY0MyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PHBhdGggZD0iTTEwNS4wODQgMzguMjcxaDE2My43Njh2MjBIMTA1LjA4NHoiLz48cGF0aCBkPSJNMzExLjU5NiAxOTAuMTg5Yy03LjQ0MS05LjM0Ny0xOC40MDMtMTYuMjA2LTMyLjc0My0yMC41MjJWMzBjMC0xNi41NDItMTMuNDU4LTMwLTMwLTMwSDEyNS4wODRjLTE2LjU0MiAwLTMwIDEzLjQ1OC0zMCAzMHYxMjAuMTQzaC04LjI5NmMtMTYuNTQyIDAtMzAgMTMuNDU4LTMwIDMwdjEuMzMzYTI5LjgwNCAyOS44MDQgMCAwIDAgNC42MDMgMTUuOTM5Yy03LjM0IDUuNDc0LTEyLjEwMyAxNC4yMjEtMTIuMTAzIDI0LjA2MXYxLjMzM2MwIDkuODQgNC43NjMgMTguNTg3IDEyLjEwMyAyNC4wNjJhMjkuODEgMjkuODEgMCAwIDAtNC42MDMgMTUuOTM4djEuMzMzYzAgMTYuNTQyIDEzLjQ1OCAzMCAzMCAzMGg4LjMyNGMuNDI3IDExLjYzMSA3LjUwMyAyMS41ODcgMTcuNTM0IDI2LjE3Ny45MzEgMTAuNTAzIDQuMDg0IDMwLjE4NyAxNC43NjggNDUuNTM3YTkuOTg4IDkuOTg4IDAgMCAwIDguMjE2IDQuMjg4IDkuOTU4IDkuOTU4IDAgMCAwIDUuNzA0LTEuNzkzYzQuNTMzLTMuMTU1IDUuNjUtOS4zODggMi40OTUtMTMuOTIxLTYuNzk4LTkuNzY3LTkuNjAyLTIyLjYwOC0xMC43Ni0zMS40aDgyLjY4NWMuMjcyLjQxNC41NDUuODE4LjgxNSAxLjIxIDMuMTQyIDQuNTQxIDkuMzcyIDUuNjc5IDEzLjkxMyAyLjUzNCA0LjU0Mi0zLjE0MiA1LjY3Ny05LjM3MSAyLjUzNS0xMy45MTMtMTEuOTE5LTE3LjIyOS04Ljc4Ny0zNS44ODQgOS41ODEtNTcuMDEyIDMuMDY3LTIuNjUyIDEyLjMwNy0xMS43MzIgMTEuMjE3LTI0LjAzMy0uODI4LTkuMzQzLTcuMTA5LTE3LjE5NC0xOC42NjktMjMuMzM3YTkuODU3IDkuODU3IDAgMCAwLTEuMDYxLS40ODZjLS40NjYtLjE4Mi0xMS40MDMtNC41NzktOS43NDEtMTUuNzA2IDEuMDA3LTYuNzM3IDE0Ljc2OC04LjI3MyAyMy43NjYtNy42NjYgMjMuMTU2IDEuNTY5IDM5LjY5OCA3LjgwMyA0Ny44MzYgMTguMDI2IDUuNzUyIDcuMjI1IDcuNjA3IDE2LjYyMyA1LjY3MyAyOC43MzMtLjQxMyAyLjU4NS0uODI0IDUuMjQxLTEuMjQ1IDcuOTU5LTUuNzU2IDM3LjE5NC0xMi45MTkgODMuNDgzLTQ5Ljg3IDExNC42NjEtNC4yMjEgMy41NjEtNC43NTYgOS44Ny0xLjE5NCAxNC4wOTJhOS45OCA5Ljk4IDAgMCAwIDcuNjQ4IDMuNTUxIDkuOTU1IDkuOTU1IDAgMCAwIDYuNDQ0LTIuMzU4YzQyLjY3Mi0zNi4wMDUgNTAuODAyLTg4LjUzMyA1Ni43MzctMTI2Ljg4OC40MTUtMi42ODQuODIxLTUuMzA5IDEuMjI5LTcuODYzIDIuODM0LTE3LjcyMS0uNDU1LTMyLjY0MS05Ljc3Mi00NC4zNDV6bS0yMzIuMzA4IDQyLjYyYy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM2MwLTUuNTE0IDQuNDg2LTEwIDEwLTEwaDE1djIxLjMzM2gtMTV6bS0yLjUtNTIuNjY2YzAtNS41MTQgNC40ODYtMTAgMTAtMTBoNy41djIxLjMzM2gtNy41Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM3ptMTcuNSA5My45OTloLTcuNWMtNS41MTQgMC0xMC00LjQ4Ni0xMC0xMHYtMS4zMzNjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGg3LjV2MjEuMzMzem0zMC43OTYgMjguODg3Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi04LjI3MWg5MS40NTdjLS44NTEgNi42NjgtLjQzNyAxMi43ODcuNzMxIDE4LjI3MWgtODIuMTg4em03OS40ODItMTEzLjY5OGMtMy4xMjQgMjAuOTA2IDEyLjQyNyAzMy4xODQgMjEuNjI1IDM3LjA0IDUuNDQxIDIuOTY4IDcuNTUxIDUuNjQ3IDcuNzAxIDcuMTg4LjIxIDIuMTUtMi41NTMgNS42ODQtNC40NzcgNy4yNTEtLjQ4Mi4zNzgtLjkyOS44LTEuMzM1IDEuMjYxLTYuOTg3IDcuOTM2LTExLjk4MiAxNS41Mi0xNS40MzIgMjIuNjg4aC05Ny41NjRWMzBjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGgxMjMuNzY5YzUuNTE0IDAgMTAgNC40ODYgMTAgMTB2MTM1LjU3OWMtMy4wMzItLjM4MS02LjE1LS42OTQtOS4zODktLjkxNC0yNS4xNTktMS42OTQtNDIuMzcgNy43NDgtNDQuODk4IDI0LjY2NnoiLz48cGF0aCBkPSJNMTc5LjEyOSA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXpNMTcyLjYyOSAxNDIuODZoLTEyLjU2VjEzMC44YTUgNSAwIDEgMC0xMCAwdjE3LjA2MWE1IDUgMCAwIDAgNSA1aDE3LjU2YTUgNSAwIDEgMCAwLTEwLjAwMXpNMjE2LjU2OCA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXptLTUgMjQuMDYxaC0xNC4wNlY5My4xNjdoMTQuMDZ2MTQuMDYxek0yMTEuNjY5IDEyNS45MzZIMTk3LjQxYTUgNSAwIDAgMC01IDV2MTQuMjU3YTUgNSAwIDAgMCA1IDVoMTQuMjU5YTUgNSAwIDAgMCA1LTV2LTE0LjI1N2E1IDUgMCAwIDAtNS01eiIvPjwvc3ZnPg==",XI=u1+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1OS4wMTggNTkuMDE4IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1OS4wMTggNTkuMDE4IiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJtNTguNzQxIDU0LjgwOS01Ljk2OS02LjI0NGExMC43NCAxMC43NCAwIDAgMCAyLjgyLTcuMjVjMC01Ljk1My00Ljg0My0xMC43OTYtMTAuNzk2LTEwLjc5NlMzNCAzNS4zNjEgMzQgNDEuMzE0IDM4Ljg0MyA1Mi4xMSA0NC43OTYgNTIuMTFjMi40NDEgMCA0LjY4OC0uODI0IDYuNDk5LTIuMTk2bDYuMDAxIDYuMjc3YS45OTguOTk4IDAgMCAwIDEuNDE0LjAzMiAxIDEgMCAwIDAgLjAzMS0xLjQxNHpNMzYgNDEuMzE0YzAtNC44NSAzLjk0Ni04Ljc5NiA4Ljc5Ni04Ljc5NnM4Ljc5NiAzLjk0NiA4Ljc5NiA4Ljc5Ni0zLjk0NiA4Ljc5Ni04Ljc5NiA4Ljc5NlMzNiA0Ni4xNjQgMzYgNDEuMzE0ek0xMC40MzEgMTYuMDg4YzAgMy4wNyAyLjQ5OCA1LjU2OCA1LjU2OSA1LjU2OHM1LjU2OS0yLjQ5OCA1LjU2OS01LjU2OGMwLTMuMDcxLTIuNDk4LTUuNTY5LTUuNTY5LTUuNTY5cy01LjU2OSAyLjQ5OC01LjU2OSA1LjU2OXptOS4xMzggMGMwIDEuOTY4LTEuNjAyIDMuNTY4LTMuNTY5IDMuNTY4cy0zLjU2OS0xLjYwMS0zLjU2OS0zLjU2OCAxLjYwMi0zLjU2OSAzLjU2OS0zLjU2OSAzLjU2OSAxLjYwMSAzLjU2OSAzLjU2OXoiLz48cGF0aCBkPSJtMzAuODgyIDI4Ljk4NyA5LjE4LTEwLjA1NCAxMS4yNjIgMTAuMzIzYTEgMSAwIDAgMCAxLjM1MS0xLjQ3NWwtMTItMTFhMSAxIDAgMCAwLTEuNDE0LjA2M2wtOS43OTQgMTAuNzI3LTQuNzQzLTQuNzQzYTEuMDAzIDEuMDAzIDAgMCAwLTEuMzY4LS4wNDRMNi4zMzkgMzcuNzY4YTEgMSAwIDEgMCAxLjMyMiAxLjUwMWwxNi4zMTMtMTQuMzYyIDcuMzE5IDcuMzE4YS45OTkuOTk5IDAgMSAwIDEuNDE0LTEuNDE0bC0xLjgyNS0xLjgyNHoiLz48cGF0aCBkPSJNMzAgNDYuNTE4SDJ2LTQyaDU0djI4YTEgMSAwIDEgMCAyIDB2LTI5YTEgMSAwIDAgMC0xLTFIMWExIDEgMCAwIDAtMSAxdjQ0YTEgMSAwIDAgMCAxIDFoMjlhMSAxIDAgMSAwIDAtMnoiLz48L3N2Zz4=",um=u1+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0NjAgNDYwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0NjAgNDYwIiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJNMjMwIDBDMTAyLjk3NSAwIDAgMTAyLjk3NSAwIDIzMHMxMDIuOTc1IDIzMCAyMzAgMjMwIDIzMC0xMDIuOTc0IDIzMC0yMzBTMzU3LjAyNSAwIDIzMCAwem0zOC4zMzMgMzc3LjM2YzAgOC42NzYtNy4wMzQgMTUuNzEtMTUuNzEgMTUuNzFoLTQzLjEwMWMtOC42NzYgMC0xNS43MS03LjAzNC0xNS43MS0xNS43MVYyMDIuNDc3YzAtOC42NzYgNy4wMzMtMTUuNzEgMTUuNzEtMTUuNzFoNDMuMTAxYzguNjc2IDAgMTUuNzEgNy4wMzMgMTUuNzEgMTUuNzFWMzc3LjM2ek0yMzAgMTU3Yy0yMS41MzkgMC0zOS0xNy40NjEtMzktMzlzMTcuNDYxLTM5IDM5LTM5IDM5IDE3LjQ2MSAzOSAzOS0xNy40NjEgMzktMzkgMzl6Ii8+PC9zdmc+",qI="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAQgAAAEIBarqQRAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAE1SURBVDiNfdI7S0NBEAXgLya1otFgpbYSbISAgpXYi6CmiH9KCAiChaVga6OiWPgfRDQ+0itaGVNosXtluWwcuMzePfM4M3sq8lbHBubwg1dc4m1E/J/N4ghDPOIsfk/4xiEao5KX0McFljN4C9d4QTPXuY99jP3DsIoDPGM6BY5i5yI5R7O4q+ImFkJY2DCh3cAH2klyB+9J1xUMMAG7eCh1a+Mr+k48b5diXrFVwwLuS+BJ9MfR7+G0FHOHhTHhnXNWS87VDF4pcnfQK4Ep7XScNLmPTZgURNKKYENYWDpzW1BhscS1WHS8CDgURFJQrWcoF3c13KKbgg1BYQfy8xZWEzTTw1QZbAoKu8FqJnktdu5hcVSHmchiILzzuaDQvjBzV2m8yohCE1jHfPx/xhU+y4G/D75ELlRJsSYAAAAASUVORK5CYII=",cm=function(){function s(){}return s.createDefault=function(){return{hasPermission:!1,lastUsedCameraId:null}},s}(),QI=function(){function s(){this.data=cm.createDefault();var e=localStorage.getItem(s.LOCAL_STORAGE_KEY);e?this.data=JSON.parse(e):this.reset()}return s.prototype.hasCameraPermissions=function(){return this.data.hasPermission},s.prototype.getLastUsedCameraId=function(){return this.data.lastUsedCameraId},s.prototype.setHasPermission=function(e){this.data.hasPermission=e,this.flush()},s.prototype.setLastUsedCameraId=function(e){this.data.lastUsedCameraId=e,this.flush()},s.prototype.resetLastUsedCameraId=function(){this.data.lastUsedCameraId=null,this.flush()},s.prototype.reset=function(){this.data=cm.createDefault(),this.flush()},s.prototype.flush=function(){localStorage.setItem(s.LOCAL_STORAGE_KEY,JSON.stringify(this.data))},s.LOCAL_STORAGE_KEY="HTML5_QRCODE_DATA",s}(),KI=function(){function s(){this.infoDiv=document.createElement("div")}return s.prototype.renderInto=function(e){this.infoDiv.style.position="absolute",this.infoDiv.style.top="10px",this.infoDiv.style.right="10px",this.infoDiv.style.zIndex="2",this.infoDiv.style.display="none",this.infoDiv.style.padding="5pt",this.infoDiv.style.border="1px solid #171717",this.infoDiv.style.fontSize="10pt",this.infoDiv.style.background="rgb(0 0 0 / 69%)",this.infoDiv.style.borderRadius="5px",this.infoDiv.style.textAlign="center",this.infoDiv.style.fontWeight="400",this.infoDiv.style.color="white",this.infoDiv.innerText=em.poweredBy();var n=document.createElement("a");n.innerText="ScanApp",n.href="https://scanapp.org",n.target="new",n.style.color="white",this.infoDiv.appendChild(n);var o=document.createElement("br"),u=document.createElement("br");this.infoDiv.appendChild(o),this.infoDiv.appendChild(u);var f=document.createElement("a");f.innerText=em.reportIssues(),f.href="https://github.com/mebjas/html5-qrcode/issues",f.target="new",f.style.color="white",this.infoDiv.appendChild(f),e.appendChild(this.infoDiv)},s.prototype.show=function(){this.infoDiv.style.display="block"},s.prototype.hide=function(){this.infoDiv.style.display="none"},s}(),ZI=function(){function s(e,n){this.isShowingInfoIcon=!0,this.onTapIn=e,this.onTapOut=n,this.infoIcon=document.createElement("img")}return s.prototype.renderInto=function(e){var n=this;this.infoIcon.alt="Info icon",this.infoIcon.src=um,this.infoIcon.style.position="absolute",this.infoIcon.style.top="4px",this.infoIcon.style.right="4px",this.infoIcon.style.opacity="0.6",this.infoIcon.style.cursor="pointer",this.infoIcon.style.zIndex="2",this.infoIcon.style.width="16px",this.infoIcon.style.height="16px",this.infoIcon.onmouseover=function(o){return n.onHoverIn()},this.infoIcon.onmouseout=function(o){return n.onHoverOut()},this.infoIcon.onclick=function(o){return n.onClick()},e.appendChild(this.infoIcon)},s.prototype.onHoverIn=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="1")},s.prototype.onHoverOut=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="0.6")},s.prototype.onClick=function(){this.isShowingInfoIcon?(this.isShowingInfoIcon=!1,this.onTapIn(),this.infoIcon.src=qI,this.infoIcon.style.opacity="1"):(this.isShowingInfoIcon=!0,this.onTapOut(),this.infoIcon.src=um,this.infoIcon.style.opacity="0.6")},s}(),$I=function(){function s(){var e=this;this.infoDiv=new KI,this.infoIcon=new ZI(function(){e.infoDiv.show()},function(){e.infoDiv.hide()})}return s.prototype.renderInto=function(e){this.infoDiv.renderInto(e),this.infoIcon.renderInto(e)},s}(),JI=function(s,e,n,o){function u(f){return f instanceof n?f:new n(function(y){y(f)})}return new(n||(n=Promise))(function(f,y){function A(R){try{x(o.next(R))}catch(D){y(D)}}function C(R){try{x(o.throw(R))}catch(D){y(D)}}function x(R){R.done?f(R.value):u(R.value).then(A,C)}x((o=o.apply(s,e||[])).next())})},eT=function(s,e){var n={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},o,u,f,y;return y={next:A(0),throw:A(1),return:A(2)},typeof Symbol=="function"&&(y[Symbol.iterator]=function(){return this}),y;function A(x){return function(R){return C([x,R])}}function C(x){if(o)throw new TypeError("Generator is already executing.");for(;y&&(y=0,x[0]&&(n=0)),n;)try{if(o=1,u&&(f=x[0]&2?u.return:x[0]?u.throw||((f=u.return)&&f.call(u),0):u.next)&&!(f=f.call(u,x[1])).done)return f;switch(u=0,f&&(x=[x[0]&2,f.value]),x[0]){case 0:case 1:f=x;break;case 4:return n.label++,{value:x[1],done:!1};case 5:n.label++,u=x[1],x=[0];continue;case 7:x=n.ops.pop(),n.trys.pop();continue;default:if(f=n.trys,!(f=f.length>0&&f[f.length-1])&&(x[0]===6||x[0]===2)){n=0;continue}if(x[0]===3&&(!f||x[1]>f[0]&&x[1]<f[3])){n.label=x[1];break}if(x[0]===6&&n.label<f[1]){n.label=f[1],f=x;break}if(f&&n.label<f[2]){n.label=f[2],n.ops.push(x);break}f[2]&&n.ops.pop(),n.trys.pop();continue}x=e.call(s,n)}catch(R){x=[6,R],u=0}finally{o=f=0}if(x[0]&5)throw x[1];return{value:x[0]?x[1]:void 0,done:!0}}},hm=function(){function s(){}return s.hasPermissions=function(){return JI(this,void 0,void 0,function(){var e,n,o,u;return eT(this,function(f){switch(f.label){case 0:return[4,navigator.mediaDevices.enumerateDevices()];case 1:for(e=f.sent(),n=0,o=e;n<o.length;n++)if(u=o[n],u.kind==="videoinput"&&u.label)return[2,!0];return[2,!1]}})})},s}(),yo=function(){function s(e){this.supportedScanTypes=this.validateAndReturnScanTypes(e)}return s.prototype.getDefaultScanType=function(){return this.supportedScanTypes[0]},s.prototype.hasMoreThanOneScanType=function(){return this.supportedScanTypes.length>1},s.prototype.isCameraScanRequired=function(){for(var e=0,n=this.supportedScanTypes;e<n.length;e++){var o=n[e];if(s.isCameraScanType(o))return!0}return!1},s.isCameraScanType=function(e){return e===bo.SCAN_TYPE_CAMERA},s.isFileScanType=function(e){return e===bo.SCAN_TYPE_FILE},s.prototype.validateAndReturnScanTypes=function(e){if(!e||e.length===0)return Gi.DEFAULT_SUPPORTED_SCAN_TYPE;var n=Gi.DEFAULT_SUPPORTED_SCAN_TYPE.length;if(e.length>n)throw"Max ".concat(n," values expected for ")+"supportedScanTypes";for(var o=0,u=e;o<u.length;o++){var f=u[o];if(!Gi.DEFAULT_SUPPORTED_SCAN_TYPE.includes(f))throw"Unsupported scan type ".concat(f)}return e},s}(),wi=function(){function s(){}return s.ALL_ELEMENT_CLASS="html5-qrcode-element",s.CAMERA_PERMISSION_BUTTON_ID="html5-qrcode-button-camera-permission",s.CAMERA_START_BUTTON_ID="html5-qrcode-button-camera-start",s.CAMERA_STOP_BUTTON_ID="html5-qrcode-button-camera-stop",s.TORCH_BUTTON_ID="html5-qrcode-button-torch",s.CAMERA_SELECTION_SELECT_ID="html5-qrcode-select-camera",s.FILE_SELECTION_BUTTON_ID="html5-qrcode-button-file-selection",s.ZOOM_SLIDER_ID="html5-qrcode-input-range-zoom",s.SCAN_TYPE_CHANGE_ANCHOR_ID="html5-qrcode-anchor-scan-type-change",s.TORCH_BUTTON_CLASS_TORCH_ON="html5-qrcode-button-torch-on",s.TORCH_BUTTON_CLASS_TORCH_OFF="html5-qrcode-button-torch-off",s}(),Bs=function(){function s(){}return s.createElement=function(e,n){var o=document.createElement(e);return o.id=n,o.classList.add(wi.ALL_ELEMENT_CLASS),e==="button"&&o.setAttribute("type","button"),o},s}(),Cy=function(s,e,n,o){function u(f){return f instanceof n?f:new n(function(y){y(f)})}return new(n||(n=Promise))(function(f,y){function A(R){try{x(o.next(R))}catch(D){y(D)}}function C(R){try{x(o.throw(R))}catch(D){y(D)}}function x(R){R.done?f(R.value):u(R.value).then(A,C)}x((o=o.apply(s,e||[])).next())})},vy=function(s,e){var n={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},o,u,f,y;return y={next:A(0),throw:A(1),return:A(2)},typeof Symbol=="function"&&(y[Symbol.iterator]=function(){return this}),y;function A(x){return function(R){return C([x,R])}}function C(x){if(o)throw new TypeError("Generator is already executing.");for(;y&&(y=0,x[0]&&(n=0)),n;)try{if(o=1,u&&(f=x[0]&2?u.return:x[0]?u.throw||((f=u.return)&&f.call(u),0):u.next)&&!(f=f.call(u,x[1])).done)return f;switch(u=0,f&&(x=[x[0]&2,f.value]),x[0]){case 0:case 1:f=x;break;case 4:return n.label++,{value:x[1],done:!1};case 5:n.label++,u=x[1],x=[0];continue;case 7:x=n.ops.pop(),n.trys.pop();continue;default:if(f=n.trys,!(f=f.length>0&&f[f.length-1])&&(x[0]===6||x[0]===2)){n=0;continue}if(x[0]===3&&(!f||x[1]>f[0]&&x[1]<f[3])){n.label=x[1];break}if(x[0]===6&&n.label<f[1]){n.label=f[1],f=x;break}if(f&&n.label<f[2]){n.label=f[2],n.ops.push(x);break}f[2]&&n.ops.pop(),n.trys.pop();continue}x=e.call(s,n)}catch(R){x=[6,R],u=0}finally{o=f=0}if(x[0]&5)throw x[1];return{value:x[0]?x[1]:void 0,done:!0}}},fm=function(){function s(e,n,o){this.isTorchOn=!1,this.torchCapability=e,this.buttonController=n,this.onTorchActionFailureCallback=o}return s.prototype.isTorchEnabled=function(){return this.isTorchOn},s.prototype.flipState=function(){return Cy(this,void 0,void 0,function(){var e,n;return vy(this,function(o){switch(o.label){case 0:this.buttonController.disable(),e=!this.isTorchOn,o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this.torchCapability.apply(e)];case 2:return o.sent(),this.updateUiBasedOnLatestSettings(this.torchCapability.value(),e),[3,4];case 3:return n=o.sent(),this.propagateFailure(e,n),this.buttonController.enable(),[3,4];case 4:return[2]}})})},s.prototype.updateUiBasedOnLatestSettings=function(e,n){e===n?(this.buttonController.setText(n?Qt.torchOffButton():Qt.torchOnButton()),this.isTorchOn=n):this.propagateFailure(n),this.buttonController.enable()},s.prototype.propagateFailure=function(e,n){var o=e?Qt.torchOnFailedMessage():Qt.torchOffFailedMessage();n&&(o+="; Error = "+n),this.onTorchActionFailureCallback(o)},s.prototype.reset=function(){this.isTorchOn=!1},s}(),tT=function(){function s(e,n){this.onTorchActionFailureCallback=n,this.torchButton=Bs.createElement("button",wi.TORCH_BUTTON_ID),this.torchController=new fm(e,this,n)}return s.prototype.render=function(e,n){var o=this;this.torchButton.innerText=Qt.torchOnButton(),this.torchButton.style.display=n.display,this.torchButton.style.marginLeft=n.marginLeft;var u=this;this.torchButton.addEventListener("click",function(f){return Cy(o,void 0,void 0,function(){return vy(this,function(y){switch(y.label){case 0:return[4,u.torchController.flipState()];case 1:return y.sent(),u.torchController.isTorchEnabled()?(u.torchButton.classList.remove(wi.TORCH_BUTTON_CLASS_TORCH_OFF),u.torchButton.classList.add(wi.TORCH_BUTTON_CLASS_TORCH_ON)):(u.torchButton.classList.remove(wi.TORCH_BUTTON_CLASS_TORCH_ON),u.torchButton.classList.add(wi.TORCH_BUTTON_CLASS_TORCH_OFF)),[2]}})})}),e.appendChild(this.torchButton)},s.prototype.updateTorchCapability=function(e){this.torchController=new fm(e,this,this.onTorchActionFailureCallback)},s.prototype.getTorchButton=function(){return this.torchButton},s.prototype.hide=function(){this.torchButton.style.display="none"},s.prototype.show=function(){this.torchButton.style.display="inline-block"},s.prototype.disable=function(){this.torchButton.disabled=!0},s.prototype.enable=function(){this.torchButton.disabled=!1},s.prototype.setText=function(e){this.torchButton.innerText=e},s.prototype.reset=function(){this.torchButton.innerText=Qt.torchOnButton(),this.torchController.reset()},s.create=function(e,n,o,u){var f=new s(n,u);return f.render(e,o),f},s}(),nT=function(){function s(e,n,o){this.fileBasedScanRegion=this.createFileBasedScanRegion(),this.fileBasedScanRegion.style.display=n?"block":"none",e.appendChild(this.fileBasedScanRegion);var u=document.createElement("label");u.setAttribute("for",this.getFileScanInputId()),u.style.display="inline-block",this.fileBasedScanRegion.appendChild(u),this.fileSelectionButton=Bs.createElement("button",wi.FILE_SELECTION_BUTTON_ID),this.setInitialValueToButton(),this.fileSelectionButton.addEventListener("click",function(A){u.click()}),u.append(this.fileSelectionButton),this.fileScanInput=Bs.createElement("input",this.getFileScanInputId()),this.fileScanInput.type="file",this.fileScanInput.accept="image/*",this.fileScanInput.style.display="none",u.appendChild(this.fileScanInput);var f=this;this.fileScanInput.addEventListener("change",function(A){if(!(A==null||A.target==null)){var C=A.target;if(!(C.files&&C.files.length===0)){var x=C.files,R=x[0],D=R.name;f.setImageNameToButton(D),o(R)}}});var y=this.createDragAndDropMessage();this.fileBasedScanRegion.appendChild(y),this.fileBasedScanRegion.addEventListener("dragenter",function(A){f.fileBasedScanRegion.style.border=f.fileBasedScanRegionActiveBorder(),A.stopPropagation(),A.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragleave",function(A){f.fileBasedScanRegion.style.border=f.fileBasedScanRegionDefaultBorder(),A.stopPropagation(),A.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragover",function(A){f.fileBasedScanRegion.style.border=f.fileBasedScanRegionActiveBorder(),A.stopPropagation(),A.preventDefault()}),this.fileBasedScanRegion.addEventListener("drop",function(A){A.stopPropagation(),A.preventDefault(),f.fileBasedScanRegion.style.border=f.fileBasedScanRegionDefaultBorder();var C=A.dataTransfer;if(C){var x=C.files;if(!x||x.length===0)return;for(var R=!1,D=0;D<x.length;++D){var k=x.item(D);if(k){var j=/image.*/;if(k.type.match(j)){R=!0;var q=k.name;f.setImageNameToButton(q),o(k),y.innerText=Qt.dragAndDropMessage();break}}}R||(y.innerText=Qt.dragAndDropMessageOnlyImages())}})}return s.prototype.hide=function(){this.fileBasedScanRegion.style.display="none",this.fileScanInput.disabled=!0},s.prototype.show=function(){this.fileBasedScanRegion.style.display="block",this.fileScanInput.disabled=!1},s.prototype.isShowing=function(){return this.fileBasedScanRegion.style.display==="block"},s.prototype.resetValue=function(){this.fileScanInput.value="",this.setInitialValueToButton()},s.prototype.createFileBasedScanRegion=function(){var e=document.createElement("div");return e.style.textAlign="center",e.style.margin="auto",e.style.width="80%",e.style.maxWidth="600px",e.style.border=this.fileBasedScanRegionDefaultBorder(),e.style.padding="10px",e.style.marginBottom="10px",e},s.prototype.fileBasedScanRegionDefaultBorder=function(){return"6px dashed #ebebeb"},s.prototype.fileBasedScanRegionActiveBorder=function(){return"6px dashed rgb(153 151 151)"},s.prototype.createDragAndDropMessage=function(){var e=document.createElement("div");return e.innerText=Qt.dragAndDropMessage(),e.style.fontWeight="400",e},s.prototype.setImageNameToButton=function(e){var n=20;if(e.length>n){var o=e.substring(0,8),u=e.length,f=e.substring(u-8,u);e="".concat(o,"....").concat(f)}var y=Qt.fileSelectionChooseAnother()+" - "+e;this.fileSelectionButton.innerText=y},s.prototype.setInitialValueToButton=function(){var e=Qt.fileSelectionChooseImage()+" - "+Qt.fileSelectionNoImageSelected();this.fileSelectionButton.innerText=e},s.prototype.getFileScanInputId=function(){return"html5-qrcode-private-filescan-input"},s.create=function(e,n,o){var u=new s(e,n,o);return u},s}(),rT=function(){function s(e){this.selectElement=Bs.createElement("select",wi.CAMERA_SELECTION_SELECT_ID),this.cameras=e,this.options=[]}return s.prototype.render=function(e){var n=document.createElement("span");n.style.marginRight="10px";var o=this.cameras.length;if(o===0)throw new Error("No cameras found");if(o===1)n.style.display="none";else{var u=Qt.selectCamera();n.innerText="".concat(u," (").concat(this.cameras.length,")  ")}for(var f=1,y=0,A=this.cameras;y<A.length;y++){var C=A[y],x=C.id,R=C.label==null?x:C.label;(!R||R==="")&&(R=[Qt.anonymousCameraPrefix(),f++].join(" "));var D=document.createElement("option");D.value=x,D.innerText=R,this.options.push(D),this.selectElement.appendChild(D)}n.appendChild(this.selectElement),e.appendChild(n)},s.prototype.disable=function(){this.selectElement.disabled=!0},s.prototype.isDisabled=function(){return this.selectElement.disabled===!0},s.prototype.enable=function(){this.selectElement.disabled=!1},s.prototype.getValue=function(){return this.selectElement.value},s.prototype.hasValue=function(e){for(var n=0,o=this.options;n<o.length;n++){var u=o[n];if(u.value===e)return!0}return!1},s.prototype.setValue=function(e){if(!this.hasValue(e))throw new Error("".concat(e," is not present in the camera list."));this.selectElement.value=e},s.prototype.hasSingleItem=function(){return this.cameras.length===1},s.prototype.numCameras=function(){return this.cameras.length},s.create=function(e,n){var o=new s(n);return o.render(e),o},s}(),iT=function(){function s(){this.onChangeCallback=null,this.zoomElementContainer=document.createElement("div"),this.rangeInput=Bs.createElement("input",wi.ZOOM_SLIDER_ID),this.rangeInput.type="range",this.rangeText=document.createElement("span"),this.rangeInput.min="1",this.rangeInput.max="5",this.rangeInput.value="1",this.rangeInput.step="0.1"}return s.prototype.render=function(e,n){this.zoomElementContainer.style.display=n?"block":"none",this.zoomElementContainer.style.padding="5px 10px",this.zoomElementContainer.style.textAlign="center",e.appendChild(this.zoomElementContainer),this.rangeInput.style.display="inline-block",this.rangeInput.style.width="50%",this.rangeInput.style.height="5px",this.rangeInput.style.background="#d3d3d3",this.rangeInput.style.outline="none",this.rangeInput.style.opacity="0.7";var o=Qt.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(o),this.rangeText.style.marginRight="10px";var u=this;this.rangeInput.addEventListener("input",function(){return u.onValueChange()}),this.rangeInput.addEventListener("change",function(){return u.onValueChange()}),this.zoomElementContainer.appendChild(this.rangeInput),this.zoomElementContainer.appendChild(this.rangeText)},s.prototype.onValueChange=function(){var e=Qt.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(e),this.onChangeCallback&&this.onChangeCallback(parseFloat(this.rangeInput.value))},s.prototype.setValues=function(e,n,o,u){this.rangeInput.min=e.toString(),this.rangeInput.max=n.toString(),this.rangeInput.step=u.toString(),this.rangeInput.value=o.toString(),this.onValueChange()},s.prototype.show=function(){this.zoomElementContainer.style.display="block"},s.prototype.hide=function(){this.zoomElementContainer.style.display="none"},s.prototype.setOnCameraZoomValueChangeCallback=function(e){this.onChangeCallback=e},s.prototype.removeOnCameraZoomValueChangeCallback=function(){this.onChangeCallback=null},s.create=function(e,n){var o=new s;return o.render(e,n),o},s}(),yi;(function(s){s[s.STATUS_DEFAULT=0]="STATUS_DEFAULT",s[s.STATUS_SUCCESS=1]="STATUS_SUCCESS",s[s.STATUS_WARNING=2]="STATUS_WARNING",s[s.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(yi||(yi={}));function sT(s){return{fps:s.fps,qrbox:s.qrbox,aspectRatio:s.aspectRatio,disableFlip:s.disableFlip,videoConstraints:s.videoConstraints}}function oT(s,e){return{formatsToSupport:s.formatsToSupport,useBarCodeDetectorIfSupported:s.useBarCodeDetectorIfSupported,experimentalFeatures:s.experimentalFeatures,verbose:e}}var aT=function(){function s(e,n,o){if(this.lastMatchFound=null,this.cameraScanImage=null,this.fileScanImage=null,this.fileSelectionUi=null,this.elementId=e,this.config=this.createConfig(n),this.verbose=o===!0,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.scanTypeSelector=new yo(this.config.supportedScanTypes),this.currentScanType=this.scanTypeSelector.getDefaultScanType(),this.sectionSwapAllowed=!0,this.logger=new xy(this.verbose),this.persistedDataManager=new QI,n.rememberLastUsedCamera!==!0&&this.persistedDataManager.reset()}return s.prototype.render=function(e,n){var o=this;this.lastMatchFound=null,this.qrCodeSuccessCallback=function(f,y){if(e)e(f,y);else{if(o.lastMatchFound===f)return;o.lastMatchFound=f,o.setHeaderMessage(Qt.lastMatch(f),yi.STATUS_SUCCESS)}},this.qrCodeErrorCallback=function(f,y){n&&n(f,y)};var u=document.getElementById(this.elementId);if(!u)throw"HTML Element with id=".concat(this.elementId," not found");u.innerHTML="",this.createBasicLayout(u),this.html5Qrcode=new lm(this.getScanRegionId(),oT(this.config,this.verbose))},s.prototype.pause=function(e){(us(e)||e!==!0)&&(e=!1),this.getHtml5QrcodeOrFail().pause(e)},s.prototype.resume=function(){this.getHtml5QrcodeOrFail().resume()},s.prototype.getState=function(){return this.getHtml5QrcodeOrFail().getState()},s.prototype.clear=function(){var e=this,n=function(){var o=document.getElementById(e.elementId);o&&(o.innerHTML="",e.resetBasicLayout(o))};return this.html5Qrcode?new Promise(function(o,u){if(!e.html5Qrcode){o();return}e.html5Qrcode.isScanning?e.html5Qrcode.stop().then(function(f){if(!e.html5Qrcode){o();return}e.html5Qrcode.clear(),n(),o()}).catch(function(f){e.verbose&&e.logger.logError("Unable to stop qrcode scanner",f),u(f)}):(e.html5Qrcode.clear(),n(),o())}):Promise.resolve()},s.prototype.getRunningTrackCapabilities=function(){return this.getHtml5QrcodeOrFail().getRunningTrackCapabilities()},s.prototype.getRunningTrackSettings=function(){return this.getHtml5QrcodeOrFail().getRunningTrackSettings()},s.prototype.applyVideoConstraints=function(e){return this.getHtml5QrcodeOrFail().applyVideoConstraints(e)},s.prototype.getHtml5QrcodeOrFail=function(){if(!this.html5Qrcode)throw"Code scanner not initialized.";return this.html5Qrcode},s.prototype.createConfig=function(e){return e?(e.fps||(e.fps=Gi.SCAN_DEFAULT_FPS),e.rememberLastUsedCamera!==!Gi.DEFAULT_REMEMBER_LAST_CAMERA_USED&&(e.rememberLastUsedCamera=Gi.DEFAULT_REMEMBER_LAST_CAMERA_USED),e.supportedScanTypes||(e.supportedScanTypes=Gi.DEFAULT_SUPPORTED_SCAN_TYPE),e):{fps:Gi.SCAN_DEFAULT_FPS,rememberLastUsedCamera:Gi.DEFAULT_REMEMBER_LAST_CAMERA_USED,supportedScanTypes:Gi.DEFAULT_SUPPORTED_SCAN_TYPE}},s.prototype.createBasicLayout=function(e){e.style.position="relative",e.style.padding="0px",e.style.border="1px solid silver",this.createHeader(e);var n=document.createElement("div"),o=this.getScanRegionId();n.id=o,n.style.width="100%",n.style.minHeight="100px",n.style.textAlign="center",e.appendChild(n),yo.isCameraScanType(this.currentScanType)?this.insertCameraScanImageToScanRegion():this.insertFileScanImageToScanRegion();var u=document.createElement("div"),f=this.getDashboardId();u.id=f,u.style.width="100%",e.appendChild(u),this.setupInitialDashboard(u)},s.prototype.resetBasicLayout=function(e){e.style.border="none"},s.prototype.setupInitialDashboard=function(e){this.createSection(e),this.createSectionControlPanel(),this.scanTypeSelector.hasMoreThanOneScanType()&&this.createSectionSwap()},s.prototype.createHeader=function(e){var n=document.createElement("div");n.style.textAlign="left",n.style.margin="0px",e.appendChild(n);var o=new $I;o.renderInto(n);var u=document.createElement("div");u.id=this.getHeaderMessageContainerId(),u.style.display="none",u.style.textAlign="center",u.style.fontSize="14px",u.style.padding="2px 10px",u.style.margin="4px",u.style.borderTop="1px solid #f6f6f6",n.appendChild(u)},s.prototype.createSection=function(e){var n=document.createElement("div");n.id=this.getDashboardSectionId(),n.style.width="100%",n.style.padding="10px 0px 10px 0px",n.style.textAlign="left",e.appendChild(n)},s.prototype.createCameraListUi=function(e,n,o){var u=this;u.showHideScanTypeSwapLink(!1),u.setHeaderMessage(Qt.cameraPermissionRequesting());var f=function(){o||u.createPermissionButton(e,n)};lm.getCameras().then(function(y){u.persistedDataManager.setHasPermission(!0),u.showHideScanTypeSwapLink(!0),u.resetHeaderMessage(),y&&y.length>0?(e.removeChild(n),u.renderCameraSelection(y)):(u.setHeaderMessage(Qt.noCameraFound(),yi.STATUS_WARNING),f())}).catch(function(y){u.persistedDataManager.setHasPermission(!1),o?o.disabled=!1:f(),u.setHeaderMessage(y,yi.STATUS_WARNING),u.showHideScanTypeSwapLink(!0)})},s.prototype.createPermissionButton=function(e,n){var o=this,u=Bs.createElement("button",this.getCameraPermissionButtonId());u.innerText=Qt.cameraPermissionTitle(),u.addEventListener("click",function(){u.disabled=!0,o.createCameraListUi(e,n,u)}),n.appendChild(u)},s.prototype.createPermissionsUi=function(e,n){var o=this;if(yo.isCameraScanType(this.currentScanType)&&this.persistedDataManager.hasCameraPermissions()){hm.hasPermissions().then(function(u){u?o.createCameraListUi(e,n):(o.persistedDataManager.setHasPermission(!1),o.createPermissionButton(e,n))}).catch(function(u){o.persistedDataManager.setHasPermission(!1),o.createPermissionButton(e,n)});return}this.createPermissionButton(e,n)},s.prototype.createSectionControlPanel=function(){var e=document.getElementById(this.getDashboardSectionId()),n=document.createElement("div");e.appendChild(n);var o=document.createElement("div");o.id=this.getDashboardSectionCameraScanRegionId(),o.style.display=yo.isCameraScanType(this.currentScanType)?"block":"none",n.appendChild(o);var u=document.createElement("div");u.style.textAlign="center",o.appendChild(u),this.scanTypeSelector.isCameraScanRequired()&&this.createPermissionsUi(o,u),this.renderFileScanUi(n)},s.prototype.renderFileScanUi=function(e){var n=yo.isFileScanType(this.currentScanType),o=this,u=function(f){if(!o.html5Qrcode)throw"html5Qrcode not defined";yo.isFileScanType(o.currentScanType)&&(o.setHeaderMessage(Qt.loadingImage()),o.html5Qrcode.scanFileV2(f,!0).then(function(y){o.resetHeaderMessage(),o.qrCodeSuccessCallback(y.decodedText,y)}).catch(function(y){o.setHeaderMessage(y,yi.STATUS_WARNING),o.qrCodeErrorCallback(y,Ey.createFrom(y))}))};this.fileSelectionUi=nT.create(e,n,u)},s.prototype.renderCameraSelection=function(e){var n=this,o=this,u=document.getElementById(this.getDashboardSectionCameraScanRegionId());u.style.textAlign="center";var f=iT.create(u,!1),y=function(Q){var J=Q.zoomFeature();if(J.isSupported()){f.setOnCameraZoomValueChangeCallback(function(he){J.apply(he)});var ie=1;n.config.defaultZoomValueIfSupported&&(ie=n.config.defaultZoomValueIfSupported),ie=CI(ie,J.min(),J.max()),f.setValues(J.min(),J.max(),ie,J.step()),f.show()}},A=rT.create(u,e),C=document.createElement("span"),x=Bs.createElement("button",wi.CAMERA_START_BUTTON_ID);x.innerText=Qt.scanButtonStartScanningText(),C.appendChild(x);var R=Bs.createElement("button",wi.CAMERA_STOP_BUTTON_ID);R.innerText=Qt.scanButtonStopScanningText(),R.style.display="none",R.disabled=!0,C.appendChild(R);var D,k=function(Q){if(!Q.torchFeature().isSupported()){D&&D.hide();return}D?D.updateTorchCapability(Q.torchFeature()):D=tT.create(C,Q.torchFeature(),{display:"none",marginLeft:"5px"},function(J){o.setHeaderMessage(J,yi.STATUS_WARNING)}),D.show()};u.appendChild(C);var j=function(Q){Q||(x.style.display="none"),x.innerText=Qt.scanButtonStartScanningText(),x.style.opacity="1",x.disabled=!1,Q&&(x.style.display="inline-block")};if(x.addEventListener("click",function(Q){x.innerText=Qt.scanButtonScanningStarting(),A.disable(),x.disabled=!0,x.style.opacity="0.5",n.scanTypeSelector.hasMoreThanOneScanType()&&o.showHideScanTypeSwapLink(!1),o.resetHeaderMessage();var J=A.getValue();o.persistedDataManager.setLastUsedCameraId(J),o.html5Qrcode.start(J,sT(o.config),o.qrCodeSuccessCallback,o.qrCodeErrorCallback).then(function(ie){R.disabled=!1,R.style.display="inline-block",j(!1);var he=o.html5Qrcode.getRunningTrackCameraCapabilities();n.config.showTorchButtonIfSupported===!0&&k(he),n.config.showZoomSliderIfSupported===!0&&y(he)}).catch(function(ie){o.showHideScanTypeSwapLink(!0),A.enable(),j(!0),o.setHeaderMessage(ie,yi.STATUS_WARNING)})}),A.hasSingleItem()&&x.click(),R.addEventListener("click",function(Q){if(!o.html5Qrcode)throw"html5Qrcode not defined";R.disabled=!0,o.html5Qrcode.stop().then(function(J){n.scanTypeSelector.hasMoreThanOneScanType()&&o.showHideScanTypeSwapLink(!0),A.enable(),x.disabled=!1,R.style.display="none",x.style.display="inline-block",D&&(D.reset(),D.hide()),f.removeOnCameraZoomValueChangeCallback(),f.hide(),o.insertCameraScanImageToScanRegion()}).catch(function(J){R.disabled=!1,o.setHeaderMessage(J,yi.STATUS_WARNING)})}),o.persistedDataManager.getLastUsedCameraId()){var q=o.persistedDataManager.getLastUsedCameraId();A.hasValue(q)?(A.setValue(q),x.click()):o.persistedDataManager.resetLastUsedCameraId()}},s.prototype.createSectionSwap=function(){var e=this,n=Qt.textIfCameraScanSelected(),o=Qt.textIfFileScanSelected(),u=document.getElementById(this.getDashboardSectionId()),f=document.createElement("div");f.style.textAlign="center";var y=Bs.createElement("span",this.getDashboardSectionSwapLinkId());y.style.textDecoration="underline",y.style.cursor="pointer",y.innerText=yo.isCameraScanType(this.currentScanType)?n:o,y.addEventListener("click",function(){if(!e.sectionSwapAllowed){e.verbose&&e.logger.logError("Section swap called when not allowed");return}e.resetHeaderMessage(),e.fileSelectionUi.resetValue(),e.sectionSwapAllowed=!1,yo.isCameraScanType(e.currentScanType)?(e.clearScanRegion(),e.getCameraScanRegion().style.display="none",e.fileSelectionUi.show(),y.innerText=o,e.currentScanType=bo.SCAN_TYPE_FILE,e.insertFileScanImageToScanRegion()):(e.clearScanRegion(),e.getCameraScanRegion().style.display="block",e.fileSelectionUi.hide(),y.innerText=n,e.currentScanType=bo.SCAN_TYPE_CAMERA,e.insertCameraScanImageToScanRegion(),e.startCameraScanIfPermissionExistsOnSwap()),e.sectionSwapAllowed=!0}),f.appendChild(y),u.appendChild(f)},s.prototype.startCameraScanIfPermissionExistsOnSwap=function(){var e=this,n=this;if(this.persistedDataManager.hasCameraPermissions()){hm.hasPermissions().then(function(o){if(o){var u=document.getElementById(n.getCameraPermissionButtonId());if(!u)throw e.logger.logError("Permission button not found, fail;"),"Permission button not found";u.click()}else n.persistedDataManager.setHasPermission(!1)}).catch(function(o){n.persistedDataManager.setHasPermission(!1)});return}},s.prototype.resetHeaderMessage=function(){var e=document.getElementById(this.getHeaderMessageContainerId());e.style.display="none"},s.prototype.setHeaderMessage=function(e,n){n||(n=yi.STATUS_DEFAULT);var o=this.getHeaderMessageDiv();switch(o.innerText=e,o.style.display="block",n){case yi.STATUS_SUCCESS:o.style.background="rgba(106, 175, 80, 0.26)",o.style.color="#477735";break;case yi.STATUS_WARNING:o.style.background="rgba(203, 36, 49, 0.14)",o.style.color="#cb2431";break;case yi.STATUS_DEFAULT:default:o.style.background="rgba(0, 0, 0, 0)",o.style.color="rgb(17, 17, 17)";break}},s.prototype.showHideScanTypeSwapLink=function(e){this.scanTypeSelector.hasMoreThanOneScanType()&&(e!==!0&&(e=!1),this.sectionSwapAllowed=e,this.getDashboardSectionSwapLink().style.display=e?"inline-block":"none")},s.prototype.insertCameraScanImageToScanRegion=function(){var e=this,n=document.getElementById(this.getScanRegionId());if(this.cameraScanImage){n.innerHTML="<br>",n.appendChild(this.cameraScanImage);return}this.cameraScanImage=new Image,this.cameraScanImage.onload=function(o){n.innerHTML="<br>",n.appendChild(e.cameraScanImage)},this.cameraScanImage.width=64,this.cameraScanImage.style.opacity="0.8",this.cameraScanImage.src=YI,this.cameraScanImage.alt=Qt.cameraScanAltText()},s.prototype.insertFileScanImageToScanRegion=function(){var e=this,n=document.getElementById(this.getScanRegionId());if(this.fileScanImage){n.innerHTML="<br>",n.appendChild(this.fileScanImage);return}this.fileScanImage=new Image,this.fileScanImage.onload=function(o){n.innerHTML="<br>",n.appendChild(e.fileScanImage)},this.fileScanImage.width=64,this.fileScanImage.style.opacity="0.8",this.fileScanImage.src=XI,this.fileScanImage.alt=Qt.fileScanAltText()},s.prototype.clearScanRegion=function(){var e=document.getElementById(this.getScanRegionId());e.innerHTML=""},s.prototype.getDashboardSectionId=function(){return"".concat(this.elementId,"__dashboard_section")},s.prototype.getDashboardSectionCameraScanRegionId=function(){return"".concat(this.elementId,"__dashboard_section_csr")},s.prototype.getDashboardSectionSwapLinkId=function(){return wi.SCAN_TYPE_CHANGE_ANCHOR_ID},s.prototype.getScanRegionId=function(){return"".concat(this.elementId,"__scan_region")},s.prototype.getDashboardId=function(){return"".concat(this.elementId,"__dashboard")},s.prototype.getHeaderMessageContainerId=function(){return"".concat(this.elementId,"__header_message")},s.prototype.getCameraPermissionButtonId=function(){return wi.CAMERA_PERMISSION_BUTTON_ID},s.prototype.getCameraScanRegion=function(){return document.getElementById(this.getDashboardSectionCameraScanRegionId())},s.prototype.getDashboardSectionSwapLink=function(){return document.getElementById(this.getDashboardSectionSwapLinkId())},s.prototype.getHeaderMessageDiv=function(){return document.getElementById(this.getHeaderMessageContainerId())},s}();const lT=()=>{const[s,e]=me.useState(""),[n,o]=me.useState(!1),u=async f=>{try{await f.render(async y=>{if(n)return;o(!0);const A=y.split("-");if(A.length===2){const C=A[1];try{const R=(await hc(kl(ea,"usuarios"))).docs;let D=!1;for(const k of R){const j=k.data();if(j.id===C){await pI(e1(ea,"usuarios",k.id),{asistencia:!0}),e(` Asistencia registrada: ${j.nombre}`),D=!0;break}}D||e(" QR no reconocido")}catch(x){console.error("Error al buscar o actualizar el usuario en Firebase:",x),e(" Error en la base de datos")}}else e(" Formato de QR incorrecto");setTimeout(()=>{e(""),o(!1)},4e3)},y=>console.warn("Error de escaneo:",y))}catch(y){console.error("Error al iniciar el escner:",y)}};return me.useEffect(()=>{const f=new aT("reader",{fps:10,qrbox:250},!1);return u(f),()=>{f.clear().catch(y=>console.log(y))}},[n]),Ee.jsxs("div",{className:"scanner-container",children:[Ee.jsx("div",{id:"reader"}),s&&Ee.jsx("div",{className:"mensaje",children:s})]})};function uT(){const s=localStorage.getItem("isLoggedIn")==="true";return Ee.jsx(VE,{children:Ee.jsxs("div",{className:"App",children:[Ee.jsx(qE,{}),Ee.jsxs(mE,{children:[Ee.jsx(tc,{path:"/",element:Ee.jsx(xI,{})}),s&&Ee.jsx(tc,{path:"/registros",element:Ee.jsx(AI,{})}),s&&Ee.jsx(tc,{path:"/escanear",element:Ee.jsx(lT,{})})]})]})})}Iw.createRoot(document.getElementById("root")).render(Ee.jsx(me.StrictMode,{children:Ee.jsx(uT,{})}));
